/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/use-shopping-cart";
exports.ids = ["vendor-chunks/use-shopping-cart"];
exports.modules = {

/***/ "(ssr)/./node_modules/use-shopping-cart/dist/react.js":
/*!******************************************************!*\
  !*** ./node_modules/use-shopping-cart/dist/react.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n'use client';\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar React = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\nvar toolkit = __webpack_require__(/*! @reduxjs/toolkit */ \"(ssr)/./node_modules/@reduxjs/toolkit/dist/index.js\");\nvar uuid = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm-node/index.js\");\nvar reduxPersist = __webpack_require__(/*! redux-persist */ \"(ssr)/./node_modules/redux-persist/lib/index.js\");\n__webpack_require__(/*! @stripe/stripe-js */ \"(ssr)/./node_modules/@stripe/stripe-js/dist/stripe.js\");\nvar reactRedux = __webpack_require__(/*! react-redux */ \"(ssr)/./node_modules/react-redux/lib/index.js\");\nvar react = __webpack_require__(/*! redux-persist/integration/react */ \"(ssr)/./node_modules/redux-persist/lib/integration/react.js\");\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  }\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nconst isClient = typeof window === 'object';\n\nconst formatCurrencyString = ({\r\n  value,\r\n  currency,\r\n  language = isClient ? navigator.language : 'en-US'\r\n}) => {\r\n  const numberFormat = new Intl.NumberFormat(language, {\r\n    style: 'currency',\r\n    currency,\r\n    currencyDisplay: 'symbol'\r\n  });\r\n  const parts = numberFormat.formatToParts(value);\r\n  let zeroDecimalCurrency = true;\r\n\r\n  for (const part of parts) {\r\n    if (part.type === 'decimal') {\r\n      zeroDecimalCurrency = false;\r\n      break\r\n    }\r\n  }\r\n\r\n  value = zeroDecimalCurrency ? value : parseFloat((value / 100).toFixed(2));\r\n  return numberFormat.format(value)\r\n};\r\n\r\nfunction updateFormattedTotalPrice(state) {\r\n  state.formattedTotalPrice = formatCurrencyString({\r\n    value: state.totalPrice,\r\n    currency: state.currency,\r\n    language: state.language\r\n  });\r\n}\r\n\r\nfunction updateFormattedValue(state, id) {\r\n  state.cartDetails[id].formattedValue = formatCurrencyString({\r\n    value: state.cartDetails[id].value,\r\n    currency: state.currency,\r\n    language: state.language\r\n  });\r\n}\r\n\r\nfunction updateFormattedPrice(state, id) {\r\n  state.cartDetails[id].formattedPrice = formatCurrencyString({\r\n    value: state.cartDetails[id].price,\r\n    currency: state.currency,\r\n    language: state.language\r\n  });\r\n}\r\n\r\nfunction Entry({ id, product, quantity, price_metadata, product_metadata }) {\r\n  return {\r\n    ...product,\r\n    id,\r\n    quantity,\r\n    value: product.price * quantity,\r\n    price_data: {\r\n      ...product.price_data,\r\n      ...price_metadata\r\n    },\r\n    product_data: {\r\n      ...product.product_data,\r\n      ...product_metadata\r\n    }\r\n  }\r\n}\r\n\r\nfunction createEntry({\r\n  state,\r\n  id,\r\n  product,\r\n  count,\r\n  price_metadata,\r\n  product_metadata\r\n}) {\r\n  const entry = Entry({\r\n    id,\r\n    product,\r\n    quantity: count,\r\n    price_metadata,\r\n    product_metadata\r\n  });\r\n\r\n  state.cartDetails[id] = entry;\r\n  updateFormattedValue(state, id);\r\n  updateFormattedPrice(state, id);\r\n\r\n  state.totalPrice += entry.value;\r\n  state.cartCount += count;\r\n  updateFormattedTotalPrice(state);\r\n}\r\n\r\nfunction updateEntry({\r\n  state,\r\n  id,\r\n  count,\r\n  price_metadata,\r\n  product_metadata\r\n}) {\r\n  const entry = state.cartDetails[id];\r\n  if (entry.quantity + count <= 0) return removeEntry({ state, id })\r\n\r\n  state.cartDetails[id] = Entry({\r\n    id,\r\n    state,\r\n    product: entry,\r\n    quantity: entry.quantity + count,\r\n    price_metadata,\r\n    product_metadata\r\n  });\r\n  updateFormattedValue(state, id);\r\n\r\n  state.totalPrice += entry.price * count;\r\n  state.cartCount += count;\r\n  updateFormattedTotalPrice(state);\r\n}\r\n\r\nfunction removeEntry({ state, id }) {\r\n  const cartDetails = state.cartDetails;\r\n  state.totalPrice -= cartDetails[id].value;\r\n  state.cartCount -= cartDetails[id].quantity;\r\n  delete cartDetails[id];\r\n  updateFormattedTotalPrice(state);\r\n}\r\n\r\nfunction updateQuantity({ state, id, quantity }) {\r\n  const entry = state.cartDetails[id];\r\n  updateEntry({\r\n    state,\r\n    id,\r\n    count: quantity - entry.quantity\r\n  });\r\n}\n\nconst initialState = {\r\n  cartMode: 'checkout-session',\r\n  mode: 'payment',\r\n  currency: 'USD',\r\n  language: isClient ? navigator.language : 'en-US',\r\n  lastClicked: '',\r\n  shouldDisplayCart: false,\r\n  cartCount: 0,\r\n  totalPrice: 0,\r\n  formattedTotalPrice: '',\r\n  cartDetails: {},\r\n  stripe: '',\r\n  shouldPersist: true\r\n};\r\n\r\nconst slice = toolkit.createSlice({\r\n  name: 'cart',\r\n  initialState,\r\n  reducers: {\r\n    addItem: {\r\n      reducer(state, { payload: { product, options } }) {\r\n        const { count, price_metadata, product_metadata } = options;\r\n\r\n        const id =\r\n          product.id ||\r\n          product.price_id ||\r\n          product.sku_id ||\r\n          product.sku ||\r\n          uuid.v4();\r\n\r\n        if (id in state.cartDetails) {\r\n          updateEntry({\r\n            state,\r\n            id,\r\n            count,\r\n            price_metadata,\r\n            product_metadata\r\n          });\r\n        } else {\r\n          createEntry({\r\n            state,\r\n            id,\r\n            product,\r\n            count,\r\n            price_metadata,\r\n            product_metadata\r\n          });\r\n        }\r\n      },\r\n      prepare(product, options = { count: 1 }) {\r\n        if (!options.price_metadata) options.price_metadata = {};\r\n        if (!options.product_metadata) options.product_metadata = {};\r\n        if (!options.count) options.count = 1;\r\n        return { payload: { product, options } }\r\n      }\r\n    },\r\n    incrementItem: {\r\n      reducer(state, { payload: { id, options } }) {\r\n        updateEntry({\r\n          state,\r\n          id,\r\n          count: options.count\r\n        });\r\n      },\r\n      prepare(id, options = { count: 1 }) {\r\n        return { payload: { id, options } }\r\n      }\r\n    },\r\n    decrementItem: {\r\n      reducer(state, { payload: { id, options } }) {\r\n        if (state.cartDetails[id].quantity - options.count <= 0)\r\n          return removeEntry({ state, id })\r\n\r\n        updateEntry({\r\n          state,\r\n          id,\r\n          count: -options.count\r\n        });\r\n      },\r\n      prepare(id, options = { count: 1 }) {\r\n        return { payload: { id, options } }\r\n      }\r\n    },\r\n    clearCart: {\r\n      reducer(state) {\r\n        state.cartCount = 0;\r\n        state.totalPrice = 0;\r\n        state.cartDetails = {};\r\n        updateFormattedTotalPrice(state);\r\n      }\r\n    },\r\n    setItemQuantity: {\r\n      reducer(state, { payload: { id, quantity } }) {\r\n        if (quantity > 0 && id in state.cartDetails)\r\n          return updateQuantity({ ...state, state, id, quantity })\r\n        else if (quantity === 0) return removeEntry({ state, id })\r\n      },\r\n      prepare(id, quantity) {\r\n        return { payload: { id, quantity } }\r\n      }\r\n    },\r\n    removeItem: {\r\n      reducer(state, { payload: { id } }) {\r\n        removeEntry({ state, id });\r\n      },\r\n      prepare(id) {\r\n        return { payload: { id } }\r\n      }\r\n    },\r\n    loadCart: {\r\n      reducer(state, { payload: { cartDetails, shouldMerge } }) {\r\n        if (!shouldMerge) {\r\n          state.cartCount = 0;\r\n          state.totalPrice = 0;\r\n          state.cartDetails = {};\r\n        }\r\n\r\n        for (const id in cartDetails) {\r\n          const entry = cartDetails[id];\r\n          createEntry({\r\n            state,\r\n            id: entry.id,\r\n            product: entry,\r\n            count: entry.quantity\r\n          });\r\n        }\r\n      },\r\n      prepare(cartDetails, shouldMerge = true) {\r\n        return { payload: { cartDetails, shouldMerge } }\r\n      }\r\n    },\r\n    handleCartHover(state) {\r\n      state.shouldDisplayCart = true;\r\n    },\r\n    handleCartClick(state) {\r\n      state.shouldDisplayCart = !state.shouldDisplayCart;\r\n    },\r\n    handleCloseCart(state) {\r\n      state.shouldDisplayCart = false;\r\n    },\r\n    storeLastClicked(state, { payload }) {\r\n      state.lastClicked = payload;\r\n    },\r\n    changeStripeKey(state, { payload }) {\r\n      state.stripe = payload;\r\n    },\r\n    changeLanguage(state, { payload }) {\r\n      state.language = payload;\r\n    },\r\n    changeCurrency(state, { payload }) {\r\n      state.currency = payload;\r\n    }\r\n  }\r\n});\r\n\r\nslice.actions.redirectToCheckout = (sessionId) => ({\r\n  type: 'cart/redirectToCheckout',\r\n  payload: { sessionId }\r\n});\r\nslice.actions.checkoutSingleItem = (itemsOrPriceId) => {\r\n  const quantity = itemsOrPriceId.quantity || 1;\r\n\r\n  const cartItems = (() => {\r\n    if (typeof itemsOrPriceId === 'string') {\r\n      return {\r\n        lineItems: [\r\n          {\r\n            price: itemsOrPriceId,\r\n            quantity\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(itemsOrPriceId, 'price')) {\r\n      return {\r\n        lineItems: [\r\n          {\r\n            price: itemsOrPriceId.price,\r\n            quantity\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    /**\r\n     * Backward compatibility (SKU)\r\n     */\r\n    if (Object.prototype.hasOwnProperty.call(itemsOrPriceId, 'sku')) {\r\n      return {\r\n        items: [\r\n          {\r\n            sku: itemsOrPriceId.sku,\r\n            quantity\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    return []\r\n  })();\r\n\r\n  return {\r\n    type: 'cart/checkoutSingleItem',\r\n    payload: {\r\n      cartItems\r\n    }\r\n  }\r\n};\r\n\r\nconst { reducer, actions } = slice;\n\n/**\r\n * Returns the constructor name of any value.\r\n * @param {any} value\r\n * @returns string\r\n */\r\nfunction typeOf(value) {\r\n  if (value === undefined) return 'undefined'\r\n  if (value === null) return 'null'\r\n  return value.constructor.name\r\n}\r\n\r\nclass PropertyValueError extends Error {\r\n  constructor({ property, method, expected, received }) {\r\n    const plural = Array.isArray(expected);\r\n    const expectedString = plural\r\n      ? `are ${expected.map((v) => JSON.stringify(v)).join(', ')}`\r\n      : `is ${JSON.stringify(expected)}`;\r\n    const methodString = typeof method === 'string' ? ` in ${method}()` : '';\r\n    super(\r\n      `Invalid value ${JSON.stringify(\r\n        received\r\n      )} was received for ${property}. Valid ${\r\n        plural ? 'values' : 'value'\r\n      } for ${property}${methodString} ${expectedString}.`\r\n    );\r\n    this.name = 'PropertyValueError';\r\n  }\r\n}\r\n\r\nclass PropertyTypeError extends TypeError {\r\n  constructor({ property, expected, received }) {\r\n    const plural = Array.isArray(expected);\r\n    const expectedString = plural\r\n      ? `are ${expected.map((v) => JSON.stringify(v)).join(', ')}`\r\n      : `is ${JSON.stringify(expected)}`;\r\n    super(\r\n      `Invalid value with type ${JSON.stringify(\r\n        received\r\n      )} was received for ${property}. Valid ${\r\n        plural ? 'types' : 'type'\r\n      } for ${property} ${expectedString}.`\r\n    );\r\n    this.name = 'PropertyTypeError';\r\n  }\r\n}\r\n\r\nclass PropertyRangeError extends RangeError {\r\n  constructor({ property, between, below, above, received }) {\r\n    let expectedString;\r\n    if (Array.isArray(between))\r\n      expectedString = `between ${between[0]} and ${between[1]}`;\r\n    else if (['string', 'number'].includes(typeof below))\r\n      expectedString = `below ${below}`;\r\n    else if (['string', 'number'].includes(typeof above))\r\n      expectedString = `above ${above}`;\r\n\r\n    super(\r\n      `Invalid value ${JSON.stringify(\r\n        received\r\n      )} was received for ${property}. Valid range for ${property} is ${expectedString}.`\r\n    );\r\n    this.name = 'PropertyRangeError';\r\n  }\r\n}\n\nfunction _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }\r\nfunction getCheckoutData(cart) {\r\n  const lineItems = [];\r\n  for (const sku in cart.cartDetails)\r\n    lineItems.push({ price: sku, quantity: cart.cartDetails[sku].quantity });\r\n\r\n  const options = {\r\n    mode: cart.mode,\r\n    lineItems,\r\n    successUrl: cart.successUrl,\r\n    cancelUrl: cart.cancelUrl,\r\n    billingAddressCollection: cart.billingAddressCollection\r\n      ? 'required'\r\n      : 'auto',\r\n    submitType: 'auto'\r\n  };\r\n\r\n  if (_optionalChain([cart, 'access', _ => _.allowedCountries, 'optionalAccess', _2 => _2.length])) {\r\n    options.shippingAddressCollection = {\r\n      allowedCountries: cart.allowedCountries\r\n    };\r\n  }\r\n\r\n  return options\r\n}\r\n\r\nconst handleStripe = (store) => (next) => async (action) => {\r\n  const stripePublicKey = store.getState().stripe;\r\n  const cart = store.getState();\r\n\r\n  const checkout = ['cart/redirectToCheckout', 'cart/checkoutSingleItem'];\r\n  if (checkout.includes(action.type)) {\r\n    if (typeof stripePublicKey !== 'string') {\r\n      throw new PropertyTypeError({\r\n        property: 'stripe',\r\n        expected: 'string',\r\n        received: typeOf(stripePublicKey)\r\n      })\r\n    } else if (stripePublicKey.length === 0) {\r\n      throw new PropertyRangeError({\r\n        property: 'stripe.length',\r\n        above: 0,\r\n        received: stripePublicKey.length\r\n      })\r\n    }\r\n  }\r\n\r\n  if (action.type === 'cart/redirectToCheckout') {\r\n    const stripe = initializeStripe(stripePublicKey);\r\n    if (cart.cartMode === 'checkout-session') {\r\n      return stripe.redirectToCheckout({\r\n        sessionId: action.payload.sessionId\r\n      })\r\n    } else if (cart.cartMode === 'client-only') {\r\n      const checkoutData = getCheckoutData(cart);\r\n      return stripe.redirectToCheckout(checkoutData)\r\n    } else {\r\n      throw new PropertyValueError({\r\n        property: 'cartMode',\r\n        method: 'redirectToCheckout',\r\n        expected: ['client-only', 'checkout-session'],\r\n        received: cart.cartMode\r\n      })\r\n    }\r\n  } else if (action.type === 'cart/checkoutSingleItem') {\r\n    const stripe = initializeStripe(stripePublicKey);\r\n\r\n    if (cart.cartMode === 'client-only') {\r\n      const options = {\r\n        mode: cart.mode,\r\n        successUrl: cart.successUrl,\r\n        cancelUrl: cart.cancelUrl,\r\n        ...action.payload.cartItems\r\n      };\r\n      return stripe.redirectToCheckout(options)\r\n    } else {\r\n      throw new PropertyValueError({\r\n        property: 'cartMode',\r\n        method: 'checkoutSingleItem',\r\n        expected: 'client-only',\r\n        received: cart.cartMode\r\n      })\r\n    }\r\n  }\r\n\r\n  return next(action)\r\n};\r\n\r\nfunction initializeStripe(publicKey) {\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    const stripe = Stripe(publicKey);\r\n    stripe.registerAppInfo({\r\n      name: 'use-shopping-cart',\r\n      version: \"3.1.8\",\r\n      url: 'https://useshoppingcart.com',\r\n      // eslint-disable-next-line camelcase\r\n      partner_id: 'pp_partner_H8MLmI3e9Oc3IK'\r\n    });\r\n    return stripe\r\n  } catch (error) {\r\n    console.error('Unable to initialize Stripe.');\r\n    throw error\r\n  }\r\n}\n\nconst handleWarnings = (store) => (next) => async (action) => {\r\n  const count = ['cart/addItem', 'cart/incrementItem', 'cart/decrementItem'];\r\n  if (\r\n    count.includes(action.type) &&\r\n    typeof action.payload.options.count !== 'number'\r\n  ) {\r\n    console.warn(\r\n      `Invalid count used with action ${\r\n        action.type\r\n      }: count must be a number. The current type is ${typeOf(\r\n        action.payload.options.count\r\n      )}.`,\r\n      action\r\n    );\r\n    return\r\n  }\r\n\r\n  const quantity = ['cart/setItemQuantity'];\r\n  if (quantity.includes(action.type)) {\r\n    if (typeof action.payload.quantity !== 'number') {\r\n      console.warn(\r\n        `Invalid quantity used with action ${\r\n          action.type\r\n        }: quantity must be a number. The current type is ${typeOf(\r\n          action.payload.quantity\r\n        )}.`,\r\n        action\r\n      );\r\n      return\r\n    } else if (action.payload.quantity < 0) {\r\n      console.warn(\r\n        `Invalid quantity used with action ${\r\n          action.type\r\n        }: quantity must be greater than zero. The current value is ${JSON.stringify(\r\n          action.payload.quantity\r\n        )}.`,\r\n        action\r\n      );\r\n      return\r\n    }\r\n  }\r\n\r\n  const id = ['cart/incrementItem', 'cart/decrementItem', 'cart/removeItem'];\r\n  if (\r\n    id.includes(action.type) &&\r\n    !(action.payload.id in store.getState().cartDetails)\r\n  ) {\r\n    console.warn(\r\n      `Invalid product ID used with action ${\r\n        action.type\r\n      }: the ID must already be in the cart. The current value is ${JSON.stringify(\r\n        action.payload.id\r\n      )}.`,\r\n      action\r\n    );\r\n    return\r\n  }\r\n\r\n  return next(action)\r\n};\n\nfunction _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }\r\nasync function filterCart(cartDetails, filter) {\r\n  const filteredCart = {};\r\n\r\n  for (const sku in cartDetails) {\r\n    const entry = cartDetails[sku];\r\n    if (await filter(entry)) filteredCart[sku] = entry;\r\n  }\r\n\r\n  return filteredCart\r\n}\r\n\r\nfunction noop() {}\r\nfunction createNoopStorage() {\r\n  return {\r\n    getItem: noop,\r\n    setItem: noop,\r\n    removeItem: noop\r\n  }\r\n}\r\n\r\nfunction createLocalStorage() {\r\n  return {\r\n    async getItem(key) {\r\n      return window.localStorage.getItem(key)\r\n    },\r\n    async setItem(key, value) {\r\n      return window.localStorage.setItem(key, value)\r\n    },\r\n    async removeItem(key) {\r\n      return window.localStorage.removeItem(key)\r\n    }\r\n  }\r\n}\r\n\r\nfunction createShoppingCartStore(options) {\r\n  options.shouldPersist = _nullishCoalesce(options.shouldPersist, () => ( true));\r\n\r\n  if (!isClient) {\r\n    return toolkit.configureStore({\r\n      reducer,\r\n      preloadedState: { ...initialState, ...options }\r\n    })\r\n  }\r\n  let storage;\r\n  if (isClient) storage = options.storage || createLocalStorage();\r\n  else storage = createNoopStorage();\r\n  delete options.storage;\r\n\r\n  const persistConfig = {\r\n    key: _nullishCoalesce(options.persistKey, () => ( 'root')),\r\n    version: 1,\r\n    storage,\r\n    whitelist: ['cartCount', 'totalPrice', 'formattedTotalPrice', 'cartDetails']\r\n  };\r\n  const persistedReducer = reduxPersist.persistReducer(persistConfig, reducer);\r\n\r\n  const newInitialState = { ...initialState, ...options };\r\n  updateFormattedTotalPrice(newInitialState);\r\n\r\n  return toolkit.configureStore({\r\n    reducer: options.shouldPersist ? persistedReducer : reducer,\r\n    preloadedState: newInitialState,\r\n    middleware: (getDefaultMiddleware) =>\r\n      getDefaultMiddleware({\r\n        serializableCheck: {\r\n          ignoredActions: [reduxPersist.FLUSH, reduxPersist.REHYDRATE, reduxPersist.PAUSE, reduxPersist.PERSIST, reduxPersist.PURGE, reduxPersist.REGISTER],\r\n          ignoredActionPaths: ['persist']\r\n        }\r\n      }).concat(handleStripe, handleWarnings)\r\n  })\r\n}\n\nconst _jsxFileName = \"/Users/nickdejesus/Code/hooks/use-shopping-cart/use-shopping-cart/react/index.js\";const CartContext = React__namespace.createContext(initialState);\r\nconst useSelector = reactRedux.createSelectorHook(CartContext);\r\nconst useDispatch = reactRedux.createDispatchHook(CartContext);\r\n\r\nfunction CartProvider({ loading = null, children, ...props }) {\r\n  const store = React__namespace.useMemo(() => createShoppingCartStore(props), [props]);\r\n\r\n  if (isClient && props.shouldPersist) {\r\n    const persistor = reduxPersist.persistStore(store);\r\n\r\n    return (\r\n      React__namespace.createElement(reactRedux.Provider, { context: CartContext, store: store, __self: this, __source: {fileName: _jsxFileName, lineNumber: 29}}\n        , React__namespace.createElement(react.PersistGate, {\r\n          persistor: persistor,\r\n          children: (bootstrapped) => {\r\n            if (!bootstrapped) return loading\r\n            return children\r\n          }, __self: this, __source: {fileName: _jsxFileName, lineNumber: 30}}\r\n        )\n      )\r\n    )\r\n  } else if (isClient && !props.shouldPersist) {\r\n    return (\r\n      React__namespace.createElement(reactRedux.Provider, { context: CartContext, store: store, __self: this, __source: {fileName: _jsxFileName, lineNumber: 41}}\n        , children\n      )\r\n    )\r\n  }\r\n}\r\n\r\nfunction useShoppingCart(\r\n  selector = (state) => ({ ...state }),\r\n  equalityFn\r\n) {\r\n  const dispatch = useDispatch();\r\n  const cartState = useSelector(selector, equalityFn);\r\n\r\n  const shoppingCart = React__namespace.useMemo(() => {\r\n    const cartActions = toolkit.bindActionCreators(actions, dispatch);\r\n    return { ...cartState, ...cartActions }\r\n  }, [cartState, dispatch]);\r\n\r\n  React__namespace.useDebugValue(shoppingCart);\r\n  return shoppingCart\r\n}\r\n\r\nfunction DebugCart(props) {\r\n  const cart = useShoppingCart((state) => state);\r\n  const cartPropertyRows = Object.entries(cart)\r\n    .filter(([, value]) => typeof value !== 'function')\r\n    .map(([key, value]) => (\r\n      React__namespace.createElement('tr', { key: key, __self: this, __source: {fileName: _jsxFileName, lineNumber: 69}}\n        , React__namespace.createElement('td', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 70}}, key)\n        , React__namespace.createElement('td', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 71}}\n          , typeof value === 'object' ? (\r\n            React__namespace.createElement('button', { onClick: () => console.log(value), __self: this, __source: {fileName: _jsxFileName, lineNumber: 73}}, \"Log value\" )\r\n          ) : (\r\n            JSON.stringify(value)\r\n          )\n        )\n      )\r\n    ));\r\n\r\n  return (\r\n    React__namespace.createElement('div', {\r\n      style: {\r\n        position: 'fixed',\r\n        top: 50,\r\n        right: 50,\r\n        backgroundColor: '#eee',\r\n        textAlign: 'left',\r\n        maxWidth: 300,\r\n        padding: 20,\r\n        borderSpacing: '25px 5px',\r\n        overflow: 'auto'\r\n      },\r\n      ...props, __self: this, __source: {fileName: _jsxFileName, lineNumber: 82}}\r\n\n      , React__namespace.createElement('table', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 96}}\n        , React__namespace.createElement('thead', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 97}}\n          , React__namespace.createElement('tr', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 98}}\n            , React__namespace.createElement('th', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 99}}, \"Key\")\n            , React__namespace.createElement('th', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 100}}, \"Value\")\n          )\n        )\n        , React__namespace.createElement('tbody', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 103}}, cartPropertyRows)\n      )\n    )\r\n  )\r\n}\n\nexports.CartContext = CartContext;\nexports.CartProvider = CartProvider;\nexports.DebugCart = DebugCart;\nexports.actions = actions;\nexports.filterCart = filterCart;\nexports.formatCurrencyString = formatCurrencyString;\nexports.useDispatch = useDispatch;\nexports.useSelector = useSelector;\nexports.useShoppingCart = useShoppingCart;\n//# sourceMappingURL=react.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXNlLXNob3BwaW5nLWNhcnQvZGlzdC9yZWFjdC5qcyIsIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTs7QUFFQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7O0FBRTdELFlBQVksbUJBQU8sQ0FBQyx3R0FBTztBQUMzQixjQUFjLG1CQUFPLENBQUMsNkVBQWtCO0FBQ3hDLFdBQVcsbUJBQU8sQ0FBQyw4REFBTTtBQUN6QixtQkFBbUIsbUJBQU8sQ0FBQyxzRUFBZTtBQUMxQyxtQkFBTyxDQUFDLGdGQUFtQjtBQUMzQixpQkFBaUIsbUJBQU8sQ0FBQyxrRUFBYTtBQUN0QyxZQUFZLG1CQUFPLENBQUMsb0dBQWlDOztBQUVyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxpQkFBaUIseURBQXlEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx5Q0FBeUM7O0FBRXpDLGlEQUFpRCx5QkFBeUI7QUFDMUUsbURBQW1ELHlCQUF5QjtBQUM1RSxrREFBa0QseUJBQXlCO0FBQzNFLG9EQUFvRCx5QkFBeUIsd0NBQXdDO0FBQ3JILG9EQUFvRCx5QkFBeUIseUNBQXlDO0FBQ3RIO0FBQ0E7QUFDQSxtREFBbUQseUJBQXlCLHlDQUF5QztBQUNySDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUI7QUFDbkIsb0JBQW9CO0FBQ3BCLGlCQUFpQjtBQUNqQixlQUFlO0FBQ2Ysa0JBQWtCO0FBQ2xCLDRCQUE0QjtBQUM1QixtQkFBbUI7QUFDbkIsbUJBQW1CO0FBQ25CLHVCQUF1QjtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL3VzZS1zaG9wcGluZy1jYXJ0L2Rpc3QvcmVhY3QuanM/NGVmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2UgY2xpZW50Jztcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciB0b29sa2l0ID0gcmVxdWlyZSgnQHJlZHV4anMvdG9vbGtpdCcpO1xudmFyIHV1aWQgPSByZXF1aXJlKCd1dWlkJyk7XG52YXIgcmVkdXhQZXJzaXN0ID0gcmVxdWlyZSgncmVkdXgtcGVyc2lzdCcpO1xucmVxdWlyZSgnQHN0cmlwZS9zdHJpcGUtanMnKTtcbnZhciByZWFjdFJlZHV4ID0gcmVxdWlyZSgncmVhY3QtcmVkdXgnKTtcbnZhciByZWFjdCA9IHJlcXVpcmUoJ3JlZHV4LXBlcnNpc3QvaW50ZWdyYXRpb24vcmVhY3QnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BOYW1lc3BhY2UoZSkge1xuICBpZiAoZSAmJiBlLl9fZXNNb2R1bGUpIHJldHVybiBlO1xuICB2YXIgbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGlmIChlKSB7XG4gICAgT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgaWYgKGsgIT09ICdkZWZhdWx0Jykge1xuICAgICAgICB2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgayk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCBrLCBkLmdldCA/IGQgOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVba107IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgbltcImRlZmF1bHRcIl0gPSBlO1xuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShuKTtcbn1cblxudmFyIFJlYWN0X19uYW1lc3BhY2UgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BOYW1lc3BhY2UoUmVhY3QpO1xuXG5jb25zdCBpc0NsaWVudCA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnO1xuXG5jb25zdCBmb3JtYXRDdXJyZW5jeVN0cmluZyA9ICh7XHJcbiAgdmFsdWUsXHJcbiAgY3VycmVuY3ksXHJcbiAgbGFuZ3VhZ2UgPSBpc0NsaWVudCA/IG5hdmlnYXRvci5sYW5ndWFnZSA6ICdlbi1VUydcclxufSkgPT4ge1xyXG4gIGNvbnN0IG51bWJlckZvcm1hdCA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsYW5ndWFnZSwge1xyXG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXHJcbiAgICBjdXJyZW5jeSxcclxuICAgIGN1cnJlbmN5RGlzcGxheTogJ3N5bWJvbCdcclxuICB9KTtcclxuICBjb25zdCBwYXJ0cyA9IG51bWJlckZvcm1hdC5mb3JtYXRUb1BhcnRzKHZhbHVlKTtcclxuICBsZXQgemVyb0RlY2ltYWxDdXJyZW5jeSA9IHRydWU7XHJcblxyXG4gIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xyXG4gICAgaWYgKHBhcnQudHlwZSA9PT0gJ2RlY2ltYWwnKSB7XHJcbiAgICAgIHplcm9EZWNpbWFsQ3VycmVuY3kgPSBmYWxzZTtcclxuICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhbHVlID0gemVyb0RlY2ltYWxDdXJyZW5jeSA/IHZhbHVlIDogcGFyc2VGbG9hdCgodmFsdWUgLyAxMDApLnRvRml4ZWQoMikpO1xyXG4gIHJldHVybiBudW1iZXJGb3JtYXQuZm9ybWF0KHZhbHVlKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlRm9ybWF0dGVkVG90YWxQcmljZShzdGF0ZSkge1xyXG4gIHN0YXRlLmZvcm1hdHRlZFRvdGFsUHJpY2UgPSBmb3JtYXRDdXJyZW5jeVN0cmluZyh7XHJcbiAgICB2YWx1ZTogc3RhdGUudG90YWxQcmljZSxcclxuICAgIGN1cnJlbmN5OiBzdGF0ZS5jdXJyZW5jeSxcclxuICAgIGxhbmd1YWdlOiBzdGF0ZS5sYW5ndWFnZVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVGb3JtYXR0ZWRWYWx1ZShzdGF0ZSwgaWQpIHtcclxuICBzdGF0ZS5jYXJ0RGV0YWlsc1tpZF0uZm9ybWF0dGVkVmFsdWUgPSBmb3JtYXRDdXJyZW5jeVN0cmluZyh7XHJcbiAgICB2YWx1ZTogc3RhdGUuY2FydERldGFpbHNbaWRdLnZhbHVlLFxyXG4gICAgY3VycmVuY3k6IHN0YXRlLmN1cnJlbmN5LFxyXG4gICAgbGFuZ3VhZ2U6IHN0YXRlLmxhbmd1YWdlXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUZvcm1hdHRlZFByaWNlKHN0YXRlLCBpZCkge1xyXG4gIHN0YXRlLmNhcnREZXRhaWxzW2lkXS5mb3JtYXR0ZWRQcmljZSA9IGZvcm1hdEN1cnJlbmN5U3RyaW5nKHtcclxuICAgIHZhbHVlOiBzdGF0ZS5jYXJ0RGV0YWlsc1tpZF0ucHJpY2UsXHJcbiAgICBjdXJyZW5jeTogc3RhdGUuY3VycmVuY3ksXHJcbiAgICBsYW5ndWFnZTogc3RhdGUubGFuZ3VhZ2VcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gRW50cnkoeyBpZCwgcHJvZHVjdCwgcXVhbnRpdHksIHByaWNlX21ldGFkYXRhLCBwcm9kdWN0X21ldGFkYXRhIH0pIHtcclxuICByZXR1cm4ge1xyXG4gICAgLi4ucHJvZHVjdCxcclxuICAgIGlkLFxyXG4gICAgcXVhbnRpdHksXHJcbiAgICB2YWx1ZTogcHJvZHVjdC5wcmljZSAqIHF1YW50aXR5LFxyXG4gICAgcHJpY2VfZGF0YToge1xyXG4gICAgICAuLi5wcm9kdWN0LnByaWNlX2RhdGEsXHJcbiAgICAgIC4uLnByaWNlX21ldGFkYXRhXHJcbiAgICB9LFxyXG4gICAgcHJvZHVjdF9kYXRhOiB7XHJcbiAgICAgIC4uLnByb2R1Y3QucHJvZHVjdF9kYXRhLFxyXG4gICAgICAuLi5wcm9kdWN0X21ldGFkYXRhXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbnRyeSh7XHJcbiAgc3RhdGUsXHJcbiAgaWQsXHJcbiAgcHJvZHVjdCxcclxuICBjb3VudCxcclxuICBwcmljZV9tZXRhZGF0YSxcclxuICBwcm9kdWN0X21ldGFkYXRhXHJcbn0pIHtcclxuICBjb25zdCBlbnRyeSA9IEVudHJ5KHtcclxuICAgIGlkLFxyXG4gICAgcHJvZHVjdCxcclxuICAgIHF1YW50aXR5OiBjb3VudCxcclxuICAgIHByaWNlX21ldGFkYXRhLFxyXG4gICAgcHJvZHVjdF9tZXRhZGF0YVxyXG4gIH0pO1xyXG5cclxuICBzdGF0ZS5jYXJ0RGV0YWlsc1tpZF0gPSBlbnRyeTtcclxuICB1cGRhdGVGb3JtYXR0ZWRWYWx1ZShzdGF0ZSwgaWQpO1xyXG4gIHVwZGF0ZUZvcm1hdHRlZFByaWNlKHN0YXRlLCBpZCk7XHJcblxyXG4gIHN0YXRlLnRvdGFsUHJpY2UgKz0gZW50cnkudmFsdWU7XHJcbiAgc3RhdGUuY2FydENvdW50ICs9IGNvdW50O1xyXG4gIHVwZGF0ZUZvcm1hdHRlZFRvdGFsUHJpY2Uoc3RhdGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVFbnRyeSh7XHJcbiAgc3RhdGUsXHJcbiAgaWQsXHJcbiAgY291bnQsXHJcbiAgcHJpY2VfbWV0YWRhdGEsXHJcbiAgcHJvZHVjdF9tZXRhZGF0YVxyXG59KSB7XHJcbiAgY29uc3QgZW50cnkgPSBzdGF0ZS5jYXJ0RGV0YWlsc1tpZF07XHJcbiAgaWYgKGVudHJ5LnF1YW50aXR5ICsgY291bnQgPD0gMCkgcmV0dXJuIHJlbW92ZUVudHJ5KHsgc3RhdGUsIGlkIH0pXHJcblxyXG4gIHN0YXRlLmNhcnREZXRhaWxzW2lkXSA9IEVudHJ5KHtcclxuICAgIGlkLFxyXG4gICAgc3RhdGUsXHJcbiAgICBwcm9kdWN0OiBlbnRyeSxcclxuICAgIHF1YW50aXR5OiBlbnRyeS5xdWFudGl0eSArIGNvdW50LFxyXG4gICAgcHJpY2VfbWV0YWRhdGEsXHJcbiAgICBwcm9kdWN0X21ldGFkYXRhXHJcbiAgfSk7XHJcbiAgdXBkYXRlRm9ybWF0dGVkVmFsdWUoc3RhdGUsIGlkKTtcclxuXHJcbiAgc3RhdGUudG90YWxQcmljZSArPSBlbnRyeS5wcmljZSAqIGNvdW50O1xyXG4gIHN0YXRlLmNhcnRDb3VudCArPSBjb3VudDtcclxuICB1cGRhdGVGb3JtYXR0ZWRUb3RhbFByaWNlKHN0YXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRW50cnkoeyBzdGF0ZSwgaWQgfSkge1xyXG4gIGNvbnN0IGNhcnREZXRhaWxzID0gc3RhdGUuY2FydERldGFpbHM7XHJcbiAgc3RhdGUudG90YWxQcmljZSAtPSBjYXJ0RGV0YWlsc1tpZF0udmFsdWU7XHJcbiAgc3RhdGUuY2FydENvdW50IC09IGNhcnREZXRhaWxzW2lkXS5xdWFudGl0eTtcclxuICBkZWxldGUgY2FydERldGFpbHNbaWRdO1xyXG4gIHVwZGF0ZUZvcm1hdHRlZFRvdGFsUHJpY2Uoc3RhdGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVRdWFudGl0eSh7IHN0YXRlLCBpZCwgcXVhbnRpdHkgfSkge1xyXG4gIGNvbnN0IGVudHJ5ID0gc3RhdGUuY2FydERldGFpbHNbaWRdO1xyXG4gIHVwZGF0ZUVudHJ5KHtcclxuICAgIHN0YXRlLFxyXG4gICAgaWQsXHJcbiAgICBjb3VudDogcXVhbnRpdHkgLSBlbnRyeS5xdWFudGl0eVxyXG4gIH0pO1xyXG59XG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcclxuICBjYXJ0TW9kZTogJ2NoZWNrb3V0LXNlc3Npb24nLFxyXG4gIG1vZGU6ICdwYXltZW50JyxcclxuICBjdXJyZW5jeTogJ1VTRCcsXHJcbiAgbGFuZ3VhZ2U6IGlzQ2xpZW50ID8gbmF2aWdhdG9yLmxhbmd1YWdlIDogJ2VuLVVTJyxcclxuICBsYXN0Q2xpY2tlZDogJycsXHJcbiAgc2hvdWxkRGlzcGxheUNhcnQ6IGZhbHNlLFxyXG4gIGNhcnRDb3VudDogMCxcclxuICB0b3RhbFByaWNlOiAwLFxyXG4gIGZvcm1hdHRlZFRvdGFsUHJpY2U6ICcnLFxyXG4gIGNhcnREZXRhaWxzOiB7fSxcclxuICBzdHJpcGU6ICcnLFxyXG4gIHNob3VsZFBlcnNpc3Q6IHRydWVcclxufTtcclxuXHJcbmNvbnN0IHNsaWNlID0gdG9vbGtpdC5jcmVhdGVTbGljZSh7XHJcbiAgbmFtZTogJ2NhcnQnLFxyXG4gIGluaXRpYWxTdGF0ZSxcclxuICByZWR1Y2Vyczoge1xyXG4gICAgYWRkSXRlbToge1xyXG4gICAgICByZWR1Y2VyKHN0YXRlLCB7IHBheWxvYWQ6IHsgcHJvZHVjdCwgb3B0aW9ucyB9IH0pIHtcclxuICAgICAgICBjb25zdCB7IGNvdW50LCBwcmljZV9tZXRhZGF0YSwgcHJvZHVjdF9tZXRhZGF0YSB9ID0gb3B0aW9ucztcclxuXHJcbiAgICAgICAgY29uc3QgaWQgPVxyXG4gICAgICAgICAgcHJvZHVjdC5pZCB8fFxyXG4gICAgICAgICAgcHJvZHVjdC5wcmljZV9pZCB8fFxyXG4gICAgICAgICAgcHJvZHVjdC5za3VfaWQgfHxcclxuICAgICAgICAgIHByb2R1Y3Quc2t1IHx8XHJcbiAgICAgICAgICB1dWlkLnY0KCk7XHJcblxyXG4gICAgICAgIGlmIChpZCBpbiBzdGF0ZS5jYXJ0RGV0YWlscykge1xyXG4gICAgICAgICAgdXBkYXRlRW50cnkoe1xyXG4gICAgICAgICAgICBzdGF0ZSxcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIGNvdW50LFxyXG4gICAgICAgICAgICBwcmljZV9tZXRhZGF0YSxcclxuICAgICAgICAgICAgcHJvZHVjdF9tZXRhZGF0YVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNyZWF0ZUVudHJ5KHtcclxuICAgICAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBwcm9kdWN0LFxyXG4gICAgICAgICAgICBjb3VudCxcclxuICAgICAgICAgICAgcHJpY2VfbWV0YWRhdGEsXHJcbiAgICAgICAgICAgIHByb2R1Y3RfbWV0YWRhdGFcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgcHJlcGFyZShwcm9kdWN0LCBvcHRpb25zID0geyBjb3VudDogMSB9KSB7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zLnByaWNlX21ldGFkYXRhKSBvcHRpb25zLnByaWNlX21ldGFkYXRhID0ge307XHJcbiAgICAgICAgaWYgKCFvcHRpb25zLnByb2R1Y3RfbWV0YWRhdGEpIG9wdGlvbnMucHJvZHVjdF9tZXRhZGF0YSA9IHt9O1xyXG4gICAgICAgIGlmICghb3B0aW9ucy5jb3VudCkgb3B0aW9ucy5jb3VudCA9IDE7XHJcbiAgICAgICAgcmV0dXJuIHsgcGF5bG9hZDogeyBwcm9kdWN0LCBvcHRpb25zIH0gfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgaW5jcmVtZW50SXRlbToge1xyXG4gICAgICByZWR1Y2VyKHN0YXRlLCB7IHBheWxvYWQ6IHsgaWQsIG9wdGlvbnMgfSB9KSB7XHJcbiAgICAgICAgdXBkYXRlRW50cnkoe1xyXG4gICAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIGNvdW50OiBvcHRpb25zLmNvdW50XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHByZXBhcmUoaWQsIG9wdGlvbnMgPSB7IGNvdW50OiAxIH0pIHtcclxuICAgICAgICByZXR1cm4geyBwYXlsb2FkOiB7IGlkLCBvcHRpb25zIH0gfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZGVjcmVtZW50SXRlbToge1xyXG4gICAgICByZWR1Y2VyKHN0YXRlLCB7IHBheWxvYWQ6IHsgaWQsIG9wdGlvbnMgfSB9KSB7XHJcbiAgICAgICAgaWYgKHN0YXRlLmNhcnREZXRhaWxzW2lkXS5xdWFudGl0eSAtIG9wdGlvbnMuY291bnQgPD0gMClcclxuICAgICAgICAgIHJldHVybiByZW1vdmVFbnRyeSh7IHN0YXRlLCBpZCB9KVxyXG5cclxuICAgICAgICB1cGRhdGVFbnRyeSh7XHJcbiAgICAgICAgICBzdGF0ZSxcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgY291bnQ6IC1vcHRpb25zLmNvdW50XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHByZXBhcmUoaWQsIG9wdGlvbnMgPSB7IGNvdW50OiAxIH0pIHtcclxuICAgICAgICByZXR1cm4geyBwYXlsb2FkOiB7IGlkLCBvcHRpb25zIH0gfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgY2xlYXJDYXJ0OiB7XHJcbiAgICAgIHJlZHVjZXIoc3RhdGUpIHtcclxuICAgICAgICBzdGF0ZS5jYXJ0Q291bnQgPSAwO1xyXG4gICAgICAgIHN0YXRlLnRvdGFsUHJpY2UgPSAwO1xyXG4gICAgICAgIHN0YXRlLmNhcnREZXRhaWxzID0ge307XHJcbiAgICAgICAgdXBkYXRlRm9ybWF0dGVkVG90YWxQcmljZShzdGF0ZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzZXRJdGVtUXVhbnRpdHk6IHtcclxuICAgICAgcmVkdWNlcihzdGF0ZSwgeyBwYXlsb2FkOiB7IGlkLCBxdWFudGl0eSB9IH0pIHtcclxuICAgICAgICBpZiAocXVhbnRpdHkgPiAwICYmIGlkIGluIHN0YXRlLmNhcnREZXRhaWxzKVxyXG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZVF1YW50aXR5KHsgLi4uc3RhdGUsIHN0YXRlLCBpZCwgcXVhbnRpdHkgfSlcclxuICAgICAgICBlbHNlIGlmIChxdWFudGl0eSA9PT0gMCkgcmV0dXJuIHJlbW92ZUVudHJ5KHsgc3RhdGUsIGlkIH0pXHJcbiAgICAgIH0sXHJcbiAgICAgIHByZXBhcmUoaWQsIHF1YW50aXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgcGF5bG9hZDogeyBpZCwgcXVhbnRpdHkgfSB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZW1vdmVJdGVtOiB7XHJcbiAgICAgIHJlZHVjZXIoc3RhdGUsIHsgcGF5bG9hZDogeyBpZCB9IH0pIHtcclxuICAgICAgICByZW1vdmVFbnRyeSh7IHN0YXRlLCBpZCB9KTtcclxuICAgICAgfSxcclxuICAgICAgcHJlcGFyZShpZCkge1xyXG4gICAgICAgIHJldHVybiB7IHBheWxvYWQ6IHsgaWQgfSB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBsb2FkQ2FydDoge1xyXG4gICAgICByZWR1Y2VyKHN0YXRlLCB7IHBheWxvYWQ6IHsgY2FydERldGFpbHMsIHNob3VsZE1lcmdlIH0gfSkge1xyXG4gICAgICAgIGlmICghc2hvdWxkTWVyZ2UpIHtcclxuICAgICAgICAgIHN0YXRlLmNhcnRDb3VudCA9IDA7XHJcbiAgICAgICAgICBzdGF0ZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICAgIHN0YXRlLmNhcnREZXRhaWxzID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGlkIGluIGNhcnREZXRhaWxzKSB7XHJcbiAgICAgICAgICBjb25zdCBlbnRyeSA9IGNhcnREZXRhaWxzW2lkXTtcclxuICAgICAgICAgIGNyZWF0ZUVudHJ5KHtcclxuICAgICAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgICAgIGlkOiBlbnRyeS5pZCxcclxuICAgICAgICAgICAgcHJvZHVjdDogZW50cnksXHJcbiAgICAgICAgICAgIGNvdW50OiBlbnRyeS5xdWFudGl0eVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBwcmVwYXJlKGNhcnREZXRhaWxzLCBzaG91bGRNZXJnZSA9IHRydWUpIHtcclxuICAgICAgICByZXR1cm4geyBwYXlsb2FkOiB7IGNhcnREZXRhaWxzLCBzaG91bGRNZXJnZSB9IH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGhhbmRsZUNhcnRIb3ZlcihzdGF0ZSkge1xyXG4gICAgICBzdGF0ZS5zaG91bGREaXNwbGF5Q2FydCA9IHRydWU7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlQ2FydENsaWNrKHN0YXRlKSB7XHJcbiAgICAgIHN0YXRlLnNob3VsZERpc3BsYXlDYXJ0ID0gIXN0YXRlLnNob3VsZERpc3BsYXlDYXJ0O1xyXG4gICAgfSxcclxuICAgIGhhbmRsZUNsb3NlQ2FydChzdGF0ZSkge1xyXG4gICAgICBzdGF0ZS5zaG91bGREaXNwbGF5Q2FydCA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIHN0b3JlTGFzdENsaWNrZWQoc3RhdGUsIHsgcGF5bG9hZCB9KSB7XHJcbiAgICAgIHN0YXRlLmxhc3RDbGlja2VkID0gcGF5bG9hZDtcclxuICAgIH0sXHJcbiAgICBjaGFuZ2VTdHJpcGVLZXkoc3RhdGUsIHsgcGF5bG9hZCB9KSB7XHJcbiAgICAgIHN0YXRlLnN0cmlwZSA9IHBheWxvYWQ7XHJcbiAgICB9LFxyXG4gICAgY2hhbmdlTGFuZ3VhZ2Uoc3RhdGUsIHsgcGF5bG9hZCB9KSB7XHJcbiAgICAgIHN0YXRlLmxhbmd1YWdlID0gcGF5bG9hZDtcclxuICAgIH0sXHJcbiAgICBjaGFuZ2VDdXJyZW5jeShzdGF0ZSwgeyBwYXlsb2FkIH0pIHtcclxuICAgICAgc3RhdGUuY3VycmVuY3kgPSBwYXlsb2FkO1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG5zbGljZS5hY3Rpb25zLnJlZGlyZWN0VG9DaGVja291dCA9IChzZXNzaW9uSWQpID0+ICh7XHJcbiAgdHlwZTogJ2NhcnQvcmVkaXJlY3RUb0NoZWNrb3V0JyxcclxuICBwYXlsb2FkOiB7IHNlc3Npb25JZCB9XHJcbn0pO1xyXG5zbGljZS5hY3Rpb25zLmNoZWNrb3V0U2luZ2xlSXRlbSA9IChpdGVtc09yUHJpY2VJZCkgPT4ge1xyXG4gIGNvbnN0IHF1YW50aXR5ID0gaXRlbXNPclByaWNlSWQucXVhbnRpdHkgfHwgMTtcclxuXHJcbiAgY29uc3QgY2FydEl0ZW1zID0gKCgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgaXRlbXNPclByaWNlSWQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbGluZUl0ZW1zOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHByaWNlOiBpdGVtc09yUHJpY2VJZCxcclxuICAgICAgICAgICAgcXVhbnRpdHlcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaXRlbXNPclByaWNlSWQsICdwcmljZScpKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbGluZUl0ZW1zOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHByaWNlOiBpdGVtc09yUHJpY2VJZC5wcmljZSxcclxuICAgICAgICAgICAgcXVhbnRpdHlcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQmFja3dhcmQgY29tcGF0aWJpbGl0eSAoU0tVKVxyXG4gICAgICovXHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZW1zT3JQcmljZUlkLCAnc2t1JykpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBza3U6IGl0ZW1zT3JQcmljZUlkLnNrdSxcclxuICAgICAgICAgICAgcXVhbnRpdHlcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBbXVxyXG4gIH0pKCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB0eXBlOiAnY2FydC9jaGVja291dFNpbmdsZUl0ZW0nLFxyXG4gICAgcGF5bG9hZDoge1xyXG4gICAgICBjYXJ0SXRlbXNcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5jb25zdCB7IHJlZHVjZXIsIGFjdGlvbnMgfSA9IHNsaWNlO1xuXG4vKipcclxuICogUmV0dXJucyB0aGUgY29uc3RydWN0b3IgbmFtZSBvZiBhbnkgdmFsdWUuXHJcbiAqIEBwYXJhbSB7YW55fSB2YWx1ZVxyXG4gKiBAcmV0dXJucyBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIHR5cGVPZih2YWx1ZSkge1xyXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJ3VuZGVmaW5lZCdcclxuICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiAnbnVsbCdcclxuICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IubmFtZVxyXG59XHJcblxyXG5jbGFzcyBQcm9wZXJ0eVZhbHVlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9wZXJ0eSwgbWV0aG9kLCBleHBlY3RlZCwgcmVjZWl2ZWQgfSkge1xyXG4gICAgY29uc3QgcGx1cmFsID0gQXJyYXkuaXNBcnJheShleHBlY3RlZCk7XHJcbiAgICBjb25zdCBleHBlY3RlZFN0cmluZyA9IHBsdXJhbFxyXG4gICAgICA/IGBhcmUgJHtleHBlY3RlZC5tYXAoKHYpID0+IEpTT04uc3RyaW5naWZ5KHYpKS5qb2luKCcsICcpfWBcclxuICAgICAgOiBgaXMgJHtKU09OLnN0cmluZ2lmeShleHBlY3RlZCl9YDtcclxuICAgIGNvbnN0IG1ldGhvZFN0cmluZyA9IHR5cGVvZiBtZXRob2QgPT09ICdzdHJpbmcnID8gYCBpbiAke21ldGhvZH0oKWAgOiAnJztcclxuICAgIHN1cGVyKFxyXG4gICAgICBgSW52YWxpZCB2YWx1ZSAke0pTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgIHJlY2VpdmVkXHJcbiAgICAgICl9IHdhcyByZWNlaXZlZCBmb3IgJHtwcm9wZXJ0eX0uIFZhbGlkICR7XHJcbiAgICAgICAgcGx1cmFsID8gJ3ZhbHVlcycgOiAndmFsdWUnXHJcbiAgICAgIH0gZm9yICR7cHJvcGVydHl9JHttZXRob2RTdHJpbmd9ICR7ZXhwZWN0ZWRTdHJpbmd9LmBcclxuICAgICk7XHJcbiAgICB0aGlzLm5hbWUgPSAnUHJvcGVydHlWYWx1ZUVycm9yJztcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIFByb3BlcnR5VHlwZUVycm9yIGV4dGVuZHMgVHlwZUVycm9yIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb3BlcnR5LCBleHBlY3RlZCwgcmVjZWl2ZWQgfSkge1xyXG4gICAgY29uc3QgcGx1cmFsID0gQXJyYXkuaXNBcnJheShleHBlY3RlZCk7XHJcbiAgICBjb25zdCBleHBlY3RlZFN0cmluZyA9IHBsdXJhbFxyXG4gICAgICA/IGBhcmUgJHtleHBlY3RlZC5tYXAoKHYpID0+IEpTT04uc3RyaW5naWZ5KHYpKS5qb2luKCcsICcpfWBcclxuICAgICAgOiBgaXMgJHtKU09OLnN0cmluZ2lmeShleHBlY3RlZCl9YDtcclxuICAgIHN1cGVyKFxyXG4gICAgICBgSW52YWxpZCB2YWx1ZSB3aXRoIHR5cGUgJHtKU09OLnN0cmluZ2lmeShcclxuICAgICAgICByZWNlaXZlZFxyXG4gICAgICApfSB3YXMgcmVjZWl2ZWQgZm9yICR7cHJvcGVydHl9LiBWYWxpZCAke1xyXG4gICAgICAgIHBsdXJhbCA/ICd0eXBlcycgOiAndHlwZSdcclxuICAgICAgfSBmb3IgJHtwcm9wZXJ0eX0gJHtleHBlY3RlZFN0cmluZ30uYFxyXG4gICAgKTtcclxuICAgIHRoaXMubmFtZSA9ICdQcm9wZXJ0eVR5cGVFcnJvcic7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBQcm9wZXJ0eVJhbmdlRXJyb3IgZXh0ZW5kcyBSYW5nZUVycm9yIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb3BlcnR5LCBiZXR3ZWVuLCBiZWxvdywgYWJvdmUsIHJlY2VpdmVkIH0pIHtcclxuICAgIGxldCBleHBlY3RlZFN0cmluZztcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGJldHdlZW4pKVxyXG4gICAgICBleHBlY3RlZFN0cmluZyA9IGBiZXR3ZWVuICR7YmV0d2VlblswXX0gYW5kICR7YmV0d2VlblsxXX1gO1xyXG4gICAgZWxzZSBpZiAoWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5jbHVkZXModHlwZW9mIGJlbG93KSlcclxuICAgICAgZXhwZWN0ZWRTdHJpbmcgPSBgYmVsb3cgJHtiZWxvd31gO1xyXG4gICAgZWxzZSBpZiAoWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5jbHVkZXModHlwZW9mIGFib3ZlKSlcclxuICAgICAgZXhwZWN0ZWRTdHJpbmcgPSBgYWJvdmUgJHthYm92ZX1gO1xyXG5cclxuICAgIHN1cGVyKFxyXG4gICAgICBgSW52YWxpZCB2YWx1ZSAke0pTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgIHJlY2VpdmVkXHJcbiAgICAgICl9IHdhcyByZWNlaXZlZCBmb3IgJHtwcm9wZXJ0eX0uIFZhbGlkIHJhbmdlIGZvciAke3Byb3BlcnR5fSBpcyAke2V4cGVjdGVkU3RyaW5nfS5gXHJcbiAgICApO1xyXG4gICAgdGhpcy5uYW1lID0gJ1Byb3BlcnR5UmFuZ2VFcnJvcic7XHJcbiAgfVxyXG59XG5cbmZ1bmN0aW9uIF9vcHRpb25hbENoYWluKG9wcykgeyBsZXQgbGFzdEFjY2Vzc0xIUyA9IHVuZGVmaW5lZDsgbGV0IHZhbHVlID0gb3BzWzBdOyBsZXQgaSA9IDE7IHdoaWxlIChpIDwgb3BzLmxlbmd0aCkgeyBjb25zdCBvcCA9IG9wc1tpXTsgY29uc3QgZm4gPSBvcHNbaSArIDFdOyBpICs9IDI7IGlmICgob3AgPT09ICdvcHRpb25hbEFjY2VzcycgfHwgb3AgPT09ICdvcHRpb25hbENhbGwnKSAmJiB2YWx1ZSA9PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gaWYgKG9wID09PSAnYWNjZXNzJyB8fCBvcCA9PT0gJ29wdGlvbmFsQWNjZXNzJykgeyBsYXN0QWNjZXNzTEhTID0gdmFsdWU7IHZhbHVlID0gZm4odmFsdWUpOyB9IGVsc2UgaWYgKG9wID09PSAnY2FsbCcgfHwgb3AgPT09ICdvcHRpb25hbENhbGwnKSB7IHZhbHVlID0gZm4oKC4uLmFyZ3MpID0+IHZhbHVlLmNhbGwobGFzdEFjY2Vzc0xIUywgLi4uYXJncykpOyBsYXN0QWNjZXNzTEhTID0gdW5kZWZpbmVkOyB9IH0gcmV0dXJuIHZhbHVlOyB9XHJcbmZ1bmN0aW9uIGdldENoZWNrb3V0RGF0YShjYXJ0KSB7XHJcbiAgY29uc3QgbGluZUl0ZW1zID0gW107XHJcbiAgZm9yIChjb25zdCBza3UgaW4gY2FydC5jYXJ0RGV0YWlscylcclxuICAgIGxpbmVJdGVtcy5wdXNoKHsgcHJpY2U6IHNrdSwgcXVhbnRpdHk6IGNhcnQuY2FydERldGFpbHNbc2t1XS5xdWFudGl0eSB9KTtcclxuXHJcbiAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgIG1vZGU6IGNhcnQubW9kZSxcclxuICAgIGxpbmVJdGVtcyxcclxuICAgIHN1Y2Nlc3NVcmw6IGNhcnQuc3VjY2Vzc1VybCxcclxuICAgIGNhbmNlbFVybDogY2FydC5jYW5jZWxVcmwsXHJcbiAgICBiaWxsaW5nQWRkcmVzc0NvbGxlY3Rpb246IGNhcnQuYmlsbGluZ0FkZHJlc3NDb2xsZWN0aW9uXHJcbiAgICAgID8gJ3JlcXVpcmVkJ1xyXG4gICAgICA6ICdhdXRvJyxcclxuICAgIHN1Ym1pdFR5cGU6ICdhdXRvJ1xyXG4gIH07XHJcblxyXG4gIGlmIChfb3B0aW9uYWxDaGFpbihbY2FydCwgJ2FjY2VzcycsIF8gPT4gXy5hbGxvd2VkQ291bnRyaWVzLCAnb3B0aW9uYWxBY2Nlc3MnLCBfMiA9PiBfMi5sZW5ndGhdKSkge1xyXG4gICAgb3B0aW9ucy5zaGlwcGluZ0FkZHJlc3NDb2xsZWN0aW9uID0ge1xyXG4gICAgICBhbGxvd2VkQ291bnRyaWVzOiBjYXJ0LmFsbG93ZWRDb3VudHJpZXNcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb3B0aW9uc1xyXG59XHJcblxyXG5jb25zdCBoYW5kbGVTdHJpcGUgPSAoc3RvcmUpID0+IChuZXh0KSA9PiBhc3luYyAoYWN0aW9uKSA9PiB7XHJcbiAgY29uc3Qgc3RyaXBlUHVibGljS2V5ID0gc3RvcmUuZ2V0U3RhdGUoKS5zdHJpcGU7XHJcbiAgY29uc3QgY2FydCA9IHN0b3JlLmdldFN0YXRlKCk7XHJcblxyXG4gIGNvbnN0IGNoZWNrb3V0ID0gWydjYXJ0L3JlZGlyZWN0VG9DaGVja291dCcsICdjYXJ0L2NoZWNrb3V0U2luZ2xlSXRlbSddO1xyXG4gIGlmIChjaGVja291dC5pbmNsdWRlcyhhY3Rpb24udHlwZSkpIHtcclxuICAgIGlmICh0eXBlb2Ygc3RyaXBlUHVibGljS2V5ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICB0aHJvdyBuZXcgUHJvcGVydHlUeXBlRXJyb3Ioe1xyXG4gICAgICAgIHByb3BlcnR5OiAnc3RyaXBlJyxcclxuICAgICAgICBleHBlY3RlZDogJ3N0cmluZycsXHJcbiAgICAgICAgcmVjZWl2ZWQ6IHR5cGVPZihzdHJpcGVQdWJsaWNLZXkpXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2UgaWYgKHN0cmlwZVB1YmxpY0tleS5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IFByb3BlcnR5UmFuZ2VFcnJvcih7XHJcbiAgICAgICAgcHJvcGVydHk6ICdzdHJpcGUubGVuZ3RoJyxcclxuICAgICAgICBhYm92ZTogMCxcclxuICAgICAgICByZWNlaXZlZDogc3RyaXBlUHVibGljS2V5Lmxlbmd0aFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGFjdGlvbi50eXBlID09PSAnY2FydC9yZWRpcmVjdFRvQ2hlY2tvdXQnKSB7XHJcbiAgICBjb25zdCBzdHJpcGUgPSBpbml0aWFsaXplU3RyaXBlKHN0cmlwZVB1YmxpY0tleSk7XHJcbiAgICBpZiAoY2FydC5jYXJ0TW9kZSA9PT0gJ2NoZWNrb3V0LXNlc3Npb24nKSB7XHJcbiAgICAgIHJldHVybiBzdHJpcGUucmVkaXJlY3RUb0NoZWNrb3V0KHtcclxuICAgICAgICBzZXNzaW9uSWQ6IGFjdGlvbi5wYXlsb2FkLnNlc3Npb25JZFxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGlmIChjYXJ0LmNhcnRNb2RlID09PSAnY2xpZW50LW9ubHknKSB7XHJcbiAgICAgIGNvbnN0IGNoZWNrb3V0RGF0YSA9IGdldENoZWNrb3V0RGF0YShjYXJ0KTtcclxuICAgICAgcmV0dXJuIHN0cmlwZS5yZWRpcmVjdFRvQ2hlY2tvdXQoY2hlY2tvdXREYXRhKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IFByb3BlcnR5VmFsdWVFcnJvcih7XHJcbiAgICAgICAgcHJvcGVydHk6ICdjYXJ0TW9kZScsXHJcbiAgICAgICAgbWV0aG9kOiAncmVkaXJlY3RUb0NoZWNrb3V0JyxcclxuICAgICAgICBleHBlY3RlZDogWydjbGllbnQtb25seScsICdjaGVja291dC1zZXNzaW9uJ10sXHJcbiAgICAgICAgcmVjZWl2ZWQ6IGNhcnQuY2FydE1vZGVcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGFjdGlvbi50eXBlID09PSAnY2FydC9jaGVja291dFNpbmdsZUl0ZW0nKSB7XHJcbiAgICBjb25zdCBzdHJpcGUgPSBpbml0aWFsaXplU3RyaXBlKHN0cmlwZVB1YmxpY0tleSk7XHJcblxyXG4gICAgaWYgKGNhcnQuY2FydE1vZGUgPT09ICdjbGllbnQtb25seScpIHtcclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICBtb2RlOiBjYXJ0Lm1vZGUsXHJcbiAgICAgICAgc3VjY2Vzc1VybDogY2FydC5zdWNjZXNzVXJsLFxyXG4gICAgICAgIGNhbmNlbFVybDogY2FydC5jYW5jZWxVcmwsXHJcbiAgICAgICAgLi4uYWN0aW9uLnBheWxvYWQuY2FydEl0ZW1zXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzdHJpcGUucmVkaXJlY3RUb0NoZWNrb3V0KG9wdGlvbnMpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgUHJvcGVydHlWYWx1ZUVycm9yKHtcclxuICAgICAgICBwcm9wZXJ0eTogJ2NhcnRNb2RlJyxcclxuICAgICAgICBtZXRob2Q6ICdjaGVja291dFNpbmdsZUl0ZW0nLFxyXG4gICAgICAgIGV4cGVjdGVkOiAnY2xpZW50LW9ubHknLFxyXG4gICAgICAgIHJlY2VpdmVkOiBjYXJ0LmNhcnRNb2RlXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbmV4dChhY3Rpb24pXHJcbn07XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplU3RyaXBlKHB1YmxpY0tleSkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuICAgIGNvbnN0IHN0cmlwZSA9IFN0cmlwZShwdWJsaWNLZXkpO1xyXG4gICAgc3RyaXBlLnJlZ2lzdGVyQXBwSW5mbyh7XHJcbiAgICAgIG5hbWU6ICd1c2Utc2hvcHBpbmctY2FydCcsXHJcbiAgICAgIHZlcnNpb246IFwiMy4xLjhcIixcclxuICAgICAgdXJsOiAnaHR0cHM6Ly91c2VzaG9wcGluZ2NhcnQuY29tJyxcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxyXG4gICAgICBwYXJ0bmVyX2lkOiAncHBfcGFydG5lcl9IOE1MbUkzZTlPYzNJSydcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHN0cmlwZVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gaW5pdGlhbGl6ZSBTdHJpcGUuJyk7XHJcbiAgICB0aHJvdyBlcnJvclxyXG4gIH1cclxufVxuXG5jb25zdCBoYW5kbGVXYXJuaW5ncyA9IChzdG9yZSkgPT4gKG5leHQpID0+IGFzeW5jIChhY3Rpb24pID0+IHtcclxuICBjb25zdCBjb3VudCA9IFsnY2FydC9hZGRJdGVtJywgJ2NhcnQvaW5jcmVtZW50SXRlbScsICdjYXJ0L2RlY3JlbWVudEl0ZW0nXTtcclxuICBpZiAoXHJcbiAgICBjb3VudC5pbmNsdWRlcyhhY3Rpb24udHlwZSkgJiZcclxuICAgIHR5cGVvZiBhY3Rpb24ucGF5bG9hZC5vcHRpb25zLmNvdW50ICE9PSAnbnVtYmVyJ1xyXG4gICkge1xyXG4gICAgY29uc29sZS53YXJuKFxyXG4gICAgICBgSW52YWxpZCBjb3VudCB1c2VkIHdpdGggYWN0aW9uICR7XHJcbiAgICAgICAgYWN0aW9uLnR5cGVcclxuICAgICAgfTogY291bnQgbXVzdCBiZSBhIG51bWJlci4gVGhlIGN1cnJlbnQgdHlwZSBpcyAke3R5cGVPZihcclxuICAgICAgICBhY3Rpb24ucGF5bG9hZC5vcHRpb25zLmNvdW50XHJcbiAgICAgICl9LmAsXHJcbiAgICAgIGFjdGlvblxyXG4gICAgKTtcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgY29uc3QgcXVhbnRpdHkgPSBbJ2NhcnQvc2V0SXRlbVF1YW50aXR5J107XHJcbiAgaWYgKHF1YW50aXR5LmluY2x1ZGVzKGFjdGlvbi50eXBlKSkge1xyXG4gICAgaWYgKHR5cGVvZiBhY3Rpb24ucGF5bG9hZC5xdWFudGl0eSAhPT0gJ251bWJlcicpIHtcclxuICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgIGBJbnZhbGlkIHF1YW50aXR5IHVzZWQgd2l0aCBhY3Rpb24gJHtcclxuICAgICAgICAgIGFjdGlvbi50eXBlXHJcbiAgICAgICAgfTogcXVhbnRpdHkgbXVzdCBiZSBhIG51bWJlci4gVGhlIGN1cnJlbnQgdHlwZSBpcyAke3R5cGVPZihcclxuICAgICAgICAgIGFjdGlvbi5wYXlsb2FkLnF1YW50aXR5XHJcbiAgICAgICAgKX0uYCxcclxuICAgICAgICBhY3Rpb25cclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9IGVsc2UgaWYgKGFjdGlvbi5wYXlsb2FkLnF1YW50aXR5IDwgMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgYEludmFsaWQgcXVhbnRpdHkgdXNlZCB3aXRoIGFjdGlvbiAke1xyXG4gICAgICAgICAgYWN0aW9uLnR5cGVcclxuICAgICAgICB9OiBxdWFudGl0eSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLiBUaGUgY3VycmVudCB2YWx1ZSBpcyAke0pTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgICAgYWN0aW9uLnBheWxvYWQucXVhbnRpdHlcclxuICAgICAgICApfS5gLFxyXG4gICAgICAgIGFjdGlvblxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IGlkID0gWydjYXJ0L2luY3JlbWVudEl0ZW0nLCAnY2FydC9kZWNyZW1lbnRJdGVtJywgJ2NhcnQvcmVtb3ZlSXRlbSddO1xyXG4gIGlmIChcclxuICAgIGlkLmluY2x1ZGVzKGFjdGlvbi50eXBlKSAmJlxyXG4gICAgIShhY3Rpb24ucGF5bG9hZC5pZCBpbiBzdG9yZS5nZXRTdGF0ZSgpLmNhcnREZXRhaWxzKVxyXG4gICkge1xyXG4gICAgY29uc29sZS53YXJuKFxyXG4gICAgICBgSW52YWxpZCBwcm9kdWN0IElEIHVzZWQgd2l0aCBhY3Rpb24gJHtcclxuICAgICAgICBhY3Rpb24udHlwZVxyXG4gICAgICB9OiB0aGUgSUQgbXVzdCBhbHJlYWR5IGJlIGluIHRoZSBjYXJ0LiBUaGUgY3VycmVudCB2YWx1ZSBpcyAke0pTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgIGFjdGlvbi5wYXlsb2FkLmlkXHJcbiAgICAgICl9LmAsXHJcbiAgICAgIGFjdGlvblxyXG4gICAgKTtcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5leHQoYWN0aW9uKVxyXG59O1xuXG5mdW5jdGlvbiBfbnVsbGlzaENvYWxlc2NlKGxocywgcmhzRm4pIHsgaWYgKGxocyAhPSBudWxsKSB7IHJldHVybiBsaHM7IH0gZWxzZSB7IHJldHVybiByaHNGbigpOyB9IH1cclxuYXN5bmMgZnVuY3Rpb24gZmlsdGVyQ2FydChjYXJ0RGV0YWlscywgZmlsdGVyKSB7XHJcbiAgY29uc3QgZmlsdGVyZWRDYXJ0ID0ge307XHJcblxyXG4gIGZvciAoY29uc3Qgc2t1IGluIGNhcnREZXRhaWxzKSB7XHJcbiAgICBjb25zdCBlbnRyeSA9IGNhcnREZXRhaWxzW3NrdV07XHJcbiAgICBpZiAoYXdhaXQgZmlsdGVyKGVudHJ5KSkgZmlsdGVyZWRDYXJ0W3NrdV0gPSBlbnRyeTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmaWx0ZXJlZENhcnRcclxufVxyXG5cclxuZnVuY3Rpb24gbm9vcCgpIHt9XHJcbmZ1bmN0aW9uIGNyZWF0ZU5vb3BTdG9yYWdlKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICBnZXRJdGVtOiBub29wLFxyXG4gICAgc2V0SXRlbTogbm9vcCxcclxuICAgIHJlbW92ZUl0ZW06IG5vb3BcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxvY2FsU3RvcmFnZSgpIHtcclxuICByZXR1cm4ge1xyXG4gICAgYXN5bmMgZ2V0SXRlbShrZXkpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2V0SXRlbShrZXksIHZhbHVlKSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSlcclxuICAgIH0sXHJcbiAgICBhc3luYyByZW1vdmVJdGVtKGtleSkge1xyXG4gICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVNob3BwaW5nQ2FydFN0b3JlKG9wdGlvbnMpIHtcclxuICBvcHRpb25zLnNob3VsZFBlcnNpc3QgPSBfbnVsbGlzaENvYWxlc2NlKG9wdGlvbnMuc2hvdWxkUGVyc2lzdCwgKCkgPT4gKCB0cnVlKSk7XHJcblxyXG4gIGlmICghaXNDbGllbnQpIHtcclxuICAgIHJldHVybiB0b29sa2l0LmNvbmZpZ3VyZVN0b3JlKHtcclxuICAgICAgcmVkdWNlcixcclxuICAgICAgcHJlbG9hZGVkU3RhdGU6IHsgLi4uaW5pdGlhbFN0YXRlLCAuLi5vcHRpb25zIH1cclxuICAgIH0pXHJcbiAgfVxyXG4gIGxldCBzdG9yYWdlO1xyXG4gIGlmIChpc0NsaWVudCkgc3RvcmFnZSA9IG9wdGlvbnMuc3RvcmFnZSB8fCBjcmVhdGVMb2NhbFN0b3JhZ2UoKTtcclxuICBlbHNlIHN0b3JhZ2UgPSBjcmVhdGVOb29wU3RvcmFnZSgpO1xyXG4gIGRlbGV0ZSBvcHRpb25zLnN0b3JhZ2U7XHJcblxyXG4gIGNvbnN0IHBlcnNpc3RDb25maWcgPSB7XHJcbiAgICBrZXk6IF9udWxsaXNoQ29hbGVzY2Uob3B0aW9ucy5wZXJzaXN0S2V5LCAoKSA9PiAoICdyb290JykpLFxyXG4gICAgdmVyc2lvbjogMSxcclxuICAgIHN0b3JhZ2UsXHJcbiAgICB3aGl0ZWxpc3Q6IFsnY2FydENvdW50JywgJ3RvdGFsUHJpY2UnLCAnZm9ybWF0dGVkVG90YWxQcmljZScsICdjYXJ0RGV0YWlscyddXHJcbiAgfTtcclxuICBjb25zdCBwZXJzaXN0ZWRSZWR1Y2VyID0gcmVkdXhQZXJzaXN0LnBlcnNpc3RSZWR1Y2VyKHBlcnNpc3RDb25maWcsIHJlZHVjZXIpO1xyXG5cclxuICBjb25zdCBuZXdJbml0aWFsU3RhdGUgPSB7IC4uLmluaXRpYWxTdGF0ZSwgLi4ub3B0aW9ucyB9O1xyXG4gIHVwZGF0ZUZvcm1hdHRlZFRvdGFsUHJpY2UobmV3SW5pdGlhbFN0YXRlKTtcclxuXHJcbiAgcmV0dXJuIHRvb2xraXQuY29uZmlndXJlU3RvcmUoe1xyXG4gICAgcmVkdWNlcjogb3B0aW9ucy5zaG91bGRQZXJzaXN0ID8gcGVyc2lzdGVkUmVkdWNlciA6IHJlZHVjZXIsXHJcbiAgICBwcmVsb2FkZWRTdGF0ZTogbmV3SW5pdGlhbFN0YXRlLFxyXG4gICAgbWlkZGxld2FyZTogKGdldERlZmF1bHRNaWRkbGV3YXJlKSA9PlxyXG4gICAgICBnZXREZWZhdWx0TWlkZGxld2FyZSh7XHJcbiAgICAgICAgc2VyaWFsaXphYmxlQ2hlY2s6IHtcclxuICAgICAgICAgIGlnbm9yZWRBY3Rpb25zOiBbcmVkdXhQZXJzaXN0LkZMVVNILCByZWR1eFBlcnNpc3QuUkVIWURSQVRFLCByZWR1eFBlcnNpc3QuUEFVU0UsIHJlZHV4UGVyc2lzdC5QRVJTSVNULCByZWR1eFBlcnNpc3QuUFVSR0UsIHJlZHV4UGVyc2lzdC5SRUdJU1RFUl0sXHJcbiAgICAgICAgICBpZ25vcmVkQWN0aW9uUGF0aHM6IFsncGVyc2lzdCddXHJcbiAgICAgICAgfVxyXG4gICAgICB9KS5jb25jYXQoaGFuZGxlU3RyaXBlLCBoYW5kbGVXYXJuaW5ncylcclxuICB9KVxyXG59XG5cbmNvbnN0IF9qc3hGaWxlTmFtZSA9IFwiL1VzZXJzL25pY2tkZWplc3VzL0NvZGUvaG9va3MvdXNlLXNob3BwaW5nLWNhcnQvdXNlLXNob3BwaW5nLWNhcnQvcmVhY3QvaW5kZXguanNcIjtjb25zdCBDYXJ0Q29udGV4dCA9IFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlQ29udGV4dChpbml0aWFsU3RhdGUpO1xyXG5jb25zdCB1c2VTZWxlY3RvciA9IHJlYWN0UmVkdXguY3JlYXRlU2VsZWN0b3JIb29rKENhcnRDb250ZXh0KTtcclxuY29uc3QgdXNlRGlzcGF0Y2ggPSByZWFjdFJlZHV4LmNyZWF0ZURpc3BhdGNoSG9vayhDYXJ0Q29udGV4dCk7XHJcblxyXG5mdW5jdGlvbiBDYXJ0UHJvdmlkZXIoeyBsb2FkaW5nID0gbnVsbCwgY2hpbGRyZW4sIC4uLnByb3BzIH0pIHtcclxuICBjb25zdCBzdG9yZSA9IFJlYWN0X19uYW1lc3BhY2UudXNlTWVtbygoKSA9PiBjcmVhdGVTaG9wcGluZ0NhcnRTdG9yZShwcm9wcyksIFtwcm9wc10pO1xyXG5cclxuICBpZiAoaXNDbGllbnQgJiYgcHJvcHMuc2hvdWxkUGVyc2lzdCkge1xyXG4gICAgY29uc3QgcGVyc2lzdG9yID0gcmVkdXhQZXJzaXN0LnBlcnNpc3RTdG9yZShzdG9yZSk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgUmVhY3RfX25hbWVzcGFjZS5jcmVhdGVFbGVtZW50KHJlYWN0UmVkdXguUHJvdmlkZXIsIHsgY29udGV4dDogQ2FydENvbnRleHQsIHN0b3JlOiBzdG9yZSwgX19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDI5fX1cbiAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQocmVhY3QuUGVyc2lzdEdhdGUsIHtcclxuICAgICAgICAgIHBlcnNpc3RvcjogcGVyc2lzdG9yLFxyXG4gICAgICAgICAgY2hpbGRyZW46IChib290c3RyYXBwZWQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFib290c3RyYXBwZWQpIHJldHVybiBsb2FkaW5nXHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZHJlblxyXG4gICAgICAgICAgfSwgX19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDMwfX1cclxuICAgICAgICApXG4gICAgICApXHJcbiAgICApXHJcbiAgfSBlbHNlIGlmIChpc0NsaWVudCAmJiAhcHJvcHMuc2hvdWxkUGVyc2lzdCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgUmVhY3RfX25hbWVzcGFjZS5jcmVhdGVFbGVtZW50KHJlYWN0UmVkdXguUHJvdmlkZXIsIHsgY29udGV4dDogQ2FydENvbnRleHQsIHN0b3JlOiBzdG9yZSwgX19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDQxfX1cbiAgICAgICAgLCBjaGlsZHJlblxuICAgICAgKVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXNlU2hvcHBpbmdDYXJ0KFxyXG4gIHNlbGVjdG9yID0gKHN0YXRlKSA9PiAoeyAuLi5zdGF0ZSB9KSxcclxuICBlcXVhbGl0eUZuXHJcbikge1xyXG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcclxuICBjb25zdCBjYXJ0U3RhdGUgPSB1c2VTZWxlY3RvcihzZWxlY3RvciwgZXF1YWxpdHlGbik7XHJcblxyXG4gIGNvbnN0IHNob3BwaW5nQ2FydCA9IFJlYWN0X19uYW1lc3BhY2UudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0QWN0aW9ucyA9IHRvb2xraXQuYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbnMsIGRpc3BhdGNoKTtcclxuICAgIHJldHVybiB7IC4uLmNhcnRTdGF0ZSwgLi4uY2FydEFjdGlvbnMgfVxyXG4gIH0sIFtjYXJ0U3RhdGUsIGRpc3BhdGNoXSk7XHJcblxyXG4gIFJlYWN0X19uYW1lc3BhY2UudXNlRGVidWdWYWx1ZShzaG9wcGluZ0NhcnQpO1xyXG4gIHJldHVybiBzaG9wcGluZ0NhcnRcclxufVxyXG5cclxuZnVuY3Rpb24gRGVidWdDYXJ0KHByb3BzKSB7XHJcbiAgY29uc3QgY2FydCA9IHVzZVNob3BwaW5nQ2FydCgoc3RhdGUpID0+IHN0YXRlKTtcclxuICBjb25zdCBjYXJ0UHJvcGVydHlSb3dzID0gT2JqZWN0LmVudHJpZXMoY2FydClcclxuICAgIC5maWx0ZXIoKFssIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlICE9PSAnZnVuY3Rpb24nKVxyXG4gICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoXHJcbiAgICAgIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndHInLCB7IGtleToga2V5LCBfX3NlbGY6IHRoaXMsIF9fc291cmNlOiB7ZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwgbGluZU51bWJlcjogNjl9fVxuICAgICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGQnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDcwfX0sIGtleSlcbiAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ3RkJywge19fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiA3MX19XG4gICAgICAgICAgLCB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnID8gKFxyXG4gICAgICAgICAgICBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHsgb25DbGljazogKCkgPT4gY29uc29sZS5sb2codmFsdWUpLCBfX3NlbGY6IHRoaXMsIF9fc291cmNlOiB7ZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwgbGluZU51bWJlcjogNzN9fSwgXCJMb2cgdmFsdWVcIiApXHJcbiAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSlcclxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxyXG4gICAgKSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgc3R5bGU6IHtcclxuICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICB0b3A6IDUwLFxyXG4gICAgICAgIHJpZ2h0OiA1MCxcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZWVlJyxcclxuICAgICAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcclxuICAgICAgICBtYXhXaWR0aDogMzAwLFxyXG4gICAgICAgIHBhZGRpbmc6IDIwLFxyXG4gICAgICAgIGJvcmRlclNwYWNpbmc6ICcyNXB4IDVweCcsXHJcbiAgICAgICAgb3ZlcmZsb3c6ICdhdXRvJ1xyXG4gICAgICB9LFxyXG4gICAgICAuLi5wcm9wcywgX19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDgyfX1cclxuXG4gICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDk2fX1cbiAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJywge19fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiA5N319XG4gICAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ3RyJywge19fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiA5OH19XG4gICAgICAgICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGgnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDk5fX0sIFwiS2V5XCIpXG4gICAgICAgICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGgnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDEwMH19LCBcIlZhbHVlXCIpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICAgICwgUmVhY3RfX25hbWVzcGFjZS5jcmVhdGVFbGVtZW50KCd0Ym9keScsIHtfX3NlbGY6IHRoaXMsIF9fc291cmNlOiB7ZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwgbGluZU51bWJlcjogMTAzfX0sIGNhcnRQcm9wZXJ0eVJvd3MpXG4gICAgICApXG4gICAgKVxyXG4gIClcclxufVxuXG5leHBvcnRzLkNhcnRDb250ZXh0ID0gQ2FydENvbnRleHQ7XG5leHBvcnRzLkNhcnRQcm92aWRlciA9IENhcnRQcm92aWRlcjtcbmV4cG9ydHMuRGVidWdDYXJ0ID0gRGVidWdDYXJ0O1xuZXhwb3J0cy5hY3Rpb25zID0gYWN0aW9ucztcbmV4cG9ydHMuZmlsdGVyQ2FydCA9IGZpbHRlckNhcnQ7XG5leHBvcnRzLmZvcm1hdEN1cnJlbmN5U3RyaW5nID0gZm9ybWF0Q3VycmVuY3lTdHJpbmc7XG5leHBvcnRzLnVzZURpc3BhdGNoID0gdXNlRGlzcGF0Y2g7XG5leHBvcnRzLnVzZVNlbGVjdG9yID0gdXNlU2VsZWN0b3I7XG5leHBvcnRzLnVzZVNob3BwaW5nQ2FydCA9IHVzZVNob3BwaW5nQ2FydDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/use-shopping-cart/dist/react.js\n");

/***/ })

};
;