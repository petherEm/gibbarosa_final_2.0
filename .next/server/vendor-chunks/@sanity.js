/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@sanity";
exports.ids = ["vendor-chunks/@sanity"];
exports.modules = {

/***/ "(ssr)/./node_modules/@sanity/image-url/lib/node/builder.js":
/*!************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/builder.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ImageUrlBuilder = void 0;\nvar urlForImage_1 = __importStar(__webpack_require__(/*! ./urlForImage */ \"(ssr)/./node_modules/@sanity/image-url/lib/node/urlForImage.js\"));\nvar validFits = ['clip', 'crop', 'fill', 'fillmax', 'max', 'scale', 'min'];\nvar validCrops = ['top', 'bottom', 'left', 'right', 'center', 'focalpoint', 'entropy'];\nvar validAutoModes = ['format'];\nfunction isSanityModernClientLike(client) {\n    return client && 'config' in client ? typeof client.config === 'function' : false;\n}\nfunction isSanityClientLike(client) {\n    return client && 'clientConfig' in client ? typeof client.clientConfig === 'object' : false;\n}\nfunction rewriteSpecName(key) {\n    var specs = urlForImage_1.SPEC_NAME_TO_URL_NAME_MAPPINGS;\n    for (var _i = 0, specs_1 = specs; _i < specs_1.length; _i++) {\n        var entry = specs_1[_i];\n        var specName = entry[0], param = entry[1];\n        if (key === specName || key === param) {\n            return specName;\n        }\n    }\n    return key;\n}\nfunction urlBuilder(options) {\n    // Did we get a modernish client?\n    if (isSanityModernClientLike(options)) {\n        // Inherit config from client\n        var _a = options.config(), apiUrl = _a.apiHost, projectId = _a.projectId, dataset = _a.dataset;\n        var apiHost = apiUrl || 'https://api.sanity.io';\n        return new ImageUrlBuilder(null, {\n            baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n            projectId: projectId,\n            dataset: dataset,\n        });\n    }\n    // Did we get a SanityClient?\n    var client = options;\n    if (isSanityClientLike(client)) {\n        // Inherit config from client\n        var _b = client.clientConfig, apiUrl = _b.apiHost, projectId = _b.projectId, dataset = _b.dataset;\n        var apiHost = apiUrl || 'https://api.sanity.io';\n        return new ImageUrlBuilder(null, {\n            baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n            projectId: projectId,\n            dataset: dataset,\n        });\n    }\n    // Or just accept the options as given\n    return new ImageUrlBuilder(null, options);\n}\nexports[\"default\"] = urlBuilder;\nvar ImageUrlBuilder = /** @class */ (function () {\n    function ImageUrlBuilder(parent, options) {\n        this.options = parent\n            ? __assign(__assign({}, (parent.options || {})), (options || {})) : __assign({}, (options || {})); // Copy options\n    }\n    ImageUrlBuilder.prototype.withOptions = function (options) {\n        var baseUrl = options.baseUrl || this.options.baseUrl;\n        var newOptions = { baseUrl: baseUrl };\n        for (var key in options) {\n            if (options.hasOwnProperty(key)) {\n                var specKey = rewriteSpecName(key);\n                newOptions[specKey] = options[key];\n            }\n        }\n        return new ImageUrlBuilder(this, __assign({ baseUrl: baseUrl }, newOptions));\n    };\n    // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n    // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n    // studio, the 'image'-document must be provided.\n    ImageUrlBuilder.prototype.image = function (source) {\n        return this.withOptions({ source: source });\n    };\n    // Specify the dataset\n    ImageUrlBuilder.prototype.dataset = function (dataset) {\n        return this.withOptions({ dataset: dataset });\n    };\n    // Specify the projectId\n    ImageUrlBuilder.prototype.projectId = function (projectId) {\n        return this.withOptions({ projectId: projectId });\n    };\n    // Specify background color\n    ImageUrlBuilder.prototype.bg = function (bg) {\n        return this.withOptions({ bg: bg });\n    };\n    // Set DPR scaling factor\n    ImageUrlBuilder.prototype.dpr = function (dpr) {\n        // A DPR of 1 is the default - so only include it if we have a different value\n        return this.withOptions(dpr && dpr !== 1 ? { dpr: dpr } : {});\n    };\n    // Specify the width of the image in pixels\n    ImageUrlBuilder.prototype.width = function (width) {\n        return this.withOptions({ width: width });\n    };\n    // Specify the height of the image in pixels\n    ImageUrlBuilder.prototype.height = function (height) {\n        return this.withOptions({ height: height });\n    };\n    // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n    ImageUrlBuilder.prototype.focalPoint = function (x, y) {\n        return this.withOptions({ focalPoint: { x: x, y: y } });\n    };\n    ImageUrlBuilder.prototype.maxWidth = function (maxWidth) {\n        return this.withOptions({ maxWidth: maxWidth });\n    };\n    ImageUrlBuilder.prototype.minWidth = function (minWidth) {\n        return this.withOptions({ minWidth: minWidth });\n    };\n    ImageUrlBuilder.prototype.maxHeight = function (maxHeight) {\n        return this.withOptions({ maxHeight: maxHeight });\n    };\n    ImageUrlBuilder.prototype.minHeight = function (minHeight) {\n        return this.withOptions({ minHeight: minHeight });\n    };\n    // Specify width and height in pixels\n    ImageUrlBuilder.prototype.size = function (width, height) {\n        return this.withOptions({ width: width, height: height });\n    };\n    // Specify blur between 0 and 100\n    ImageUrlBuilder.prototype.blur = function (blur) {\n        return this.withOptions({ blur: blur });\n    };\n    ImageUrlBuilder.prototype.sharpen = function (sharpen) {\n        return this.withOptions({ sharpen: sharpen });\n    };\n    // Specify the desired rectangle of the image\n    ImageUrlBuilder.prototype.rect = function (left, top, width, height) {\n        return this.withOptions({ rect: { left: left, top: top, width: width, height: height } });\n    };\n    // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n    ImageUrlBuilder.prototype.format = function (format) {\n        return this.withOptions({ format: format });\n    };\n    ImageUrlBuilder.prototype.invert = function (invert) {\n        return this.withOptions({ invert: invert });\n    };\n    // Rotation in degrees 0, 90, 180, 270\n    ImageUrlBuilder.prototype.orientation = function (orientation) {\n        return this.withOptions({ orientation: orientation });\n    };\n    // Compression quality 0-100\n    ImageUrlBuilder.prototype.quality = function (quality) {\n        return this.withOptions({ quality: quality });\n    };\n    // Make it a download link. Parameter is default filename.\n    ImageUrlBuilder.prototype.forceDownload = function (download) {\n        return this.withOptions({ download: download });\n    };\n    // Flip image horizontally\n    ImageUrlBuilder.prototype.flipHorizontal = function () {\n        return this.withOptions({ flipHorizontal: true });\n    };\n    // Flip image vertically\n    ImageUrlBuilder.prototype.flipVertical = function () {\n        return this.withOptions({ flipVertical: true });\n    };\n    // Ignore crop/hotspot from image record, even when present\n    ImageUrlBuilder.prototype.ignoreImageParams = function () {\n        return this.withOptions({ ignoreImageParams: true });\n    };\n    ImageUrlBuilder.prototype.fit = function (value) {\n        if (validFits.indexOf(value) === -1) {\n            throw new Error(\"Invalid fit mode \\\"\".concat(value, \"\\\"\"));\n        }\n        return this.withOptions({ fit: value });\n    };\n    ImageUrlBuilder.prototype.crop = function (value) {\n        if (validCrops.indexOf(value) === -1) {\n            throw new Error(\"Invalid crop mode \\\"\".concat(value, \"\\\"\"));\n        }\n        return this.withOptions({ crop: value });\n    };\n    // Saturation\n    ImageUrlBuilder.prototype.saturation = function (saturation) {\n        return this.withOptions({ saturation: saturation });\n    };\n    ImageUrlBuilder.prototype.auto = function (value) {\n        if (validAutoModes.indexOf(value) === -1) {\n            throw new Error(\"Invalid auto mode \\\"\".concat(value, \"\\\"\"));\n        }\n        return this.withOptions({ auto: value });\n    };\n    // Specify the number of pixels to pad the image\n    ImageUrlBuilder.prototype.pad = function (pad) {\n        return this.withOptions({ pad: pad });\n    };\n    // Gets the url based on the submitted parameters\n    ImageUrlBuilder.prototype.url = function () {\n        return (0, urlForImage_1.default)(this.options);\n    };\n    // Alias for url()\n    ImageUrlBuilder.prototype.toString = function () {\n        return this.url();\n    };\n    return ImageUrlBuilder;\n}());\nexports.ImageUrlBuilder = ImageUrlBuilder;\n//# sourceMappingURL=builder.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvYnVpbGRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvQ0FBb0MsZ0JBQWdCO0FBQ3ZGLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsMENBQTBDLDRCQUE0QjtBQUN0RSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCO0FBQ3ZCLGlDQUFpQyxtQkFBTyxDQUFDLHFGQUFlO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUJBQXFCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsdUJBQXVCLGtCQUFrQixnQkFBZ0IsZ0JBQWdCLElBQUk7QUFDL0c7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnQkFBZ0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGtCQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxRQUFRO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELFdBQVcsSUFBSTtBQUNwRTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsY0FBYztBQUNoRDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0JBQWdCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxjQUFjLGNBQWM7QUFDOUQ7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0I7QUFDdEQ7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0I7QUFDdEQ7QUFDQTtBQUNBLGtDQUFrQyxzQkFBc0I7QUFDeEQ7QUFDQTtBQUNBLGtDQUFrQyxzQkFBc0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDhCQUE4QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsWUFBWTtBQUM5QztBQUNBO0FBQ0Esa0NBQWtDLGtCQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsUUFBUSxzREFBc0Q7QUFDaEc7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGdCQUFnQjtBQUNsRDtBQUNBO0FBQ0Esa0NBQWtDLGdCQUFnQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMEJBQTBCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxrQkFBa0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9CQUFvQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHlCQUF5QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFlBQVk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxhQUFhO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3QkFBd0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxhQUFhO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHVCQUF1QjtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvaW1hZ2UtdXJsL2xpYi9ub2RlL2J1aWxkZXIuanM/NTA0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSW1hZ2VVcmxCdWlsZGVyID0gdm9pZCAwO1xudmFyIHVybEZvckltYWdlXzEgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vdXJsRm9ySW1hZ2VcIikpO1xudmFyIHZhbGlkRml0cyA9IFsnY2xpcCcsICdjcm9wJywgJ2ZpbGwnLCAnZmlsbG1heCcsICdtYXgnLCAnc2NhbGUnLCAnbWluJ107XG52YXIgdmFsaWRDcm9wcyA9IFsndG9wJywgJ2JvdHRvbScsICdsZWZ0JywgJ3JpZ2h0JywgJ2NlbnRlcicsICdmb2NhbHBvaW50JywgJ2VudHJvcHknXTtcbnZhciB2YWxpZEF1dG9Nb2RlcyA9IFsnZm9ybWF0J107XG5mdW5jdGlvbiBpc1Nhbml0eU1vZGVybkNsaWVudExpa2UoY2xpZW50KSB7XG4gICAgcmV0dXJuIGNsaWVudCAmJiAnY29uZmlnJyBpbiBjbGllbnQgPyB0eXBlb2YgY2xpZW50LmNvbmZpZyA9PT0gJ2Z1bmN0aW9uJyA6IGZhbHNlO1xufVxuZnVuY3Rpb24gaXNTYW5pdHlDbGllbnRMaWtlKGNsaWVudCkge1xuICAgIHJldHVybiBjbGllbnQgJiYgJ2NsaWVudENvbmZpZycgaW4gY2xpZW50ID8gdHlwZW9mIGNsaWVudC5jbGllbnRDb25maWcgPT09ICdvYmplY3QnIDogZmFsc2U7XG59XG5mdW5jdGlvbiByZXdyaXRlU3BlY05hbWUoa2V5KSB7XG4gICAgdmFyIHNwZWNzID0gdXJsRm9ySW1hZ2VfMS5TUEVDX05BTUVfVE9fVVJMX05BTUVfTUFQUElOR1M7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBzcGVjc18xID0gc3BlY3M7IF9pIDwgc3BlY3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gc3BlY3NfMVtfaV07XG4gICAgICAgIHZhciBzcGVjTmFtZSA9IGVudHJ5WzBdLCBwYXJhbSA9IGVudHJ5WzFdO1xuICAgICAgICBpZiAoa2V5ID09PSBzcGVjTmFtZSB8fCBrZXkgPT09IHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gc3BlY05hbWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbn1cbmZ1bmN0aW9uIHVybEJ1aWxkZXIob3B0aW9ucykge1xuICAgIC8vIERpZCB3ZSBnZXQgYSBtb2Rlcm5pc2ggY2xpZW50P1xuICAgIGlmIChpc1Nhbml0eU1vZGVybkNsaWVudExpa2Uob3B0aW9ucykpIHtcbiAgICAgICAgLy8gSW5oZXJpdCBjb25maWcgZnJvbSBjbGllbnRcbiAgICAgICAgdmFyIF9hID0gb3B0aW9ucy5jb25maWcoKSwgYXBpVXJsID0gX2EuYXBpSG9zdCwgcHJvamVjdElkID0gX2EucHJvamVjdElkLCBkYXRhc2V0ID0gX2EuZGF0YXNldDtcbiAgICAgICAgdmFyIGFwaUhvc3QgPSBhcGlVcmwgfHwgJ2h0dHBzOi8vYXBpLnNhbml0eS5pbyc7XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VVcmxCdWlsZGVyKG51bGwsIHtcbiAgICAgICAgICAgIGJhc2VVcmw6IGFwaUhvc3QucmVwbGFjZSgvXmh0dHBzOlxcL1xcL2FwaVxcLi8sICdodHRwczovL2Nkbi4nKSxcbiAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdElkLFxuICAgICAgICAgICAgZGF0YXNldDogZGF0YXNldCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIERpZCB3ZSBnZXQgYSBTYW5pdHlDbGllbnQ/XG4gICAgdmFyIGNsaWVudCA9IG9wdGlvbnM7XG4gICAgaWYgKGlzU2FuaXR5Q2xpZW50TGlrZShjbGllbnQpKSB7XG4gICAgICAgIC8vIEluaGVyaXQgY29uZmlnIGZyb20gY2xpZW50XG4gICAgICAgIHZhciBfYiA9IGNsaWVudC5jbGllbnRDb25maWcsIGFwaVVybCA9IF9iLmFwaUhvc3QsIHByb2plY3RJZCA9IF9iLnByb2plY3RJZCwgZGF0YXNldCA9IF9iLmRhdGFzZXQ7XG4gICAgICAgIHZhciBhcGlIb3N0ID0gYXBpVXJsIHx8ICdodHRwczovL2FwaS5zYW5pdHkuaW8nO1xuICAgICAgICByZXR1cm4gbmV3IEltYWdlVXJsQnVpbGRlcihudWxsLCB7XG4gICAgICAgICAgICBiYXNlVXJsOiBhcGlIb3N0LnJlcGxhY2UoL15odHRwczpcXC9cXC9hcGlcXC4vLCAnaHR0cHM6Ly9jZG4uJyksXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3RJZCxcbiAgICAgICAgICAgIGRhdGFzZXQ6IGRhdGFzZXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBPciBqdXN0IGFjY2VwdCB0aGUgb3B0aW9ucyBhcyBnaXZlblxuICAgIHJldHVybiBuZXcgSW1hZ2VVcmxCdWlsZGVyKG51bGwsIG9wdGlvbnMpO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gdXJsQnVpbGRlcjtcbnZhciBJbWFnZVVybEJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSW1hZ2VVcmxCdWlsZGVyKHBhcmVudCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBwYXJlbnRcbiAgICAgICAgICAgID8gX19hc3NpZ24oX19hc3NpZ24oe30sIChwYXJlbnQub3B0aW9ucyB8fCB7fSkpLCAob3B0aW9ucyB8fCB7fSkpIDogX19hc3NpZ24oe30sIChvcHRpb25zIHx8IHt9KSk7IC8vIENvcHkgb3B0aW9uc1xuICAgIH1cbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLndpdGhPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGJhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmwgfHwgdGhpcy5vcHRpb25zLmJhc2VVcmw7XG4gICAgICAgIHZhciBuZXdPcHRpb25zID0geyBiYXNlVXJsOiBiYXNlVXJsIH07XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWNLZXkgPSByZXdyaXRlU3BlY05hbWUoa2V5KTtcbiAgICAgICAgICAgICAgICBuZXdPcHRpb25zW3NwZWNLZXldID0gb3B0aW9uc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VVcmxCdWlsZGVyKHRoaXMsIF9fYXNzaWduKHsgYmFzZVVybDogYmFzZVVybCB9LCBuZXdPcHRpb25zKSk7XG4gICAgfTtcbiAgICAvLyBUaGUgaW1hZ2UgdG8gYmUgcmVwcmVzZW50ZWQuIEFjY2VwdHMgYSBTYW5pdHkgJ2ltYWdlJy1kb2N1bWVudCwgJ2Fzc2V0Jy1kb2N1bWVudCBvclxuICAgIC8vIF9pZCBvZiBhc3NldC4gVG8gZ2V0IHRoZSBiZW5lZml0IG9mIGF1dG9tYXRpYyBob3Qtc3BvdC9jcm9wIGludGVncmF0aW9uIHdpdGggdGhlIGNvbnRlbnRcbiAgICAvLyBzdHVkaW8sIHRoZSAnaW1hZ2UnLWRvY3VtZW50IG11c3QgYmUgcHJvdmlkZWQuXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5pbWFnZSA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBzb3VyY2U6IHNvdXJjZSB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgdGhlIGRhdGFzZXRcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmRhdGFzZXQgPSBmdW5jdGlvbiAoZGF0YXNldCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGRhdGFzZXQ6IGRhdGFzZXQgfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBwcm9qZWN0SWRcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnByb2plY3RJZCA9IGZ1bmN0aW9uIChwcm9qZWN0SWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBwcm9qZWN0SWQ6IHByb2plY3RJZCB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgYmFja2dyb3VuZCBjb2xvclxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuYmcgPSBmdW5jdGlvbiAoYmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBiZzogYmcgfSk7XG4gICAgfTtcbiAgICAvLyBTZXQgRFBSIHNjYWxpbmcgZmFjdG9yXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5kcHIgPSBmdW5jdGlvbiAoZHByKSB7XG4gICAgICAgIC8vIEEgRFBSIG9mIDEgaXMgdGhlIGRlZmF1bHQgLSBzbyBvbmx5IGluY2x1ZGUgaXQgaWYgd2UgaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZVxuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyhkcHIgJiYgZHByICE9PSAxID8geyBkcHI6IGRwciB9IDoge30pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSB0aGUgd2lkdGggb2YgdGhlIGltYWdlIGluIHBpeGVsc1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUud2lkdGggPSBmdW5jdGlvbiAod2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyB3aWR0aDogd2lkdGggfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBoZWlnaHQgb2YgdGhlIGltYWdlIGluIHBpeGVsc1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGhlaWdodDogaGVpZ2h0IH0pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSBmb2NhbCBwb2ludCBpbiBmcmFjdGlvbiBvZiBpbWFnZSBkaW1lbnNpb25zLiBFYWNoIGNvbXBvbmVudCAwLjAtMS4wXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5mb2NhbFBvaW50ID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBmb2NhbFBvaW50OiB7IHg6IHgsIHk6IHkgfSB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUubWF4V2lkdGggPSBmdW5jdGlvbiAobWF4V2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBtYXhXaWR0aDogbWF4V2lkdGggfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLm1pbldpZHRoID0gZnVuY3Rpb24gKG1pbldpZHRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgbWluV2lkdGg6IG1pbldpZHRoIH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5tYXhIZWlnaHQgPSBmdW5jdGlvbiAobWF4SGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgbWF4SGVpZ2h0OiBtYXhIZWlnaHQgfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLm1pbkhlaWdodCA9IGZ1bmN0aW9uIChtaW5IZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBtaW5IZWlnaHQ6IG1pbkhlaWdodCB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgd2lkdGggYW5kIGhlaWdodCBpbiBwaXhlbHNcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IGJsdXIgYmV0d2VlbiAwIGFuZCAxMDBcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmJsdXIgPSBmdW5jdGlvbiAoYmx1cikge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGJsdXI6IGJsdXIgfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnNoYXJwZW4gPSBmdW5jdGlvbiAoc2hhcnBlbikge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHNoYXJwZW46IHNoYXJwZW4gfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBkZXNpcmVkIHJlY3RhbmdsZSBvZiB0aGUgaW1hZ2VcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnJlY3QgPSBmdW5jdGlvbiAobGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgcmVjdDogeyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9IH0pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSB0aGUgaW1hZ2UgZm9ybWF0IG9mIHRoZSBpbWFnZS4gJ2pwZycsICdwanBnJywgJ3BuZycsICd3ZWJwJ1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGZvcm1hdDogZm9ybWF0IH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoaW52ZXJ0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgaW52ZXJ0OiBpbnZlcnQgfSk7XG4gICAgfTtcbiAgICAvLyBSb3RhdGlvbiBpbiBkZWdyZWVzIDAsIDkwLCAxODAsIDI3MFxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbiAob3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBvcmllbnRhdGlvbjogb3JpZW50YXRpb24gfSk7XG4gICAgfTtcbiAgICAvLyBDb21wcmVzc2lvbiBxdWFsaXR5IDAtMTAwXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5xdWFsaXR5ID0gZnVuY3Rpb24gKHF1YWxpdHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBxdWFsaXR5OiBxdWFsaXR5IH0pO1xuICAgIH07XG4gICAgLy8gTWFrZSBpdCBhIGRvd25sb2FkIGxpbmsuIFBhcmFtZXRlciBpcyBkZWZhdWx0IGZpbGVuYW1lLlxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZm9yY2VEb3dubG9hZCA9IGZ1bmN0aW9uIChkb3dubG9hZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGRvd25sb2FkOiBkb3dubG9hZCB9KTtcbiAgICB9O1xuICAgIC8vIEZsaXAgaW1hZ2UgaG9yaXpvbnRhbGx5XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5mbGlwSG9yaXpvbnRhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBmbGlwSG9yaXpvbnRhbDogdHJ1ZSB9KTtcbiAgICB9O1xuICAgIC8vIEZsaXAgaW1hZ2UgdmVydGljYWxseVxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZmxpcFZlcnRpY2FsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGZsaXBWZXJ0aWNhbDogdHJ1ZSB9KTtcbiAgICB9O1xuICAgIC8vIElnbm9yZSBjcm9wL2hvdHNwb3QgZnJvbSBpbWFnZSByZWNvcmQsIGV2ZW4gd2hlbiBwcmVzZW50XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5pZ25vcmVJbWFnZVBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBpZ25vcmVJbWFnZVBhcmFtczogdHJ1ZSB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZml0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWxpZEZpdHMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZpdCBtb2RlIFxcXCJcIi5jb25jYXQodmFsdWUsIFwiXFxcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBmaXQ6IHZhbHVlIH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWxpZENyb3BzLmluZGV4T2YodmFsdWUpID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjcm9wIG1vZGUgXFxcIlwiLmNvbmNhdCh2YWx1ZSwgXCJcXFwiXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGNyb3A6IHZhbHVlIH0pO1xuICAgIH07XG4gICAgLy8gU2F0dXJhdGlvblxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuc2F0dXJhdGlvbiA9IGZ1bmN0aW9uIChzYXR1cmF0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgc2F0dXJhdGlvbjogc2F0dXJhdGlvbiB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuYXV0byA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsaWRBdXRvTW9kZXMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGF1dG8gbW9kZSBcXFwiXCIuY29uY2F0KHZhbHVlLCBcIlxcXCJcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgYXV0bzogdmFsdWUgfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBudW1iZXIgb2YgcGl4ZWxzIHRvIHBhZCB0aGUgaW1hZ2VcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnBhZCA9IGZ1bmN0aW9uIChwYWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBwYWQ6IHBhZCB9KTtcbiAgICB9O1xuICAgIC8vIEdldHMgdGhlIHVybCBiYXNlZCBvbiB0aGUgc3VibWl0dGVkIHBhcmFtZXRlcnNcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICgwLCB1cmxGb3JJbWFnZV8xLmRlZmF1bHQpKHRoaXMub3B0aW9ucyk7XG4gICAgfTtcbiAgICAvLyBBbGlhcyBmb3IgdXJsKClcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmwoKTtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVVybEJ1aWxkZXI7XG59KCkpO1xuZXhwb3J0cy5JbWFnZVVybEJ1aWxkZXIgPSBJbWFnZVVybEJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/image-url/lib/node/builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/image-url/lib/node/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/index.js ***!
  \**********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar builder_1 = __importDefault(__webpack_require__(/*! ./builder */ \"(ssr)/./node_modules/@sanity/image-url/lib/node/builder.js\"));\nmodule.exports = builder_1.default;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLGdDQUFnQyxtQkFBTyxDQUFDLDZFQUFXO0FBQ25EO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9pbmRleC5qcz9mMDc4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xudmFyIGJ1aWxkZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9idWlsZGVyXCIpKTtcbm1vZHVsZS5leHBvcnRzID0gYnVpbGRlcl8xLmRlZmF1bHQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/image-url/lib/node/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/parseAssetId.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar example = 'image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg';\nfunction parseAssetId(ref) {\n    var _a = ref.split('-'), id = _a[1], dimensionString = _a[2], format = _a[3];\n    if (!id || !dimensionString || !format) {\n        throw new Error(\"Malformed asset _ref '\".concat(ref, \"'. Expected an id like \\\"\").concat(example, \"\\\".\"));\n    }\n    var _b = dimensionString.split('x'), imgWidthStr = _b[0], imgHeightStr = _b[1];\n    var width = +imgWidthStr;\n    var height = +imgHeightStr;\n    var isValidAssetId = isFinite(width) && isFinite(height);\n    if (!isValidAssetId) {\n        throw new Error(\"Malformed asset _ref '\".concat(ref, \"'. Expected an id like \\\"\").concat(example, \"\\\".\"));\n    }\n    return { id: id, width: width, height: height, format: format };\n}\nexports[\"default\"] = parseAssetId;\n//# sourceMappingURL=parseAssetId.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvcGFyc2VBc3NldElkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvaW1hZ2UtdXJsL2xpYi9ub2RlL3BhcnNlQXNzZXRJZC5qcz9mODZkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGV4YW1wbGUgPSAnaW1hZ2UtVGI5RXc4Q1hJd2FZNlIxa2pNdkkwdVJSLTIwMDB4MzAwMC1qcGcnO1xuZnVuY3Rpb24gcGFyc2VBc3NldElkKHJlZikge1xuICAgIHZhciBfYSA9IHJlZi5zcGxpdCgnLScpLCBpZCA9IF9hWzFdLCBkaW1lbnNpb25TdHJpbmcgPSBfYVsyXSwgZm9ybWF0ID0gX2FbM107XG4gICAgaWYgKCFpZCB8fCAhZGltZW5zaW9uU3RyaW5nIHx8ICFmb3JtYXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFsZm9ybWVkIGFzc2V0IF9yZWYgJ1wiLmNvbmNhdChyZWYsIFwiJy4gRXhwZWN0ZWQgYW4gaWQgbGlrZSBcXFwiXCIpLmNvbmNhdChleGFtcGxlLCBcIlxcXCIuXCIpKTtcbiAgICB9XG4gICAgdmFyIF9iID0gZGltZW5zaW9uU3RyaW5nLnNwbGl0KCd4JyksIGltZ1dpZHRoU3RyID0gX2JbMF0sIGltZ0hlaWdodFN0ciA9IF9iWzFdO1xuICAgIHZhciB3aWR0aCA9ICtpbWdXaWR0aFN0cjtcbiAgICB2YXIgaGVpZ2h0ID0gK2ltZ0hlaWdodFN0cjtcbiAgICB2YXIgaXNWYWxpZEFzc2V0SWQgPSBpc0Zpbml0ZSh3aWR0aCkgJiYgaXNGaW5pdGUoaGVpZ2h0KTtcbiAgICBpZiAoIWlzVmFsaWRBc3NldElkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBhc3NldCBfcmVmICdcIi5jb25jYXQocmVmLCBcIicuIEV4cGVjdGVkIGFuIGlkIGxpa2UgXFxcIlwiKS5jb25jYXQoZXhhbXBsZSwgXCJcXFwiLlwiKSk7XG4gICAgfVxuICAgIHJldHVybiB7IGlkOiBpZCwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgZm9ybWF0OiBmb3JtYXQgfTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHBhcnNlQXNzZXRJZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlQXNzZXRJZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/image-url/lib/node/parseSource.js":
/*!****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/parseSource.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar isRef = function (src) {\n    var source = src;\n    return source ? typeof source._ref === 'string' : false;\n};\nvar isAsset = function (src) {\n    var source = src;\n    return source ? typeof source._id === 'string' : false;\n};\nvar isAssetStub = function (src) {\n    var source = src;\n    return source && source.asset ? typeof source.asset.url === 'string' : false;\n};\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nfunction parseSource(source) {\n    if (!source) {\n        return null;\n    }\n    var image;\n    if (typeof source === 'string' && isUrl(source)) {\n        // Someone passed an existing image url?\n        image = {\n            asset: { _ref: urlToId(source) },\n        };\n    }\n    else if (typeof source === 'string') {\n        // Just an asset id\n        image = {\n            asset: { _ref: source },\n        };\n    }\n    else if (isRef(source)) {\n        // We just got passed an asset directly\n        image = {\n            asset: source,\n        };\n    }\n    else if (isAsset(source)) {\n        // If we were passed an image asset document\n        image = {\n            asset: {\n                _ref: source._id || '',\n            },\n        };\n    }\n    else if (isAssetStub(source)) {\n        // If we were passed a partial asset (`url`, but no `_id`)\n        image = {\n            asset: {\n                _ref: urlToId(source.asset.url),\n            },\n        };\n    }\n    else if (typeof source.asset === 'object') {\n        // Probably an actual image with materialized asset\n        image = __assign({}, source);\n    }\n    else {\n        // We got something that does not look like an image, or it is an image\n        // that currently isn't sporting an asset.\n        return null;\n    }\n    var img = source;\n    if (img.crop) {\n        image.crop = img.crop;\n    }\n    if (img.hotspot) {\n        image.hotspot = img.hotspot;\n    }\n    return applyDefaults(image);\n}\nexports[\"default\"] = parseSource;\nfunction isUrl(url) {\n    return /^https?:\\/\\//.test(\"\".concat(url));\n}\nfunction urlToId(url) {\n    var parts = url.split('/').slice(-1);\n    return \"image-\".concat(parts[0]).replace(/\\.([a-z]+)$/, '-$1');\n}\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image) {\n    if (image.crop && image.hotspot) {\n        return image;\n    }\n    // We need to pad in default values for crop or hotspot\n    var result = __assign({}, image);\n    if (!result.crop) {\n        result.crop = {\n            left: 0,\n            top: 0,\n            bottom: 0,\n            right: 0,\n        };\n    }\n    if (!result.hotspot) {\n        result.hotspot = {\n            x: 0.5,\n            y: 0.5,\n            height: 1.0,\n            width: 1.0,\n        };\n    }\n    return result;\n}\n//# sourceMappingURL=parseSource.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvcGFyc2VTb3VyY2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixjQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9wYXJzZVNvdXJjZS5qcz9mYTk1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBpc1JlZiA9IGZ1bmN0aW9uIChzcmMpIHtcbiAgICB2YXIgc291cmNlID0gc3JjO1xuICAgIHJldHVybiBzb3VyY2UgPyB0eXBlb2Ygc291cmNlLl9yZWYgPT09ICdzdHJpbmcnIDogZmFsc2U7XG59O1xudmFyIGlzQXNzZXQgPSBmdW5jdGlvbiAoc3JjKSB7XG4gICAgdmFyIHNvdXJjZSA9IHNyYztcbiAgICByZXR1cm4gc291cmNlID8gdHlwZW9mIHNvdXJjZS5faWQgPT09ICdzdHJpbmcnIDogZmFsc2U7XG59O1xudmFyIGlzQXNzZXRTdHViID0gZnVuY3Rpb24gKHNyYykge1xuICAgIHZhciBzb3VyY2UgPSBzcmM7XG4gICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2UuYXNzZXQgPyB0eXBlb2Ygc291cmNlLmFzc2V0LnVybCA9PT0gJ3N0cmluZycgOiBmYWxzZTtcbn07XG4vLyBDb252ZXJ0IGFuIGFzc2V0LWlkLCBhc3NldCBvciBpbWFnZSB0byBhbiBpbWFnZSByZWNvcmQgc3VpdGFibGUgZm9yIHByb2Nlc3Npbmdcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiBwYXJzZVNvdXJjZShzb3VyY2UpIHtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIGltYWdlO1xuICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJyAmJiBpc1VybChzb3VyY2UpKSB7XG4gICAgICAgIC8vIFNvbWVvbmUgcGFzc2VkIGFuIGV4aXN0aW5nIGltYWdlIHVybD9cbiAgICAgICAgaW1hZ2UgPSB7XG4gICAgICAgICAgICBhc3NldDogeyBfcmVmOiB1cmxUb0lkKHNvdXJjZSkgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gSnVzdCBhbiBhc3NldCBpZFxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiB7IF9yZWY6IHNvdXJjZSB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1JlZihzb3VyY2UpKSB7XG4gICAgICAgIC8vIFdlIGp1c3QgZ290IHBhc3NlZCBhbiBhc3NldCBkaXJlY3RseVxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiBzb3VyY2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXNzZXQoc291cmNlKSkge1xuICAgICAgICAvLyBJZiB3ZSB3ZXJlIHBhc3NlZCBhbiBpbWFnZSBhc3NldCBkb2N1bWVudFxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgICAgX3JlZjogc291cmNlLl9pZCB8fCAnJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXNzZXRTdHViKHNvdXJjZSkpIHtcbiAgICAgICAgLy8gSWYgd2Ugd2VyZSBwYXNzZWQgYSBwYXJ0aWFsIGFzc2V0IChgdXJsYCwgYnV0IG5vIGBfaWRgKVxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgICAgX3JlZjogdXJsVG9JZChzb3VyY2UuYXNzZXQudXJsKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UuYXNzZXQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIFByb2JhYmx5IGFuIGFjdHVhbCBpbWFnZSB3aXRoIG1hdGVyaWFsaXplZCBhc3NldFxuICAgICAgICBpbWFnZSA9IF9fYXNzaWduKHt9LCBzb3VyY2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gV2UgZ290IHNvbWV0aGluZyB0aGF0IGRvZXMgbm90IGxvb2sgbGlrZSBhbiBpbWFnZSwgb3IgaXQgaXMgYW4gaW1hZ2VcbiAgICAgICAgLy8gdGhhdCBjdXJyZW50bHkgaXNuJ3Qgc3BvcnRpbmcgYW4gYXNzZXQuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgaW1nID0gc291cmNlO1xuICAgIGlmIChpbWcuY3JvcCkge1xuICAgICAgICBpbWFnZS5jcm9wID0gaW1nLmNyb3A7XG4gICAgfVxuICAgIGlmIChpbWcuaG90c3BvdCkge1xuICAgICAgICBpbWFnZS5ob3RzcG90ID0gaW1nLmhvdHNwb3Q7XG4gICAgfVxuICAgIHJldHVybiBhcHBseURlZmF1bHRzKGltYWdlKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHBhcnNlU291cmNlO1xuZnVuY3Rpb24gaXNVcmwodXJsKSB7XG4gICAgcmV0dXJuIC9eaHR0cHM/OlxcL1xcLy8udGVzdChcIlwiLmNvbmNhdCh1cmwpKTtcbn1cbmZ1bmN0aW9uIHVybFRvSWQodXJsKSB7XG4gICAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KCcvJykuc2xpY2UoLTEpO1xuICAgIHJldHVybiBcImltYWdlLVwiLmNvbmNhdChwYXJ0c1swXSkucmVwbGFjZSgvXFwuKFthLXpdKykkLywgJy0kMScpO1xufVxuLy8gTW9jayBjcm9wIGFuZCBob3RzcG90IGlmIGltYWdlIGxhY2tzIGl0XG5mdW5jdGlvbiBhcHBseURlZmF1bHRzKGltYWdlKSB7XG4gICAgaWYgKGltYWdlLmNyb3AgJiYgaW1hZ2UuaG90c3BvdCkge1xuICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgfVxuICAgIC8vIFdlIG5lZWQgdG8gcGFkIGluIGRlZmF1bHQgdmFsdWVzIGZvciBjcm9wIG9yIGhvdHNwb3RcbiAgICB2YXIgcmVzdWx0ID0gX19hc3NpZ24oe30sIGltYWdlKTtcbiAgICBpZiAoIXJlc3VsdC5jcm9wKSB7XG4gICAgICAgIHJlc3VsdC5jcm9wID0ge1xuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdC5ob3RzcG90KSB7XG4gICAgICAgIHJlc3VsdC5ob3RzcG90ID0ge1xuICAgICAgICAgICAgeDogMC41LFxuICAgICAgICAgICAgeTogMC41LFxuICAgICAgICAgICAgaGVpZ2h0OiAxLjAsXG4gICAgICAgICAgICB3aWR0aDogMS4wLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2VTb3VyY2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/image-url/lib/node/parseSource.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/image-url/lib/node/urlForImage.js":
/*!****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/urlForImage.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.parseSource = exports.SPEC_NAME_TO_URL_NAME_MAPPINGS = void 0;\nvar parseAssetId_1 = __importDefault(__webpack_require__(/*! ./parseAssetId */ \"(ssr)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js\"));\nvar parseSource_1 = __importDefault(__webpack_require__(/*! ./parseSource */ \"(ssr)/./node_modules/@sanity/image-url/lib/node/parseSource.js\"));\nexports.parseSource = parseSource_1.default;\nexports.SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n    ['width', 'w'],\n    ['height', 'h'],\n    ['format', 'fm'],\n    ['download', 'dl'],\n    ['blur', 'blur'],\n    ['sharpen', 'sharp'],\n    ['invert', 'invert'],\n    ['orientation', 'or'],\n    ['minHeight', 'min-h'],\n    ['maxHeight', 'max-h'],\n    ['minWidth', 'min-w'],\n    ['maxWidth', 'max-w'],\n    ['quality', 'q'],\n    ['fit', 'fit'],\n    ['crop', 'crop'],\n    ['saturation', 'sat'],\n    ['auto', 'auto'],\n    ['dpr', 'dpr'],\n    ['pad', 'pad'],\n];\nfunction urlForImage(options) {\n    var spec = __assign({}, (options || {}));\n    var source = spec.source;\n    delete spec.source;\n    var image = (0, parseSource_1.default)(source);\n    if (!image) {\n        throw new Error(\"Unable to resolve image URL from source (\".concat(JSON.stringify(source), \")\"));\n    }\n    var id = image.asset._ref || image.asset._id || '';\n    var asset = (0, parseAssetId_1.default)(id);\n    // Compute crop rect in terms of pixel coordinates in the raw source image\n    var cropLeft = Math.round(image.crop.left * asset.width);\n    var cropTop = Math.round(image.crop.top * asset.height);\n    var crop = {\n        left: cropLeft,\n        top: cropTop,\n        width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n        height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop),\n    };\n    // Compute hot spot rect in terms of pixel coordinates\n    var hotSpotVerticalRadius = (image.hotspot.height * asset.height) / 2;\n    var hotSpotHorizontalRadius = (image.hotspot.width * asset.width) / 2;\n    var hotSpotCenterX = image.hotspot.x * asset.width;\n    var hotSpotCenterY = image.hotspot.y * asset.height;\n    var hotspot = {\n        left: hotSpotCenterX - hotSpotHorizontalRadius,\n        top: hotSpotCenterY - hotSpotVerticalRadius,\n        right: hotSpotCenterX + hotSpotHorizontalRadius,\n        bottom: hotSpotCenterY + hotSpotVerticalRadius,\n    };\n    // If irrelevant, or if we are requested to: don't perform crop/fit based on\n    // the crop/hotspot.\n    if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n        spec = __assign(__assign({}, spec), fit({ crop: crop, hotspot: hotspot }, spec));\n    }\n    return specToImageUrl(__assign(__assign({}, spec), { asset: asset }));\n}\nexports[\"default\"] = urlForImage;\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec) {\n    var cdnUrl = (spec.baseUrl || 'https://cdn.sanity.io').replace(/\\/+$/, '');\n    var filename = \"\".concat(spec.asset.id, \"-\").concat(spec.asset.width, \"x\").concat(spec.asset.height, \".\").concat(spec.asset.format);\n    var baseUrl = \"\".concat(cdnUrl, \"/images/\").concat(spec.projectId, \"/\").concat(spec.dataset, \"/\").concat(filename);\n    var params = [];\n    if (spec.rect) {\n        // Only bother url with a crop if it actually crops anything\n        var _a = spec.rect, left = _a.left, top_1 = _a.top, width = _a.width, height = _a.height;\n        var isEffectiveCrop = left !== 0 || top_1 !== 0 || height !== spec.asset.height || width !== spec.asset.width;\n        if (isEffectiveCrop) {\n            params.push(\"rect=\".concat(left, \",\").concat(top_1, \",\").concat(width, \",\").concat(height));\n        }\n    }\n    if (spec.bg) {\n        params.push(\"bg=\".concat(spec.bg));\n    }\n    if (spec.focalPoint) {\n        params.push(\"fp-x=\".concat(spec.focalPoint.x));\n        params.push(\"fp-y=\".concat(spec.focalPoint.y));\n    }\n    var flip = [spec.flipHorizontal && 'h', spec.flipVertical && 'v'].filter(Boolean).join('');\n    if (flip) {\n        params.push(\"flip=\".concat(flip));\n    }\n    // Map from spec name to url param name, and allow using the actual param name as an alternative\n    exports.SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach(function (mapping) {\n        var specName = mapping[0], param = mapping[1];\n        if (typeof spec[specName] !== 'undefined') {\n            params.push(\"\".concat(param, \"=\").concat(encodeURIComponent(spec[specName])));\n        }\n        else if (typeof spec[param] !== 'undefined') {\n            params.push(\"\".concat(param, \"=\").concat(encodeURIComponent(spec[param])));\n        }\n    });\n    if (params.length === 0) {\n        return baseUrl;\n    }\n    return \"\".concat(baseUrl, \"?\").concat(params.join('&'));\n}\nfunction fit(source, spec) {\n    var cropRect;\n    var imgWidth = spec.width;\n    var imgHeight = spec.height;\n    // If we are not constraining the aspect ratio, we'll just use the whole crop\n    if (!(imgWidth && imgHeight)) {\n        return { width: imgWidth, height: imgHeight, rect: source.crop };\n    }\n    var crop = source.crop;\n    var hotspot = source.hotspot;\n    // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n    var desiredAspectRatio = imgWidth / imgHeight;\n    var cropAspectRatio = crop.width / crop.height;\n    if (cropAspectRatio > desiredAspectRatio) {\n        // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n        var height = Math.round(crop.height);\n        var width = Math.round(height * desiredAspectRatio);\n        var top_2 = Math.max(0, Math.round(crop.top));\n        // Center output horizontally over hotspot\n        var hotspotXCenter = Math.round((hotspot.right - hotspot.left) / 2 + hotspot.left);\n        var left = Math.max(0, Math.round(hotspotXCenter - width / 2));\n        // Keep output within crop\n        if (left < crop.left) {\n            left = crop.left;\n        }\n        else if (left + width > crop.left + crop.width) {\n            left = crop.left + crop.width - width;\n        }\n        cropRect = { left: left, top: top_2, width: width, height: height };\n    }\n    else {\n        // The crop is taller than the desired ratio, we are cutting from top and bottom\n        var width = crop.width;\n        var height = Math.round(width / desiredAspectRatio);\n        var left = Math.max(0, Math.round(crop.left));\n        // Center output vertically over hotspot\n        var hotspotYCenter = Math.round((hotspot.bottom - hotspot.top) / 2 + hotspot.top);\n        var top_3 = Math.max(0, Math.round(hotspotYCenter - height / 2));\n        // Keep output rect within crop\n        if (top_3 < crop.top) {\n            top_3 = crop.top;\n        }\n        else if (top_3 + height > crop.top + crop.height) {\n            top_3 = crop.top + crop.height - height;\n        }\n        cropRect = { left: left, top: top_3, width: width, height: height };\n    }\n    return {\n        width: imgWidth,\n        height: imgHeight,\n        rect: cropRect,\n    };\n}\n//# sourceMappingURL=urlForImage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvdXJsRm9ySW1hZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG1CQUFtQixHQUFHLHNDQUFzQztBQUM1RCxxQ0FBcUMsbUJBQU8sQ0FBQyx1RkFBZ0I7QUFDN0Qsb0NBQW9DLG1CQUFPLENBQUMscUZBQWU7QUFDM0QsbUJBQW1CO0FBQ25CLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0JBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGVBQWUsOEJBQThCO0FBQ2hGO0FBQ0EsOENBQThDLFdBQVcsY0FBYztBQUN2RTtBQUNBLGtCQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvaW1hZ2UtdXJsL2xpYi9ub2RlL3VybEZvckltYWdlLmpzP2U3ZWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZVNvdXJjZSA9IGV4cG9ydHMuU1BFQ19OQU1FX1RPX1VSTF9OQU1FX01BUFBJTkdTID0gdm9pZCAwO1xudmFyIHBhcnNlQXNzZXRJZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3BhcnNlQXNzZXRJZFwiKSk7XG52YXIgcGFyc2VTb3VyY2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9wYXJzZVNvdXJjZVwiKSk7XG5leHBvcnRzLnBhcnNlU291cmNlID0gcGFyc2VTb3VyY2VfMS5kZWZhdWx0O1xuZXhwb3J0cy5TUEVDX05BTUVfVE9fVVJMX05BTUVfTUFQUElOR1MgPSBbXG4gICAgWyd3aWR0aCcsICd3J10sXG4gICAgWydoZWlnaHQnLCAnaCddLFxuICAgIFsnZm9ybWF0JywgJ2ZtJ10sXG4gICAgWydkb3dubG9hZCcsICdkbCddLFxuICAgIFsnYmx1cicsICdibHVyJ10sXG4gICAgWydzaGFycGVuJywgJ3NoYXJwJ10sXG4gICAgWydpbnZlcnQnLCAnaW52ZXJ0J10sXG4gICAgWydvcmllbnRhdGlvbicsICdvciddLFxuICAgIFsnbWluSGVpZ2h0JywgJ21pbi1oJ10sXG4gICAgWydtYXhIZWlnaHQnLCAnbWF4LWgnXSxcbiAgICBbJ21pbldpZHRoJywgJ21pbi13J10sXG4gICAgWydtYXhXaWR0aCcsICdtYXgtdyddLFxuICAgIFsncXVhbGl0eScsICdxJ10sXG4gICAgWydmaXQnLCAnZml0J10sXG4gICAgWydjcm9wJywgJ2Nyb3AnXSxcbiAgICBbJ3NhdHVyYXRpb24nLCAnc2F0J10sXG4gICAgWydhdXRvJywgJ2F1dG8nXSxcbiAgICBbJ2RwcicsICdkcHInXSxcbiAgICBbJ3BhZCcsICdwYWQnXSxcbl07XG5mdW5jdGlvbiB1cmxGb3JJbWFnZShvcHRpb25zKSB7XG4gICAgdmFyIHNwZWMgPSBfX2Fzc2lnbih7fSwgKG9wdGlvbnMgfHwge30pKTtcbiAgICB2YXIgc291cmNlID0gc3BlYy5zb3VyY2U7XG4gICAgZGVsZXRlIHNwZWMuc291cmNlO1xuICAgIHZhciBpbWFnZSA9ICgwLCBwYXJzZVNvdXJjZV8xLmRlZmF1bHQpKHNvdXJjZSk7XG4gICAgaWYgKCFpbWFnZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gcmVzb2x2ZSBpbWFnZSBVUkwgZnJvbSBzb3VyY2UgKFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShzb3VyY2UpLCBcIilcIikpO1xuICAgIH1cbiAgICB2YXIgaWQgPSBpbWFnZS5hc3NldC5fcmVmIHx8IGltYWdlLmFzc2V0Ll9pZCB8fCAnJztcbiAgICB2YXIgYXNzZXQgPSAoMCwgcGFyc2VBc3NldElkXzEuZGVmYXVsdCkoaWQpO1xuICAgIC8vIENvbXB1dGUgY3JvcCByZWN0IGluIHRlcm1zIG9mIHBpeGVsIGNvb3JkaW5hdGVzIGluIHRoZSByYXcgc291cmNlIGltYWdlXG4gICAgdmFyIGNyb3BMZWZ0ID0gTWF0aC5yb3VuZChpbWFnZS5jcm9wLmxlZnQgKiBhc3NldC53aWR0aCk7XG4gICAgdmFyIGNyb3BUb3AgPSBNYXRoLnJvdW5kKGltYWdlLmNyb3AudG9wICogYXNzZXQuaGVpZ2h0KTtcbiAgICB2YXIgY3JvcCA9IHtcbiAgICAgICAgbGVmdDogY3JvcExlZnQsXG4gICAgICAgIHRvcDogY3JvcFRvcCxcbiAgICAgICAgd2lkdGg6IE1hdGgucm91bmQoYXNzZXQud2lkdGggLSBpbWFnZS5jcm9wLnJpZ2h0ICogYXNzZXQud2lkdGggLSBjcm9wTGVmdCksXG4gICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChhc3NldC5oZWlnaHQgLSBpbWFnZS5jcm9wLmJvdHRvbSAqIGFzc2V0LmhlaWdodCAtIGNyb3BUb3ApLFxuICAgIH07XG4gICAgLy8gQ29tcHV0ZSBob3Qgc3BvdCByZWN0IGluIHRlcm1zIG9mIHBpeGVsIGNvb3JkaW5hdGVzXG4gICAgdmFyIGhvdFNwb3RWZXJ0aWNhbFJhZGl1cyA9IChpbWFnZS5ob3RzcG90LmhlaWdodCAqIGFzc2V0LmhlaWdodCkgLyAyO1xuICAgIHZhciBob3RTcG90SG9yaXpvbnRhbFJhZGl1cyA9IChpbWFnZS5ob3RzcG90LndpZHRoICogYXNzZXQud2lkdGgpIC8gMjtcbiAgICB2YXIgaG90U3BvdENlbnRlclggPSBpbWFnZS5ob3RzcG90LnggKiBhc3NldC53aWR0aDtcbiAgICB2YXIgaG90U3BvdENlbnRlclkgPSBpbWFnZS5ob3RzcG90LnkgKiBhc3NldC5oZWlnaHQ7XG4gICAgdmFyIGhvdHNwb3QgPSB7XG4gICAgICAgIGxlZnQ6IGhvdFNwb3RDZW50ZXJYIC0gaG90U3BvdEhvcml6b250YWxSYWRpdXMsXG4gICAgICAgIHRvcDogaG90U3BvdENlbnRlclkgLSBob3RTcG90VmVydGljYWxSYWRpdXMsXG4gICAgICAgIHJpZ2h0OiBob3RTcG90Q2VudGVyWCArIGhvdFNwb3RIb3Jpem9udGFsUmFkaXVzLFxuICAgICAgICBib3R0b206IGhvdFNwb3RDZW50ZXJZICsgaG90U3BvdFZlcnRpY2FsUmFkaXVzLFxuICAgIH07XG4gICAgLy8gSWYgaXJyZWxldmFudCwgb3IgaWYgd2UgYXJlIHJlcXVlc3RlZCB0bzogZG9uJ3QgcGVyZm9ybSBjcm9wL2ZpdCBiYXNlZCBvblxuICAgIC8vIHRoZSBjcm9wL2hvdHNwb3QuXG4gICAgaWYgKCEoc3BlYy5yZWN0IHx8IHNwZWMuZm9jYWxQb2ludCB8fCBzcGVjLmlnbm9yZUltYWdlUGFyYW1zIHx8IHNwZWMuY3JvcCkpIHtcbiAgICAgICAgc3BlYyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBzcGVjKSwgZml0KHsgY3JvcDogY3JvcCwgaG90c3BvdDogaG90c3BvdCB9LCBzcGVjKSk7XG4gICAgfVxuICAgIHJldHVybiBzcGVjVG9JbWFnZVVybChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc3BlYyksIHsgYXNzZXQ6IGFzc2V0IH0pKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHVybEZvckltYWdlO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHNwZWNUb0ltYWdlVXJsKHNwZWMpIHtcbiAgICB2YXIgY2RuVXJsID0gKHNwZWMuYmFzZVVybCB8fCAnaHR0cHM6Ly9jZG4uc2FuaXR5LmlvJykucmVwbGFjZSgvXFwvKyQvLCAnJyk7XG4gICAgdmFyIGZpbGVuYW1lID0gXCJcIi5jb25jYXQoc3BlYy5hc3NldC5pZCwgXCItXCIpLmNvbmNhdChzcGVjLmFzc2V0LndpZHRoLCBcInhcIikuY29uY2F0KHNwZWMuYXNzZXQuaGVpZ2h0LCBcIi5cIikuY29uY2F0KHNwZWMuYXNzZXQuZm9ybWF0KTtcbiAgICB2YXIgYmFzZVVybCA9IFwiXCIuY29uY2F0KGNkblVybCwgXCIvaW1hZ2VzL1wiKS5jb25jYXQoc3BlYy5wcm9qZWN0SWQsIFwiL1wiKS5jb25jYXQoc3BlYy5kYXRhc2V0LCBcIi9cIikuY29uY2F0KGZpbGVuYW1lKTtcbiAgICB2YXIgcGFyYW1zID0gW107XG4gICAgaWYgKHNwZWMucmVjdCkge1xuICAgICAgICAvLyBPbmx5IGJvdGhlciB1cmwgd2l0aCBhIGNyb3AgaWYgaXQgYWN0dWFsbHkgY3JvcHMgYW55dGhpbmdcbiAgICAgICAgdmFyIF9hID0gc3BlYy5yZWN0LCBsZWZ0ID0gX2EubGVmdCwgdG9wXzEgPSBfYS50b3AsIHdpZHRoID0gX2Eud2lkdGgsIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgdmFyIGlzRWZmZWN0aXZlQ3JvcCA9IGxlZnQgIT09IDAgfHwgdG9wXzEgIT09IDAgfHwgaGVpZ2h0ICE9PSBzcGVjLmFzc2V0LmhlaWdodCB8fCB3aWR0aCAhPT0gc3BlYy5hc3NldC53aWR0aDtcbiAgICAgICAgaWYgKGlzRWZmZWN0aXZlQ3JvcCkge1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goXCJyZWN0PVwiLmNvbmNhdChsZWZ0LCBcIixcIikuY29uY2F0KHRvcF8xLCBcIixcIikuY29uY2F0KHdpZHRoLCBcIixcIikuY29uY2F0KGhlaWdodCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzcGVjLmJnKSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKFwiYmc9XCIuY29uY2F0KHNwZWMuYmcpKTtcbiAgICB9XG4gICAgaWYgKHNwZWMuZm9jYWxQb2ludCkge1xuICAgICAgICBwYXJhbXMucHVzaChcImZwLXg9XCIuY29uY2F0KHNwZWMuZm9jYWxQb2ludC54KSk7XG4gICAgICAgIHBhcmFtcy5wdXNoKFwiZnAteT1cIi5jb25jYXQoc3BlYy5mb2NhbFBvaW50LnkpKTtcbiAgICB9XG4gICAgdmFyIGZsaXAgPSBbc3BlYy5mbGlwSG9yaXpvbnRhbCAmJiAnaCcsIHNwZWMuZmxpcFZlcnRpY2FsICYmICd2J10uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJycpO1xuICAgIGlmIChmbGlwKSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKFwiZmxpcD1cIi5jb25jYXQoZmxpcCkpO1xuICAgIH1cbiAgICAvLyBNYXAgZnJvbSBzcGVjIG5hbWUgdG8gdXJsIHBhcmFtIG5hbWUsIGFuZCBhbGxvdyB1c2luZyB0aGUgYWN0dWFsIHBhcmFtIG5hbWUgYXMgYW4gYWx0ZXJuYXRpdmVcbiAgICBleHBvcnRzLlNQRUNfTkFNRV9UT19VUkxfTkFNRV9NQVBQSU5HUy5mb3JFYWNoKGZ1bmN0aW9uIChtYXBwaW5nKSB7XG4gICAgICAgIHZhciBzcGVjTmFtZSA9IG1hcHBpbmdbMF0sIHBhcmFtID0gbWFwcGluZ1sxXTtcbiAgICAgICAgaWYgKHR5cGVvZiBzcGVjW3NwZWNOYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKFwiXCIuY29uY2F0KHBhcmFtLCBcIj1cIikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChzcGVjW3NwZWNOYW1lXSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3BlY1twYXJhbV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChcIlwiLmNvbmNhdChwYXJhbSwgXCI9XCIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc3BlY1twYXJhbV0pKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gYmFzZVVybDtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KGJhc2VVcmwsIFwiP1wiKS5jb25jYXQocGFyYW1zLmpvaW4oJyYnKSk7XG59XG5mdW5jdGlvbiBmaXQoc291cmNlLCBzcGVjKSB7XG4gICAgdmFyIGNyb3BSZWN0O1xuICAgIHZhciBpbWdXaWR0aCA9IHNwZWMud2lkdGg7XG4gICAgdmFyIGltZ0hlaWdodCA9IHNwZWMuaGVpZ2h0O1xuICAgIC8vIElmIHdlIGFyZSBub3QgY29uc3RyYWluaW5nIHRoZSBhc3BlY3QgcmF0aW8sIHdlJ2xsIGp1c3QgdXNlIHRoZSB3aG9sZSBjcm9wXG4gICAgaWYgKCEoaW1nV2lkdGggJiYgaW1nSGVpZ2h0KSkge1xuICAgICAgICByZXR1cm4geyB3aWR0aDogaW1nV2lkdGgsIGhlaWdodDogaW1nSGVpZ2h0LCByZWN0OiBzb3VyY2UuY3JvcCB9O1xuICAgIH1cbiAgICB2YXIgY3JvcCA9IHNvdXJjZS5jcm9wO1xuICAgIHZhciBob3RzcG90ID0gc291cmNlLmhvdHNwb3Q7XG4gICAgLy8gSWYgd2UgYXJlIGhlcmUsIHRoYXQgbWVhbnMgYXNwZWN0IHJhdGlvIGlzIGxvY2tlZCBhbmQgZml0dGluZyB3aWxsIGJlIGEgYml0IGhhcmRlclxuICAgIHZhciBkZXNpcmVkQXNwZWN0UmF0aW8gPSBpbWdXaWR0aCAvIGltZ0hlaWdodDtcbiAgICB2YXIgY3JvcEFzcGVjdFJhdGlvID0gY3JvcC53aWR0aCAvIGNyb3AuaGVpZ2h0O1xuICAgIGlmIChjcm9wQXNwZWN0UmF0aW8gPiBkZXNpcmVkQXNwZWN0UmF0aW8pIHtcbiAgICAgICAgLy8gVGhlIGNyb3AgaXMgd2lkZXIgdGhhbiB0aGUgZGVzaXJlZCBhc3BlY3QgcmF0aW8uIFRoYXQgbWVhbnMgd2UgYXJlIGN1dHRpbmcgZnJvbSB0aGUgc2lkZXNcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoY3JvcC5oZWlnaHQpO1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKGhlaWdodCAqIGRlc2lyZWRBc3BlY3RSYXRpbyk7XG4gICAgICAgIHZhciB0b3BfMiA9IE1hdGgubWF4KDAsIE1hdGgucm91bmQoY3JvcC50b3ApKTtcbiAgICAgICAgLy8gQ2VudGVyIG91dHB1dCBob3Jpem9udGFsbHkgb3ZlciBob3RzcG90XG4gICAgICAgIHZhciBob3RzcG90WENlbnRlciA9IE1hdGgucm91bmQoKGhvdHNwb3QucmlnaHQgLSBob3RzcG90LmxlZnQpIC8gMiArIGhvdHNwb3QubGVmdCk7XG4gICAgICAgIHZhciBsZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChob3RzcG90WENlbnRlciAtIHdpZHRoIC8gMikpO1xuICAgICAgICAvLyBLZWVwIG91dHB1dCB3aXRoaW4gY3JvcFxuICAgICAgICBpZiAobGVmdCA8IGNyb3AubGVmdCkge1xuICAgICAgICAgICAgbGVmdCA9IGNyb3AubGVmdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZWZ0ICsgd2lkdGggPiBjcm9wLmxlZnQgKyBjcm9wLndpZHRoKSB7XG4gICAgICAgICAgICBsZWZ0ID0gY3JvcC5sZWZ0ICsgY3JvcC53aWR0aCAtIHdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGNyb3BSZWN0ID0geyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcF8yLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBUaGUgY3JvcCBpcyB0YWxsZXIgdGhhbiB0aGUgZGVzaXJlZCByYXRpbywgd2UgYXJlIGN1dHRpbmcgZnJvbSB0b3AgYW5kIGJvdHRvbVxuICAgICAgICB2YXIgd2lkdGggPSBjcm9wLndpZHRoO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5yb3VuZCh3aWR0aCAvIGRlc2lyZWRBc3BlY3RSYXRpbyk7XG4gICAgICAgIHZhciBsZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChjcm9wLmxlZnQpKTtcbiAgICAgICAgLy8gQ2VudGVyIG91dHB1dCB2ZXJ0aWNhbGx5IG92ZXIgaG90c3BvdFxuICAgICAgICB2YXIgaG90c3BvdFlDZW50ZXIgPSBNYXRoLnJvdW5kKChob3RzcG90LmJvdHRvbSAtIGhvdHNwb3QudG9wKSAvIDIgKyBob3RzcG90LnRvcCk7XG4gICAgICAgIHZhciB0b3BfMyA9IE1hdGgubWF4KDAsIE1hdGgucm91bmQoaG90c3BvdFlDZW50ZXIgLSBoZWlnaHQgLyAyKSk7XG4gICAgICAgIC8vIEtlZXAgb3V0cHV0IHJlY3Qgd2l0aGluIGNyb3BcbiAgICAgICAgaWYgKHRvcF8zIDwgY3JvcC50b3ApIHtcbiAgICAgICAgICAgIHRvcF8zID0gY3JvcC50b3A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG9wXzMgKyBoZWlnaHQgPiBjcm9wLnRvcCArIGNyb3AuaGVpZ2h0KSB7XG4gICAgICAgICAgICB0b3BfMyA9IGNyb3AudG9wICsgY3JvcC5oZWlnaHQgLSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgY3JvcFJlY3QgPSB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wXzMsIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IGltZ1dpZHRoLFxuICAgICAgICBoZWlnaHQ6IGltZ0hlaWdodCxcbiAgICAgICAgcmVjdDogY3JvcFJlY3QsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybEZvckltYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/image-url/lib/node/urlForImage.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/image-url/lib/node/builder.js":
/*!************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/builder.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar __assign = (void 0) && (void 0).__assign || function() {\n    __assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, {\n        enumerable: true,\n        get: function() {\n            return m[k];\n        }\n    });\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __setModuleDefault = (void 0) && (void 0).__setModuleDefault || (Object.create ? function(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (void 0) && (void 0).__importStar || function(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k in mod)if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    }\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ImageUrlBuilder = void 0;\nvar urlForImage_1 = __importStar(__webpack_require__(/*! ./urlForImage */ \"(action-browser)/./node_modules/@sanity/image-url/lib/node/urlForImage.js\"));\nvar validFits = [\n    \"clip\",\n    \"crop\",\n    \"fill\",\n    \"fillmax\",\n    \"max\",\n    \"scale\",\n    \"min\"\n];\nvar validCrops = [\n    \"top\",\n    \"bottom\",\n    \"left\",\n    \"right\",\n    \"center\",\n    \"focalpoint\",\n    \"entropy\"\n];\nvar validAutoModes = [\n    \"format\"\n];\nfunction isSanityModernClientLike(client) {\n    return client && \"config\" in client ? typeof client.config === \"function\" : false;\n}\nfunction isSanityClientLike(client) {\n    return client && \"clientConfig\" in client ? typeof client.clientConfig === \"object\" : false;\n}\nfunction rewriteSpecName(key) {\n    var specs = urlForImage_1.SPEC_NAME_TO_URL_NAME_MAPPINGS;\n    for(var _i = 0, specs_1 = specs; _i < specs_1.length; _i++){\n        var entry = specs_1[_i];\n        var specName = entry[0], param = entry[1];\n        if (key === specName || key === param) {\n            return specName;\n        }\n    }\n    return key;\n}\nfunction urlBuilder(options) {\n    // Did we get a modernish client?\n    if (isSanityModernClientLike(options)) {\n        // Inherit config from client\n        var _a = options.config(), apiUrl = _a.apiHost, projectId = _a.projectId, dataset = _a.dataset;\n        var apiHost = apiUrl || \"https://api.sanity.io\";\n        return new ImageUrlBuilder(null, {\n            baseUrl: apiHost.replace(/^https:\\/\\/api\\./, \"https://cdn.\"),\n            projectId: projectId,\n            dataset: dataset\n        });\n    }\n    // Did we get a SanityClient?\n    var client = options;\n    if (isSanityClientLike(client)) {\n        // Inherit config from client\n        var _b = client.clientConfig, apiUrl = _b.apiHost, projectId = _b.projectId, dataset = _b.dataset;\n        var apiHost = apiUrl || \"https://api.sanity.io\";\n        return new ImageUrlBuilder(null, {\n            baseUrl: apiHost.replace(/^https:\\/\\/api\\./, \"https://cdn.\"),\n            projectId: projectId,\n            dataset: dataset\n        });\n    }\n    // Or just accept the options as given\n    return new ImageUrlBuilder(null, options);\n}\nexports[\"default\"] = urlBuilder;\nvar ImageUrlBuilder = /** @class */ function() {\n    function ImageUrlBuilder(parent, options) {\n        this.options = parent ? __assign(__assign({}, parent.options || {}), options || {}) : __assign({}, options || {}); // Copy options\n    }\n    ImageUrlBuilder.prototype.withOptions = function(options) {\n        var baseUrl = options.baseUrl || this.options.baseUrl;\n        var newOptions = {\n            baseUrl: baseUrl\n        };\n        for(var key in options){\n            if (options.hasOwnProperty(key)) {\n                var specKey = rewriteSpecName(key);\n                newOptions[specKey] = options[key];\n            }\n        }\n        return new ImageUrlBuilder(this, __assign({\n            baseUrl: baseUrl\n        }, newOptions));\n    };\n    // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n    // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n    // studio, the 'image'-document must be provided.\n    ImageUrlBuilder.prototype.image = function(source) {\n        return this.withOptions({\n            source: source\n        });\n    };\n    // Specify the dataset\n    ImageUrlBuilder.prototype.dataset = function(dataset) {\n        return this.withOptions({\n            dataset: dataset\n        });\n    };\n    // Specify the projectId\n    ImageUrlBuilder.prototype.projectId = function(projectId) {\n        return this.withOptions({\n            projectId: projectId\n        });\n    };\n    // Specify background color\n    ImageUrlBuilder.prototype.bg = function(bg) {\n        return this.withOptions({\n            bg: bg\n        });\n    };\n    // Set DPR scaling factor\n    ImageUrlBuilder.prototype.dpr = function(dpr) {\n        // A DPR of 1 is the default - so only include it if we have a different value\n        return this.withOptions(dpr && dpr !== 1 ? {\n            dpr: dpr\n        } : {});\n    };\n    // Specify the width of the image in pixels\n    ImageUrlBuilder.prototype.width = function(width) {\n        return this.withOptions({\n            width: width\n        });\n    };\n    // Specify the height of the image in pixels\n    ImageUrlBuilder.prototype.height = function(height) {\n        return this.withOptions({\n            height: height\n        });\n    };\n    // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n    ImageUrlBuilder.prototype.focalPoint = function(x, y) {\n        return this.withOptions({\n            focalPoint: {\n                x: x,\n                y: y\n            }\n        });\n    };\n    ImageUrlBuilder.prototype.maxWidth = function(maxWidth) {\n        return this.withOptions({\n            maxWidth: maxWidth\n        });\n    };\n    ImageUrlBuilder.prototype.minWidth = function(minWidth) {\n        return this.withOptions({\n            minWidth: minWidth\n        });\n    };\n    ImageUrlBuilder.prototype.maxHeight = function(maxHeight) {\n        return this.withOptions({\n            maxHeight: maxHeight\n        });\n    };\n    ImageUrlBuilder.prototype.minHeight = function(minHeight) {\n        return this.withOptions({\n            minHeight: minHeight\n        });\n    };\n    // Specify width and height in pixels\n    ImageUrlBuilder.prototype.size = function(width, height) {\n        return this.withOptions({\n            width: width,\n            height: height\n        });\n    };\n    // Specify blur between 0 and 100\n    ImageUrlBuilder.prototype.blur = function(blur) {\n        return this.withOptions({\n            blur: blur\n        });\n    };\n    ImageUrlBuilder.prototype.sharpen = function(sharpen) {\n        return this.withOptions({\n            sharpen: sharpen\n        });\n    };\n    // Specify the desired rectangle of the image\n    ImageUrlBuilder.prototype.rect = function(left, top, width, height) {\n        return this.withOptions({\n            rect: {\n                left: left,\n                top: top,\n                width: width,\n                height: height\n            }\n        });\n    };\n    // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n    ImageUrlBuilder.prototype.format = function(format) {\n        return this.withOptions({\n            format: format\n        });\n    };\n    ImageUrlBuilder.prototype.invert = function(invert) {\n        return this.withOptions({\n            invert: invert\n        });\n    };\n    // Rotation in degrees 0, 90, 180, 270\n    ImageUrlBuilder.prototype.orientation = function(orientation) {\n        return this.withOptions({\n            orientation: orientation\n        });\n    };\n    // Compression quality 0-100\n    ImageUrlBuilder.prototype.quality = function(quality) {\n        return this.withOptions({\n            quality: quality\n        });\n    };\n    // Make it a download link. Parameter is default filename.\n    ImageUrlBuilder.prototype.forceDownload = function(download) {\n        return this.withOptions({\n            download: download\n        });\n    };\n    // Flip image horizontally\n    ImageUrlBuilder.prototype.flipHorizontal = function() {\n        return this.withOptions({\n            flipHorizontal: true\n        });\n    };\n    // Flip image vertically\n    ImageUrlBuilder.prototype.flipVertical = function() {\n        return this.withOptions({\n            flipVertical: true\n        });\n    };\n    // Ignore crop/hotspot from image record, even when present\n    ImageUrlBuilder.prototype.ignoreImageParams = function() {\n        return this.withOptions({\n            ignoreImageParams: true\n        });\n    };\n    ImageUrlBuilder.prototype.fit = function(value) {\n        if (validFits.indexOf(value) === -1) {\n            throw new Error('Invalid fit mode \"'.concat(value, '\"'));\n        }\n        return this.withOptions({\n            fit: value\n        });\n    };\n    ImageUrlBuilder.prototype.crop = function(value) {\n        if (validCrops.indexOf(value) === -1) {\n            throw new Error('Invalid crop mode \"'.concat(value, '\"'));\n        }\n        return this.withOptions({\n            crop: value\n        });\n    };\n    // Saturation\n    ImageUrlBuilder.prototype.saturation = function(saturation) {\n        return this.withOptions({\n            saturation: saturation\n        });\n    };\n    ImageUrlBuilder.prototype.auto = function(value) {\n        if (validAutoModes.indexOf(value) === -1) {\n            throw new Error('Invalid auto mode \"'.concat(value, '\"'));\n        }\n        return this.withOptions({\n            auto: value\n        });\n    };\n    // Specify the number of pixels to pad the image\n    ImageUrlBuilder.prototype.pad = function(pad) {\n        return this.withOptions({\n            pad: pad\n        });\n    };\n    // Gets the url based on the submitted parameters\n    ImageUrlBuilder.prototype.url = function() {\n        return (0, urlForImage_1.default)(this.options);\n    };\n    // Alias for url()\n    ImageUrlBuilder.prototype.toString = function() {\n        return this.url();\n    };\n    return ImageUrlBuilder;\n}();\nexports.ImageUrlBuilder = ImageUrlBuilder; //# sourceMappingURL=builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9idWlsZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsV0FBVyxDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLFFBQVEsSUFBSztJQUN0Q0EsV0FBV0MsT0FBT0MsTUFBTSxJQUFJLFNBQVNDLENBQUM7UUFDbEMsSUFBSyxJQUFJQyxHQUFHQyxJQUFJLEdBQUdDLElBQUlDLFVBQVVDLE1BQU0sRUFBRUgsSUFBSUMsR0FBR0QsSUFBSztZQUNqREQsSUFBSUcsU0FBUyxDQUFDRixFQUFFO1lBQ2hCLElBQUssSUFBSUksS0FBS0wsRUFBRyxJQUFJSCxPQUFPUyxTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDUixHQUFHSyxJQUN6RE4sQ0FBQyxDQUFDTSxFQUFFLEdBQUdMLENBQUMsQ0FBQ0ssRUFBRTtRQUNuQjtRQUNBLE9BQU9OO0lBQ1g7SUFDQSxPQUFPSCxTQUFTYSxLQUFLLENBQUMsSUFBSSxFQUFFTjtBQUNoQztBQUNBLElBQUlPLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBTWIsQ0FBQUEsT0FBT2MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JqQixPQUFPb0IsY0FBYyxDQUFDTCxHQUFHRyxJQUFJO1FBQUVHLFlBQVk7UUFBTUMsS0FBSztZQUFhLE9BQU9OLENBQUMsQ0FBQ0MsRUFBRTtRQUFFO0lBQUU7QUFDdEYsSUFBTSxTQUFTRixDQUFDLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxFQUFFO0lBQ3RCLElBQUlBLE9BQU9DLFdBQVdELEtBQUtEO0lBQzNCRixDQUFDLENBQUNHLEdBQUcsR0FBR0YsQ0FBQyxDQUFDQyxFQUFFO0FBQ2hCLENBQUM7QUFDRCxJQUFJTSxxQkFBcUIs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LENBQUM2RixHQUFHLEdBQUc7UUFDNUIsT0FBTyxDQUFDLEdBQUd0RSxjQUFjNkIsT0FBTyxFQUFFLElBQUksQ0FBQ1QsT0FBTztJQUNsRDtJQUNBLGtCQUFrQjtJQUNsQnJCLGdCQUFnQnRCLFNBQVMsQ0FBQzhGLFFBQVEsR0FBRztRQUNqQyxPQUFPLElBQUksQ0FBQ0QsR0FBRztJQUNuQjtJQUNBLE9BQU92RTtBQUNYO0FBQ0FELHVCQUF1QixHQUFHQyxpQkFDMUIsbUNBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2liYmFyb3NhLXByb2QvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvYnVpbGRlci5qcz83YTk2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JbWFnZVVybEJ1aWxkZXIgPSB2b2lkIDA7XG52YXIgdXJsRm9ySW1hZ2VfMSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi91cmxGb3JJbWFnZVwiKSk7XG52YXIgdmFsaWRGaXRzID0gWydjbGlwJywgJ2Nyb3AnLCAnZmlsbCcsICdmaWxsbWF4JywgJ21heCcsICdzY2FsZScsICdtaW4nXTtcbnZhciB2YWxpZENyb3BzID0gWyd0b3AnLCAnYm90dG9tJywgJ2xlZnQnLCAncmlnaHQnLCAnY2VudGVyJywgJ2ZvY2FscG9pbnQnLCAnZW50cm9weSddO1xudmFyIHZhbGlkQXV0b01vZGVzID0gWydmb3JtYXQnXTtcbmZ1bmN0aW9uIGlzU2FuaXR5TW9kZXJuQ2xpZW50TGlrZShjbGllbnQpIHtcbiAgICByZXR1cm4gY2xpZW50ICYmICdjb25maWcnIGluIGNsaWVudCA/IHR5cGVvZiBjbGllbnQuY29uZmlnID09PSAnZnVuY3Rpb24nIDogZmFsc2U7XG59XG5mdW5jdGlvbiBpc1Nhbml0eUNsaWVudExpa2UoY2xpZW50KSB7XG4gICAgcmV0dXJuIGNsaWVudCAmJiAnY2xpZW50Q29uZmlnJyBpbiBjbGllbnQgPyB0eXBlb2YgY2xpZW50LmNsaWVudENvbmZpZyA9PT0gJ29iamVjdCcgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJld3JpdGVTcGVjTmFtZShrZXkpIHtcbiAgICB2YXIgc3BlY3MgPSB1cmxGb3JJbWFnZV8xLlNQRUNfTkFNRV9UT19VUkxfTkFNRV9NQVBQSU5HUztcbiAgICBmb3IgKHZhciBfaSA9IDAsIHNwZWNzXzEgPSBzcGVjczsgX2kgPCBzcGVjc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgZW50cnkgPSBzcGVjc18xW19pXTtcbiAgICAgICAgdmFyIHNwZWNOYW1lID0gZW50cnlbMF0sIHBhcmFtID0gZW50cnlbMV07XG4gICAgICAgIGlmIChrZXkgPT09IHNwZWNOYW1lIHx8IGtleSA9PT0gcGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzcGVjTmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5O1xufVxuZnVuY3Rpb24gdXJsQnVpbGRlcihvcHRpb25zKSB7XG4gICAgLy8gRGlkIHdlIGdldCBhIG1vZGVybmlzaCBjbGllbnQ/XG4gICAgaWYgKGlzU2FuaXR5TW9kZXJuQ2xpZW50TGlrZShvcHRpb25zKSkge1xuICAgICAgICAvLyBJbmhlcml0IGNvbmZpZyBmcm9tIGNsaWVudFxuICAgICAgICB2YXIgX2EgPSBvcHRpb25zLmNvbmZpZygpLCBhcGlVcmwgPSBfYS5hcGlIb3N0LCBwcm9qZWN0SWQgPSBfYS5wcm9qZWN0SWQsIGRhdGFzZXQgPSBfYS5kYXRhc2V0O1xuICAgICAgICB2YXIgYXBpSG9zdCA9IGFwaVVybCB8fCAnaHR0cHM6Ly9hcGkuc2FuaXR5LmlvJztcbiAgICAgICAgcmV0dXJuIG5ldyBJbWFnZVVybEJ1aWxkZXIobnVsbCwge1xuICAgICAgICAgICAgYmFzZVVybDogYXBpSG9zdC5yZXBsYWNlKC9eaHR0cHM6XFwvXFwvYXBpXFwuLywgJ2h0dHBzOi8vY2RuLicpLFxuICAgICAgICAgICAgcHJvamVjdElkOiBwcm9qZWN0SWQsXG4gICAgICAgICAgICBkYXRhc2V0OiBkYXRhc2V0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gRGlkIHdlIGdldCBhIFNhbml0eUNsaWVudD9cbiAgICB2YXIgY2xpZW50ID0gb3B0aW9ucztcbiAgICBpZiAoaXNTYW5pdHlDbGllbnRMaWtlKGNsaWVudCkpIHtcbiAgICAgICAgLy8gSW5oZXJpdCBjb25maWcgZnJvbSBjbGllbnRcbiAgICAgICAgdmFyIF9iID0gY2xpZW50LmNsaWVudENvbmZpZywgYXBpVXJsID0gX2IuYXBpSG9zdCwgcHJvamVjdElkID0gX2IucHJvamVjdElkLCBkYXRhc2V0ID0gX2IuZGF0YXNldDtcbiAgICAgICAgdmFyIGFwaUhvc3QgPSBhcGlVcmwgfHwgJ2h0dHBzOi8vYXBpLnNhbml0eS5pbyc7XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VVcmxCdWlsZGVyKG51bGwsIHtcbiAgICAgICAgICAgIGJhc2VVcmw6IGFwaUhvc3QucmVwbGFjZSgvXmh0dHBzOlxcL1xcL2FwaVxcLi8sICdodHRwczovL2Nkbi4nKSxcbiAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdElkLFxuICAgICAgICAgICAgZGF0YXNldDogZGF0YXNldCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIE9yIGp1c3QgYWNjZXB0IHRoZSBvcHRpb25zIGFzIGdpdmVuXG4gICAgcmV0dXJuIG5ldyBJbWFnZVVybEJ1aWxkZXIobnVsbCwgb3B0aW9ucyk7XG59XG5leHBvcnRzLmRlZmF1bHQgPSB1cmxCdWlsZGVyO1xudmFyIEltYWdlVXJsQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbWFnZVVybEJ1aWxkZXIocGFyZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHBhcmVudFxuICAgICAgICAgICAgPyBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgKHBhcmVudC5vcHRpb25zIHx8IHt9KSksIChvcHRpb25zIHx8IHt9KSkgOiBfX2Fzc2lnbih7fSwgKG9wdGlvbnMgfHwge30pKTsgLy8gQ29weSBvcHRpb25zXG4gICAgfVxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUud2l0aE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybCB8fCB0aGlzLm9wdGlvbnMuYmFzZVVybDtcbiAgICAgICAgdmFyIG5ld09wdGlvbnMgPSB7IGJhc2VVcmw6IGJhc2VVcmwgfTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3BlY0tleSA9IHJld3JpdGVTcGVjTmFtZShrZXkpO1xuICAgICAgICAgICAgICAgIG5ld09wdGlvbnNbc3BlY0tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBJbWFnZVVybEJ1aWxkZXIodGhpcywgX19hc3NpZ24oeyBiYXNlVXJsOiBiYXNlVXJsIH0sIG5ld09wdGlvbnMpKTtcbiAgICB9O1xuICAgIC8vIFRoZSBpbWFnZSB0byBiZSByZXByZXNlbnRlZC4gQWNjZXB0cyBhIFNhbml0eSAnaW1hZ2UnLWRvY3VtZW50LCAnYXNzZXQnLWRvY3VtZW50IG9yXG4gICAgLy8gX2lkIG9mIGFzc2V0LiBUbyBnZXQgdGhlIGJlbmVmaXQgb2YgYXV0b21hdGljIGhvdC1zcG90L2Nyb3AgaW50ZWdyYXRpb24gd2l0aCB0aGUgY29udGVudFxuICAgIC8vIHN0dWRpbywgdGhlICdpbWFnZSctZG9jdW1lbnQgbXVzdCBiZSBwcm92aWRlZC5cbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmltYWdlID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHNvdXJjZTogc291cmNlIH0pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSB0aGUgZGF0YXNldFxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZGF0YXNldCA9IGZ1bmN0aW9uIChkYXRhc2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgZGF0YXNldDogZGF0YXNldCB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgdGhlIHByb2plY3RJZFxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUucHJvamVjdElkID0gZnVuY3Rpb24gKHByb2plY3RJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHByb2plY3RJZDogcHJvamVjdElkIH0pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSBiYWNrZ3JvdW5kIGNvbG9yXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5iZyA9IGZ1bmN0aW9uIChiZykge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGJnOiBiZyB9KTtcbiAgICB9O1xuICAgIC8vIFNldCBEUFIgc2NhbGluZyBmYWN0b3JcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmRwciA9IGZ1bmN0aW9uIChkcHIpIHtcbiAgICAgICAgLy8gQSBEUFIgb2YgMSBpcyB0aGUgZGVmYXVsdCAtIHNvIG9ubHkgaW5jbHVkZSBpdCBpZiB3ZSBoYXZlIGEgZGlmZmVyZW50IHZhbHVlXG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKGRwciAmJiBkcHIgIT09IDEgPyB7IGRwcjogZHByIH0gOiB7fSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSB3aWR0aCBvZiB0aGUgaW1hZ2UgaW4gcGl4ZWxzXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uICh3aWR0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHdpZHRoOiB3aWR0aCB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgdGhlIGhlaWdodCBvZiB0aGUgaW1hZ2UgaW4gcGl4ZWxzXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbiAoaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgaGVpZ2h0OiBoZWlnaHQgfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IGZvY2FsIHBvaW50IGluIGZyYWN0aW9uIG9mIGltYWdlIGRpbWVuc2lvbnMuIEVhY2ggY29tcG9uZW50IDAuMC0xLjBcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmZvY2FsUG9pbnQgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGZvY2FsUG9pbnQ6IHsgeDogeCwgeTogeSB9IH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5tYXhXaWR0aCA9IGZ1bmN0aW9uIChtYXhXaWR0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IG1heFdpZHRoOiBtYXhXaWR0aCB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUubWluV2lkdGggPSBmdW5jdGlvbiAobWluV2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBtaW5XaWR0aDogbWluV2lkdGggfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLm1heEhlaWdodCA9IGZ1bmN0aW9uIChtYXhIZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBtYXhIZWlnaHQ6IG1heEhlaWdodCB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUubWluSGVpZ2h0ID0gZnVuY3Rpb24gKG1pbkhlaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IG1pbkhlaWdodDogbWluSGVpZ2h0IH0pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSB3aWR0aCBhbmQgaGVpZ2h0IGluIHBpeGVsc1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgYmx1ciBiZXR3ZWVuIDAgYW5kIDEwMFxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuYmx1ciA9IGZ1bmN0aW9uIChibHVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgYmx1cjogYmx1ciB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuc2hhcnBlbiA9IGZ1bmN0aW9uIChzaGFycGVuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgc2hhcnBlbjogc2hhcnBlbiB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgdGhlIGRlc2lyZWQgcmVjdGFuZ2xlIG9mIHRoZSBpbWFnZVxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUucmVjdCA9IGZ1bmN0aW9uIChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyByZWN0OiB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0gfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBpbWFnZSBmb3JtYXQgb2YgdGhlIGltYWdlLiAnanBnJywgJ3BqcGcnLCAncG5nJywgJ3dlYnAnXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgZm9ybWF0OiBmb3JtYXQgfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmludmVydCA9IGZ1bmN0aW9uIChpbnZlcnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBpbnZlcnQ6IGludmVydCB9KTtcbiAgICB9O1xuICAgIC8vIFJvdGF0aW9uIGluIGRlZ3JlZXMgMCwgOTAsIDE4MCwgMjcwXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uIChvcmllbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IG9yaWVudGF0aW9uOiBvcmllbnRhdGlvbiB9KTtcbiAgICB9O1xuICAgIC8vIENvbXByZXNzaW9uIHF1YWxpdHkgMC0xMDBcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnF1YWxpdHkgPSBmdW5jdGlvbiAocXVhbGl0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHF1YWxpdHk6IHF1YWxpdHkgfSk7XG4gICAgfTtcbiAgICAvLyBNYWtlIGl0IGEgZG93bmxvYWQgbGluay4gUGFyYW1ldGVyIGlzIGRlZmF1bHQgZmlsZW5hbWUuXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5mb3JjZURvd25sb2FkID0gZnVuY3Rpb24gKGRvd25sb2FkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgZG93bmxvYWQ6IGRvd25sb2FkIH0pO1xuICAgIH07XG4gICAgLy8gRmxpcCBpbWFnZSBob3Jpem9udGFsbHlcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmZsaXBIb3Jpem9udGFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGZsaXBIb3Jpem9udGFsOiB0cnVlIH0pO1xuICAgIH07XG4gICAgLy8gRmxpcCBpbWFnZSB2ZXJ0aWNhbGx5XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5mbGlwVmVydGljYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgZmxpcFZlcnRpY2FsOiB0cnVlIH0pO1xuICAgIH07XG4gICAgLy8gSWdub3JlIGNyb3AvaG90c3BvdCBmcm9tIGltYWdlIHJlY29yZCwgZXZlbiB3aGVuIHByZXNlbnRcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmlnbm9yZUltYWdlUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGlnbm9yZUltYWdlUGFyYW1zOiB0cnVlIH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5maXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbGlkRml0cy5pbmRleE9mKHZhbHVlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZml0IG1vZGUgXFxcIlwiLmNvbmNhdCh2YWx1ZSwgXCJcXFwiXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGZpdDogdmFsdWUgfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmNyb3AgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbGlkQ3JvcHMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNyb3AgbW9kZSBcXFwiXCIuY29uY2F0KHZhbHVlLCBcIlxcXCJcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgY3JvcDogdmFsdWUgfSk7XG4gICAgfTtcbiAgICAvLyBTYXR1cmF0aW9uXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5zYXR1cmF0aW9uID0gZnVuY3Rpb24gKHNhdHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBzYXR1cmF0aW9uOiBzYXR1cmF0aW9uIH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5hdXRvID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWxpZEF1dG9Nb2Rlcy5pbmRleE9mKHZhbHVlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXV0byBtb2RlIFxcXCJcIi5jb25jYXQodmFsdWUsIFwiXFxcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBhdXRvOiB2YWx1ZSB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgdGhlIG51bWJlciBvZiBwaXhlbHMgdG8gcGFkIHRoZSBpbWFnZVxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUucGFkID0gZnVuY3Rpb24gKHBhZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHBhZDogcGFkIH0pO1xuICAgIH07XG4gICAgLy8gR2V0cyB0aGUgdXJsIGJhc2VkIG9uIHRoZSBzdWJtaXR0ZWQgcGFyYW1ldGVyc1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUudXJsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKDAsIHVybEZvckltYWdlXzEuZGVmYXVsdCkodGhpcy5vcHRpb25zKTtcbiAgICB9O1xuICAgIC8vIEFsaWFzIGZvciB1cmwoKVxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVybCgpO1xuICAgIH07XG4gICAgcmV0dXJuIEltYWdlVXJsQnVpbGRlcjtcbn0oKSk7XG5leHBvcnRzLkltYWdlVXJsQnVpbGRlciA9IEltYWdlVXJsQnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1aWxkZXIuanMubWFwIl0sIm5hbWVzIjpbIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsIl9fY3JlYXRlQmluZGluZyIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19zZXRNb2R1bGVEZWZhdWx0IiwidiIsInZhbHVlIiwiX19pbXBvcnRTdGFyIiwibW9kIiwiX19lc01vZHVsZSIsInJlc3VsdCIsImV4cG9ydHMiLCJJbWFnZVVybEJ1aWxkZXIiLCJ1cmxGb3JJbWFnZV8xIiwicmVxdWlyZSIsInZhbGlkRml0cyIsInZhbGlkQ3JvcHMiLCJ2YWxpZEF1dG9Nb2RlcyIsImlzU2FuaXR5TW9kZXJuQ2xpZW50TGlrZSIsImNsaWVudCIsImNvbmZpZyIsImlzU2FuaXR5Q2xpZW50TGlrZSIsImNsaWVudENvbmZpZyIsInJld3JpdGVTcGVjTmFtZSIsImtleSIsInNwZWNzIiwiU1BFQ19OQU1FX1RPX1VSTF9OQU1FX01BUFBJTkdTIiwiX2kiLCJzcGVjc18xIiwiZW50cnkiLCJzcGVjTmFtZSIsInBhcmFtIiwidXJsQnVpbGRlciIsIm9wdGlvbnMiLCJfYSIsImFwaVVybCIsImFwaUhvc3QiLCJwcm9qZWN0SWQiLCJkYXRhc2V0IiwiYmFzZVVybCIsInJlcGxhY2UiLCJfYiIsImRlZmF1bHQiLCJwYXJlbnQiLCJ3aXRoT3B0aW9ucyIsIm5ld09wdGlvbnMiLCJzcGVjS2V5IiwiaW1hZ2UiLCJzb3VyY2UiLCJiZyIsImRwciIsIndpZHRoIiwiaGVpZ2h0IiwiZm9jYWxQb2ludCIsIngiLCJ5IiwibWF4V2lkdGgiLCJtaW5XaWR0aCIsIm1heEhlaWdodCIsIm1pbkhlaWdodCIsInNpemUiLCJibHVyIiwic2hhcnBlbiIsInJlY3QiLCJsZWZ0IiwidG9wIiwiZm9ybWF0IiwiaW52ZXJ0Iiwib3JpZW50YXRpb24iLCJxdWFsaXR5IiwiZm9yY2VEb3dubG9hZCIsImRvd25sb2FkIiwiZmxpcEhvcml6b250YWwiLCJmbGlwVmVydGljYWwiLCJpZ25vcmVJbWFnZVBhcmFtcyIsImZpdCIsImluZGV4T2YiLCJFcnJvciIsImNvbmNhdCIsImNyb3AiLCJzYXR1cmF0aW9uIiwiYXV0byIsInBhZCIsInVybCIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/image-url/lib/node/builder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/image-url/lib/node/builder.js":
/*!************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/builder.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar __assign = (void 0) && (void 0).__assign || function() {\n    __assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, {\n        enumerable: true,\n        get: function() {\n            return m[k];\n        }\n    });\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __setModuleDefault = (void 0) && (void 0).__setModuleDefault || (Object.create ? function(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (void 0) && (void 0).__importStar || function(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k in mod)if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    }\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ImageUrlBuilder = void 0;\nvar urlForImage_1 = __importStar(__webpack_require__(/*! ./urlForImage */ \"(rsc)/./node_modules/@sanity/image-url/lib/node/urlForImage.js\"));\nvar validFits = [\n    \"clip\",\n    \"crop\",\n    \"fill\",\n    \"fillmax\",\n    \"max\",\n    \"scale\",\n    \"min\"\n];\nvar validCrops = [\n    \"top\",\n    \"bottom\",\n    \"left\",\n    \"right\",\n    \"center\",\n    \"focalpoint\",\n    \"entropy\"\n];\nvar validAutoModes = [\n    \"format\"\n];\nfunction isSanityModernClientLike(client) {\n    return client && \"config\" in client ? typeof client.config === \"function\" : false;\n}\nfunction isSanityClientLike(client) {\n    return client && \"clientConfig\" in client ? typeof client.clientConfig === \"object\" : false;\n}\nfunction rewriteSpecName(key) {\n    var specs = urlForImage_1.SPEC_NAME_TO_URL_NAME_MAPPINGS;\n    for(var _i = 0, specs_1 = specs; _i < specs_1.length; _i++){\n        var entry = specs_1[_i];\n        var specName = entry[0], param = entry[1];\n        if (key === specName || key === param) {\n            return specName;\n        }\n    }\n    return key;\n}\nfunction urlBuilder(options) {\n    // Did we get a modernish client?\n    if (isSanityModernClientLike(options)) {\n        // Inherit config from client\n        var _a = options.config(), apiUrl = _a.apiHost, projectId = _a.projectId, dataset = _a.dataset;\n        var apiHost = apiUrl || \"https://api.sanity.io\";\n        return new ImageUrlBuilder(null, {\n            baseUrl: apiHost.replace(/^https:\\/\\/api\\./, \"https://cdn.\"),\n            projectId: projectId,\n            dataset: dataset\n        });\n    }\n    // Did we get a SanityClient?\n    var client = options;\n    if (isSanityClientLike(client)) {\n        // Inherit config from client\n        var _b = client.clientConfig, apiUrl = _b.apiHost, projectId = _b.projectId, dataset = _b.dataset;\n        var apiHost = apiUrl || \"https://api.sanity.io\";\n        return new ImageUrlBuilder(null, {\n            baseUrl: apiHost.replace(/^https:\\/\\/api\\./, \"https://cdn.\"),\n            projectId: projectId,\n            dataset: dataset\n        });\n    }\n    // Or just accept the options as given\n    return new ImageUrlBuilder(null, options);\n}\nexports[\"default\"] = urlBuilder;\nvar ImageUrlBuilder = /** @class */ function() {\n    function ImageUrlBuilder(parent, options) {\n        this.options = parent ? __assign(__assign({}, parent.options || {}), options || {}) : __assign({}, options || {}); // Copy options\n    }\n    ImageUrlBuilder.prototype.withOptions = function(options) {\n        var baseUrl = options.baseUrl || this.options.baseUrl;\n        var newOptions = {\n            baseUrl: baseUrl\n        };\n        for(var key in options){\n            if (options.hasOwnProperty(key)) {\n                var specKey = rewriteSpecName(key);\n                newOptions[specKey] = options[key];\n            }\n        }\n        return new ImageUrlBuilder(this, __assign({\n            baseUrl: baseUrl\n        }, newOptions));\n    };\n    // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n    // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n    // studio, the 'image'-document must be provided.\n    ImageUrlBuilder.prototype.image = function(source) {\n        return this.withOptions({\n            source: source\n        });\n    };\n    // Specify the dataset\n    ImageUrlBuilder.prototype.dataset = function(dataset) {\n        return this.withOptions({\n            dataset: dataset\n        });\n    };\n    // Specify the projectId\n    ImageUrlBuilder.prototype.projectId = function(projectId) {\n        return this.withOptions({\n            projectId: projectId\n        });\n    };\n    // Specify background color\n    ImageUrlBuilder.prototype.bg = function(bg) {\n        return this.withOptions({\n            bg: bg\n        });\n    };\n    // Set DPR scaling factor\n    ImageUrlBuilder.prototype.dpr = function(dpr) {\n        // A DPR of 1 is the default - so only include it if we have a different value\n        return this.withOptions(dpr && dpr !== 1 ? {\n            dpr: dpr\n        } : {});\n    };\n    // Specify the width of the image in pixels\n    ImageUrlBuilder.prototype.width = function(width) {\n        return this.withOptions({\n            width: width\n        });\n    };\n    // Specify the height of the image in pixels\n    ImageUrlBuilder.prototype.height = function(height) {\n        return this.withOptions({\n            height: height\n        });\n    };\n    // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n    ImageUrlBuilder.prototype.focalPoint = function(x, y) {\n        return this.withOptions({\n            focalPoint: {\n                x: x,\n                y: y\n            }\n        });\n    };\n    ImageUrlBuilder.prototype.maxWidth = function(maxWidth) {\n        return this.withOptions({\n            maxWidth: maxWidth\n        });\n    };\n    ImageUrlBuilder.prototype.minWidth = function(minWidth) {\n        return this.withOptions({\n            minWidth: minWidth\n        });\n    };\n    ImageUrlBuilder.prototype.maxHeight = function(maxHeight) {\n        return this.withOptions({\n            maxHeight: maxHeight\n        });\n    };\n    ImageUrlBuilder.prototype.minHeight = function(minHeight) {\n        return this.withOptions({\n            minHeight: minHeight\n        });\n    };\n    // Specify width and height in pixels\n    ImageUrlBuilder.prototype.size = function(width, height) {\n        return this.withOptions({\n            width: width,\n            height: height\n        });\n    };\n    // Specify blur between 0 and 100\n    ImageUrlBuilder.prototype.blur = function(blur) {\n        return this.withOptions({\n            blur: blur\n        });\n    };\n    ImageUrlBuilder.prototype.sharpen = function(sharpen) {\n        return this.withOptions({\n            sharpen: sharpen\n        });\n    };\n    // Specify the desired rectangle of the image\n    ImageUrlBuilder.prototype.rect = function(left, top, width, height) {\n        return this.withOptions({\n            rect: {\n                left: left,\n                top: top,\n                width: width,\n                height: height\n            }\n        });\n    };\n    // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n    ImageUrlBuilder.prototype.format = function(format) {\n        return this.withOptions({\n            format: format\n        });\n    };\n    ImageUrlBuilder.prototype.invert = function(invert) {\n        return this.withOptions({\n            invert: invert\n        });\n    };\n    // Rotation in degrees 0, 90, 180, 270\n    ImageUrlBuilder.prototype.orientation = function(orientation) {\n        return this.withOptions({\n            orientation: orientation\n        });\n    };\n    // Compression quality 0-100\n    ImageUrlBuilder.prototype.quality = function(quality) {\n        return this.withOptions({\n            quality: quality\n        });\n    };\n    // Make it a download link. Parameter is default filename.\n    ImageUrlBuilder.prototype.forceDownload = function(download) {\n        return this.withOptions({\n            download: download\n        });\n    };\n    // Flip image horizontally\n    ImageUrlBuilder.prototype.flipHorizontal = function() {\n        return this.withOptions({\n            flipHorizontal: true\n        });\n    };\n    // Flip image vertically\n    ImageUrlBuilder.prototype.flipVertical = function() {\n        return this.withOptions({\n            flipVertical: true\n        });\n    };\n    // Ignore crop/hotspot from image record, even when present\n    ImageUrlBuilder.prototype.ignoreImageParams = function() {\n        return this.withOptions({\n            ignoreImageParams: true\n        });\n    };\n    ImageUrlBuilder.prototype.fit = function(value) {\n        if (validFits.indexOf(value) === -1) {\n            throw new Error('Invalid fit mode \"'.concat(value, '\"'));\n        }\n        return this.withOptions({\n            fit: value\n        });\n    };\n    ImageUrlBuilder.prototype.crop = function(value) {\n        if (validCrops.indexOf(value) === -1) {\n            throw new Error('Invalid crop mode \"'.concat(value, '\"'));\n        }\n        return this.withOptions({\n            crop: value\n        });\n    };\n    // Saturation\n    ImageUrlBuilder.prototype.saturation = function(saturation) {\n        return this.withOptions({\n            saturation: saturation\n        });\n    };\n    ImageUrlBuilder.prototype.auto = function(value) {\n        if (validAutoModes.indexOf(value) === -1) {\n            throw new Error('Invalid auto mode \"'.concat(value, '\"'));\n        }\n        return this.withOptions({\n            auto: value\n        });\n    };\n    // Specify the number of pixels to pad the image\n    ImageUrlBuilder.prototype.pad = function(pad) {\n        return this.withOptions({\n            pad: pad\n        });\n    };\n    // Gets the url based on the submitted parameters\n    ImageUrlBuilder.prototype.url = function() {\n        return (0, urlForImage_1.default)(this.options);\n    };\n    // Alias for url()\n    ImageUrlBuilder.prototype.toString = function() {\n        return this.url();\n    };\n    return ImageUrlBuilder;\n}();\nexports.ImageUrlBuilder = ImageUrlBuilder; //# sourceMappingURL=builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvYnVpbGRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLFdBQVcsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxRQUFRLElBQUs7SUFDdENBLFdBQVdDLE9BQU9DLE1BQU0sSUFBSSxTQUFTQyxDQUFDO1FBQ2xDLElBQUssSUFBSUMsR0FBR0MsSUFBSSxHQUFHQyxJQUFJQyxVQUFVQyxNQUFNLEVBQUVILElBQUlDLEdBQUdELElBQUs7WUFDakRELElBQUlHLFNBQVMsQ0FBQ0YsRUFBRTtZQUNoQixJQUFLLElBQUlJLEtBQUtMLEVBQUcsSUFBSUgsT0FBT1MsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ1IsR0FBR0ssSUFDekROLENBQUMsQ0FBQ00sRUFBRSxHQUFHTCxDQUFDLENBQUNLLEVBQUU7UUFDbkI7UUFDQSxPQUFPTjtJQUNYO0lBQ0EsT0FBT0gsU0FBU2EsS0FBSyxDQUFDLElBQUksRUFBRU47QUFDaEM7QUFDQSxJQUFJTyxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQU1iLENBQUFBLE9BQU9jLE1BQU0sR0FBSSxTQUFTQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxFQUFFO0lBQzFGLElBQUlBLE9BQU9DLFdBQVdELEtBQUtEO0lBQzNCakIsT0FBT29CLGNBQWMsQ0FBQ0wsR0FBR0csSUFBSTtRQUFFRyxZQUFZO1FBQU1DLEtBQUs7WUFBYSxPQUFPTixDQUFDLENBQUNDLEVBQUU7UUFBRTtJQUFFO0FBQ3RGLElBQU0sU0FBU0YsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRTtJQUN0QixJQUFJQSxPQUFPQyxXQUFXRCxLQUFLRDtJQUMzQkYsQ0FBQyxDQUFDRyxHQUFHLEdBQUdGLENBQUMsQ0FBQ0MsRUFBRTtBQUNoQixDQUFDO0FBQ0QsSUFBSU0scUJBQXFCLENBQUMsTUFBRyxL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RyxHQUFHO1FBQzVCLE9BQU8sQ0FBQyxHQUFHdEUsY0FBYzZCLE9BQU8sRUFBRSxJQUFJLENBQUNULE9BQU87SUFDbEQ7SUFDQSxrQkFBa0I7SUFDbEJyQixnQkFBZ0J0QixTQUFTLENBQUM4RixRQUFRLEdBQUc7UUFDakMsT0FBTyxJQUFJLENBQUNELEdBQUc7SUFDbkI7SUFDQSxPQUFPdkU7QUFDWDtBQUNBRCx1QkFBdUIsR0FBR0MsaUJBQzFCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvaW1hZ2UtdXJsL2xpYi9ub2RlL2J1aWxkZXIuanM/N2E5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSW1hZ2VVcmxCdWlsZGVyID0gdm9pZCAwO1xudmFyIHVybEZvckltYWdlXzEgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vdXJsRm9ySW1hZ2VcIikpO1xudmFyIHZhbGlkRml0cyA9IFsnY2xpcCcsICdjcm9wJywgJ2ZpbGwnLCAnZmlsbG1heCcsICdtYXgnLCAnc2NhbGUnLCAnbWluJ107XG52YXIgdmFsaWRDcm9wcyA9IFsndG9wJywgJ2JvdHRvbScsICdsZWZ0JywgJ3JpZ2h0JywgJ2NlbnRlcicsICdmb2NhbHBvaW50JywgJ2VudHJvcHknXTtcbnZhciB2YWxpZEF1dG9Nb2RlcyA9IFsnZm9ybWF0J107XG5mdW5jdGlvbiBpc1Nhbml0eU1vZGVybkNsaWVudExpa2UoY2xpZW50KSB7XG4gICAgcmV0dXJuIGNsaWVudCAmJiAnY29uZmlnJyBpbiBjbGllbnQgPyB0eXBlb2YgY2xpZW50LmNvbmZpZyA9PT0gJ2Z1bmN0aW9uJyA6IGZhbHNlO1xufVxuZnVuY3Rpb24gaXNTYW5pdHlDbGllbnRMaWtlKGNsaWVudCkge1xuICAgIHJldHVybiBjbGllbnQgJiYgJ2NsaWVudENvbmZpZycgaW4gY2xpZW50ID8gdHlwZW9mIGNsaWVudC5jbGllbnRDb25maWcgPT09ICdvYmplY3QnIDogZmFsc2U7XG59XG5mdW5jdGlvbiByZXdyaXRlU3BlY05hbWUoa2V5KSB7XG4gICAgdmFyIHNwZWNzID0gdXJsRm9ySW1hZ2VfMS5TUEVDX05BTUVfVE9fVVJMX05BTUVfTUFQUElOR1M7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBzcGVjc18xID0gc3BlY3M7IF9pIDwgc3BlY3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gc3BlY3NfMVtfaV07XG4gICAgICAgIHZhciBzcGVjTmFtZSA9IGVudHJ5WzBdLCBwYXJhbSA9IGVudHJ5WzFdO1xuICAgICAgICBpZiAoa2V5ID09PSBzcGVjTmFtZSB8fCBrZXkgPT09IHBhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gc3BlY05hbWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbn1cbmZ1bmN0aW9uIHVybEJ1aWxkZXIob3B0aW9ucykge1xuICAgIC8vIERpZCB3ZSBnZXQgYSBtb2Rlcm5pc2ggY2xpZW50P1xuICAgIGlmIChpc1Nhbml0eU1vZGVybkNsaWVudExpa2Uob3B0aW9ucykpIHtcbiAgICAgICAgLy8gSW5oZXJpdCBjb25maWcgZnJvbSBjbGllbnRcbiAgICAgICAgdmFyIF9hID0gb3B0aW9ucy5jb25maWcoKSwgYXBpVXJsID0gX2EuYXBpSG9zdCwgcHJvamVjdElkID0gX2EucHJvamVjdElkLCBkYXRhc2V0ID0gX2EuZGF0YXNldDtcbiAgICAgICAgdmFyIGFwaUhvc3QgPSBhcGlVcmwgfHwgJ2h0dHBzOi8vYXBpLnNhbml0eS5pbyc7XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VVcmxCdWlsZGVyKG51bGwsIHtcbiAgICAgICAgICAgIGJhc2VVcmw6IGFwaUhvc3QucmVwbGFjZSgvXmh0dHBzOlxcL1xcL2FwaVxcLi8sICdodHRwczovL2Nkbi4nKSxcbiAgICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdElkLFxuICAgICAgICAgICAgZGF0YXNldDogZGF0YXNldCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIERpZCB3ZSBnZXQgYSBTYW5pdHlDbGllbnQ/XG4gICAgdmFyIGNsaWVudCA9IG9wdGlvbnM7XG4gICAgaWYgKGlzU2FuaXR5Q2xpZW50TGlrZShjbGllbnQpKSB7XG4gICAgICAgIC8vIEluaGVyaXQgY29uZmlnIGZyb20gY2xpZW50XG4gICAgICAgIHZhciBfYiA9IGNsaWVudC5jbGllbnRDb25maWcsIGFwaVVybCA9IF9iLmFwaUhvc3QsIHByb2plY3RJZCA9IF9iLnByb2plY3RJZCwgZGF0YXNldCA9IF9iLmRhdGFzZXQ7XG4gICAgICAgIHZhciBhcGlIb3N0ID0gYXBpVXJsIHx8ICdodHRwczovL2FwaS5zYW5pdHkuaW8nO1xuICAgICAgICByZXR1cm4gbmV3IEltYWdlVXJsQnVpbGRlcihudWxsLCB7XG4gICAgICAgICAgICBiYXNlVXJsOiBhcGlIb3N0LnJlcGxhY2UoL15odHRwczpcXC9cXC9hcGlcXC4vLCAnaHR0cHM6Ly9jZG4uJyksXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3RJZCxcbiAgICAgICAgICAgIGRhdGFzZXQ6IGRhdGFzZXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBPciBqdXN0IGFjY2VwdCB0aGUgb3B0aW9ucyBhcyBnaXZlblxuICAgIHJldHVybiBuZXcgSW1hZ2VVcmxCdWlsZGVyKG51bGwsIG9wdGlvbnMpO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gdXJsQnVpbGRlcjtcbnZhciBJbWFnZVVybEJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSW1hZ2VVcmxCdWlsZGVyKHBhcmVudCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBwYXJlbnRcbiAgICAgICAgICAgID8gX19hc3NpZ24oX19hc3NpZ24oe30sIChwYXJlbnQub3B0aW9ucyB8fCB7fSkpLCAob3B0aW9ucyB8fCB7fSkpIDogX19hc3NpZ24oe30sIChvcHRpb25zIHx8IHt9KSk7IC8vIENvcHkgb3B0aW9uc1xuICAgIH1cbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLndpdGhPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGJhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmwgfHwgdGhpcy5vcHRpb25zLmJhc2VVcmw7XG4gICAgICAgIHZhciBuZXdPcHRpb25zID0geyBiYXNlVXJsOiBiYXNlVXJsIH07XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWNLZXkgPSByZXdyaXRlU3BlY05hbWUoa2V5KTtcbiAgICAgICAgICAgICAgICBuZXdPcHRpb25zW3NwZWNLZXldID0gb3B0aW9uc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VVcmxCdWlsZGVyKHRoaXMsIF9fYXNzaWduKHsgYmFzZVVybDogYmFzZVVybCB9LCBuZXdPcHRpb25zKSk7XG4gICAgfTtcbiAgICAvLyBUaGUgaW1hZ2UgdG8gYmUgcmVwcmVzZW50ZWQuIEFjY2VwdHMgYSBTYW5pdHkgJ2ltYWdlJy1kb2N1bWVudCwgJ2Fzc2V0Jy1kb2N1bWVudCBvclxuICAgIC8vIF9pZCBvZiBhc3NldC4gVG8gZ2V0IHRoZSBiZW5lZml0IG9mIGF1dG9tYXRpYyBob3Qtc3BvdC9jcm9wIGludGVncmF0aW9uIHdpdGggdGhlIGNvbnRlbnRcbiAgICAvLyBzdHVkaW8sIHRoZSAnaW1hZ2UnLWRvY3VtZW50IG11c3QgYmUgcHJvdmlkZWQuXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5pbWFnZSA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBzb3VyY2U6IHNvdXJjZSB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgdGhlIGRhdGFzZXRcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmRhdGFzZXQgPSBmdW5jdGlvbiAoZGF0YXNldCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGRhdGFzZXQ6IGRhdGFzZXQgfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBwcm9qZWN0SWRcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnByb2plY3RJZCA9IGZ1bmN0aW9uIChwcm9qZWN0SWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBwcm9qZWN0SWQ6IHByb2plY3RJZCB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgYmFja2dyb3VuZCBjb2xvclxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuYmcgPSBmdW5jdGlvbiAoYmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBiZzogYmcgfSk7XG4gICAgfTtcbiAgICAvLyBTZXQgRFBSIHNjYWxpbmcgZmFjdG9yXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5kcHIgPSBmdW5jdGlvbiAoZHByKSB7XG4gICAgICAgIC8vIEEgRFBSIG9mIDEgaXMgdGhlIGRlZmF1bHQgLSBzbyBvbmx5IGluY2x1ZGUgaXQgaWYgd2UgaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZVxuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyhkcHIgJiYgZHByICE9PSAxID8geyBkcHI6IGRwciB9IDoge30pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSB0aGUgd2lkdGggb2YgdGhlIGltYWdlIGluIHBpeGVsc1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUud2lkdGggPSBmdW5jdGlvbiAod2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyB3aWR0aDogd2lkdGggfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBoZWlnaHQgb2YgdGhlIGltYWdlIGluIHBpeGVsc1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGhlaWdodDogaGVpZ2h0IH0pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSBmb2NhbCBwb2ludCBpbiBmcmFjdGlvbiBvZiBpbWFnZSBkaW1lbnNpb25zLiBFYWNoIGNvbXBvbmVudCAwLjAtMS4wXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5mb2NhbFBvaW50ID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBmb2NhbFBvaW50OiB7IHg6IHgsIHk6IHkgfSB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUubWF4V2lkdGggPSBmdW5jdGlvbiAobWF4V2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBtYXhXaWR0aDogbWF4V2lkdGggfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLm1pbldpZHRoID0gZnVuY3Rpb24gKG1pbldpZHRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgbWluV2lkdGg6IG1pbldpZHRoIH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5tYXhIZWlnaHQgPSBmdW5jdGlvbiAobWF4SGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgbWF4SGVpZ2h0OiBtYXhIZWlnaHQgfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLm1pbkhlaWdodCA9IGZ1bmN0aW9uIChtaW5IZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBtaW5IZWlnaHQ6IG1pbkhlaWdodCB9KTtcbiAgICB9O1xuICAgIC8vIFNwZWNpZnkgd2lkdGggYW5kIGhlaWdodCBpbiBwaXhlbHNcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IGJsdXIgYmV0d2VlbiAwIGFuZCAxMDBcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLmJsdXIgPSBmdW5jdGlvbiAoYmx1cikge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGJsdXI6IGJsdXIgfSk7XG4gICAgfTtcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnNoYXJwZW4gPSBmdW5jdGlvbiAoc2hhcnBlbikge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IHNoYXJwZW46IHNoYXJwZW4gfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBkZXNpcmVkIHJlY3RhbmdsZSBvZiB0aGUgaW1hZ2VcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnJlY3QgPSBmdW5jdGlvbiAobGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgcmVjdDogeyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9IH0pO1xuICAgIH07XG4gICAgLy8gU3BlY2lmeSB0aGUgaW1hZ2UgZm9ybWF0IG9mIHRoZSBpbWFnZS4gJ2pwZycsICdwanBnJywgJ3BuZycsICd3ZWJwJ1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGZvcm1hdDogZm9ybWF0IH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoaW52ZXJ0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgaW52ZXJ0OiBpbnZlcnQgfSk7XG4gICAgfTtcbiAgICAvLyBSb3RhdGlvbiBpbiBkZWdyZWVzIDAsIDkwLCAxODAsIDI3MFxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbiAob3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBvcmllbnRhdGlvbjogb3JpZW50YXRpb24gfSk7XG4gICAgfTtcbiAgICAvLyBDb21wcmVzc2lvbiBxdWFsaXR5IDAtMTAwXG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5xdWFsaXR5ID0gZnVuY3Rpb24gKHF1YWxpdHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBxdWFsaXR5OiBxdWFsaXR5IH0pO1xuICAgIH07XG4gICAgLy8gTWFrZSBpdCBhIGRvd25sb2FkIGxpbmsuIFBhcmFtZXRlciBpcyBkZWZhdWx0IGZpbGVuYW1lLlxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZm9yY2VEb3dubG9hZCA9IGZ1bmN0aW9uIChkb3dubG9hZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGRvd25sb2FkOiBkb3dubG9hZCB9KTtcbiAgICB9O1xuICAgIC8vIEZsaXAgaW1hZ2UgaG9yaXpvbnRhbGx5XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5mbGlwSG9yaXpvbnRhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBmbGlwSG9yaXpvbnRhbDogdHJ1ZSB9KTtcbiAgICB9O1xuICAgIC8vIEZsaXAgaW1hZ2UgdmVydGljYWxseVxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZmxpcFZlcnRpY2FsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGZsaXBWZXJ0aWNhbDogdHJ1ZSB9KTtcbiAgICB9O1xuICAgIC8vIElnbm9yZSBjcm9wL2hvdHNwb3QgZnJvbSBpbWFnZSByZWNvcmQsIGV2ZW4gd2hlbiBwcmVzZW50XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5pZ25vcmVJbWFnZVBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBpZ25vcmVJbWFnZVBhcmFtczogdHJ1ZSB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuZml0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWxpZEZpdHMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZpdCBtb2RlIFxcXCJcIi5jb25jYXQodmFsdWUsIFwiXFxcIlwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBmaXQ6IHZhbHVlIH0pO1xuICAgIH07XG4gICAgSW1hZ2VVcmxCdWlsZGVyLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWxpZENyb3BzLmluZGV4T2YodmFsdWUpID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjcm9wIG1vZGUgXFxcIlwiLmNvbmNhdCh2YWx1ZSwgXCJcXFwiXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW9ucyh7IGNyb3A6IHZhbHVlIH0pO1xuICAgIH07XG4gICAgLy8gU2F0dXJhdGlvblxuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuc2F0dXJhdGlvbiA9IGZ1bmN0aW9uIChzYXR1cmF0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgc2F0dXJhdGlvbjogc2F0dXJhdGlvbiB9KTtcbiAgICB9O1xuICAgIEltYWdlVXJsQnVpbGRlci5wcm90b3R5cGUuYXV0byA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsaWRBdXRvTW9kZXMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGF1dG8gbW9kZSBcXFwiXCIuY29uY2F0KHZhbHVlLCBcIlxcXCJcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpb25zKHsgYXV0bzogdmFsdWUgfSk7XG4gICAgfTtcbiAgICAvLyBTcGVjaWZ5IHRoZSBudW1iZXIgb2YgcGl4ZWxzIHRvIHBhZCB0aGUgaW1hZ2VcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnBhZCA9IGZ1bmN0aW9uIChwYWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGlvbnMoeyBwYWQ6IHBhZCB9KTtcbiAgICB9O1xuICAgIC8vIEdldHMgdGhlIHVybCBiYXNlZCBvbiB0aGUgc3VibWl0dGVkIHBhcmFtZXRlcnNcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICgwLCB1cmxGb3JJbWFnZV8xLmRlZmF1bHQpKHRoaXMub3B0aW9ucyk7XG4gICAgfTtcbiAgICAvLyBBbGlhcyBmb3IgdXJsKClcbiAgICBJbWFnZVVybEJ1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmwoKTtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVVybEJ1aWxkZXI7XG59KCkpO1xuZXhwb3J0cy5JbWFnZVVybEJ1aWxkZXIgPSBJbWFnZVVybEJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZGVyLmpzLm1hcCJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJfX2NyZWF0ZUJpbmRpbmciLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsInVuZGVmaW5lZCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIl9fc2V0TW9kdWxlRGVmYXVsdCIsInYiLCJ2YWx1ZSIsIl9faW1wb3J0U3RhciIsIm1vZCIsIl9fZXNNb2R1bGUiLCJyZXN1bHQiLCJleHBvcnRzIiwiSW1hZ2VVcmxCdWlsZGVyIiwidXJsRm9ySW1hZ2VfMSIsInJlcXVpcmUiLCJ2YWxpZEZpdHMiLCJ2YWxpZENyb3BzIiwidmFsaWRBdXRvTW9kZXMiLCJpc1Nhbml0eU1vZGVybkNsaWVudExpa2UiLCJjbGllbnQiLCJjb25maWciLCJpc1Nhbml0eUNsaWVudExpa2UiLCJjbGllbnRDb25maWciLCJyZXdyaXRlU3BlY05hbWUiLCJrZXkiLCJzcGVjcyIsIlNQRUNfTkFNRV9UT19VUkxfTkFNRV9NQVBQSU5HUyIsIl9pIiwic3BlY3NfMSIsImVudHJ5Iiwic3BlY05hbWUiLCJwYXJhbSIsInVybEJ1aWxkZXIiLCJvcHRpb25zIiwiX2EiLCJhcGlVcmwiLCJhcGlIb3N0IiwicHJvamVjdElkIiwiZGF0YXNldCIsImJhc2VVcmwiLCJyZXBsYWNlIiwiX2IiLCJkZWZhdWx0IiwicGFyZW50Iiwid2l0aE9wdGlvbnMiLCJuZXdPcHRpb25zIiwic3BlY0tleSIsImltYWdlIiwic291cmNlIiwiYmciLCJkcHIiLCJ3aWR0aCIsImhlaWdodCIsImZvY2FsUG9pbnQiLCJ4IiwieSIsIm1heFdpZHRoIiwibWluV2lkdGgiLCJtYXhIZWlnaHQiLCJtaW5IZWlnaHQiLCJzaXplIiwiYmx1ciIsInNoYXJwZW4iLCJyZWN0IiwibGVmdCIsInRvcCIsImZvcm1hdCIsImludmVydCIsIm9yaWVudGF0aW9uIiwicXVhbGl0eSIsImZvcmNlRG93bmxvYWQiLCJkb3dubG9hZCIsImZsaXBIb3Jpem9udGFsIiwiZmxpcFZlcnRpY2FsIiwiaWdub3JlSW1hZ2VQYXJhbXMiLCJmaXQiLCJpbmRleE9mIiwiRXJyb3IiLCJjb25jYXQiLCJjcm9wIiwic2F0dXJhdGlvbiIsImF1dG8iLCJwYWQiLCJ1cmwiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/image-url/lib/node/builder.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/image-url/lib/node/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/index.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nvar builder_1 = __importDefault(__webpack_require__(/*! ./builder */ \"(action-browser)/./node_modules/@sanity/image-url/lib/node/builder.js\"));\nmodule.exports = builder_1.default; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBSyxTQUFVQyxHQUFHO0lBQ2pFLE9BQU8sT0FBUUEsSUFBSUMsVUFBVSxHQUFJRCxNQUFNO1FBQUUsV0FBV0E7SUFBSTtBQUM1RDtBQUNBLElBQUlFLFlBQVlILGdCQUFnQkksbUJBQU9BLENBQUMsd0ZBQVc7QUFDbkRDLE9BQU9DLE9BQU8sR0FBR0gsVUFBVUksT0FBTyxFQUNsQyxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9pbmRleC5qcz9hMjI5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xudmFyIGJ1aWxkZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9idWlsZGVyXCIpKTtcbm1vZHVsZS5leHBvcnRzID0gYnVpbGRlcl8xLmRlZmF1bHQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiX19pbXBvcnREZWZhdWx0IiwibW9kIiwiX19lc01vZHVsZSIsImJ1aWxkZXJfMSIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/image-url/lib/node/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/image-url/lib/node/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/index.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nvar builder_1 = __importDefault(__webpack_require__(/*! ./builder */ \"(rsc)/./node_modules/@sanity/image-url/lib/node/builder.js\"));\nmodule.exports = builder_1.default; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQSxJQUFJRSxZQUFZSCxnQkFBZ0JJLG1CQUFPQSxDQUFDLDZFQUFXO0FBQ25EQyxPQUFPQyxPQUFPLEdBQUdILFVBQVVJLE9BQU8sRUFDbEMsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2liYmFyb3NhLXByb2QvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvaW5kZXguanM/YTIyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbnZhciBidWlsZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vYnVpbGRlclwiKSk7XG5tb2R1bGUuZXhwb3J0cyA9IGJ1aWxkZXJfMS5kZWZhdWx0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJidWlsZGVyXzEiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/image-url/lib/node/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/parseAssetId.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nvar example = \"image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg\";\nfunction parseAssetId(ref) {\n    var _a = ref.split(\"-\"), id = _a[1], dimensionString = _a[2], format = _a[3];\n    if (!id || !dimensionString || !format) {\n        throw new Error(\"Malformed asset _ref '\".concat(ref, \"'. Expected an id like \\\"\").concat(example, '\".'));\n    }\n    var _b = dimensionString.split(\"x\"), imgWidthStr = _b[0], imgHeightStr = _b[1];\n    var width = +imgWidthStr;\n    var height = +imgHeightStr;\n    var isValidAssetId = isFinite(width) && isFinite(height);\n    if (!isValidAssetId) {\n        throw new Error(\"Malformed asset _ref '\".concat(ref, \"'. Expected an id like \\\"\").concat(example, '\".'));\n    }\n    return {\n        id: id,\n        width: width,\n        height: height,\n        format: format\n    };\n}\nexports[\"default\"] = parseAssetId; //# sourceMappingURL=parseAssetId.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9wYXJzZUFzc2V0SWQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0QsSUFBSUMsVUFBVTtBQUNkLFNBQVNDLGFBQWFDLEdBQUc7SUFDckIsSUFBSUMsS0FBS0QsSUFBSUUsS0FBSyxDQUFDLE1BQU1DLEtBQUtGLEVBQUUsQ0FBQyxFQUFFLEVBQUVHLGtCQUFrQkgsRUFBRSxDQUFDLEVBQUUsRUFBRUksU0FBU0osRUFBRSxDQUFDLEVBQUU7SUFDNUUsSUFBSSxDQUFDRSxNQUFNLENBQUNDLG1CQUFtQixDQUFDQyxRQUFRO1FBQ3BDLE1BQU0sSUFBSUMsTUFBTSx5QkFBeUJDLE1BQU0sQ0FBQ1AsS0FBSyw2QkFBNkJPLE1BQU0sQ0FBQ1QsU0FBUztJQUN0RztJQUNBLElBQUlVLEtBQUtKLGdCQUFnQkYsS0FBSyxDQUFDLE1BQU1PLGNBQWNELEVBQUUsQ0FBQyxFQUFFLEVBQUVFLGVBQWVGLEVBQUUsQ0FBQyxFQUFFO0lBQzlFLElBQUlHLFFBQVEsQ0FBQ0Y7SUFDYixJQUFJRyxTQUFTLENBQUNGO0lBQ2QsSUFBSUcsaUJBQWlCQyxTQUFTSCxVQUFVRyxTQUFTRjtJQUNqRCxJQUFJLENBQUNDLGdCQUFnQjtRQUNqQixNQUFNLElBQUlQLE1BQU0seUJBQXlCQyxNQUFNLENBQUNQLEtBQUssNkJBQTZCTyxNQUFNLENBQUNULFNBQVM7SUFDdEc7SUFDQSxPQUFPO1FBQUVLLElBQUlBO1FBQUlRLE9BQU9BO1FBQU9DLFFBQVFBO1FBQVFQLFFBQVFBO0lBQU87QUFDbEU7QUFDQVQsa0JBQWUsR0FBR0csY0FDbEIsd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2liYmFyb3NhLXByb2QvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvcGFyc2VBc3NldElkLmpzPzQ4NWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgZXhhbXBsZSA9ICdpbWFnZS1UYjlFdzhDWEl3YVk2UjFrak12STB1UlItMjAwMHgzMDAwLWpwZyc7XG5mdW5jdGlvbiBwYXJzZUFzc2V0SWQocmVmKSB7XG4gICAgdmFyIF9hID0gcmVmLnNwbGl0KCctJyksIGlkID0gX2FbMV0sIGRpbWVuc2lvblN0cmluZyA9IF9hWzJdLCBmb3JtYXQgPSBfYVszXTtcbiAgICBpZiAoIWlkIHx8ICFkaW1lbnNpb25TdHJpbmcgfHwgIWZvcm1hdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgYXNzZXQgX3JlZiAnXCIuY29uY2F0KHJlZiwgXCInLiBFeHBlY3RlZCBhbiBpZCBsaWtlIFxcXCJcIikuY29uY2F0KGV4YW1wbGUsIFwiXFxcIi5cIikpO1xuICAgIH1cbiAgICB2YXIgX2IgPSBkaW1lbnNpb25TdHJpbmcuc3BsaXQoJ3gnKSwgaW1nV2lkdGhTdHIgPSBfYlswXSwgaW1nSGVpZ2h0U3RyID0gX2JbMV07XG4gICAgdmFyIHdpZHRoID0gK2ltZ1dpZHRoU3RyO1xuICAgIHZhciBoZWlnaHQgPSAraW1nSGVpZ2h0U3RyO1xuICAgIHZhciBpc1ZhbGlkQXNzZXRJZCA9IGlzRmluaXRlKHdpZHRoKSAmJiBpc0Zpbml0ZShoZWlnaHQpO1xuICAgIGlmICghaXNWYWxpZEFzc2V0SWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFsZm9ybWVkIGFzc2V0IF9yZWYgJ1wiLmNvbmNhdChyZWYsIFwiJy4gRXhwZWN0ZWQgYW4gaWQgbGlrZSBcXFwiXCIpLmNvbmNhdChleGFtcGxlLCBcIlxcXCIuXCIpKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaWQ6IGlkLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LCBmb3JtYXQ6IGZvcm1hdCB9O1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gcGFyc2VBc3NldElkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2VBc3NldElkLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImV4YW1wbGUiLCJwYXJzZUFzc2V0SWQiLCJyZWYiLCJfYSIsInNwbGl0IiwiaWQiLCJkaW1lbnNpb25TdHJpbmciLCJmb3JtYXQiLCJFcnJvciIsImNvbmNhdCIsIl9iIiwiaW1nV2lkdGhTdHIiLCJpbWdIZWlnaHRTdHIiLCJ3aWR0aCIsImhlaWdodCIsImlzVmFsaWRBc3NldElkIiwiaXNGaW5pdGUiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/parseAssetId.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nvar example = \"image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg\";\nfunction parseAssetId(ref) {\n    var _a = ref.split(\"-\"), id = _a[1], dimensionString = _a[2], format = _a[3];\n    if (!id || !dimensionString || !format) {\n        throw new Error(\"Malformed asset _ref '\".concat(ref, \"'. Expected an id like \\\"\").concat(example, '\".'));\n    }\n    var _b = dimensionString.split(\"x\"), imgWidthStr = _b[0], imgHeightStr = _b[1];\n    var width = +imgWidthStr;\n    var height = +imgHeightStr;\n    var isValidAssetId = isFinite(width) && isFinite(height);\n    if (!isValidAssetId) {\n        throw new Error(\"Malformed asset _ref '\".concat(ref, \"'. Expected an id like \\\"\").concat(example, '\".'));\n    }\n    return {\n        id: id,\n        width: width,\n        height: height,\n        format: format\n    };\n}\nexports[\"default\"] = parseAssetId; //# sourceMappingURL=parseAssetId.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvcGFyc2VBc3NldElkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELElBQUlDLFVBQVU7QUFDZCxTQUFTQyxhQUFhQyxHQUFHO0lBQ3JCLElBQUlDLEtBQUtELElBQUlFLEtBQUssQ0FBQyxNQUFNQyxLQUFLRixFQUFFLENBQUMsRUFBRSxFQUFFRyxrQkFBa0JILEVBQUUsQ0FBQyxFQUFFLEVBQUVJLFNBQVNKLEVBQUUsQ0FBQyxFQUFFO0lBQzVFLElBQUksQ0FBQ0UsTUFBTSxDQUFDQyxtQkFBbUIsQ0FBQ0MsUUFBUTtRQUNwQyxNQUFNLElBQUlDLE1BQU0seUJBQXlCQyxNQUFNLENBQUNQLEtBQUssNkJBQTZCTyxNQUFNLENBQUNULFNBQVM7SUFDdEc7SUFDQSxJQUFJVSxLQUFLSixnQkFBZ0JGLEtBQUssQ0FBQyxNQUFNTyxjQUFjRCxFQUFFLENBQUMsRUFBRSxFQUFFRSxlQUFlRixFQUFFLENBQUMsRUFBRTtJQUM5RSxJQUFJRyxRQUFRLENBQUNGO0lBQ2IsSUFBSUcsU0FBUyxDQUFDRjtJQUNkLElBQUlHLGlCQUFpQkMsU0FBU0gsVUFBVUcsU0FBU0Y7SUFDakQsSUFBSSxDQUFDQyxnQkFBZ0I7UUFDakIsTUFBTSxJQUFJUCxNQUFNLHlCQUF5QkMsTUFBTSxDQUFDUCxLQUFLLDZCQUE2Qk8sTUFBTSxDQUFDVCxTQUFTO0lBQ3RHO0lBQ0EsT0FBTztRQUFFSyxJQUFJQTtRQUFJUSxPQUFPQTtRQUFPQyxRQUFRQTtRQUFRUCxRQUFRQTtJQUFPO0FBQ2xFO0FBQ0FULGtCQUFlLEdBQUdHLGNBQ2xCLHdDQUF3QyIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvaW1hZ2UtdXJsL2xpYi9ub2RlL3BhcnNlQXNzZXRJZC5qcz80ODVmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGV4YW1wbGUgPSAnaW1hZ2UtVGI5RXc4Q1hJd2FZNlIxa2pNdkkwdVJSLTIwMDB4MzAwMC1qcGcnO1xuZnVuY3Rpb24gcGFyc2VBc3NldElkKHJlZikge1xuICAgIHZhciBfYSA9IHJlZi5zcGxpdCgnLScpLCBpZCA9IF9hWzFdLCBkaW1lbnNpb25TdHJpbmcgPSBfYVsyXSwgZm9ybWF0ID0gX2FbM107XG4gICAgaWYgKCFpZCB8fCAhZGltZW5zaW9uU3RyaW5nIHx8ICFmb3JtYXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFsZm9ybWVkIGFzc2V0IF9yZWYgJ1wiLmNvbmNhdChyZWYsIFwiJy4gRXhwZWN0ZWQgYW4gaWQgbGlrZSBcXFwiXCIpLmNvbmNhdChleGFtcGxlLCBcIlxcXCIuXCIpKTtcbiAgICB9XG4gICAgdmFyIF9iID0gZGltZW5zaW9uU3RyaW5nLnNwbGl0KCd4JyksIGltZ1dpZHRoU3RyID0gX2JbMF0sIGltZ0hlaWdodFN0ciA9IF9iWzFdO1xuICAgIHZhciB3aWR0aCA9ICtpbWdXaWR0aFN0cjtcbiAgICB2YXIgaGVpZ2h0ID0gK2ltZ0hlaWdodFN0cjtcbiAgICB2YXIgaXNWYWxpZEFzc2V0SWQgPSBpc0Zpbml0ZSh3aWR0aCkgJiYgaXNGaW5pdGUoaGVpZ2h0KTtcbiAgICBpZiAoIWlzVmFsaWRBc3NldElkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBhc3NldCBfcmVmICdcIi5jb25jYXQocmVmLCBcIicuIEV4cGVjdGVkIGFuIGlkIGxpa2UgXFxcIlwiKS5jb25jYXQoZXhhbXBsZSwgXCJcXFwiLlwiKSk7XG4gICAgfVxuICAgIHJldHVybiB7IGlkOiBpZCwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgZm9ybWF0OiBmb3JtYXQgfTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHBhcnNlQXNzZXRJZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlQXNzZXRJZC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJleGFtcGxlIiwicGFyc2VBc3NldElkIiwicmVmIiwiX2EiLCJzcGxpdCIsImlkIiwiZGltZW5zaW9uU3RyaW5nIiwiZm9ybWF0IiwiRXJyb3IiLCJjb25jYXQiLCJfYiIsImltZ1dpZHRoU3RyIiwiaW1nSGVpZ2h0U3RyIiwid2lkdGgiLCJoZWlnaHQiLCJpc1ZhbGlkQXNzZXRJZCIsImlzRmluaXRlIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/image-url/lib/node/parseSource.js":
/*!****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/parseSource.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nvar __assign = (void 0) && (void 0).__assign || function() {\n    __assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nvar isRef = function(src) {\n    var source = src;\n    return source ? typeof source._ref === \"string\" : false;\n};\nvar isAsset = function(src) {\n    var source = src;\n    return source ? typeof source._id === \"string\" : false;\n};\nvar isAssetStub = function(src) {\n    var source = src;\n    return source && source.asset ? typeof source.asset.url === \"string\" : false;\n};\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nfunction parseSource(source) {\n    if (!source) {\n        return null;\n    }\n    var image;\n    if (typeof source === \"string\" && isUrl(source)) {\n        // Someone passed an existing image url?\n        image = {\n            asset: {\n                _ref: urlToId(source)\n            }\n        };\n    } else if (typeof source === \"string\") {\n        // Just an asset id\n        image = {\n            asset: {\n                _ref: source\n            }\n        };\n    } else if (isRef(source)) {\n        // We just got passed an asset directly\n        image = {\n            asset: source\n        };\n    } else if (isAsset(source)) {\n        // If we were passed an image asset document\n        image = {\n            asset: {\n                _ref: source._id || \"\"\n            }\n        };\n    } else if (isAssetStub(source)) {\n        // If we were passed a partial asset (`url`, but no `_id`)\n        image = {\n            asset: {\n                _ref: urlToId(source.asset.url)\n            }\n        };\n    } else if (typeof source.asset === \"object\") {\n        // Probably an actual image with materialized asset\n        image = __assign({}, source);\n    } else {\n        // We got something that does not look like an image, or it is an image\n        // that currently isn't sporting an asset.\n        return null;\n    }\n    var img = source;\n    if (img.crop) {\n        image.crop = img.crop;\n    }\n    if (img.hotspot) {\n        image.hotspot = img.hotspot;\n    }\n    return applyDefaults(image);\n}\nexports[\"default\"] = parseSource;\nfunction isUrl(url) {\n    return /^https?:\\/\\//.test(\"\".concat(url));\n}\nfunction urlToId(url) {\n    var parts = url.split(\"/\").slice(-1);\n    return \"image-\".concat(parts[0]).replace(/\\.([a-z]+)$/, \"-$1\");\n}\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image) {\n    if (image.crop && image.hotspot) {\n        return image;\n    }\n    // We need to pad in default values for crop or hotspot\n    var result = __assign({}, image);\n    if (!result.crop) {\n        result.crop = {\n            left: 0,\n            top: 0,\n            bottom: 0,\n            right: 0\n        };\n    }\n    if (!result.hotspot) {\n        result.hotspot = {\n            x: 0.5,\n            y: 0.5,\n            height: 1.0,\n            width: 1.0\n        };\n    }\n    return result;\n} //# sourceMappingURL=parseSource.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9wYXJzZVNvdXJjZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLFdBQVcsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxRQUFRLElBQUs7SUFDdENBLFdBQVdDLE9BQU9DLE1BQU0sSUFBSSxTQUFTQyxDQUFDO1FBQ2xDLElBQUssSUFBSUMsR0FBR0MsSUFBSSxHQUFHQyxJQUFJQyxVQUFVQyxNQUFNLEVBQUVILElBQUlDLEdBQUdELElBQUs7WUFDakRELElBQUlHLFNBQVMsQ0FBQ0YsRUFBRTtZQUNoQixJQUFLLElBQUlJLEtBQUtMLEVBQUcsSUFBSUgsT0FBT1MsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ1IsR0FBR0ssSUFDekROLENBQUMsQ0FBQ00sRUFBRSxHQUFHTCxDQUFDLENBQUNLLEVBQUU7UUFDbkI7UUFDQSxPQUFPTjtJQUNYO0lBQ0EsT0FBT0gsU0FBU2EsS0FBSyxDQUFDLElBQUksRUFBRU47QUFDaEM7QUFDQU4sOENBQTZDO0lBQUVlLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0QsSUFBSUMsUUFBUSxTQUFVQyxHQUFHO0lBQ3JCLElBQUlDLFNBQVNEO0lBQ2IsT0FBT0MsU0FBUyxPQUFPQSxPQUFPQyxJQUFJLEtBQUssV0FBVztBQUN0RDtBQUNBLElBQUlDLFVBQVUsU0FBVUgsR0FBRztJQUN2QixJQUFJQyxTQUFTRDtJQUNiLE9BQU9DLFNBQVMsT0FBT0EsT0FBT0csR0FBRyxLQUFLLFdBQVc7QUFDckQ7QUFDQSxJQUFJQyxjQUFjLFNBQVVMLEdBQUc7SUFDM0IsSUFBSUMsU0FBU0Q7SUFDYixPQUFPQyxVQUFVQSxPQUFPSyxLQUFLLEdBQUcsT0FBT0wsT0FBT0ssS0FBSyxDQUFDQyxHQUFHLEtBQUssV0FBVztBQUMzRTtBQUNBLGlGQUFpRjtBQUNqRixzQ0FBc0M7QUFDdEMsU0FBU0MsWUFBWVAsTUFBTTtJQUN2QixJQUFJLENBQUNBLFFBQVE7UUFDVCxPQUFPO0lBQ1g7SUFDQSxJQUFJUTtJQUNKLElBQUksT0FBT1IsV0FBVyxZQUFZUyxNQUFNVCxTQUFTO1FBQzdDLHdDQUF3QztRQUN4Q1EsUUFBUTtZQUNKSCxPQUFPO2dCQUFFSixNQUFNUyxRQUFRVjtZQUFRO1FBQ25DO0lBQ0osT0FDSyxJQUFJLE9BQU9BLFdBQVcsVUFBVTtRQUNqQyxtQkFBbUI7UUFDbkJRLFFBQVE7WUFDSkgsT0FBTztnQkFBRUosTUFBTUQ7WUFBTztRQUMxQjtJQUNKLE9BQ0ssSUFBSUYsTUFBTUUsU0FBUztRQUNwQix1Q0FBdUM7UUFDdkNRLFFBQVE7WUFDSkgsT0FBT0w7UUFDWDtJQUNKLE9BQ0ssSUFBSUUsUUFBUUYsU0FBUztRQUN0Qiw0Q0FBNEM7UUFDNUNRLFFBQVE7WUFDSkgsT0FBTztnQkFDSEosTUFBTUQsT0FBT0csR0FBRyxJQUFJO1lBQ3hCO1FBQ0o7SUFDSixPQUNLLElBQUlDLFlBQVlKLFNBQVM7UUFDMUIsMERBQTBEO1FBQzFEUSxRQUFRO1lBQ0pILE9BQU87Z0JBQ0hKLE1BQU1TLFFBQVFWLE9BQU9LLEtBQUssQ0FBQ0MsR0FBRztZQUNsQztRQUNKO0lBQ0osT0FDSyxJQUFJLE9BQU9OLE9BQU9LLEtBQUssS0FBSyxVQUFVO1FBQ3ZDLG1EQUFtRDtRQUNuREcsUUFBUTNCLFNBQVMsQ0FBQyxHQUFHbUI7SUFDekIsT0FDSztRQUNELHVFQUF1RTtRQUN2RSwwQ0FBMEM7UUFDMUMsT0FBTztJQUNYO0lBQ0EsSUFBSVcsTUFBTVg7SUFDVixJQUFJVyxJQUFJQyxJQUFJLEVBQUU7UUFDVkosTUFBTUksSUFBSSxHQUFHRCxJQUFJQyxJQUFJO0lBQ3pCO0lBQ0EsSUFBSUQsSUFBSUUsT0FBTyxFQUFFO1FBQ2JMLE1BQU1LLE9BQU8sR0FBR0YsSUFBSUUsT0FBTztJQUMvQjtJQUNBLE9BQU9DLGNBQWNOO0FBQ3pCO0FBQ0FaLGtCQUFlLEdBQUdXO0FBQ2xCLFNBQVNFLE1BQU1ILEdBQUc7SUFDZCxPQUFPLGVBQWVVLElBQUksQ0FBQyxHQUFHQyxNQUFNLENBQUNYO0FBQ3pDO0FBQ0EsU0FBU0ksUUFBUUosR0FBRztJQUNoQixJQUFJWSxRQUFRWixJQUFJYSxLQUFLLENBQUMsS0FBS0MsS0FBSyxDQUFDLENBQUM7SUFDbEMsT0FBTyxTQUFTSCxNQUFNLENBQUNDLEtBQUssQ0FBQyxFQUFFLEVBQUVHLE9BQU8sQ0FBQyxlQUFlO0FBQzVEO0FBQ0EsMENBQTBDO0FBQzFDLFNBQVNQLGNBQWNOLEtBQUs7SUFDeEIsSUFBSUEsTUFBTUksSUFBSSxJQUFJSixNQUFNSyxPQUFPLEVBQUU7UUFDN0IsT0FBT0w7SUFDWDtJQUNBLHVEQUF1RDtJQUN2RCxJQUFJYyxTQUFTekMsU0FBUyxDQUFDLEdBQUcyQjtJQUMxQixJQUFJLENBQUNjLE9BQU9WLElBQUksRUFBRTtRQUNkVSxPQUFPVixJQUFJLEdBQUc7WUFDVlcsTUFBTTtZQUNOQyxLQUFLO1lBQ0xDLFFBQVE7WUFDUkMsT0FBTztRQUNYO0lBQ0o7SUFDQSxJQUFJLENBQUNKLE9BQU9ULE9BQU8sRUFBRTtRQUNqQlMsT0FBT1QsT0FBTyxHQUFHO1lBQ2JjLEdBQUc7WUFDSEMsR0FBRztZQUNIQyxRQUFRO1lBQ1JDLE9BQU87UUFDWDtJQUNKO0lBQ0EsT0FBT1I7QUFDWCxFQUNBLHVDQUF1QyIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvaW1hZ2UtdXJsL2xpYi9ub2RlL3BhcnNlU291cmNlLmpzPzJkYzciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGlzUmVmID0gZnVuY3Rpb24gKHNyYykge1xuICAgIHZhciBzb3VyY2UgPSBzcmM7XG4gICAgcmV0dXJuIHNvdXJjZSA/IHR5cGVvZiBzb3VyY2UuX3JlZiA9PT0gJ3N0cmluZycgOiBmYWxzZTtcbn07XG52YXIgaXNBc3NldCA9IGZ1bmN0aW9uIChzcmMpIHtcbiAgICB2YXIgc291cmNlID0gc3JjO1xuICAgIHJldHVybiBzb3VyY2UgPyB0eXBlb2Ygc291cmNlLl9pZCA9PT0gJ3N0cmluZycgOiBmYWxzZTtcbn07XG52YXIgaXNBc3NldFN0dWIgPSBmdW5jdGlvbiAoc3JjKSB7XG4gICAgdmFyIHNvdXJjZSA9IHNyYztcbiAgICByZXR1cm4gc291cmNlICYmIHNvdXJjZS5hc3NldCA/IHR5cGVvZiBzb3VyY2UuYXNzZXQudXJsID09PSAnc3RyaW5nJyA6IGZhbHNlO1xufTtcbi8vIENvbnZlcnQgYW4gYXNzZXQtaWQsIGFzc2V0IG9yIGltYWdlIHRvIGFuIGltYWdlIHJlY29yZCBzdWl0YWJsZSBmb3IgcHJvY2Vzc2luZ1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHBhcnNlU291cmNlKHNvdXJjZSkge1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgaW1hZ2U7XG4gICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnICYmIGlzVXJsKHNvdXJjZSkpIHtcbiAgICAgICAgLy8gU29tZW9uZSBwYXNzZWQgYW4gZXhpc3RpbmcgaW1hZ2UgdXJsP1xuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiB7IF9yZWY6IHVybFRvSWQoc291cmNlKSB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBKdXN0IGFuIGFzc2V0IGlkXG4gICAgICAgIGltYWdlID0ge1xuICAgICAgICAgICAgYXNzZXQ6IHsgX3JlZjogc291cmNlIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUmVmKHNvdXJjZSkpIHtcbiAgICAgICAgLy8gV2UganVzdCBnb3QgcGFzc2VkIGFuIGFzc2V0IGRpcmVjdGx5XG4gICAgICAgIGltYWdlID0ge1xuICAgICAgICAgICAgYXNzZXQ6IHNvdXJjZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBc3NldChzb3VyY2UpKSB7XG4gICAgICAgIC8vIElmIHdlIHdlcmUgcGFzc2VkIGFuIGltYWdlIGFzc2V0IGRvY3VtZW50XG4gICAgICAgIGltYWdlID0ge1xuICAgICAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICAgICAgICBfcmVmOiBzb3VyY2UuX2lkIHx8ICcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBc3NldFN0dWIoc291cmNlKSkge1xuICAgICAgICAvLyBJZiB3ZSB3ZXJlIHBhc3NlZCBhIHBhcnRpYWwgYXNzZXQgKGB1cmxgLCBidXQgbm8gYF9pZGApXG4gICAgICAgIGltYWdlID0ge1xuICAgICAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICAgICAgICBfcmVmOiB1cmxUb0lkKHNvdXJjZS5hc3NldC51cmwpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHNvdXJjZS5hc3NldCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gUHJvYmFibHkgYW4gYWN0dWFsIGltYWdlIHdpdGggbWF0ZXJpYWxpemVkIGFzc2V0XG4gICAgICAgIGltYWdlID0gX19hc3NpZ24oe30sIHNvdXJjZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBXZSBnb3Qgc29tZXRoaW5nIHRoYXQgZG9lcyBub3QgbG9vayBsaWtlIGFuIGltYWdlLCBvciBpdCBpcyBhbiBpbWFnZVxuICAgICAgICAvLyB0aGF0IGN1cnJlbnRseSBpc24ndCBzcG9ydGluZyBhbiBhc3NldC5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBpbWcgPSBzb3VyY2U7XG4gICAgaWYgKGltZy5jcm9wKSB7XG4gICAgICAgIGltYWdlLmNyb3AgPSBpbWcuY3JvcDtcbiAgICB9XG4gICAgaWYgKGltZy5ob3RzcG90KSB7XG4gICAgICAgIGltYWdlLmhvdHNwb3QgPSBpbWcuaG90c3BvdDtcbiAgICB9XG4gICAgcmV0dXJuIGFwcGx5RGVmYXVsdHMoaW1hZ2UpO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gcGFyc2VTb3VyY2U7XG5mdW5jdGlvbiBpc1VybCh1cmwpIHtcbiAgICByZXR1cm4gL15odHRwcz86XFwvXFwvLy50ZXN0KFwiXCIuY29uY2F0KHVybCkpO1xufVxuZnVuY3Rpb24gdXJsVG9JZCh1cmwpIHtcbiAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoJy8nKS5zbGljZSgtMSk7XG4gICAgcmV0dXJuIFwiaW1hZ2UtXCIuY29uY2F0KHBhcnRzWzBdKS5yZXBsYWNlKC9cXC4oW2Etel0rKSQvLCAnLSQxJyk7XG59XG4vLyBNb2NrIGNyb3AgYW5kIGhvdHNwb3QgaWYgaW1hZ2UgbGFja3MgaXRcbmZ1bmN0aW9uIGFwcGx5RGVmYXVsdHMoaW1hZ2UpIHtcbiAgICBpZiAoaW1hZ2UuY3JvcCAmJiBpbWFnZS5ob3RzcG90KSB7XG4gICAgICAgIHJldHVybiBpbWFnZTtcbiAgICB9XG4gICAgLy8gV2UgbmVlZCB0byBwYWQgaW4gZGVmYXVsdCB2YWx1ZXMgZm9yIGNyb3Agb3IgaG90c3BvdFxuICAgIHZhciByZXN1bHQgPSBfX2Fzc2lnbih7fSwgaW1hZ2UpO1xuICAgIGlmICghcmVzdWx0LmNyb3ApIHtcbiAgICAgICAgcmVzdWx0LmNyb3AgPSB7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghcmVzdWx0LmhvdHNwb3QpIHtcbiAgICAgICAgcmVzdWx0LmhvdHNwb3QgPSB7XG4gICAgICAgICAgICB4OiAwLjUsXG4gICAgICAgICAgICB5OiAwLjUsXG4gICAgICAgICAgICBoZWlnaHQ6IDEuMCxcbiAgICAgICAgICAgIHdpZHRoOiAxLjAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZVNvdXJjZS5qcy5tYXAiXSwibmFtZXMiOlsiX19hc3NpZ24iLCJPYmplY3QiLCJhc3NpZ24iLCJ0IiwicyIsImkiLCJuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJpc1JlZiIsInNyYyIsInNvdXJjZSIsIl9yZWYiLCJpc0Fzc2V0IiwiX2lkIiwiaXNBc3NldFN0dWIiLCJhc3NldCIsInVybCIsInBhcnNlU291cmNlIiwiaW1hZ2UiLCJpc1VybCIsInVybFRvSWQiLCJpbWciLCJjcm9wIiwiaG90c3BvdCIsImFwcGx5RGVmYXVsdHMiLCJkZWZhdWx0IiwidGVzdCIsImNvbmNhdCIsInBhcnRzIiwic3BsaXQiLCJzbGljZSIsInJlcGxhY2UiLCJyZXN1bHQiLCJsZWZ0IiwidG9wIiwiYm90dG9tIiwicmlnaHQiLCJ4IiwieSIsImhlaWdodCIsIndpZHRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/image-url/lib/node/parseSource.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/image-url/lib/node/parseSource.js":
/*!****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/parseSource.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nvar __assign = (void 0) && (void 0).__assign || function() {\n    __assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nvar isRef = function(src) {\n    var source = src;\n    return source ? typeof source._ref === \"string\" : false;\n};\nvar isAsset = function(src) {\n    var source = src;\n    return source ? typeof source._id === \"string\" : false;\n};\nvar isAssetStub = function(src) {\n    var source = src;\n    return source && source.asset ? typeof source.asset.url === \"string\" : false;\n};\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nfunction parseSource(source) {\n    if (!source) {\n        return null;\n    }\n    var image;\n    if (typeof source === \"string\" && isUrl(source)) {\n        // Someone passed an existing image url?\n        image = {\n            asset: {\n                _ref: urlToId(source)\n            }\n        };\n    } else if (typeof source === \"string\") {\n        // Just an asset id\n        image = {\n            asset: {\n                _ref: source\n            }\n        };\n    } else if (isRef(source)) {\n        // We just got passed an asset directly\n        image = {\n            asset: source\n        };\n    } else if (isAsset(source)) {\n        // If we were passed an image asset document\n        image = {\n            asset: {\n                _ref: source._id || \"\"\n            }\n        };\n    } else if (isAssetStub(source)) {\n        // If we were passed a partial asset (`url`, but no `_id`)\n        image = {\n            asset: {\n                _ref: urlToId(source.asset.url)\n            }\n        };\n    } else if (typeof source.asset === \"object\") {\n        // Probably an actual image with materialized asset\n        image = __assign({}, source);\n    } else {\n        // We got something that does not look like an image, or it is an image\n        // that currently isn't sporting an asset.\n        return null;\n    }\n    var img = source;\n    if (img.crop) {\n        image.crop = img.crop;\n    }\n    if (img.hotspot) {\n        image.hotspot = img.hotspot;\n    }\n    return applyDefaults(image);\n}\nexports[\"default\"] = parseSource;\nfunction isUrl(url) {\n    return /^https?:\\/\\//.test(\"\".concat(url));\n}\nfunction urlToId(url) {\n    var parts = url.split(\"/\").slice(-1);\n    return \"image-\".concat(parts[0]).replace(/\\.([a-z]+)$/, \"-$1\");\n}\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image) {\n    if (image.crop && image.hotspot) {\n        return image;\n    }\n    // We need to pad in default values for crop or hotspot\n    var result = __assign({}, image);\n    if (!result.crop) {\n        result.crop = {\n            left: 0,\n            top: 0,\n            bottom: 0,\n            right: 0\n        };\n    }\n    if (!result.hotspot) {\n        result.hotspot = {\n            x: 0.5,\n            y: 0.5,\n            height: 1.0,\n            width: 1.0\n        };\n    }\n    return result;\n} //# sourceMappingURL=parseSource.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvcGFyc2VTb3VyY2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxXQUFXLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsUUFBUSxJQUFLO0lBQ3RDQSxXQUFXQyxPQUFPQyxNQUFNLElBQUksU0FBU0MsQ0FBQztRQUNsQyxJQUFLLElBQUlDLEdBQUdDLElBQUksR0FBR0MsSUFBSUMsVUFBVUMsTUFBTSxFQUFFSCxJQUFJQyxHQUFHRCxJQUFLO1lBQ2pERCxJQUFJRyxTQUFTLENBQUNGLEVBQUU7WUFDaEIsSUFBSyxJQUFJSSxLQUFLTCxFQUFHLElBQUlILE9BQU9TLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNSLEdBQUdLLElBQ3pETixDQUFDLENBQUNNLEVBQUUsR0FBR0wsQ0FBQyxDQUFDSyxFQUFFO1FBQ25CO1FBQ0EsT0FBT047SUFDWDtJQUNBLE9BQU9ILFNBQVNhLEtBQUssQ0FBQyxJQUFJLEVBQUVOO0FBQ2hDO0FBQ0FOLDhDQUE2QztJQUFFZSxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELElBQUlDLFFBQVEsU0FBVUMsR0FBRztJQUNyQixJQUFJQyxTQUFTRDtJQUNiLE9BQU9DLFNBQVMsT0FBT0EsT0FBT0MsSUFBSSxLQUFLLFdBQVc7QUFDdEQ7QUFDQSxJQUFJQyxVQUFVLFNBQVVILEdBQUc7SUFDdkIsSUFBSUMsU0FBU0Q7SUFDYixPQUFPQyxTQUFTLE9BQU9BLE9BQU9HLEdBQUcsS0FBSyxXQUFXO0FBQ3JEO0FBQ0EsSUFBSUMsY0FBYyxTQUFVTCxHQUFHO0lBQzNCLElBQUlDLFNBQVNEO0lBQ2IsT0FBT0MsVUFBVUEsT0FBT0ssS0FBSyxHQUFHLE9BQU9MLE9BQU9LLEtBQUssQ0FBQ0MsR0FBRyxLQUFLLFdBQVc7QUFDM0U7QUFDQSxpRkFBaUY7QUFDakYsc0NBQXNDO0FBQ3RDLFNBQVNDLFlBQVlQLE1BQU07SUFDdkIsSUFBSSxDQUFDQSxRQUFRO1FBQ1QsT0FBTztJQUNYO0lBQ0EsSUFBSVE7SUFDSixJQUFJLE9BQU9SLFdBQVcsWUFBWVMsTUFBTVQsU0FBUztRQUM3Qyx3Q0FBd0M7UUFDeENRLFFBQVE7WUFDSkgsT0FBTztnQkFBRUosTUFBTVMsUUFBUVY7WUFBUTtRQUNuQztJQUNKLE9BQ0ssSUFBSSxPQUFPQSxXQUFXLFVBQVU7UUFDakMsbUJBQW1CO1FBQ25CUSxRQUFRO1lBQ0pILE9BQU87Z0JBQUVKLE1BQU1EO1lBQU87UUFDMUI7SUFDSixPQUNLLElBQUlGLE1BQU1FLFNBQVM7UUFDcEIsdUNBQXVDO1FBQ3ZDUSxRQUFRO1lBQ0pILE9BQU9MO1FBQ1g7SUFDSixPQUNLLElBQUlFLFFBQVFGLFNBQVM7UUFDdEIsNENBQTRDO1FBQzVDUSxRQUFRO1lBQ0pILE9BQU87Z0JBQ0hKLE1BQU1ELE9BQU9HLEdBQUcsSUFBSTtZQUN4QjtRQUNKO0lBQ0osT0FDSyxJQUFJQyxZQUFZSixTQUFTO1FBQzFCLDBEQUEwRDtRQUMxRFEsUUFBUTtZQUNKSCxPQUFPO2dCQUNISixNQUFNUyxRQUFRVixPQUFPSyxLQUFLLENBQUNDLEdBQUc7WUFDbEM7UUFDSjtJQUNKLE9BQ0ssSUFBSSxPQUFPTixPQUFPSyxLQUFLLEtBQUssVUFBVTtRQUN2QyxtREFBbUQ7UUFDbkRHLFFBQVEzQixTQUFTLENBQUMsR0FBR21CO0lBQ3pCLE9BQ0s7UUFDRCx1RUFBdUU7UUFDdkUsMENBQTBDO1FBQzFDLE9BQU87SUFDWDtJQUNBLElBQUlXLE1BQU1YO0lBQ1YsSUFBSVcsSUFBSUMsSUFBSSxFQUFFO1FBQ1ZKLE1BQU1JLElBQUksR0FBR0QsSUFBSUMsSUFBSTtJQUN6QjtJQUNBLElBQUlELElBQUlFLE9BQU8sRUFBRTtRQUNiTCxNQUFNSyxPQUFPLEdBQUdGLElBQUlFLE9BQU87SUFDL0I7SUFDQSxPQUFPQyxjQUFjTjtBQUN6QjtBQUNBWixrQkFBZSxHQUFHVztBQUNsQixTQUFTRSxNQUFNSCxHQUFHO0lBQ2QsT0FBTyxlQUFlVSxJQUFJLENBQUMsR0FBR0MsTUFBTSxDQUFDWDtBQUN6QztBQUNBLFNBQVNJLFFBQVFKLEdBQUc7SUFDaEIsSUFBSVksUUFBUVosSUFBSWEsS0FBSyxDQUFDLEtBQUtDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLE9BQU8sU0FBU0gsTUFBTSxDQUFDQyxLQUFLLENBQUMsRUFBRSxFQUFFRyxPQUFPLENBQUMsZUFBZTtBQUM1RDtBQUNBLDBDQUEwQztBQUMxQyxTQUFTUCxjQUFjTixLQUFLO0lBQ3hCLElBQUlBLE1BQU1JLElBQUksSUFBSUosTUFBTUssT0FBTyxFQUFFO1FBQzdCLE9BQU9MO0lBQ1g7SUFDQSx1REFBdUQ7SUFDdkQsSUFBSWMsU0FBU3pDLFNBQVMsQ0FBQyxHQUFHMkI7SUFDMUIsSUFBSSxDQUFDYyxPQUFPVixJQUFJLEVBQUU7UUFDZFUsT0FBT1YsSUFBSSxHQUFHO1lBQ1ZXLE1BQU07WUFDTkMsS0FBSztZQUNMQyxRQUFRO1lBQ1JDLE9BQU87UUFDWDtJQUNKO0lBQ0EsSUFBSSxDQUFDSixPQUFPVCxPQUFPLEVBQUU7UUFDakJTLE9BQU9ULE9BQU8sR0FBRztZQUNiYyxHQUFHO1lBQ0hDLEdBQUc7WUFDSEMsUUFBUTtZQUNSQyxPQUFPO1FBQ1g7SUFDSjtJQUNBLE9BQU9SO0FBQ1gsRUFDQSx1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS9wYXJzZVNvdXJjZS5qcz8yZGM3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBpc1JlZiA9IGZ1bmN0aW9uIChzcmMpIHtcbiAgICB2YXIgc291cmNlID0gc3JjO1xuICAgIHJldHVybiBzb3VyY2UgPyB0eXBlb2Ygc291cmNlLl9yZWYgPT09ICdzdHJpbmcnIDogZmFsc2U7XG59O1xudmFyIGlzQXNzZXQgPSBmdW5jdGlvbiAoc3JjKSB7XG4gICAgdmFyIHNvdXJjZSA9IHNyYztcbiAgICByZXR1cm4gc291cmNlID8gdHlwZW9mIHNvdXJjZS5faWQgPT09ICdzdHJpbmcnIDogZmFsc2U7XG59O1xudmFyIGlzQXNzZXRTdHViID0gZnVuY3Rpb24gKHNyYykge1xuICAgIHZhciBzb3VyY2UgPSBzcmM7XG4gICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2UuYXNzZXQgPyB0eXBlb2Ygc291cmNlLmFzc2V0LnVybCA9PT0gJ3N0cmluZycgOiBmYWxzZTtcbn07XG4vLyBDb252ZXJ0IGFuIGFzc2V0LWlkLCBhc3NldCBvciBpbWFnZSB0byBhbiBpbWFnZSByZWNvcmQgc3VpdGFibGUgZm9yIHByb2Nlc3Npbmdcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiBwYXJzZVNvdXJjZShzb3VyY2UpIHtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIGltYWdlO1xuICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJyAmJiBpc1VybChzb3VyY2UpKSB7XG4gICAgICAgIC8vIFNvbWVvbmUgcGFzc2VkIGFuIGV4aXN0aW5nIGltYWdlIHVybD9cbiAgICAgICAgaW1hZ2UgPSB7XG4gICAgICAgICAgICBhc3NldDogeyBfcmVmOiB1cmxUb0lkKHNvdXJjZSkgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gSnVzdCBhbiBhc3NldCBpZFxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiB7IF9yZWY6IHNvdXJjZSB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1JlZihzb3VyY2UpKSB7XG4gICAgICAgIC8vIFdlIGp1c3QgZ290IHBhc3NlZCBhbiBhc3NldCBkaXJlY3RseVxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiBzb3VyY2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXNzZXQoc291cmNlKSkge1xuICAgICAgICAvLyBJZiB3ZSB3ZXJlIHBhc3NlZCBhbiBpbWFnZSBhc3NldCBkb2N1bWVudFxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgICAgX3JlZjogc291cmNlLl9pZCB8fCAnJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXNzZXRTdHViKHNvdXJjZSkpIHtcbiAgICAgICAgLy8gSWYgd2Ugd2VyZSBwYXNzZWQgYSBwYXJ0aWFsIGFzc2V0IChgdXJsYCwgYnV0IG5vIGBfaWRgKVxuICAgICAgICBpbWFnZSA9IHtcbiAgICAgICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgICAgICAgX3JlZjogdXJsVG9JZChzb3VyY2UuYXNzZXQudXJsKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UuYXNzZXQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIFByb2JhYmx5IGFuIGFjdHVhbCBpbWFnZSB3aXRoIG1hdGVyaWFsaXplZCBhc3NldFxuICAgICAgICBpbWFnZSA9IF9fYXNzaWduKHt9LCBzb3VyY2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gV2UgZ290IHNvbWV0aGluZyB0aGF0IGRvZXMgbm90IGxvb2sgbGlrZSBhbiBpbWFnZSwgb3IgaXQgaXMgYW4gaW1hZ2VcbiAgICAgICAgLy8gdGhhdCBjdXJyZW50bHkgaXNuJ3Qgc3BvcnRpbmcgYW4gYXNzZXQuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgaW1nID0gc291cmNlO1xuICAgIGlmIChpbWcuY3JvcCkge1xuICAgICAgICBpbWFnZS5jcm9wID0gaW1nLmNyb3A7XG4gICAgfVxuICAgIGlmIChpbWcuaG90c3BvdCkge1xuICAgICAgICBpbWFnZS5ob3RzcG90ID0gaW1nLmhvdHNwb3Q7XG4gICAgfVxuICAgIHJldHVybiBhcHBseURlZmF1bHRzKGltYWdlKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHBhcnNlU291cmNlO1xuZnVuY3Rpb24gaXNVcmwodXJsKSB7XG4gICAgcmV0dXJuIC9eaHR0cHM/OlxcL1xcLy8udGVzdChcIlwiLmNvbmNhdCh1cmwpKTtcbn1cbmZ1bmN0aW9uIHVybFRvSWQodXJsKSB7XG4gICAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KCcvJykuc2xpY2UoLTEpO1xuICAgIHJldHVybiBcImltYWdlLVwiLmNvbmNhdChwYXJ0c1swXSkucmVwbGFjZSgvXFwuKFthLXpdKykkLywgJy0kMScpO1xufVxuLy8gTW9jayBjcm9wIGFuZCBob3RzcG90IGlmIGltYWdlIGxhY2tzIGl0XG5mdW5jdGlvbiBhcHBseURlZmF1bHRzKGltYWdlKSB7XG4gICAgaWYgKGltYWdlLmNyb3AgJiYgaW1hZ2UuaG90c3BvdCkge1xuICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgfVxuICAgIC8vIFdlIG5lZWQgdG8gcGFkIGluIGRlZmF1bHQgdmFsdWVzIGZvciBjcm9wIG9yIGhvdHNwb3RcbiAgICB2YXIgcmVzdWx0ID0gX19hc3NpZ24oe30sIGltYWdlKTtcbiAgICBpZiAoIXJlc3VsdC5jcm9wKSB7XG4gICAgICAgIHJlc3VsdC5jcm9wID0ge1xuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdC5ob3RzcG90KSB7XG4gICAgICAgIHJlc3VsdC5ob3RzcG90ID0ge1xuICAgICAgICAgICAgeDogMC41LFxuICAgICAgICAgICAgeTogMC41LFxuICAgICAgICAgICAgaGVpZ2h0OiAxLjAsXG4gICAgICAgICAgICB3aWR0aDogMS4wLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyc2VTb3VyY2UuanMubWFwIl0sIm5hbWVzIjpbIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNSZWYiLCJzcmMiLCJzb3VyY2UiLCJfcmVmIiwiaXNBc3NldCIsIl9pZCIsImlzQXNzZXRTdHViIiwiYXNzZXQiLCJ1cmwiLCJwYXJzZVNvdXJjZSIsImltYWdlIiwiaXNVcmwiLCJ1cmxUb0lkIiwiaW1nIiwiY3JvcCIsImhvdHNwb3QiLCJhcHBseURlZmF1bHRzIiwiZGVmYXVsdCIsInRlc3QiLCJjb25jYXQiLCJwYXJ0cyIsInNwbGl0Iiwic2xpY2UiLCJyZXBsYWNlIiwicmVzdWx0IiwibGVmdCIsInRvcCIsImJvdHRvbSIsInJpZ2h0IiwieCIsInkiLCJoZWlnaHQiLCJ3aWR0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/image-url/lib/node/parseSource.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/image-url/lib/node/urlForImage.js":
/*!****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/urlForImage.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar __assign = (void 0) && (void 0).__assign || function() {\n    __assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.parseSource = exports.SPEC_NAME_TO_URL_NAME_MAPPINGS = void 0;\nvar parseAssetId_1 = __importDefault(__webpack_require__(/*! ./parseAssetId */ \"(action-browser)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js\"));\nvar parseSource_1 = __importDefault(__webpack_require__(/*! ./parseSource */ \"(action-browser)/./node_modules/@sanity/image-url/lib/node/parseSource.js\"));\nexports.parseSource = parseSource_1.default;\nexports.SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n    [\n        \"width\",\n        \"w\"\n    ],\n    [\n        \"height\",\n        \"h\"\n    ],\n    [\n        \"format\",\n        \"fm\"\n    ],\n    [\n        \"download\",\n        \"dl\"\n    ],\n    [\n        \"blur\",\n        \"blur\"\n    ],\n    [\n        \"sharpen\",\n        \"sharp\"\n    ],\n    [\n        \"invert\",\n        \"invert\"\n    ],\n    [\n        \"orientation\",\n        \"or\"\n    ],\n    [\n        \"minHeight\",\n        \"min-h\"\n    ],\n    [\n        \"maxHeight\",\n        \"max-h\"\n    ],\n    [\n        \"minWidth\",\n        \"min-w\"\n    ],\n    [\n        \"maxWidth\",\n        \"max-w\"\n    ],\n    [\n        \"quality\",\n        \"q\"\n    ],\n    [\n        \"fit\",\n        \"fit\"\n    ],\n    [\n        \"crop\",\n        \"crop\"\n    ],\n    [\n        \"saturation\",\n        \"sat\"\n    ],\n    [\n        \"auto\",\n        \"auto\"\n    ],\n    [\n        \"dpr\",\n        \"dpr\"\n    ],\n    [\n        \"pad\",\n        \"pad\"\n    ]\n];\nfunction urlForImage(options) {\n    var spec = __assign({}, options || {});\n    var source = spec.source;\n    delete spec.source;\n    var image = (0, parseSource_1.default)(source);\n    if (!image) {\n        throw new Error(\"Unable to resolve image URL from source (\".concat(JSON.stringify(source), \")\"));\n    }\n    var id = image.asset._ref || image.asset._id || \"\";\n    var asset = (0, parseAssetId_1.default)(id);\n    // Compute crop rect in terms of pixel coordinates in the raw source image\n    var cropLeft = Math.round(image.crop.left * asset.width);\n    var cropTop = Math.round(image.crop.top * asset.height);\n    var crop = {\n        left: cropLeft,\n        top: cropTop,\n        width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n        height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop)\n    };\n    // Compute hot spot rect in terms of pixel coordinates\n    var hotSpotVerticalRadius = image.hotspot.height * asset.height / 2;\n    var hotSpotHorizontalRadius = image.hotspot.width * asset.width / 2;\n    var hotSpotCenterX = image.hotspot.x * asset.width;\n    var hotSpotCenterY = image.hotspot.y * asset.height;\n    var hotspot = {\n        left: hotSpotCenterX - hotSpotHorizontalRadius,\n        top: hotSpotCenterY - hotSpotVerticalRadius,\n        right: hotSpotCenterX + hotSpotHorizontalRadius,\n        bottom: hotSpotCenterY + hotSpotVerticalRadius\n    };\n    // If irrelevant, or if we are requested to: don't perform crop/fit based on\n    // the crop/hotspot.\n    if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n        spec = __assign(__assign({}, spec), fit({\n            crop: crop,\n            hotspot: hotspot\n        }, spec));\n    }\n    return specToImageUrl(__assign(__assign({}, spec), {\n        asset: asset\n    }));\n}\nexports[\"default\"] = urlForImage;\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec) {\n    var cdnUrl = (spec.baseUrl || \"https://cdn.sanity.io\").replace(/\\/+$/, \"\");\n    var filename = \"\".concat(spec.asset.id, \"-\").concat(spec.asset.width, \"x\").concat(spec.asset.height, \".\").concat(spec.asset.format);\n    var baseUrl = \"\".concat(cdnUrl, \"/images/\").concat(spec.projectId, \"/\").concat(spec.dataset, \"/\").concat(filename);\n    var params = [];\n    if (spec.rect) {\n        // Only bother url with a crop if it actually crops anything\n        var _a = spec.rect, left = _a.left, top_1 = _a.top, width = _a.width, height = _a.height;\n        var isEffectiveCrop = left !== 0 || top_1 !== 0 || height !== spec.asset.height || width !== spec.asset.width;\n        if (isEffectiveCrop) {\n            params.push(\"rect=\".concat(left, \",\").concat(top_1, \",\").concat(width, \",\").concat(height));\n        }\n    }\n    if (spec.bg) {\n        params.push(\"bg=\".concat(spec.bg));\n    }\n    if (spec.focalPoint) {\n        params.push(\"fp-x=\".concat(spec.focalPoint.x));\n        params.push(\"fp-y=\".concat(spec.focalPoint.y));\n    }\n    var flip = [\n        spec.flipHorizontal && \"h\",\n        spec.flipVertical && \"v\"\n    ].filter(Boolean).join(\"\");\n    if (flip) {\n        params.push(\"flip=\".concat(flip));\n    }\n    // Map from spec name to url param name, and allow using the actual param name as an alternative\n    exports.SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach(function(mapping) {\n        var specName = mapping[0], param = mapping[1];\n        if (typeof spec[specName] !== \"undefined\") {\n            params.push(\"\".concat(param, \"=\").concat(encodeURIComponent(spec[specName])));\n        } else if (typeof spec[param] !== \"undefined\") {\n            params.push(\"\".concat(param, \"=\").concat(encodeURIComponent(spec[param])));\n        }\n    });\n    if (params.length === 0) {\n        return baseUrl;\n    }\n    return \"\".concat(baseUrl, \"?\").concat(params.join(\"&\"));\n}\nfunction fit(source, spec) {\n    var cropRect;\n    var imgWidth = spec.width;\n    var imgHeight = spec.height;\n    // If we are not constraining the aspect ratio, we'll just use the whole crop\n    if (!(imgWidth && imgHeight)) {\n        return {\n            width: imgWidth,\n            height: imgHeight,\n            rect: source.crop\n        };\n    }\n    var crop = source.crop;\n    var hotspot = source.hotspot;\n    // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n    var desiredAspectRatio = imgWidth / imgHeight;\n    var cropAspectRatio = crop.width / crop.height;\n    if (cropAspectRatio > desiredAspectRatio) {\n        // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n        var height = Math.round(crop.height);\n        var width = Math.round(height * desiredAspectRatio);\n        var top_2 = Math.max(0, Math.round(crop.top));\n        // Center output horizontally over hotspot\n        var hotspotXCenter = Math.round((hotspot.right - hotspot.left) / 2 + hotspot.left);\n        var left = Math.max(0, Math.round(hotspotXCenter - width / 2));\n        // Keep output within crop\n        if (left < crop.left) {\n            left = crop.left;\n        } else if (left + width > crop.left + crop.width) {\n            left = crop.left + crop.width - width;\n        }\n        cropRect = {\n            left: left,\n            top: top_2,\n            width: width,\n            height: height\n        };\n    } else {\n        // The crop is taller than the desired ratio, we are cutting from top and bottom\n        var width = crop.width;\n        var height = Math.round(width / desiredAspectRatio);\n        var left = Math.max(0, Math.round(crop.left));\n        // Center output vertically over hotspot\n        var hotspotYCenter = Math.round((hotspot.bottom - hotspot.top) / 2 + hotspot.top);\n        var top_3 = Math.max(0, Math.round(hotspotYCenter - height / 2));\n        // Keep output rect within crop\n        if (top_3 < crop.top) {\n            top_3 = crop.top;\n        } else if (top_3 + height > crop.top + crop.height) {\n            top_3 = crop.top + crop.height - height;\n        }\n        cropRect = {\n            left: left,\n            top: top_3,\n            width: width,\n            height: height\n        };\n    }\n    return {\n        width: imgWidth,\n        height: imgHeight,\n        rect: cropRect\n    };\n} //# sourceMappingURL=urlForImage.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS91cmxGb3JJbWFnZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLFdBQVcsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxRQUFRLElBQUs7SUFDdENBLFdBQVdDLE9BQU9DLE1BQU0sSUFBSSxTQUFTQyxDQUFDO1FBQ2xDLElBQUssSUFBSUMsR0FBR0MsSUFBSSxHQUFHQyxJQUFJQyxVQUFVQyxNQUFNLEVBQUVILElBQUlDLEdBQUdELElBQUs7WUFDakRELElBQUlHLFNBQVMsQ0FBQ0YsRUFBRTtZQUNoQixJQUFLLElBQUlJLEtBQUtMLEVBQUcsSUFBSUgsT0FBT1MsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ1IsR0FBR0ssSUFDekROLENBQUMsQ0FBQ00sRUFBRSxHQUFHTCxDQUFDLENBQUNLLEVBQUU7UUFDbkI7UUFDQSxPQUFPTjtJQUNYO0lBQ0EsT0FBT0gsU0FBU2EsS0FBSyxDQUFDLElBQUksRUFBRU47QUFDaEM7QUFDQSxJQUFJTyxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQWQsOENBQTZDO0lBQUVrQixPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0Esc0NBQXNDLEdBQUcsS0FBSztBQUNwRSxJQUFJSSxpQkFBaUJSLGdCQUFnQlMsbUJBQU9BLENBQUMsa0dBQWdCO0FBQzdELElBQUlDLGdCQUFnQlYsZ0JBQWdCUyxtQkFBT0EsQ0FBQyxnR0FBZTtBQUMzREwsbUJBQW1CLEdBQUdNLGNBQWNDLE9BQU87QUFDM0NQLHNDQUFzQyxHQUFHO0lBQ3JDO1FBQUM7UUFBUztLQUFJO0lBQ2Q7UUFBQztRQUFVO0tBQUk7SUFDZjtRQUFDO1FBQVU7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QUFLLEVBQUU7WUFDNUNELE9BQU9ELEtBQUtDLElBQUksR0FBR0QsS0FBS0UsS0FBSyxHQUFHQTtRQUNwQztRQUNBMEMsV0FBVztZQUFFM0MsTUFBTUE7WUFBTUcsS0FBSzZDO1lBQU8vQyxPQUFPQTtZQUFPRyxRQUFRQTtRQUFPO0lBQ3RFLE9BQ0s7UUFDRCxnRkFBZ0Y7UUFDaEYsSUFBSUgsUUFBUUYsS0FBS0UsS0FBSztRQUN0QixJQUFJRyxTQUFTUCxLQUFLQyxLQUFLLENBQUNHLFFBQVE2QztRQUNoQyxJQUFJOUMsT0FBT0gsS0FBS29ELEdBQUcsQ0FBQyxHQUFHcEQsS0FBS0MsS0FBSyxDQUFDQyxLQUFLQyxJQUFJO1FBQzNDLHdDQUF3QztRQUN4QyxJQUFJbUQsaUJBQWlCdEQsS0FBS0MsS0FBSyxDQUFDLENBQUNVLFFBQVFGLE1BQU0sR0FBR0UsUUFBUUwsR0FBRyxJQUFJLElBQUlLLFFBQVFMLEdBQUc7UUFDaEYsSUFBSWlELFFBQVF2RCxLQUFLb0QsR0FBRyxDQUFDLEdBQUdwRCxLQUFLQyxLQUFLLENBQUNxRCxpQkFBaUIvQyxTQUFTO1FBQzdELCtCQUErQjtRQUMvQixJQUFJZ0QsUUFBUXJELEtBQUtJLEdBQUcsRUFBRTtZQUNsQmlELFFBQVFyRCxLQUFLSSxHQUFHO1FBQ3BCLE9BQ0ssSUFBSWlELFFBQVFoRCxTQUFTTCxLQUFLSSxHQUFHLEdBQUdKLEtBQUtLLE1BQU0sRUFBRTtZQUM5Q2dELFFBQVFyRCxLQUFLSSxHQUFHLEdBQUdKLEtBQUtLLE1BQU0sR0FBR0E7UUFDckM7UUFDQXVDLFdBQVc7WUFBRTNDLE1BQU1BO1lBQU1HLEtBQUtpRDtZQUFPbkQsT0FBT0E7WUFBT0csUUFBUUE7UUFBTztJQUN0RTtJQUNBLE9BQU87UUFDSEgsT0FBTzJDO1FBQ1B4QyxRQUFReUM7UUFDUi9CLE1BQU02QjtJQUNWO0FBQ0osRUFDQSx1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2ltYWdlLXVybC9saWIvbm9kZS91cmxGb3JJbWFnZS5qcz9hNTVjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VTb3VyY2UgPSBleHBvcnRzLlNQRUNfTkFNRV9UT19VUkxfTkFNRV9NQVBQSU5HUyA9IHZvaWQgMDtcbnZhciBwYXJzZUFzc2V0SWRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9wYXJzZUFzc2V0SWRcIikpO1xudmFyIHBhcnNlU291cmNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vcGFyc2VTb3VyY2VcIikpO1xuZXhwb3J0cy5wYXJzZVNvdXJjZSA9IHBhcnNlU291cmNlXzEuZGVmYXVsdDtcbmV4cG9ydHMuU1BFQ19OQU1FX1RPX1VSTF9OQU1FX01BUFBJTkdTID0gW1xuICAgIFsnd2lkdGgnLCAndyddLFxuICAgIFsnaGVpZ2h0JywgJ2gnXSxcbiAgICBbJ2Zvcm1hdCcsICdmbSddLFxuICAgIFsnZG93bmxvYWQnLCAnZGwnXSxcbiAgICBbJ2JsdXInLCAnYmx1ciddLFxuICAgIFsnc2hhcnBlbicsICdzaGFycCddLFxuICAgIFsnaW52ZXJ0JywgJ2ludmVydCddLFxuICAgIFsnb3JpZW50YXRpb24nLCAnb3InXSxcbiAgICBbJ21pbkhlaWdodCcsICdtaW4taCddLFxuICAgIFsnbWF4SGVpZ2h0JywgJ21heC1oJ10sXG4gICAgWydtaW5XaWR0aCcsICdtaW4tdyddLFxuICAgIFsnbWF4V2lkdGgnLCAnbWF4LXcnXSxcbiAgICBbJ3F1YWxpdHknLCAncSddLFxuICAgIFsnZml0JywgJ2ZpdCddLFxuICAgIFsnY3JvcCcsICdjcm9wJ10sXG4gICAgWydzYXR1cmF0aW9uJywgJ3NhdCddLFxuICAgIFsnYXV0bycsICdhdXRvJ10sXG4gICAgWydkcHInLCAnZHByJ10sXG4gICAgWydwYWQnLCAncGFkJ10sXG5dO1xuZnVuY3Rpb24gdXJsRm9ySW1hZ2Uob3B0aW9ucykge1xuICAgIHZhciBzcGVjID0gX19hc3NpZ24oe30sIChvcHRpb25zIHx8IHt9KSk7XG4gICAgdmFyIHNvdXJjZSA9IHNwZWMuc291cmNlO1xuICAgIGRlbGV0ZSBzcGVjLnNvdXJjZTtcbiAgICB2YXIgaW1hZ2UgPSAoMCwgcGFyc2VTb3VyY2VfMS5kZWZhdWx0KShzb3VyY2UpO1xuICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHJlc29sdmUgaW1hZ2UgVVJMIGZyb20gc291cmNlIChcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoc291cmNlKSwgXCIpXCIpKTtcbiAgICB9XG4gICAgdmFyIGlkID0gaW1hZ2UuYXNzZXQuX3JlZiB8fCBpbWFnZS5hc3NldC5faWQgfHwgJyc7XG4gICAgdmFyIGFzc2V0ID0gKDAsIHBhcnNlQXNzZXRJZF8xLmRlZmF1bHQpKGlkKTtcbiAgICAvLyBDb21wdXRlIGNyb3AgcmVjdCBpbiB0ZXJtcyBvZiBwaXhlbCBjb29yZGluYXRlcyBpbiB0aGUgcmF3IHNvdXJjZSBpbWFnZVxuICAgIHZhciBjcm9wTGVmdCA9IE1hdGgucm91bmQoaW1hZ2UuY3JvcC5sZWZ0ICogYXNzZXQud2lkdGgpO1xuICAgIHZhciBjcm9wVG9wID0gTWF0aC5yb3VuZChpbWFnZS5jcm9wLnRvcCAqIGFzc2V0LmhlaWdodCk7XG4gICAgdmFyIGNyb3AgPSB7XG4gICAgICAgIGxlZnQ6IGNyb3BMZWZ0LFxuICAgICAgICB0b3A6IGNyb3BUb3AsXG4gICAgICAgIHdpZHRoOiBNYXRoLnJvdW5kKGFzc2V0LndpZHRoIC0gaW1hZ2UuY3JvcC5yaWdodCAqIGFzc2V0LndpZHRoIC0gY3JvcExlZnQpLFxuICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQoYXNzZXQuaGVpZ2h0IC0gaW1hZ2UuY3JvcC5ib3R0b20gKiBhc3NldC5oZWlnaHQgLSBjcm9wVG9wKSxcbiAgICB9O1xuICAgIC8vIENvbXB1dGUgaG90IHNwb3QgcmVjdCBpbiB0ZXJtcyBvZiBwaXhlbCBjb29yZGluYXRlc1xuICAgIHZhciBob3RTcG90VmVydGljYWxSYWRpdXMgPSAoaW1hZ2UuaG90c3BvdC5oZWlnaHQgKiBhc3NldC5oZWlnaHQpIC8gMjtcbiAgICB2YXIgaG90U3BvdEhvcml6b250YWxSYWRpdXMgPSAoaW1hZ2UuaG90c3BvdC53aWR0aCAqIGFzc2V0LndpZHRoKSAvIDI7XG4gICAgdmFyIGhvdFNwb3RDZW50ZXJYID0gaW1hZ2UuaG90c3BvdC54ICogYXNzZXQud2lkdGg7XG4gICAgdmFyIGhvdFNwb3RDZW50ZXJZID0gaW1hZ2UuaG90c3BvdC55ICogYXNzZXQuaGVpZ2h0O1xuICAgIHZhciBob3RzcG90ID0ge1xuICAgICAgICBsZWZ0OiBob3RTcG90Q2VudGVyWCAtIGhvdFNwb3RIb3Jpem9udGFsUmFkaXVzLFxuICAgICAgICB0b3A6IGhvdFNwb3RDZW50ZXJZIC0gaG90U3BvdFZlcnRpY2FsUmFkaXVzLFxuICAgICAgICByaWdodDogaG90U3BvdENlbnRlclggKyBob3RTcG90SG9yaXpvbnRhbFJhZGl1cyxcbiAgICAgICAgYm90dG9tOiBob3RTcG90Q2VudGVyWSArIGhvdFNwb3RWZXJ0aWNhbFJhZGl1cyxcbiAgICB9O1xuICAgIC8vIElmIGlycmVsZXZhbnQsIG9yIGlmIHdlIGFyZSByZXF1ZXN0ZWQgdG86IGRvbid0IHBlcmZvcm0gY3JvcC9maXQgYmFzZWQgb25cbiAgICAvLyB0aGUgY3JvcC9ob3RzcG90LlxuICAgIGlmICghKHNwZWMucmVjdCB8fCBzcGVjLmZvY2FsUG9pbnQgfHwgc3BlYy5pZ25vcmVJbWFnZVBhcmFtcyB8fCBzcGVjLmNyb3ApKSB7XG4gICAgICAgIHNwZWMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc3BlYyksIGZpdCh7IGNyb3A6IGNyb3AsIGhvdHNwb3Q6IGhvdHNwb3QgfSwgc3BlYykpO1xuICAgIH1cbiAgICByZXR1cm4gc3BlY1RvSW1hZ2VVcmwoX19hc3NpZ24oX19hc3NpZ24oe30sIHNwZWMpLCB7IGFzc2V0OiBhc3NldCB9KSk7XG59XG5leHBvcnRzLmRlZmF1bHQgPSB1cmxGb3JJbWFnZTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiBzcGVjVG9JbWFnZVVybChzcGVjKSB7XG4gICAgdmFyIGNkblVybCA9IChzcGVjLmJhc2VVcmwgfHwgJ2h0dHBzOi8vY2RuLnNhbml0eS5pbycpLnJlcGxhY2UoL1xcLyskLywgJycpO1xuICAgIHZhciBmaWxlbmFtZSA9IFwiXCIuY29uY2F0KHNwZWMuYXNzZXQuaWQsIFwiLVwiKS5jb25jYXQoc3BlYy5hc3NldC53aWR0aCwgXCJ4XCIpLmNvbmNhdChzcGVjLmFzc2V0LmhlaWdodCwgXCIuXCIpLmNvbmNhdChzcGVjLmFzc2V0LmZvcm1hdCk7XG4gICAgdmFyIGJhc2VVcmwgPSBcIlwiLmNvbmNhdChjZG5VcmwsIFwiL2ltYWdlcy9cIikuY29uY2F0KHNwZWMucHJvamVjdElkLCBcIi9cIikuY29uY2F0KHNwZWMuZGF0YXNldCwgXCIvXCIpLmNvbmNhdChmaWxlbmFtZSk7XG4gICAgdmFyIHBhcmFtcyA9IFtdO1xuICAgIGlmIChzcGVjLnJlY3QpIHtcbiAgICAgICAgLy8gT25seSBib3RoZXIgdXJsIHdpdGggYSBjcm9wIGlmIGl0IGFjdHVhbGx5IGNyb3BzIGFueXRoaW5nXG4gICAgICAgIHZhciBfYSA9IHNwZWMucmVjdCwgbGVmdCA9IF9hLmxlZnQsIHRvcF8xID0gX2EudG9wLCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQ7XG4gICAgICAgIHZhciBpc0VmZmVjdGl2ZUNyb3AgPSBsZWZ0ICE9PSAwIHx8IHRvcF8xICE9PSAwIHx8IGhlaWdodCAhPT0gc3BlYy5hc3NldC5oZWlnaHQgfHwgd2lkdGggIT09IHNwZWMuYXNzZXQud2lkdGg7XG4gICAgICAgIGlmIChpc0VmZmVjdGl2ZUNyb3ApIHtcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKFwicmVjdD1cIi5jb25jYXQobGVmdCwgXCIsXCIpLmNvbmNhdCh0b3BfMSwgXCIsXCIpLmNvbmNhdCh3aWR0aCwgXCIsXCIpLmNvbmNhdChoZWlnaHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3BlYy5iZykge1xuICAgICAgICBwYXJhbXMucHVzaChcImJnPVwiLmNvbmNhdChzcGVjLmJnKSk7XG4gICAgfVxuICAgIGlmIChzcGVjLmZvY2FsUG9pbnQpIHtcbiAgICAgICAgcGFyYW1zLnB1c2goXCJmcC14PVwiLmNvbmNhdChzcGVjLmZvY2FsUG9pbnQueCkpO1xuICAgICAgICBwYXJhbXMucHVzaChcImZwLXk9XCIuY29uY2F0KHNwZWMuZm9jYWxQb2ludC55KSk7XG4gICAgfVxuICAgIHZhciBmbGlwID0gW3NwZWMuZmxpcEhvcml6b250YWwgJiYgJ2gnLCBzcGVjLmZsaXBWZXJ0aWNhbCAmJiAndiddLmZpbHRlcihCb29sZWFuKS5qb2luKCcnKTtcbiAgICBpZiAoZmxpcCkge1xuICAgICAgICBwYXJhbXMucHVzaChcImZsaXA9XCIuY29uY2F0KGZsaXApKTtcbiAgICB9XG4gICAgLy8gTWFwIGZyb20gc3BlYyBuYW1lIHRvIHVybCBwYXJhbSBuYW1lLCBhbmQgYWxsb3cgdXNpbmcgdGhlIGFjdHVhbCBwYXJhbSBuYW1lIGFzIGFuIGFsdGVybmF0aXZlXG4gICAgZXhwb3J0cy5TUEVDX05BTUVfVE9fVVJMX05BTUVfTUFQUElOR1MuZm9yRWFjaChmdW5jdGlvbiAobWFwcGluZykge1xuICAgICAgICB2YXIgc3BlY05hbWUgPSBtYXBwaW5nWzBdLCBwYXJhbSA9IG1hcHBpbmdbMV07XG4gICAgICAgIGlmICh0eXBlb2Ygc3BlY1tzcGVjTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChcIlwiLmNvbmNhdChwYXJhbSwgXCI9XCIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc3BlY1tzcGVjTmFtZV0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHNwZWNbcGFyYW1dICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goXCJcIi5jb25jYXQocGFyYW0sIFwiPVwiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNwZWNbcGFyYW1dKSkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGJhc2VVcmw7XG4gICAgfVxuICAgIHJldHVybiBcIlwiLmNvbmNhdChiYXNlVXJsLCBcIj9cIikuY29uY2F0KHBhcmFtcy5qb2luKCcmJykpO1xufVxuZnVuY3Rpb24gZml0KHNvdXJjZSwgc3BlYykge1xuICAgIHZhciBjcm9wUmVjdDtcbiAgICB2YXIgaW1nV2lkdGggPSBzcGVjLndpZHRoO1xuICAgIHZhciBpbWdIZWlnaHQgPSBzcGVjLmhlaWdodDtcbiAgICAvLyBJZiB3ZSBhcmUgbm90IGNvbnN0cmFpbmluZyB0aGUgYXNwZWN0IHJhdGlvLCB3ZSdsbCBqdXN0IHVzZSB0aGUgd2hvbGUgY3JvcFxuICAgIGlmICghKGltZ1dpZHRoICYmIGltZ0hlaWdodCkpIHtcbiAgICAgICAgcmV0dXJuIHsgd2lkdGg6IGltZ1dpZHRoLCBoZWlnaHQ6IGltZ0hlaWdodCwgcmVjdDogc291cmNlLmNyb3AgfTtcbiAgICB9XG4gICAgdmFyIGNyb3AgPSBzb3VyY2UuY3JvcDtcbiAgICB2YXIgaG90c3BvdCA9IHNvdXJjZS5ob3RzcG90O1xuICAgIC8vIElmIHdlIGFyZSBoZXJlLCB0aGF0IG1lYW5zIGFzcGVjdCByYXRpbyBpcyBsb2NrZWQgYW5kIGZpdHRpbmcgd2lsbCBiZSBhIGJpdCBoYXJkZXJcbiAgICB2YXIgZGVzaXJlZEFzcGVjdFJhdGlvID0gaW1nV2lkdGggLyBpbWdIZWlnaHQ7XG4gICAgdmFyIGNyb3BBc3BlY3RSYXRpbyA9IGNyb3Aud2lkdGggLyBjcm9wLmhlaWdodDtcbiAgICBpZiAoY3JvcEFzcGVjdFJhdGlvID4gZGVzaXJlZEFzcGVjdFJhdGlvKSB7XG4gICAgICAgIC8vIFRoZSBjcm9wIGlzIHdpZGVyIHRoYW4gdGhlIGRlc2lyZWQgYXNwZWN0IHJhdGlvLiBUaGF0IG1lYW5zIHdlIGFyZSBjdXR0aW5nIGZyb20gdGhlIHNpZGVzXG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKGNyb3AuaGVpZ2h0KTtcbiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5yb3VuZChoZWlnaHQgKiBkZXNpcmVkQXNwZWN0UmF0aW8pO1xuICAgICAgICB2YXIgdG9wXzIgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGNyb3AudG9wKSk7XG4gICAgICAgIC8vIENlbnRlciBvdXRwdXQgaG9yaXpvbnRhbGx5IG92ZXIgaG90c3BvdFxuICAgICAgICB2YXIgaG90c3BvdFhDZW50ZXIgPSBNYXRoLnJvdW5kKChob3RzcG90LnJpZ2h0IC0gaG90c3BvdC5sZWZ0KSAvIDIgKyBob3RzcG90LmxlZnQpO1xuICAgICAgICB2YXIgbGVmdCA9IE1hdGgubWF4KDAsIE1hdGgucm91bmQoaG90c3BvdFhDZW50ZXIgLSB3aWR0aCAvIDIpKTtcbiAgICAgICAgLy8gS2VlcCBvdXRwdXQgd2l0aGluIGNyb3BcbiAgICAgICAgaWYgKGxlZnQgPCBjcm9wLmxlZnQpIHtcbiAgICAgICAgICAgIGxlZnQgPSBjcm9wLmxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVmdCArIHdpZHRoID4gY3JvcC5sZWZ0ICsgY3JvcC53aWR0aCkge1xuICAgICAgICAgICAgbGVmdCA9IGNyb3AubGVmdCArIGNyb3Aud2lkdGggLSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBjcm9wUmVjdCA9IHsgbGVmdDogbGVmdCwgdG9wOiB0b3BfMiwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVGhlIGNyb3AgaXMgdGFsbGVyIHRoYW4gdGhlIGRlc2lyZWQgcmF0aW8sIHdlIGFyZSBjdXR0aW5nIGZyb20gdG9wIGFuZCBib3R0b21cbiAgICAgICAgdmFyIHdpZHRoID0gY3JvcC53aWR0aDtcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQod2lkdGggLyBkZXNpcmVkQXNwZWN0UmF0aW8pO1xuICAgICAgICB2YXIgbGVmdCA9IE1hdGgubWF4KDAsIE1hdGgucm91bmQoY3JvcC5sZWZ0KSk7XG4gICAgICAgIC8vIENlbnRlciBvdXRwdXQgdmVydGljYWxseSBvdmVyIGhvdHNwb3RcbiAgICAgICAgdmFyIGhvdHNwb3RZQ2VudGVyID0gTWF0aC5yb3VuZCgoaG90c3BvdC5ib3R0b20gLSBob3RzcG90LnRvcCkgLyAyICsgaG90c3BvdC50b3ApO1xuICAgICAgICB2YXIgdG9wXzMgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGhvdHNwb3RZQ2VudGVyIC0gaGVpZ2h0IC8gMikpO1xuICAgICAgICAvLyBLZWVwIG91dHB1dCByZWN0IHdpdGhpbiBjcm9wXG4gICAgICAgIGlmICh0b3BfMyA8IGNyb3AudG9wKSB7XG4gICAgICAgICAgICB0b3BfMyA9IGNyb3AudG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRvcF8zICsgaGVpZ2h0ID4gY3JvcC50b3AgKyBjcm9wLmhlaWdodCkge1xuICAgICAgICAgICAgdG9wXzMgPSBjcm9wLnRvcCArIGNyb3AuaGVpZ2h0IC0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGNyb3BSZWN0ID0geyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcF8zLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiBpbWdXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBpbWdIZWlnaHQsXG4gICAgICAgIHJlY3Q6IGNyb3BSZWN0LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmxGb3JJbWFnZS5qcy5tYXAiXSwibmFtZXMiOlsiX19hc3NpZ24iLCJPYmplY3QiLCJhc3NpZ24iLCJ0IiwicyIsImkiLCJuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwiX19pbXBvcnREZWZhdWx0IiwibW9kIiwiX19lc01vZHVsZSIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicGFyc2VTb3VyY2UiLCJTUEVDX05BTUVfVE9fVVJMX05BTUVfTUFQUElOR1MiLCJwYXJzZUFzc2V0SWRfMSIsInJlcXVpcmUiLCJwYXJzZVNvdXJjZV8xIiwiZGVmYXVsdCIsInVybEZvckltYWdlIiwib3B0aW9ucyIsInNwZWMiLCJzb3VyY2UiLCJpbWFnZSIsIkVycm9yIiwiY29uY2F0IiwiSlNPTiIsInN0cmluZ2lmeSIsImlkIiwiYXNzZXQiLCJfcmVmIiwiX2lkIiwiY3JvcExlZnQiLCJNYXRoIiwicm91bmQiLCJjcm9wIiwibGVmdCIsIndpZHRoIiwiY3JvcFRvcCIsInRvcCIsImhlaWdodCIsInJpZ2h0IiwiYm90dG9tIiwiaG90U3BvdFZlcnRpY2FsUmFkaXVzIiwiaG90c3BvdCIsImhvdFNwb3RIb3Jpem9udGFsUmFkaXVzIiwiaG90U3BvdENlbnRlclgiLCJ4IiwiaG90U3BvdENlbnRlclkiLCJ5IiwicmVjdCIsImZvY2FsUG9pbnQiLCJpZ25vcmVJbWFnZVBhcmFtcyIsImZpdCIsInNwZWNUb0ltYWdlVXJsIiwiY2RuVXJsIiwiYmFzZVVybCIsInJlcGxhY2UiLCJmaWxlbmFtZSIsImZvcm1hdCIsInByb2plY3RJZCIsImRhdGFzZXQiLCJwYXJhbXMiLCJfYSIsInRvcF8xIiwiaXNFZmZlY3RpdmVDcm9wIiwicHVzaCIsImJnIiwiZmxpcCIsImZsaXBIb3Jpem9udGFsIiwiZmxpcFZlcnRpY2FsIiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJmb3JFYWNoIiwibWFwcGluZyIsInNwZWNOYW1lIiwicGFyYW0iLCJlbmNvZGVVUklDb21wb25lbnQiLCJjcm9wUmVjdCIsImltZ1dpZHRoIiwiaW1nSGVpZ2h0IiwiZGVzaXJlZEFzcGVjdFJhdGlvIiwiY3JvcEFzcGVjdFJhdGlvIiwidG9wXzIiLCJtYXgiLCJob3RzcG90WENlbnRlciIsImhvdHNwb3RZQ2VudGVyIiwidG9wXzMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/image-url/lib/node/urlForImage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/image-url/lib/node/urlForImage.js":
/*!****************************************************************!*\
  !*** ./node_modules/@sanity/image-url/lib/node/urlForImage.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar __assign = (void 0) && (void 0).__assign || function() {\n    __assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.parseSource = exports.SPEC_NAME_TO_URL_NAME_MAPPINGS = void 0;\nvar parseAssetId_1 = __importDefault(__webpack_require__(/*! ./parseAssetId */ \"(rsc)/./node_modules/@sanity/image-url/lib/node/parseAssetId.js\"));\nvar parseSource_1 = __importDefault(__webpack_require__(/*! ./parseSource */ \"(rsc)/./node_modules/@sanity/image-url/lib/node/parseSource.js\"));\nexports.parseSource = parseSource_1.default;\nexports.SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n    [\n        \"width\",\n        \"w\"\n    ],\n    [\n        \"height\",\n        \"h\"\n    ],\n    [\n        \"format\",\n        \"fm\"\n    ],\n    [\n        \"download\",\n        \"dl\"\n    ],\n    [\n        \"blur\",\n        \"blur\"\n    ],\n    [\n        \"sharpen\",\n        \"sharp\"\n    ],\n    [\n        \"invert\",\n        \"invert\"\n    ],\n    [\n        \"orientation\",\n        \"or\"\n    ],\n    [\n        \"minHeight\",\n        \"min-h\"\n    ],\n    [\n        \"maxHeight\",\n        \"max-h\"\n    ],\n    [\n        \"minWidth\",\n        \"min-w\"\n    ],\n    [\n        \"maxWidth\",\n        \"max-w\"\n    ],\n    [\n        \"quality\",\n        \"q\"\n    ],\n    [\n        \"fit\",\n        \"fit\"\n    ],\n    [\n        \"crop\",\n        \"crop\"\n    ],\n    [\n        \"saturation\",\n        \"sat\"\n    ],\n    [\n        \"auto\",\n        \"auto\"\n    ],\n    [\n        \"dpr\",\n        \"dpr\"\n    ],\n    [\n        \"pad\",\n        \"pad\"\n    ]\n];\nfunction urlForImage(options) {\n    var spec = __assign({}, options || {});\n    var source = spec.source;\n    delete spec.source;\n    var image = (0, parseSource_1.default)(source);\n    if (!image) {\n        throw new Error(\"Unable to resolve image URL from source (\".concat(JSON.stringify(source), \")\"));\n    }\n    var id = image.asset._ref || image.asset._id || \"\";\n    var asset = (0, parseAssetId_1.default)(id);\n    // Compute crop rect in terms of pixel coordinates in the raw source image\n    var cropLeft = Math.round(image.crop.left * asset.width);\n    var cropTop = Math.round(image.crop.top * asset.height);\n    var crop = {\n        left: cropLeft,\n        top: cropTop,\n        width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n        height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop)\n    };\n    // Compute hot spot rect in terms of pixel coordinates\n    var hotSpotVerticalRadius = image.hotspot.height * asset.height / 2;\n    var hotSpotHorizontalRadius = image.hotspot.width * asset.width / 2;\n    var hotSpotCenterX = image.hotspot.x * asset.width;\n    var hotSpotCenterY = image.hotspot.y * asset.height;\n    var hotspot = {\n        left: hotSpotCenterX - hotSpotHorizontalRadius,\n        top: hotSpotCenterY - hotSpotVerticalRadius,\n        right: hotSpotCenterX + hotSpotHorizontalRadius,\n        bottom: hotSpotCenterY + hotSpotVerticalRadius\n    };\n    // If irrelevant, or if we are requested to: don't perform crop/fit based on\n    // the crop/hotspot.\n    if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n        spec = __assign(__assign({}, spec), fit({\n            crop: crop,\n            hotspot: hotspot\n        }, spec));\n    }\n    return specToImageUrl(__assign(__assign({}, spec), {\n        asset: asset\n    }));\n}\nexports[\"default\"] = urlForImage;\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec) {\n    var cdnUrl = (spec.baseUrl || \"https://cdn.sanity.io\").replace(/\\/+$/, \"\");\n    var filename = \"\".concat(spec.asset.id, \"-\").concat(spec.asset.width, \"x\").concat(spec.asset.height, \".\").concat(spec.asset.format);\n    var baseUrl = \"\".concat(cdnUrl, \"/images/\").concat(spec.projectId, \"/\").concat(spec.dataset, \"/\").concat(filename);\n    var params = [];\n    if (spec.rect) {\n        // Only bother url with a crop if it actually crops anything\n        var _a = spec.rect, left = _a.left, top_1 = _a.top, width = _a.width, height = _a.height;\n        var isEffectiveCrop = left !== 0 || top_1 !== 0 || height !== spec.asset.height || width !== spec.asset.width;\n        if (isEffectiveCrop) {\n            params.push(\"rect=\".concat(left, \",\").concat(top_1, \",\").concat(width, \",\").concat(height));\n        }\n    }\n    if (spec.bg) {\n        params.push(\"bg=\".concat(spec.bg));\n    }\n    if (spec.focalPoint) {\n        params.push(\"fp-x=\".concat(spec.focalPoint.x));\n        params.push(\"fp-y=\".concat(spec.focalPoint.y));\n    }\n    var flip = [\n        spec.flipHorizontal && \"h\",\n        spec.flipVertical && \"v\"\n    ].filter(Boolean).join(\"\");\n    if (flip) {\n        params.push(\"flip=\".concat(flip));\n    }\n    // Map from spec name to url param name, and allow using the actual param name as an alternative\n    exports.SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach(function(mapping) {\n        var specName = mapping[0], param = mapping[1];\n        if (typeof spec[specName] !== \"undefined\") {\n            params.push(\"\".concat(param, \"=\").concat(encodeURIComponent(spec[specName])));\n        } else if (typeof spec[param] !== \"undefined\") {\n            params.push(\"\".concat(param, \"=\").concat(encodeURIComponent(spec[param])));\n        }\n    });\n    if (params.length === 0) {\n        return baseUrl;\n    }\n    return \"\".concat(baseUrl, \"?\").concat(params.join(\"&\"));\n}\nfunction fit(source, spec) {\n    var cropRect;\n    var imgWidth = spec.width;\n    var imgHeight = spec.height;\n    // If we are not constraining the aspect ratio, we'll just use the whole crop\n    if (!(imgWidth && imgHeight)) {\n        return {\n            width: imgWidth,\n            height: imgHeight,\n            rect: source.crop\n        };\n    }\n    var crop = source.crop;\n    var hotspot = source.hotspot;\n    // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n    var desiredAspectRatio = imgWidth / imgHeight;\n    var cropAspectRatio = crop.width / crop.height;\n    if (cropAspectRatio > desiredAspectRatio) {\n        // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n        var height = Math.round(crop.height);\n        var width = Math.round(height * desiredAspectRatio);\n        var top_2 = Math.max(0, Math.round(crop.top));\n        // Center output horizontally over hotspot\n        var hotspotXCenter = Math.round((hotspot.right - hotspot.left) / 2 + hotspot.left);\n        var left = Math.max(0, Math.round(hotspotXCenter - width / 2));\n        // Keep output within crop\n        if (left < crop.left) {\n            left = crop.left;\n        } else if (left + width > crop.left + crop.width) {\n            left = crop.left + crop.width - width;\n        }\n        cropRect = {\n            left: left,\n            top: top_2,\n            width: width,\n            height: height\n        };\n    } else {\n        // The crop is taller than the desired ratio, we are cutting from top and bottom\n        var width = crop.width;\n        var height = Math.round(width / desiredAspectRatio);\n        var left = Math.max(0, Math.round(crop.left));\n        // Center output vertically over hotspot\n        var hotspotYCenter = Math.round((hotspot.bottom - hotspot.top) / 2 + hotspot.top);\n        var top_3 = Math.max(0, Math.round(hotspotYCenter - height / 2));\n        // Keep output rect within crop\n        if (top_3 < crop.top) {\n            top_3 = crop.top;\n        } else if (top_3 + height > crop.top + crop.height) {\n            top_3 = crop.top + crop.height - height;\n        }\n        cropRect = {\n            left: left,\n            top: top_3,\n            width: width,\n            height: height\n        };\n    }\n    return {\n        width: imgWidth,\n        height: imgHeight,\n        rect: cropRect\n    };\n} //# sourceMappingURL=urlForImage.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvdXJsRm9ySW1hZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxXQUFXLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsUUFBUSxJQUFLO0lBQ3RDQSxXQUFXQyxPQUFPQyxNQUFNLElBQUksU0FBU0MsQ0FBQztRQUNsQyxJQUFLLElBQUlDLEdBQUdDLElBQUksR0FBR0MsSUFBSUMsVUFBVUMsTUFBTSxFQUFFSCxJQUFJQyxHQUFHRCxJQUFLO1lBQ2pERCxJQUFJRyxTQUFTLENBQUNGLEVBQUU7WUFDaEIsSUFBSyxJQUFJSSxLQUFLTCxFQUFHLElBQUlILE9BQU9TLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNSLEdBQUdLLElBQ3pETixDQUFDLENBQUNNLEVBQUUsR0FBR0wsQ0FBQyxDQUFDSyxFQUFFO1FBQ25CO1FBQ0EsT0FBT047SUFDWDtJQUNBLE9BQU9ILFNBQVNhLEtBQUssQ0FBQyxJQUFJLEVBQUVOO0FBQ2hDO0FBQ0EsSUFBSU8sa0JBQWtCLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsZUFBZSxJQUFLLFNBQVVDLEdBQUc7SUFDakUsT0FBTyxPQUFRQSxJQUFJQyxVQUFVLEdBQUlELE1BQU07UUFBRSxXQUFXQTtJQUFJO0FBQzVEO0FBQ0FkLDhDQUE2QztJQUFFa0IsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUdBLHNDQUFzQyxHQUFHLEtBQUs7QUFDcEUsSUFBSUksaUJBQWlCUixnQkFBZ0JTLG1CQUFPQSxDQUFDLHVGQUFnQjtBQUM3RCxJQUFJQyxnQkFBZ0JWLGdCQUFnQlMsbUJBQU9BLENBQUMscUZBQWU7QUFDM0RMLG1CQUFtQixHQUFHTSxjQUFjQyxPQUFPO0FBQzNDUCxzQ0FBc0MsR0FBRztJQUNyQztRQUFDO1FBQVM7S0FBSTtJQUNkO1FBQUM7UUFBVTtLQUFJO0lBQ2Y7UUFBQztRQUFVO0tBQUs7SUFDaEI7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QzVDRCxPQUFPRCxLQUFLQyxJQUFJLEdBQUdELEtBQUtFLEtBQUssR0FBR0E7UUFDcEM7UUFDQTBDLFdBQVc7WUFBRTNDLE1BQU1BO1lBQU1HLEtBQUs2QztZQUFPL0MsT0FBT0E7WUFBT0csUUFBUUE7UUFBTztJQUN0RSxPQUNLO1FBQ0QsZ0ZBQWdGO1FBQ2hGLElBQUlILFFBQVFGLEtBQUtFLEtBQUs7UUFDdEIsSUFBSUcsU0FBU1AsS0FBS0MsS0FBSyxDQUFDRyxRQUFRNkM7UUFDaEMsSUFBSTlDLE9BQU9ILEtBQUtvRCxHQUFHLENBQUMsR0FBR3BELEtBQUtDLEtBQUssQ0FBQ0MsS0FBS0MsSUFBSTtRQUMzQyx3Q0FBd0M7UUFDeEMsSUFBSW1ELGlCQUFpQnRELEtBQUtDLEtBQUssQ0FBQyxDQUFDVSxRQUFRRixNQUFNLEdBQUdFLFFBQVFMLEdBQUcsSUFBSSxJQUFJSyxRQUFRTCxHQUFHO1FBQ2hGLElBQUlpRCxRQUFRdkQsS0FBS29ELEdBQUcsQ0FBQyxHQUFHcEQsS0FBS0MsS0FBSyxDQUFDcUQsaUJBQWlCL0MsU0FBUztRQUM3RCwrQkFBK0I7UUFDL0IsSUFBSWdELFFBQVFyRCxLQUFLSSxHQUFHLEVBQUU7WUFDbEJpRCxRQUFRckQsS0FBS0ksR0FBRztRQUNwQixPQUNLLElBQUlpRCxRQUFRaEQsU0FBU0wsS0FBS0ksR0FBRyxHQUFHSixLQUFLSyxNQUFNLEVBQUU7WUFDOUNnRCxRQUFRckQsS0FBS0ksR0FBRyxHQUFHSixLQUFLSyxNQUFNLEdBQUdBO1FBQ3JDO1FBQ0F1QyxXQUFXO1lBQUUzQyxNQUFNQTtZQUFNRyxLQUFLaUQ7WUFBT25ELE9BQU9BO1lBQU9HLFFBQVFBO1FBQU87SUFDdEU7SUFDQSxPQUFPO1FBQ0hILE9BQU8yQztRQUNQeEMsUUFBUXlDO1FBQ1IvQixNQUFNNkI7SUFDVjtBQUNKLEVBQ0EsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2liYmFyb3NhLXByb2QvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9pbWFnZS11cmwvbGliL25vZGUvdXJsRm9ySW1hZ2UuanM/YTU1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlU291cmNlID0gZXhwb3J0cy5TUEVDX05BTUVfVE9fVVJMX05BTUVfTUFQUElOR1MgPSB2b2lkIDA7XG52YXIgcGFyc2VBc3NldElkXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vcGFyc2VBc3NldElkXCIpKTtcbnZhciBwYXJzZVNvdXJjZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3BhcnNlU291cmNlXCIpKTtcbmV4cG9ydHMucGFyc2VTb3VyY2UgPSBwYXJzZVNvdXJjZV8xLmRlZmF1bHQ7XG5leHBvcnRzLlNQRUNfTkFNRV9UT19VUkxfTkFNRV9NQVBQSU5HUyA9IFtcbiAgICBbJ3dpZHRoJywgJ3cnXSxcbiAgICBbJ2hlaWdodCcsICdoJ10sXG4gICAgWydmb3JtYXQnLCAnZm0nXSxcbiAgICBbJ2Rvd25sb2FkJywgJ2RsJ10sXG4gICAgWydibHVyJywgJ2JsdXInXSxcbiAgICBbJ3NoYXJwZW4nLCAnc2hhcnAnXSxcbiAgICBbJ2ludmVydCcsICdpbnZlcnQnXSxcbiAgICBbJ29yaWVudGF0aW9uJywgJ29yJ10sXG4gICAgWydtaW5IZWlnaHQnLCAnbWluLWgnXSxcbiAgICBbJ21heEhlaWdodCcsICdtYXgtaCddLFxuICAgIFsnbWluV2lkdGgnLCAnbWluLXcnXSxcbiAgICBbJ21heFdpZHRoJywgJ21heC13J10sXG4gICAgWydxdWFsaXR5JywgJ3EnXSxcbiAgICBbJ2ZpdCcsICdmaXQnXSxcbiAgICBbJ2Nyb3AnLCAnY3JvcCddLFxuICAgIFsnc2F0dXJhdGlvbicsICdzYXQnXSxcbiAgICBbJ2F1dG8nLCAnYXV0byddLFxuICAgIFsnZHByJywgJ2RwciddLFxuICAgIFsncGFkJywgJ3BhZCddLFxuXTtcbmZ1bmN0aW9uIHVybEZvckltYWdlKG9wdGlvbnMpIHtcbiAgICB2YXIgc3BlYyA9IF9fYXNzaWduKHt9LCAob3B0aW9ucyB8fCB7fSkpO1xuICAgIHZhciBzb3VyY2UgPSBzcGVjLnNvdXJjZTtcbiAgICBkZWxldGUgc3BlYy5zb3VyY2U7XG4gICAgdmFyIGltYWdlID0gKDAsIHBhcnNlU291cmNlXzEuZGVmYXVsdCkoc291cmNlKTtcbiAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byByZXNvbHZlIGltYWdlIFVSTCBmcm9tIHNvdXJjZSAoXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHNvdXJjZSksIFwiKVwiKSk7XG4gICAgfVxuICAgIHZhciBpZCA9IGltYWdlLmFzc2V0Ll9yZWYgfHwgaW1hZ2UuYXNzZXQuX2lkIHx8ICcnO1xuICAgIHZhciBhc3NldCA9ICgwLCBwYXJzZUFzc2V0SWRfMS5kZWZhdWx0KShpZCk7XG4gICAgLy8gQ29tcHV0ZSBjcm9wIHJlY3QgaW4gdGVybXMgb2YgcGl4ZWwgY29vcmRpbmF0ZXMgaW4gdGhlIHJhdyBzb3VyY2UgaW1hZ2VcbiAgICB2YXIgY3JvcExlZnQgPSBNYXRoLnJvdW5kKGltYWdlLmNyb3AubGVmdCAqIGFzc2V0LndpZHRoKTtcbiAgICB2YXIgY3JvcFRvcCA9IE1hdGgucm91bmQoaW1hZ2UuY3JvcC50b3AgKiBhc3NldC5oZWlnaHQpO1xuICAgIHZhciBjcm9wID0ge1xuICAgICAgICBsZWZ0OiBjcm9wTGVmdCxcbiAgICAgICAgdG9wOiBjcm9wVG9wLFxuICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChhc3NldC53aWR0aCAtIGltYWdlLmNyb3AucmlnaHQgKiBhc3NldC53aWR0aCAtIGNyb3BMZWZ0KSxcbiAgICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKGFzc2V0LmhlaWdodCAtIGltYWdlLmNyb3AuYm90dG9tICogYXNzZXQuaGVpZ2h0IC0gY3JvcFRvcCksXG4gICAgfTtcbiAgICAvLyBDb21wdXRlIGhvdCBzcG90IHJlY3QgaW4gdGVybXMgb2YgcGl4ZWwgY29vcmRpbmF0ZXNcbiAgICB2YXIgaG90U3BvdFZlcnRpY2FsUmFkaXVzID0gKGltYWdlLmhvdHNwb3QuaGVpZ2h0ICogYXNzZXQuaGVpZ2h0KSAvIDI7XG4gICAgdmFyIGhvdFNwb3RIb3Jpem9udGFsUmFkaXVzID0gKGltYWdlLmhvdHNwb3Qud2lkdGggKiBhc3NldC53aWR0aCkgLyAyO1xuICAgIHZhciBob3RTcG90Q2VudGVyWCA9IGltYWdlLmhvdHNwb3QueCAqIGFzc2V0LndpZHRoO1xuICAgIHZhciBob3RTcG90Q2VudGVyWSA9IGltYWdlLmhvdHNwb3QueSAqIGFzc2V0LmhlaWdodDtcbiAgICB2YXIgaG90c3BvdCA9IHtcbiAgICAgICAgbGVmdDogaG90U3BvdENlbnRlclggLSBob3RTcG90SG9yaXpvbnRhbFJhZGl1cyxcbiAgICAgICAgdG9wOiBob3RTcG90Q2VudGVyWSAtIGhvdFNwb3RWZXJ0aWNhbFJhZGl1cyxcbiAgICAgICAgcmlnaHQ6IGhvdFNwb3RDZW50ZXJYICsgaG90U3BvdEhvcml6b250YWxSYWRpdXMsXG4gICAgICAgIGJvdHRvbTogaG90U3BvdENlbnRlclkgKyBob3RTcG90VmVydGljYWxSYWRpdXMsXG4gICAgfTtcbiAgICAvLyBJZiBpcnJlbGV2YW50LCBvciBpZiB3ZSBhcmUgcmVxdWVzdGVkIHRvOiBkb24ndCBwZXJmb3JtIGNyb3AvZml0IGJhc2VkIG9uXG4gICAgLy8gdGhlIGNyb3AvaG90c3BvdC5cbiAgICBpZiAoIShzcGVjLnJlY3QgfHwgc3BlYy5mb2NhbFBvaW50IHx8IHNwZWMuaWdub3JlSW1hZ2VQYXJhbXMgfHwgc3BlYy5jcm9wKSkge1xuICAgICAgICBzcGVjID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHNwZWMpLCBmaXQoeyBjcm9wOiBjcm9wLCBob3RzcG90OiBob3RzcG90IH0sIHNwZWMpKTtcbiAgICB9XG4gICAgcmV0dXJuIHNwZWNUb0ltYWdlVXJsKF9fYXNzaWduKF9fYXNzaWduKHt9LCBzcGVjKSwgeyBhc3NldDogYXNzZXQgfSkpO1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gdXJsRm9ySW1hZ2U7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gc3BlY1RvSW1hZ2VVcmwoc3BlYykge1xuICAgIHZhciBjZG5VcmwgPSAoc3BlYy5iYXNlVXJsIHx8ICdodHRwczovL2Nkbi5zYW5pdHkuaW8nKS5yZXBsYWNlKC9cXC8rJC8sICcnKTtcbiAgICB2YXIgZmlsZW5hbWUgPSBcIlwiLmNvbmNhdChzcGVjLmFzc2V0LmlkLCBcIi1cIikuY29uY2F0KHNwZWMuYXNzZXQud2lkdGgsIFwieFwiKS5jb25jYXQoc3BlYy5hc3NldC5oZWlnaHQsIFwiLlwiKS5jb25jYXQoc3BlYy5hc3NldC5mb3JtYXQpO1xuICAgIHZhciBiYXNlVXJsID0gXCJcIi5jb25jYXQoY2RuVXJsLCBcIi9pbWFnZXMvXCIpLmNvbmNhdChzcGVjLnByb2plY3RJZCwgXCIvXCIpLmNvbmNhdChzcGVjLmRhdGFzZXQsIFwiL1wiKS5jb25jYXQoZmlsZW5hbWUpO1xuICAgIHZhciBwYXJhbXMgPSBbXTtcbiAgICBpZiAoc3BlYy5yZWN0KSB7XG4gICAgICAgIC8vIE9ubHkgYm90aGVyIHVybCB3aXRoIGEgY3JvcCBpZiBpdCBhY3R1YWxseSBjcm9wcyBhbnl0aGluZ1xuICAgICAgICB2YXIgX2EgPSBzcGVjLnJlY3QsIGxlZnQgPSBfYS5sZWZ0LCB0b3BfMSA9IF9hLnRvcCwgd2lkdGggPSBfYS53aWR0aCwgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xuICAgICAgICB2YXIgaXNFZmZlY3RpdmVDcm9wID0gbGVmdCAhPT0gMCB8fCB0b3BfMSAhPT0gMCB8fCBoZWlnaHQgIT09IHNwZWMuYXNzZXQuaGVpZ2h0IHx8IHdpZHRoICE9PSBzcGVjLmFzc2V0LndpZHRoO1xuICAgICAgICBpZiAoaXNFZmZlY3RpdmVDcm9wKSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChcInJlY3Q9XCIuY29uY2F0KGxlZnQsIFwiLFwiKS5jb25jYXQodG9wXzEsIFwiLFwiKS5jb25jYXQod2lkdGgsIFwiLFwiKS5jb25jYXQoaGVpZ2h0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNwZWMuYmcpIHtcbiAgICAgICAgcGFyYW1zLnB1c2goXCJiZz1cIi5jb25jYXQoc3BlYy5iZykpO1xuICAgIH1cbiAgICBpZiAoc3BlYy5mb2NhbFBvaW50KSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKFwiZnAteD1cIi5jb25jYXQoc3BlYy5mb2NhbFBvaW50LngpKTtcbiAgICAgICAgcGFyYW1zLnB1c2goXCJmcC15PVwiLmNvbmNhdChzcGVjLmZvY2FsUG9pbnQueSkpO1xuICAgIH1cbiAgICB2YXIgZmxpcCA9IFtzcGVjLmZsaXBIb3Jpem9udGFsICYmICdoJywgc3BlYy5mbGlwVmVydGljYWwgJiYgJ3YnXS5maWx0ZXIoQm9vbGVhbikuam9pbignJyk7XG4gICAgaWYgKGZsaXApIHtcbiAgICAgICAgcGFyYW1zLnB1c2goXCJmbGlwPVwiLmNvbmNhdChmbGlwKSk7XG4gICAgfVxuICAgIC8vIE1hcCBmcm9tIHNwZWMgbmFtZSB0byB1cmwgcGFyYW0gbmFtZSwgYW5kIGFsbG93IHVzaW5nIHRoZSBhY3R1YWwgcGFyYW0gbmFtZSBhcyBhbiBhbHRlcm5hdGl2ZVxuICAgIGV4cG9ydHMuU1BFQ19OQU1FX1RPX1VSTF9OQU1FX01BUFBJTkdTLmZvckVhY2goZnVuY3Rpb24gKG1hcHBpbmcpIHtcbiAgICAgICAgdmFyIHNwZWNOYW1lID0gbWFwcGluZ1swXSwgcGFyYW0gPSBtYXBwaW5nWzFdO1xuICAgICAgICBpZiAodHlwZW9mIHNwZWNbc3BlY05hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goXCJcIi5jb25jYXQocGFyYW0sIFwiPVwiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNwZWNbc3BlY05hbWVdKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzcGVjW3BhcmFtXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKFwiXCIuY29uY2F0KHBhcmFtLCBcIj1cIikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChzcGVjW3BhcmFtXSkpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBiYXNlVXJsO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIi5jb25jYXQoYmFzZVVybCwgXCI/XCIpLmNvbmNhdChwYXJhbXMuam9pbignJicpKTtcbn1cbmZ1bmN0aW9uIGZpdChzb3VyY2UsIHNwZWMpIHtcbiAgICB2YXIgY3JvcFJlY3Q7XG4gICAgdmFyIGltZ1dpZHRoID0gc3BlYy53aWR0aDtcbiAgICB2YXIgaW1nSGVpZ2h0ID0gc3BlYy5oZWlnaHQ7XG4gICAgLy8gSWYgd2UgYXJlIG5vdCBjb25zdHJhaW5pbmcgdGhlIGFzcGVjdCByYXRpbywgd2UnbGwganVzdCB1c2UgdGhlIHdob2xlIGNyb3BcbiAgICBpZiAoIShpbWdXaWR0aCAmJiBpbWdIZWlnaHQpKSB7XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiBpbWdXaWR0aCwgaGVpZ2h0OiBpbWdIZWlnaHQsIHJlY3Q6IHNvdXJjZS5jcm9wIH07XG4gICAgfVxuICAgIHZhciBjcm9wID0gc291cmNlLmNyb3A7XG4gICAgdmFyIGhvdHNwb3QgPSBzb3VyY2UuaG90c3BvdDtcbiAgICAvLyBJZiB3ZSBhcmUgaGVyZSwgdGhhdCBtZWFucyBhc3BlY3QgcmF0aW8gaXMgbG9ja2VkIGFuZCBmaXR0aW5nIHdpbGwgYmUgYSBiaXQgaGFyZGVyXG4gICAgdmFyIGRlc2lyZWRBc3BlY3RSYXRpbyA9IGltZ1dpZHRoIC8gaW1nSGVpZ2h0O1xuICAgIHZhciBjcm9wQXNwZWN0UmF0aW8gPSBjcm9wLndpZHRoIC8gY3JvcC5oZWlnaHQ7XG4gICAgaWYgKGNyb3BBc3BlY3RSYXRpbyA+IGRlc2lyZWRBc3BlY3RSYXRpbykge1xuICAgICAgICAvLyBUaGUgY3JvcCBpcyB3aWRlciB0aGFuIHRoZSBkZXNpcmVkIGFzcGVjdCByYXRpby4gVGhhdCBtZWFucyB3ZSBhcmUgY3V0dGluZyBmcm9tIHRoZSBzaWRlc1xuICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5yb3VuZChjcm9wLmhlaWdodCk7XG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoaGVpZ2h0ICogZGVzaXJlZEFzcGVjdFJhdGlvKTtcbiAgICAgICAgdmFyIHRvcF8yID0gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChjcm9wLnRvcCkpO1xuICAgICAgICAvLyBDZW50ZXIgb3V0cHV0IGhvcml6b250YWxseSBvdmVyIGhvdHNwb3RcbiAgICAgICAgdmFyIGhvdHNwb3RYQ2VudGVyID0gTWF0aC5yb3VuZCgoaG90c3BvdC5yaWdodCAtIGhvdHNwb3QubGVmdCkgLyAyICsgaG90c3BvdC5sZWZ0KTtcbiAgICAgICAgdmFyIGxlZnQgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGhvdHNwb3RYQ2VudGVyIC0gd2lkdGggLyAyKSk7XG4gICAgICAgIC8vIEtlZXAgb3V0cHV0IHdpdGhpbiBjcm9wXG4gICAgICAgIGlmIChsZWZ0IDwgY3JvcC5sZWZ0KSB7XG4gICAgICAgICAgICBsZWZ0ID0gY3JvcC5sZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlZnQgKyB3aWR0aCA+IGNyb3AubGVmdCArIGNyb3Aud2lkdGgpIHtcbiAgICAgICAgICAgIGxlZnQgPSBjcm9wLmxlZnQgKyBjcm9wLndpZHRoIC0gd2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgY3JvcFJlY3QgPSB7IGxlZnQ6IGxlZnQsIHRvcDogdG9wXzIsIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRoZSBjcm9wIGlzIHRhbGxlciB0aGFuIHRoZSBkZXNpcmVkIHJhdGlvLCB3ZSBhcmUgY3V0dGluZyBmcm9tIHRvcCBhbmQgYm90dG9tXG4gICAgICAgIHZhciB3aWR0aCA9IGNyb3Aud2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKHdpZHRoIC8gZGVzaXJlZEFzcGVjdFJhdGlvKTtcbiAgICAgICAgdmFyIGxlZnQgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGNyb3AubGVmdCkpO1xuICAgICAgICAvLyBDZW50ZXIgb3V0cHV0IHZlcnRpY2FsbHkgb3ZlciBob3RzcG90XG4gICAgICAgIHZhciBob3RzcG90WUNlbnRlciA9IE1hdGgucm91bmQoKGhvdHNwb3QuYm90dG9tIC0gaG90c3BvdC50b3ApIC8gMiArIGhvdHNwb3QudG9wKTtcbiAgICAgICAgdmFyIHRvcF8zID0gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChob3RzcG90WUNlbnRlciAtIGhlaWdodCAvIDIpKTtcbiAgICAgICAgLy8gS2VlcCBvdXRwdXQgcmVjdCB3aXRoaW4gY3JvcFxuICAgICAgICBpZiAodG9wXzMgPCBjcm9wLnRvcCkge1xuICAgICAgICAgICAgdG9wXzMgPSBjcm9wLnRvcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0b3BfMyArIGhlaWdodCA+IGNyb3AudG9wICsgY3JvcC5oZWlnaHQpIHtcbiAgICAgICAgICAgIHRvcF8zID0gY3JvcC50b3AgKyBjcm9wLmhlaWdodCAtIGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBjcm9wUmVjdCA9IHsgbGVmdDogbGVmdCwgdG9wOiB0b3BfMywgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogaW1nV2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1nSGVpZ2h0LFxuICAgICAgICByZWN0OiBjcm9wUmVjdCxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXJsRm9ySW1hZ2UuanMubWFwIl0sIm5hbWVzIjpbIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInBhcnNlU291cmNlIiwiU1BFQ19OQU1FX1RPX1VSTF9OQU1FX01BUFBJTkdTIiwicGFyc2VBc3NldElkXzEiLCJyZXF1aXJlIiwicGFyc2VTb3VyY2VfMSIsImRlZmF1bHQiLCJ1cmxGb3JJbWFnZSIsIm9wdGlvbnMiLCJzcGVjIiwic291cmNlIiwiaW1hZ2UiLCJFcnJvciIsImNvbmNhdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJpZCIsImFzc2V0IiwiX3JlZiIsIl9pZCIsImNyb3BMZWZ0IiwiTWF0aCIsInJvdW5kIiwiY3JvcCIsImxlZnQiLCJ3aWR0aCIsImNyb3BUb3AiLCJ0b3AiLCJoZWlnaHQiLCJyaWdodCIsImJvdHRvbSIsImhvdFNwb3RWZXJ0aWNhbFJhZGl1cyIsImhvdHNwb3QiLCJob3RTcG90SG9yaXpvbnRhbFJhZGl1cyIsImhvdFNwb3RDZW50ZXJYIiwieCIsImhvdFNwb3RDZW50ZXJZIiwieSIsInJlY3QiLCJmb2NhbFBvaW50IiwiaWdub3JlSW1hZ2VQYXJhbXMiLCJmaXQiLCJzcGVjVG9JbWFnZVVybCIsImNkblVybCIsImJhc2VVcmwiLCJyZXBsYWNlIiwiZmlsZW5hbWUiLCJmb3JtYXQiLCJwcm9qZWN0SWQiLCJkYXRhc2V0IiwicGFyYW1zIiwiX2EiLCJ0b3BfMSIsImlzRWZmZWN0aXZlQ3JvcCIsInB1c2giLCJiZyIsImZsaXAiLCJmbGlwSG9yaXpvbnRhbCIsImZsaXBWZXJ0aWNhbCIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIiwiZm9yRWFjaCIsIm1hcHBpbmciLCJzcGVjTmFtZSIsInBhcmFtIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY3JvcFJlY3QiLCJpbWdXaWR0aCIsImltZ0hlaWdodCIsImRlc2lyZWRBc3BlY3RSYXRpbyIsImNyb3BBc3BlY3RSYXRpbyIsInRvcF8yIiwibWF4IiwiaG90c3BvdFhDZW50ZXIiLCJob3RzcG90WUNlbnRlciIsInRvcF8zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/image-url/lib/node/urlForImage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/client/dist/index.cjs":
/*!****************************************************!*\
  !*** ./node_modules/@sanity/client/dist/index.cjs ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nvar getIt = __webpack_require__(/*! get-it */ \"(ssr)/./node_modules/get-it/dist/index.cjs\");\nvar middleware$1 = __webpack_require__(/*! get-it/middleware */ \"(ssr)/./node_modules/get-it/dist/middleware.cjs\");\nvar rxjs = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/index.js\");\nvar operators = __webpack_require__(/*! rxjs/operators */ \"(ssr)/./node_modules/rxjs/dist/cjs/operators/index.js\");\nconst MAX_ITEMS_IN_ERROR_MESSAGE = 5;\nclass ClientError extends Error {\n  constructor(res) {\n    const props = extractErrorProps(res);\n    super(props.message);\n    this.statusCode = 400;\n    Object.assign(this, props);\n  }\n}\nclass ServerError extends Error {\n  constructor(res) {\n    const props = extractErrorProps(res);\n    super(props.message);\n    this.statusCode = 500;\n    Object.assign(this, props);\n  }\n}\nfunction extractErrorProps(res) {\n  const body = res.body;\n  const props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res),\n    message: \"\",\n    details: void 0\n  };\n  if (body.error && body.message) {\n    props.message = \"\".concat(body.error, \" - \").concat(body.message);\n    return props;\n  }\n  if (isMutationError(body)) {\n    const allItems = body.error.items || [];\n    const items = allItems.slice(0, MAX_ITEMS_IN_ERROR_MESSAGE).map(item => {\n      var _a;\n      return (_a = item.error) == null ? void 0 : _a.description;\n    }).filter(Boolean);\n    let itemsStr = items.length ? \":\\n- \".concat(items.join(\"\\n- \")) : \"\";\n    if (allItems.length > MAX_ITEMS_IN_ERROR_MESSAGE) {\n      itemsStr += \"\\n...and \".concat(allItems.length - MAX_ITEMS_IN_ERROR_MESSAGE, \" more\");\n    }\n    props.message = \"\".concat(body.error.description).concat(itemsStr);\n    props.details = body.error;\n    return props;\n  }\n  if (body.error && body.error.description) {\n    props.message = body.error.description;\n    props.details = body.error;\n    return props;\n  }\n  props.message = body.error || body.message || httpErrorMessage(res);\n  return props;\n}\nfunction isMutationError(body) {\n  return isPlainObject(body) && isPlainObject(body.error) && body.error.type === \"mutationError\" && typeof body.error.description === \"string\";\n}\nfunction isPlainObject(obj) {\n  return typeof obj === \"object\" && obj !== null && !Array.isArray(obj);\n}\nfunction httpErrorMessage(res) {\n  const statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : \"\";\n  return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\nfunction stringifyBody(body, res) {\n  const contentType = (res.headers[\"content-type\"] || \"\").toLowerCase();\n  const isJson = contentType.indexOf(\"application/json\") !== -1;\n  return isJson ? JSON.stringify(body, null, 2) : body;\n}\nconst httpError = {\n  onResponse: res => {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res);\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res);\n    }\n    return res;\n  }\n};\nconst printWarnings = {\n  onResponse: res => {\n    const warn = res.headers[\"x-sanity-warning\"];\n    const warnings = Array.isArray(warn) ? warn : [warn];\n    warnings.filter(Boolean).forEach(msg => console.warn(msg));\n    return res;\n  }\n};\nfunction defineHttpRequest(envMiddleware, _ref) {\n  let {\n    maxRetries = 5,\n    retryDelay\n  } = _ref;\n  const request = getIt.getIt([maxRetries > 0 ? middleware$1.retry({\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    retryDelay,\n    // This option is typed incorrectly in get-it.\n    maxRetries,\n    shouldRetry\n  }) : {}, ...envMiddleware, printWarnings, middleware$1.jsonRequest(), middleware$1.jsonResponse(), middleware$1.progress(), httpError, middleware$1.observable({\n    implementation: rxjs.Observable\n  })]);\n  function httpRequest(options) {\n    let requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n    return requester({\n      maxRedirects: 0,\n      ...options\n    });\n  }\n  httpRequest.defaultRequester = request;\n  return httpRequest;\n}\nfunction shouldRetry(err, attempt, options) {\n  const isSafe = options.method === \"GET\" || options.method === \"HEAD\";\n  const uri = options.uri || options.url;\n  const isQuery = uri.startsWith(\"/data/query\");\n  const isRetriableResponse = err.response && (err.response.statusCode === 429 || err.response.statusCode === 502 || err.response.statusCode === 503);\n  if ((isSafe || isQuery) && isRetriableResponse) return true;\n  return middleware$1.retry.shouldRetry(err, attempt, options);\n}\nfunction getSelection(sel) {\n  if (typeof sel === \"string\" || Array.isArray(sel)) {\n    return {\n      id: sel\n    };\n  }\n  if (typeof sel === \"object\" && sel !== null && \"query\" in sel && typeof sel.query === \"string\") {\n    return \"params\" in sel && typeof sel.params === \"object\" && sel.params !== null ? {\n      query: sel.query,\n      params: sel.params\n    } : {\n      query: sel.query\n    };\n  }\n  const selectionOpts = [\"* Document ID (<docId>)\", \"* Array of document IDs\", \"* Object containing `query`\"].join(\"\\n\");\n  throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n}\nconst VALID_ASSET_TYPES = [\"image\", \"file\"];\nconst VALID_INSERT_LOCATIONS = [\"before\", \"after\", \"replace\"];\nconst dataset = name => {\n  if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n    throw new Error(\"Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters\");\n  }\n};\nconst projectId = id => {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error(\"`projectId` can only contain only a-z, 0-9 and dashes\");\n  }\n};\nconst validateAssetType = type => {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(\", \")));\n  }\n};\nconst validateObject = (op, val) => {\n  if (val === null || typeof val !== \"object\" || Array.isArray(val)) {\n    throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n  }\n};\nconst validateDocumentId = (op, id) => {\n  if (typeof id !== \"string\" || !/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(id) || id.includes(\"..\")) {\n    throw new Error(\"\".concat(op, '(): \"').concat(id, '\" is not a valid document ID'));\n  }\n};\nconst requireDocumentId = (op, doc) => {\n  if (!doc._id) {\n    throw new Error(\"\".concat(op, '() requires that the document contains an ID (\"_id\" property)'));\n  }\n  validateDocumentId(op, doc._id);\n};\nconst validateInsert = (at, selector, items) => {\n  const signature = \"insert(at, selector, items)\";\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    const valid = VALID_INSERT_LOCATIONS.map(loc => '\"'.concat(loc, '\"')).join(\", \");\n    throw new Error(\"\".concat(signature, ' takes an \"at\"-argument which is one of: ').concat(valid));\n  }\n  if (typeof selector !== \"string\") {\n    throw new Error(\"\".concat(signature, ' takes a \"selector\"-argument which must be a string'));\n  }\n  if (!Array.isArray(items)) {\n    throw new Error(\"\".concat(signature, ' takes an \"items\"-argument which must be an array'));\n  }\n};\nconst hasDataset = config => {\n  if (!config.dataset) {\n    throw new Error(\"`dataset` must be provided to perform queries\");\n  }\n  return config.dataset || \"\";\n};\nconst requestTag = tag => {\n  if (typeof tag !== \"string\" || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n    throw new Error(\"Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.\");\n  }\n  return tag;\n};\nvar __accessCheck$6 = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$6 = (obj, member, getter) => {\n  __accessCheck$6(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$6 = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$6 = (obj, member, value, setter) => {\n  __accessCheck$6(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$5, _client2$5;\nclass BasePatch {\n  constructor(selection) {\n    let operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.selection = selection;\n    this.operations = operations;\n  }\n  /**\n   * Sets the given attributes to the document. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */\n  set(attrs) {\n    return this._assign(\"set\", attrs);\n  }\n  /**\n   * Sets the given attributes to the document if they are not currently set. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */\n  setIfMissing(attrs) {\n    return this._assign(\"setIfMissing\", attrs);\n  }\n  /**\n   * Performs a \"diff-match-patch\" operation on the string attributes provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to perform operation on. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"dmp\"\\}\n   */\n  diffMatchPatch(attrs) {\n    validateObject(\"diffMatchPatch\", attrs);\n    return this._assign(\"diffMatchPatch\", attrs);\n  }\n  /**\n   * Unsets the attribute paths provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attribute paths to unset.\n   */\n  unset(attrs) {\n    if (!Array.isArray(attrs)) {\n      throw new Error(\"unset(attrs) takes an array of attributes to unset, non-array given\");\n    }\n    this.operations = Object.assign({}, this.operations, {\n      unset: attrs\n    });\n    return this;\n  }\n  /**\n   * Increment a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to increment, values representing the number to increment by.\n   */\n  inc(attrs) {\n    return this._assign(\"inc\", attrs);\n  }\n  /**\n   * Decrement a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to decrement, values representing the number to decrement by.\n   */\n  dec(attrs) {\n    return this._assign(\"dec\", attrs);\n  }\n  /**\n   * Provides methods for modifying arrays, by inserting, appending and replacing elements via a JSONPath expression.\n   *\n   * @param at - Location to insert at, relative to the given selector, or 'replace' the matched path\n   * @param selector - JSONPath expression, eg `comments[-1]` or `blocks[_key==\"abc123\"]`\n   * @param items - Array of items to insert/replace\n   */\n  insert(at, selector, items) {\n    validateInsert(at, selector, items);\n    return this._assign(\"insert\", {\n      [at]: selector,\n      items\n    });\n  }\n  /**\n   * Append the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to append to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to append to the array\n   */\n  append(selector, items) {\n    return this.insert(\"after\", \"\".concat(selector, \"[-1]\"), items);\n  }\n  /**\n   * Prepend the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to prepend to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to prepend to the array\n   */\n  prepend(selector, items) {\n    return this.insert(\"before\", \"\".concat(selector, \"[0]\"), items);\n  }\n  /**\n   * Change the contents of an array by removing existing elements and/or adding new elements.\n   *\n   * @param selector - Attribute or JSONPath expression for array\n   * @param start - Index at which to start changing the array (with origin 0). If greater than the length of the array, actual starting index will be set to the length of the array. If negative, will begin that many elements from the end of the array (with origin -1) and will be set to 0 if absolute value is greater than the length of the array.x\n   * @param deleteCount - An integer indicating the number of old array elements to remove.\n   * @param items - The elements to add to the array, beginning at the start index. If you don't specify any elements, splice() will only remove elements from the array.\n   */\n  splice(selector, start, deleteCount, items) {\n    const delAll = typeof deleteCount === \"undefined\" || deleteCount === -1;\n    const startIndex = start < 0 ? start - 1 : start;\n    const delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n    const delRange = startIndex < 0 && delCount >= 0 ? \"\" : delCount;\n    const rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n    return this.insert(\"replace\", rangeSelector, items || []);\n  }\n  /**\n   * Adds a revision clause, preventing the document from being patched if the `_rev` property does not match the given value\n   *\n   * @param rev - Revision to lock the patch to\n   */\n  ifRevisionId(rev) {\n    this.operations.ifRevisionID = rev;\n    return this;\n  }\n  /**\n   * Return a plain JSON representation of the patch\n   */\n  serialize() {\n    return {\n      ...getSelection(this.selection),\n      ...this.operations\n    };\n  }\n  /**\n   * Return a plain JSON representation of the patch\n   */\n  toJSON() {\n    return this.serialize();\n  }\n  /**\n   * Clears the patch of all operations\n   */\n  reset() {\n    this.operations = {};\n    return this;\n  }\n  _assign(op, props) {\n    let merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    validateObject(op, props);\n    this.operations = Object.assign({}, this.operations, {\n      [op]: Object.assign({}, merge && this.operations[op] || {}, props)\n    });\n    return this;\n  }\n  _set(op, props) {\n    return this._assign(op, props, false);\n  }\n}\nconst _ObservablePatch = class _ObservablePatch extends BasePatch {\n  constructor(selection, operations, client) {\n    super(selection, operations);\n    __privateAdd$6(this, _client$5, void 0);\n    __privateSet$6(this, _client$5, client);\n  }\n  /**\n   * Clones the patch\n   */\n  clone() {\n    return new _ObservablePatch(this.selection, {\n      ...this.operations\n    }, __privateGet$6(this, _client$5));\n  }\n  commit(options) {\n    if (!__privateGet$6(this, _client$5)) {\n      throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n    }\n    const returnFirst = typeof this.selection === \"string\";\n    const opts = Object.assign({\n      returnFirst,\n      returnDocuments: true\n    }, options);\n    return __privateGet$6(this, _client$5).mutate({\n      patch: this.serialize()\n    }, opts);\n  }\n};\n_client$5 = new WeakMap();\nlet ObservablePatch = _ObservablePatch;\nconst _Patch = class _Patch extends BasePatch {\n  constructor(selection, operations, client) {\n    super(selection, operations);\n    __privateAdd$6(this, _client2$5, void 0);\n    __privateSet$6(this, _client2$5, client);\n  }\n  /**\n   * Clones the patch\n   */\n  clone() {\n    return new _Patch(this.selection, {\n      ...this.operations\n    }, __privateGet$6(this, _client2$5));\n  }\n  commit(options) {\n    if (!__privateGet$6(this, _client2$5)) {\n      throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n    }\n    const returnFirst = typeof this.selection === \"string\";\n    const opts = Object.assign({\n      returnFirst,\n      returnDocuments: true\n    }, options);\n    return __privateGet$6(this, _client2$5).mutate({\n      patch: this.serialize()\n    }, opts);\n  }\n};\n_client2$5 = new WeakMap();\nlet Patch = _Patch;\nvar __accessCheck$5 = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$5 = (obj, member, getter) => {\n  __accessCheck$5(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$5 = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$5 = (obj, member, value, setter) => {\n  __accessCheck$5(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$4, _client2$4;\nconst defaultMutateOptions = {\n  returnDocuments: false\n};\nclass BaseTransaction {\n  constructor() {\n    let operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let transactionId = arguments.length > 1 ? arguments[1] : undefined;\n    this.operations = operations;\n    this.trxId = transactionId;\n  }\n  /**\n   * Creates a new Sanity document. If `_id` is provided and already exists, the mutation will fail. If no `_id` is given, one will automatically be generated by the database.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create. Requires a `_type` property.\n   */\n  create(doc) {\n    validateObject(\"create\", doc);\n    return this._add({\n      create: doc\n    });\n  }\n  /**\n   * Creates a new Sanity document. If a document with the same `_id` already exists, the create operation will be ignored.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create if it does not already exist. Requires `_id` and `_type` properties.\n   */\n  createIfNotExists(doc) {\n    const op = \"createIfNotExists\";\n    validateObject(op, doc);\n    requireDocumentId(op, doc);\n    return this._add({\n      [op]: doc\n    });\n  }\n  /**\n   * Creates a new Sanity document, or replaces an existing one if the same `_id` is already used.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create or replace. Requires `_id` and `_type` properties.\n   */\n  createOrReplace(doc) {\n    const op = \"createOrReplace\";\n    validateObject(op, doc);\n    requireDocumentId(op, doc);\n    return this._add({\n      [op]: doc\n    });\n  }\n  /**\n   * Deletes the document with the given document ID\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param documentId - Document ID to delete\n   */\n  delete(documentId) {\n    validateDocumentId(\"delete\", documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  }\n  transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n    this.trxId = id;\n    return this;\n  }\n  /**\n   * Return a plain JSON representation of the transaction\n   */\n  serialize() {\n    return [...this.operations];\n  }\n  /**\n   * Return a plain JSON representation of the transaction\n   */\n  toJSON() {\n    return this.serialize();\n  }\n  /**\n   * Clears the transaction of all operations\n   */\n  reset() {\n    this.operations = [];\n    return this;\n  }\n  _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n}\nconst _Transaction = class _Transaction extends BaseTransaction {\n  constructor(operations, client, transactionId) {\n    super(operations, transactionId);\n    __privateAdd$5(this, _client$4, void 0);\n    __privateSet$5(this, _client$4, client);\n  }\n  /**\n   * Clones the transaction\n   */\n  clone() {\n    return new _Transaction([...this.operations], __privateGet$5(this, _client$4), this.trxId);\n  }\n  commit(options) {\n    if (!__privateGet$5(this, _client$4)) {\n      throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n    }\n    return __privateGet$5(this, _client$4).mutate(this.serialize(), Object.assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  }\n  patch(patchOrDocumentId, patchOps) {\n    const isBuilder = typeof patchOps === \"function\";\n    const isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof Patch;\n    if (isPatch) {\n      return this._add({\n        patch: patchOrDocumentId.serialize()\n      });\n    }\n    if (isBuilder) {\n      const patch = patchOps(new Patch(patchOrDocumentId, {}, __privateGet$5(this, _client$4)));\n      if (!(patch instanceof Patch)) {\n        throw new Error(\"function passed to `patch()` must return the patch\");\n      }\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n    return this._add({\n      patch: {\n        id: patchOrDocumentId,\n        ...patchOps\n      }\n    });\n  }\n};\n_client$4 = new WeakMap();\nlet Transaction = _Transaction;\nconst _ObservableTransaction = class _ObservableTransaction extends BaseTransaction {\n  constructor(operations, client, transactionId) {\n    super(operations, transactionId);\n    __privateAdd$5(this, _client2$4, void 0);\n    __privateSet$5(this, _client2$4, client);\n  }\n  /**\n   * Clones the transaction\n   */\n  clone() {\n    return new _ObservableTransaction([...this.operations], __privateGet$5(this, _client2$4), this.trxId);\n  }\n  commit(options) {\n    if (!__privateGet$5(this, _client2$4)) {\n      throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n    }\n    return __privateGet$5(this, _client2$4).mutate(this.serialize(), Object.assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  }\n  patch(patchOrDocumentId, patchOps) {\n    const isBuilder = typeof patchOps === \"function\";\n    const isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof ObservablePatch;\n    if (isPatch) {\n      return this._add({\n        patch: patchOrDocumentId.serialize()\n      });\n    }\n    if (isBuilder) {\n      const patch = patchOps(new ObservablePatch(patchOrDocumentId, {}, __privateGet$5(this, _client2$4)));\n      if (!(patch instanceof ObservablePatch)) {\n        throw new Error(\"function passed to `patch()` must return the patch\");\n      }\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n    return this._add({\n      patch: {\n        id: patchOrDocumentId,\n        ...patchOps\n      }\n    });\n  }\n};\n_client2$4 = new WeakMap();\nlet ObservableTransaction = _ObservableTransaction;\nconst BASE_URL = \"https://www.sanity.io/help/\";\nfunction generateHelpUrl(slug) {\n  return BASE_URL + slug;\n}\nfunction once(fn) {\n  let didCall = false;\n  let returnValue;\n  return function () {\n    if (didCall) {\n      return returnValue;\n    }\n    returnValue = fn(...arguments);\n    didCall = true;\n    return returnValue;\n  };\n}\nconst createWarningPrinter = message =>\n// eslint-disable-next-line no-console\nonce(function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  return console.warn(message.join(\" \"), ...args);\n});\nconst printCdnWarning = createWarningPrinter([\"Since you haven't set a value for `useCdn`, we will deliver content using our\", \"global, edge-cached API-CDN. If you wish to have content delivered faster, set\", \"`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API.\"]);\nconst printCdnPreviewDraftsWarning = createWarningPrinter([\"The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.\", \"The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning.\"]);\nconst printBrowserTokenWarning = createWarningPrinter([\"You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.\", \"See \".concat(generateHelpUrl(\"js-client-browser-token\"), \" for more information and how to hide this warning.\")]);\nconst printNoApiVersionSpecifiedWarning = createWarningPrinter([\"Using the Sanity client without specifying an API version is deprecated.\", \"See \".concat(generateHelpUrl(\"js-client-api-version\"))]);\nconst printNoDefaultExport = createWarningPrinter([\"The default export of @sanity/client has been deprecated. Use the named export `createClient` instead.\"]);\nconst defaultCdnHost = \"apicdn.sanity.io\";\nconst defaultConfig = {\n  apiHost: \"https://api.sanity.io\",\n  apiVersion: \"1\",\n  useProjectHostname: true\n};\nconst LOCALHOSTS = [\"localhost\", \"127.0.0.1\", \"0.0.0.0\"];\nconst isLocal = host => LOCALHOSTS.indexOf(host) !== -1;\nconst validateApiVersion = function validateApiVersion2(apiVersion) {\n  if (apiVersion === \"1\" || apiVersion === \"X\") {\n    return;\n  }\n  const apiDate = new Date(apiVersion);\n  const apiVersionValid = /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0;\n  if (!apiVersionValid) {\n    throw new Error(\"Invalid API version string, expected `1` or date in format `YYYY-MM-DD`\");\n  }\n};\nconst validateApiPerspective = function validateApiPerspective2(perspective) {\n  switch (perspective) {\n    case \"previewDrafts\":\n    case \"published\":\n    case \"raw\":\n      return;\n    default:\n      throw new TypeError(\"Invalid API perspective string, expected `published`, `previewDrafts` or `raw`\");\n  }\n};\nconst initConfig = (config, prevConfig) => {\n  const specifiedConfig = Object.assign({}, prevConfig, config);\n  if (!specifiedConfig.apiVersion) {\n    printNoApiVersionSpecifiedWarning();\n  }\n  const newConfig = Object.assign({}, defaultConfig, specifiedConfig);\n  const projectBased = newConfig.useProjectHostname;\n  if (typeof Promise === \"undefined\") {\n    const helpUrl = generateHelpUrl(\"js-client-promise-polyfill\");\n    throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n  }\n  if (projectBased && !newConfig.projectId) {\n    throw new Error(\"Configuration must contain `projectId`\");\n  }\n  if (typeof newConfig.perspective === \"string\") {\n    validateApiPerspective(newConfig.perspective);\n  }\n  if (\"encodeSourceMapAtPath\" in newConfig || \"encodeSourceMap\" in newConfig || \"studioUrl\" in newConfig || \"logger\" in newConfig) {\n    throw new Error(\"It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.\");\n  }\n  const isBrowser = typeof window !== \"undefined\" && window.location && window.location.hostname;\n  const isLocalhost = isBrowser && isLocal(window.location.hostname);\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    printBrowserTokenWarning();\n  } else if (typeof newConfig.useCdn === \"undefined\") {\n    printCdnWarning();\n  }\n  if (projectBased) {\n    projectId(newConfig.projectId);\n  }\n  if (newConfig.dataset) {\n    dataset(newConfig.dataset);\n  }\n  if (\"requestTagPrefix\" in newConfig) {\n    newConfig.requestTagPrefix = newConfig.requestTagPrefix ? requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, \"\") : void 0;\n  }\n  newConfig.apiVersion = \"\".concat(newConfig.apiVersion).replace(/^v/, \"\");\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n  newConfig.useCdn = newConfig.useCdn !== false && !newConfig.withCredentials;\n  validateApiVersion(newConfig.apiVersion);\n  const hostParts = newConfig.apiHost.split(\"://\", 2);\n  const protocol = hostParts[0];\n  const host = hostParts[1];\n  const cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n  if (newConfig.useProjectHostname) {\n    newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v\").concat(newConfig.apiVersion);\n  } else {\n    newConfig.url = \"\".concat(newConfig.apiHost, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = newConfig.url;\n  }\n  return newConfig;\n};\nconst projectHeader = \"X-Sanity-Project-ID\";\nfunction requestOptions(config) {\n  let overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const headers = {};\n  const token = overrides.token || config.token;\n  if (token) {\n    headers.Authorization = \"Bearer \".concat(token);\n  }\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId;\n  }\n  const withCredentials = Boolean(typeof overrides.withCredentials === \"undefined\" ? config.token || config.withCredentials : overrides.withCredentials);\n  const timeout = typeof overrides.timeout === \"undefined\" ? config.timeout : overrides.timeout;\n  return Object.assign({}, overrides, {\n    headers: Object.assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === \"undefined\" ? 5 * 60 * 1e3 : timeout,\n    proxy: overrides.proxy || config.proxy,\n    json: true,\n    withCredentials,\n    fetch: typeof overrides.fetch === \"object\" && typeof config.fetch === \"object\" ? {\n      ...config.fetch,\n      ...overrides.fetch\n    } : overrides.fetch || config.fetch\n  });\n}\nconst encodeQueryString = _ref2 => {\n  let {\n    query,\n    params = {},\n    options = {}\n  } = _ref2;\n  const searchParams = new URLSearchParams();\n  const {\n    tag,\n    ...opts\n  } = options;\n  if (tag) searchParams.append(\"tag\", tag);\n  searchParams.append(\"query\", query);\n  for (const [key, value] of Object.entries(params)) {\n    searchParams.append(\"$\".concat(key), JSON.stringify(value));\n  }\n  for (const [key, value] of Object.entries(opts)) {\n    if (value) searchParams.append(key, \"\".concat(value));\n  }\n  return \"?\".concat(searchParams);\n};\nconst excludeFalsey = (param, defValue) => {\n  const value = typeof param === \"undefined\" ? defValue : param;\n  return param === false ? void 0 : value;\n};\nconst getMutationQuery = function () {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    dryRun: options.dryRun,\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || \"sync\",\n    autoGenerateArrayKeys: options.autoGenerateArrayKeys,\n    skipCrossDatasetReferenceValidation: options.skipCrossDatasetReferenceValidation\n  };\n};\nconst isResponse = event => event.type === \"response\";\nconst getBody = event => event.body;\nconst indexBy = (docs, attr) => docs.reduce((indexed, doc) => {\n  indexed[attr(doc)] = doc;\n  return indexed;\n}, /* @__PURE__ */Object.create(null));\nconst getQuerySizeLimit = 11264;\nfunction _fetch(client, httpRequest, query, params) {\n  let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  const mapResponse = options.filterResponse === false ? res => res : res => res.result;\n  const {\n    cache,\n    next,\n    ...opts\n  } = {\n    // Opt out of setting a `signal` on an internal `fetch` if one isn't provided.\n    // This is necessary in React Server Components to avoid opting out of Request Memoization.\n    useAbortSignal: typeof options.signal !== \"undefined\",\n    ...options\n  };\n  const reqOpts = typeof cache !== \"undefined\" || typeof next !== \"undefined\" ? {\n    ...opts,\n    fetch: {\n      cache,\n      next\n    }\n  } : opts;\n  return _dataRequest(client, httpRequest, \"query\", {\n    query,\n    params\n  }, reqOpts).pipe(operators.map(mapResponse));\n}\nfunction _getDocument(client, httpRequest, id) {\n  let opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  const options = {\n    uri: _getDataUrl(client, \"doc\", id),\n    json: true,\n    tag: opts.tag\n  };\n  return _requestObservable(client, httpRequest, options).pipe(operators.filter(isResponse), operators.map(event => event.body.documents && event.body.documents[0]));\n}\nfunction _getDocuments(client, httpRequest, ids) {\n  let opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  const options = {\n    uri: _getDataUrl(client, \"doc\", ids.join(\",\")),\n    json: true,\n    tag: opts.tag\n  };\n  return _requestObservable(client, httpRequest, options).pipe(operators.filter(isResponse), operators.map(event => {\n    const indexed = indexBy(event.body.documents || [], doc => doc._id);\n    return ids.map(id => indexed[id] || null);\n  }));\n}\nfunction _createIfNotExists(client, httpRequest, doc, options) {\n  requireDocumentId(\"createIfNotExists\", doc);\n  return _create(client, httpRequest, doc, \"createIfNotExists\", options);\n}\nfunction _createOrReplace(client, httpRequest, doc, options) {\n  requireDocumentId(\"createOrReplace\", doc);\n  return _create(client, httpRequest, doc, \"createOrReplace\", options);\n}\nfunction _delete(client, httpRequest, selection, options) {\n  return _dataRequest(client, httpRequest, \"mutate\", {\n    mutations: [{\n      delete: getSelection(selection)\n    }]\n  }, options);\n}\nfunction _mutate(client, httpRequest, mutations, options) {\n  let mut;\n  if (mutations instanceof Patch || mutations instanceof ObservablePatch) {\n    mut = {\n      patch: mutations.serialize()\n    };\n  } else if (mutations instanceof Transaction || mutations instanceof ObservableTransaction) {\n    mut = mutations.serialize();\n  } else {\n    mut = mutations;\n  }\n  const muts = Array.isArray(mut) ? mut : [mut];\n  const transactionId = options && options.transactionId || void 0;\n  return _dataRequest(client, httpRequest, \"mutate\", {\n    mutations: muts,\n    transactionId\n  }, options);\n}\nfunction _dataRequest(client, httpRequest, endpoint, body) {\n  let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  const isMutation = endpoint === \"mutate\";\n  const isQuery = endpoint === \"query\";\n  const strQuery = isMutation ? \"\" : encodeQueryString(body);\n  const useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n  const stringQuery = useGet ? strQuery : \"\";\n  const returnFirst = options.returnFirst;\n  const {\n    timeout,\n    token,\n    tag,\n    headers\n  } = options;\n  const uri = _getDataUrl(client, endpoint, stringQuery);\n  const reqOptions = {\n    method: useGet ? \"GET\" : \"POST\",\n    uri,\n    json: true,\n    body: useGet ? void 0 : body,\n    query: isMutation && getMutationQuery(options),\n    timeout,\n    headers,\n    token,\n    tag,\n    perspective: options.perspective,\n    resultSourceMap: options.resultSourceMap,\n    canUseCdn: isQuery,\n    signal: options.signal,\n    fetch: options.fetch,\n    useAbortSignal: options.useAbortSignal\n  };\n  return _requestObservable(client, httpRequest, reqOptions).pipe(operators.filter(isResponse), operators.map(getBody), operators.map(res => {\n    if (!isMutation) {\n      return res;\n    }\n    const results = res.results || [];\n    if (options.returnDocuments) {\n      return returnFirst ? results[0] && results[0].document : results.map(mut => mut.document);\n    }\n    const key = returnFirst ? \"documentId\" : \"documentIds\";\n    const ids = returnFirst ? results[0] && results[0].id : results.map(mut => mut.id);\n    return {\n      transactionId: res.transactionId,\n      results,\n      [key]: ids\n    };\n  }));\n}\nfunction _create(client, httpRequest, doc, op) {\n  let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  const mutation = {\n    [op]: doc\n  };\n  const opts = Object.assign({\n    returnFirst: true,\n    returnDocuments: true\n  }, options);\n  return _dataRequest(client, httpRequest, \"mutate\", {\n    mutations: [mutation]\n  }, opts);\n}\nfunction _requestObservable(client, httpRequest, options) {\n  var _a;\n  const uri = options.url || options.uri;\n  const config = client.config();\n  const canUseCdn = typeof options.canUseCdn === \"undefined\" ? [\"GET\", \"HEAD\"].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/\") === 0 : options.canUseCdn;\n  let useCdn = config.useCdn && canUseCdn;\n  const tag = options.tag && config.requestTagPrefix ? [config.requestTagPrefix, options.tag].join(\".\") : options.tag || config.requestTagPrefix;\n  if (tag && options.tag !== null) {\n    options.query = {\n      tag: requestTag(tag),\n      ...options.query\n    };\n  }\n  if ([\"GET\", \"HEAD\", \"POST\"].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/query/\") === 0) {\n    const resultSourceMap = (_a = options.resultSourceMap) != null ? _a : config.resultSourceMap;\n    if (resultSourceMap !== void 0 && resultSourceMap !== false) {\n      options.query = {\n        resultSourceMap,\n        ...options.query\n      };\n    }\n    const perspective = options.perspective || config.perspective;\n    if (typeof perspective === \"string\" && perspective !== \"raw\") {\n      validateApiPerspective(perspective);\n      options.query = {\n        perspective,\n        ...options.query\n      };\n      if (perspective === \"previewDrafts\" && useCdn) {\n        useCdn = false;\n        printCdnPreviewDraftsWarning();\n      }\n    }\n  }\n  const reqOptions = requestOptions(config, Object.assign({}, options, {\n    url: _getUrl(client, uri, useCdn)\n  }));\n  const request = new rxjs.Observable(subscriber => httpRequest(reqOptions, config.requester).subscribe(subscriber));\n  return options.signal ? request.pipe(_withAbortSignal(options.signal)) : request;\n}\nfunction _request(client, httpRequest, options) {\n  const observable = _requestObservable(client, httpRequest, options).pipe(operators.filter(event => event.type === \"response\"), operators.map(event => event.body));\n  return observable;\n}\nfunction _getDataUrl(client, operation, path) {\n  const config = client.config();\n  const catalog = hasDataset(config);\n  const baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n  const uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n  return \"/data\".concat(uri).replace(/\\/($|\\?)/, \"$1\");\n}\nfunction _getUrl(client, uri) {\n  let canUseCdn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  const {\n    url,\n    cdnUrl\n  } = client.config();\n  const base = canUseCdn ? cdnUrl : url;\n  return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, \"\"));\n}\nfunction _withAbortSignal(signal) {\n  return input => {\n    return new rxjs.Observable(observer => {\n      const abort = () => observer.error(_createAbortError(signal));\n      if (signal && signal.aborted) {\n        abort();\n        return;\n      }\n      const subscription = input.subscribe(observer);\n      signal.addEventListener(\"abort\", abort);\n      return () => {\n        signal.removeEventListener(\"abort\", abort);\n        subscription.unsubscribe();\n      };\n    });\n  };\n}\nconst isDomExceptionSupported = Boolean(globalThis.DOMException);\nfunction _createAbortError(signal) {\n  var _a, _b;\n  if (isDomExceptionSupported) {\n    return new DOMException((_a = signal == null ? void 0 : signal.reason) != null ? _a : \"The operation was aborted.\", \"AbortError\");\n  }\n  const error = new Error((_b = signal == null ? void 0 : signal.reason) != null ? _b : \"The operation was aborted.\");\n  error.name = \"AbortError\";\n  return error;\n}\nvar __accessCheck$4 = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$4 = (obj, member, getter) => {\n  __accessCheck$4(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$4 = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$4 = (obj, member, value, setter) => {\n  __accessCheck$4(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$3, _httpRequest$4, _client2$3, _httpRequest2$4;\nclass ObservableAssetsClient {\n  constructor(client, httpRequest) {\n    __privateAdd$4(this, _client$3, void 0);\n    __privateAdd$4(this, _httpRequest$4, void 0);\n    __privateSet$4(this, _client$3, client);\n    __privateSet$4(this, _httpRequest$4, httpRequest);\n  }\n  upload(assetType, body, options) {\n    return _upload(__privateGet$4(this, _client$3), __privateGet$4(this, _httpRequest$4), assetType, body, options);\n  }\n}\n_client$3 = new WeakMap();\n_httpRequest$4 = new WeakMap();\nclass AssetsClient {\n  constructor(client, httpRequest) {\n    __privateAdd$4(this, _client2$3, void 0);\n    __privateAdd$4(this, _httpRequest2$4, void 0);\n    __privateSet$4(this, _client2$3, client);\n    __privateSet$4(this, _httpRequest2$4, httpRequest);\n  }\n  upload(assetType, body, options) {\n    const observable = _upload(__privateGet$4(this, _client2$3), __privateGet$4(this, _httpRequest2$4), assetType, body, options);\n    return rxjs.lastValueFrom(observable.pipe(operators.filter(event => event.type === \"response\"), operators.map(event => event.body.document)));\n  }\n}\n_client2$3 = new WeakMap();\n_httpRequest2$4 = new WeakMap();\nfunction _upload(client, httpRequest, assetType, body) {\n  let opts = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  validateAssetType(assetType);\n  let meta = opts.extract || void 0;\n  if (meta && !meta.length) {\n    meta = [\"none\"];\n  }\n  const dataset = hasDataset(client.config());\n  const assetEndpoint = assetType === \"image\" ? \"images\" : \"files\";\n  const options = optionsFromFile(opts, body);\n  const {\n    tag,\n    label,\n    title,\n    description,\n    creditLine,\n    filename,\n    source\n  } = options;\n  const query = {\n    label,\n    title,\n    description,\n    filename,\n    meta,\n    creditLine\n  };\n  if (source) {\n    query.sourceId = source.id;\n    query.sourceName = source.name;\n    query.sourceUrl = source.url;\n  }\n  return _requestObservable(client, httpRequest, {\n    tag,\n    method: \"POST\",\n    timeout: options.timeout || 0,\n    uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n    headers: options.contentType ? {\n      \"Content-Type\": options.contentType\n    } : {},\n    query,\n    body\n  });\n}\nfunction optionsFromFile(opts, file) {\n  if (typeof File === \"undefined\" || !(file instanceof File)) {\n    return opts;\n  }\n  return Object.assign({\n    filename: opts.preserveFilename === false ? void 0 : file.name,\n    contentType: file.type\n  }, opts);\n}\nvar defaults = (obj, defaults) => Object.keys(defaults).concat(Object.keys(obj)).reduce((target, prop) => {\n  target[prop] = typeof obj[prop] === \"undefined\" ? defaults[prop] : obj[prop];\n  return target;\n}, {});\nconst pick = (obj, props) => props.reduce((selection, prop) => {\n  if (typeof obj[prop] === \"undefined\") {\n    return selection;\n  }\n  selection[prop] = obj[prop];\n  return selection;\n}, {});\nconst MAX_URL_LENGTH = 16e3 - 1200;\nconst possibleOptions = [\"includePreviousRevision\", \"includeResult\", \"visibility\", \"effectFormat\", \"tag\"];\nconst defaultOptions = {\n  includeResult: true\n};\nfunction _listen(query, params) {\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    url,\n    token,\n    withCredentials,\n    requestTagPrefix\n  } = this.config();\n  const tag = opts.tag && requestTagPrefix ? [requestTagPrefix, opts.tag].join(\".\") : opts.tag;\n  const options = {\n    ...defaults(opts, defaultOptions),\n    tag\n  };\n  const listenOpts = pick(options, possibleOptions);\n  const qs = encodeQueryString({\n    query,\n    params,\n    options: {\n      tag,\n      ...listenOpts\n    }\n  });\n  const uri = \"\".concat(url).concat(_getDataUrl(this, \"listen\", qs));\n  if (uri.length > MAX_URL_LENGTH) {\n    return new rxjs.Observable(observer => observer.error(new Error(\"Query too large for listener\")));\n  }\n  const listenFor = options.events ? options.events : [\"mutation\"];\n  const shouldEmitReconnect = listenFor.indexOf(\"reconnect\") !== -1;\n  const esOptions = {};\n  if (token || withCredentials) {\n    esOptions.withCredentials = true;\n  }\n  if (token) {\n    esOptions.headers = {\n      Authorization: \"Bearer \".concat(token)\n    };\n  }\n  return new rxjs.Observable(observer => {\n    let es;\n    getEventSource().then(eventSource => {\n      es = eventSource;\n    }).catch(reason => {\n      observer.error(reason);\n      stop();\n    });\n    let reconnectTimer;\n    let stopped = false;\n    function onError() {\n      if (stopped) {\n        return;\n      }\n      emitReconnect();\n      if (stopped) {\n        return;\n      }\n      if (es.readyState === es.CLOSED) {\n        unsubscribe();\n        clearTimeout(reconnectTimer);\n        reconnectTimer = setTimeout(open, 100);\n      }\n    }\n    function onChannelError(err) {\n      observer.error(cooerceError(err));\n    }\n    function onMessage(evt) {\n      const event = parseEvent(evt);\n      return event instanceof Error ? observer.error(event) : observer.next(event);\n    }\n    function onDisconnect() {\n      stopped = true;\n      unsubscribe();\n      observer.complete();\n    }\n    function unsubscribe() {\n      if (!es) return;\n      es.removeEventListener(\"error\", onError);\n      es.removeEventListener(\"channelError\", onChannelError);\n      es.removeEventListener(\"disconnect\", onDisconnect);\n      listenFor.forEach(type => es.removeEventListener(type, onMessage));\n      es.close();\n    }\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({\n          type: \"reconnect\"\n        });\n      }\n    }\n    async function getEventSource() {\n      const {\n        default: EventSource\n      } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@sanity\"), __webpack_require__.e(\"vendor-chunks/eventsource\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @sanity/eventsource */ \"(ssr)/./node_modules/@sanity/eventsource/node.js\", 23));\n      const evs = new EventSource(uri, esOptions);\n      evs.addEventListener(\"error\", onError);\n      evs.addEventListener(\"channelError\", onChannelError);\n      evs.addEventListener(\"disconnect\", onDisconnect);\n      listenFor.forEach(type => evs.addEventListener(type, onMessage));\n      return evs;\n    }\n    function open() {\n      getEventSource().then(eventSource => {\n        es = eventSource;\n      }).catch(reason => {\n        observer.error(reason);\n        stop();\n      });\n    }\n    function stop() {\n      stopped = true;\n      unsubscribe();\n    }\n    return stop;\n  });\n}\nfunction parseEvent(event) {\n  try {\n    const data = event.data && JSON.parse(event.data) || {};\n    return Object.assign({\n      type: event.type\n    }, data);\n  } catch (err) {\n    return err;\n  }\n}\nfunction cooerceError(err) {\n  if (err instanceof Error) {\n    return err;\n  }\n  const evt = parseEvent(err);\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\nfunction extractErrorMessage(err) {\n  if (!err.error) {\n    return err.message || \"Unknown listener error\";\n  }\n  if (err.error.description) {\n    return err.error.description;\n  }\n  return typeof err.error === \"string\" ? err.error : JSON.stringify(err.error, null, 2);\n}\nvar __accessCheck$3 = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$3 = (obj, member, getter) => {\n  __accessCheck$3(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$3 = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$3 = (obj, member, value, setter) => {\n  __accessCheck$3(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$2, _httpRequest$3, _client2$2, _httpRequest2$3;\nclass ObservableDatasetsClient {\n  constructor(client, httpRequest) {\n    __privateAdd$3(this, _client$2, void 0);\n    __privateAdd$3(this, _httpRequest$3, void 0);\n    __privateSet$3(this, _client$2, client);\n    __privateSet$3(this, _httpRequest$3, httpRequest);\n  }\n  /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */\n  create(name, options) {\n    return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PUT\", name, options);\n  }\n  /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */\n  edit(name, options) {\n    return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PATCH\", name, options);\n  }\n  /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */\n  delete(name) {\n    return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"DELETE\", name);\n  }\n  /**\n   * Fetch a list of datasets for the configured project\n   */\n  list() {\n    return _request(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), {\n      uri: \"/datasets\",\n      tag: null\n    });\n  }\n}\n_client$2 = new WeakMap();\n_httpRequest$3 = new WeakMap();\nclass DatasetsClient {\n  constructor(client, httpRequest) {\n    __privateAdd$3(this, _client2$2, void 0);\n    __privateAdd$3(this, _httpRequest2$3, void 0);\n    __privateSet$3(this, _client2$2, client);\n    __privateSet$3(this, _httpRequest2$3, httpRequest);\n  }\n  /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */\n  create(name, options) {\n    return rxjs.lastValueFrom(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PUT\", name, options));\n  }\n  /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */\n  edit(name, options) {\n    return rxjs.lastValueFrom(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PATCH\", name, options));\n  }\n  /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */\n  delete(name) {\n    return rxjs.lastValueFrom(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"DELETE\", name));\n  }\n  /**\n   * Fetch a list of datasets for the configured project\n   */\n  list() {\n    return rxjs.lastValueFrom(_request(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), {\n      uri: \"/datasets\",\n      tag: null\n    }));\n  }\n}\n_client2$2 = new WeakMap();\n_httpRequest2$3 = new WeakMap();\nfunction _modify(client, httpRequest, method, name, options) {\n  dataset(name);\n  return _request(client, httpRequest, {\n    method,\n    uri: \"/datasets/\".concat(name),\n    body: options,\n    tag: null\n  });\n}\nvar __accessCheck$2 = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = (obj, member, getter) => {\n  __accessCheck$2(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = (obj, member, value, setter) => {\n  __accessCheck$2(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$1, _httpRequest$2, _client2$1, _httpRequest2$2;\nclass ObservableProjectsClient {\n  constructor(client, httpRequest) {\n    __privateAdd$2(this, _client$1, void 0);\n    __privateAdd$2(this, _httpRequest$2, void 0);\n    __privateSet$2(this, _client$1, client);\n    __privateSet$2(this, _httpRequest$2, httpRequest);\n  }\n  list(options) {\n    const uri = (options == null ? void 0 : options.includeMembers) === false ? \"/projects?includeMembers=false\" : \"/projects\";\n    return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n      uri\n    });\n  }\n  /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */\n  getById(projectId) {\n    return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n      uri: \"/projects/\".concat(projectId)\n    });\n  }\n}\n_client$1 = new WeakMap();\n_httpRequest$2 = new WeakMap();\nclass ProjectsClient {\n  constructor(client, httpRequest) {\n    __privateAdd$2(this, _client2$1, void 0);\n    __privateAdd$2(this, _httpRequest2$2, void 0);\n    __privateSet$2(this, _client2$1, client);\n    __privateSet$2(this, _httpRequest2$2, httpRequest);\n  }\n  list(options) {\n    const uri = (options == null ? void 0 : options.includeMembers) === false ? \"/projects?includeMembers=false\" : \"/projects\";\n    return rxjs.lastValueFrom(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n      uri\n    }));\n  }\n  /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */\n  getById(projectId) {\n    return rxjs.lastValueFrom(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n      uri: \"/projects/\".concat(projectId)\n    }));\n  }\n}\n_client2$1 = new WeakMap();\n_httpRequest2$2 = new WeakMap();\nvar __accessCheck$1 = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter) => {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter) => {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client, _httpRequest$1, _client2, _httpRequest2$1;\nclass ObservableUsersClient {\n  constructor(client, httpRequest) {\n    __privateAdd$1(this, _client, void 0);\n    __privateAdd$1(this, _httpRequest$1, void 0);\n    __privateSet$1(this, _client, client);\n    __privateSet$1(this, _httpRequest$1, httpRequest);\n  }\n  /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */\n  getById(id) {\n    return _request(__privateGet$1(this, _client), __privateGet$1(this, _httpRequest$1), {\n      uri: \"/users/\".concat(id)\n    });\n  }\n}\n_client = new WeakMap();\n_httpRequest$1 = new WeakMap();\nclass UsersClient {\n  constructor(client, httpRequest) {\n    __privateAdd$1(this, _client2, void 0);\n    __privateAdd$1(this, _httpRequest2$1, void 0);\n    __privateSet$1(this, _client2, client);\n    __privateSet$1(this, _httpRequest2$1, httpRequest);\n  }\n  /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */\n  getById(id) {\n    return rxjs.lastValueFrom(_request(__privateGet$1(this, _client2), __privateGet$1(this, _httpRequest2$1), {\n      uri: \"/users/\".concat(id)\n    }));\n  }\n}\n_client2 = new WeakMap();\n_httpRequest2$1 = new WeakMap();\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _clientConfig, _httpRequest, _clientConfig2, _httpRequest2;\nconst _ObservableSanityClient = class _ObservableSanityClient {\n  constructor(httpRequest) {\n    let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n    /**\n     * Private properties\n     */\n    __privateAdd(this, _clientConfig, void 0);\n    __privateAdd(this, _httpRequest, void 0);\n    /**\n     * Instance properties\n     */\n    this.listen = _listen;\n    this.config(config);\n    __privateSet(this, _httpRequest, httpRequest);\n    this.assets = new ObservableAssetsClient(this, __privateGet(this, _httpRequest));\n    this.datasets = new ObservableDatasetsClient(this, __privateGet(this, _httpRequest));\n    this.projects = new ObservableProjectsClient(this, __privateGet(this, _httpRequest));\n    this.users = new ObservableUsersClient(this, __privateGet(this, _httpRequest));\n  }\n  /**\n   * Clone the client - returns a new instance\n   */\n  clone() {\n    return new _ObservableSanityClient(__privateGet(this, _httpRequest), this.config());\n  }\n  config(newConfig) {\n    if (newConfig === void 0) {\n      return {\n        ...__privateGet(this, _clientConfig)\n      };\n    }\n    if (__privateGet(this, _clientConfig) && __privateGet(this, _clientConfig).allowReconfigure === false) {\n      throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n    }\n    __privateSet(this, _clientConfig, initConfig(newConfig, __privateGet(this, _clientConfig) || {}));\n    return this;\n  }\n  /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */\n  withConfig(newConfig) {\n    return new _ObservableSanityClient(__privateGet(this, _httpRequest), {\n      ...this.config(),\n      ...newConfig\n    });\n  }\n  fetch(query, params) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return _fetch(this, __privateGet(this, _httpRequest), query, params, options);\n  }\n  /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */\n  getDocument(id, options) {\n    return _getDocument(this, __privateGet(this, _httpRequest), id, options);\n  }\n  /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */\n  getDocuments(ids, options) {\n    return _getDocuments(this, __privateGet(this, _httpRequest), ids, options);\n  }\n  create(document, options) {\n    return _create(this, __privateGet(this, _httpRequest), document, \"create\", options);\n  }\n  createIfNotExists(document, options) {\n    return _createIfNotExists(this, __privateGet(this, _httpRequest), document, options);\n  }\n  createOrReplace(document, options) {\n    return _createOrReplace(this, __privateGet(this, _httpRequest), document, options);\n  }\n  delete(selection, options) {\n    return _delete(this, __privateGet(this, _httpRequest), selection, options);\n  }\n  mutate(operations, options) {\n    return _mutate(this, __privateGet(this, _httpRequest), operations, options);\n  }\n  /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param selection - Document ID, an array of document IDs, or an object with `query` and optional `params`, defining which document(s) to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   * @returns Patch instance - call `.commit()` to perform the operations defined\n   */\n  patch(selection, operations) {\n    return new ObservablePatch(selection, operations, this);\n  }\n  /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */\n  transaction(operations) {\n    return new ObservableTransaction(operations, this);\n  }\n  /**\n   * Perform an HTTP request against the Sanity API\n   *\n   * @param options - Request options\n   */\n  request(options) {\n    return _request(this, __privateGet(this, _httpRequest), options);\n  }\n  /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */\n  getUrl(uri, canUseCdn) {\n    return _getUrl(this, uri, canUseCdn);\n  }\n  /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */\n  getDataUrl(operation, path) {\n    return _getDataUrl(this, operation, path);\n  }\n};\n_clientConfig = new WeakMap();\n_httpRequest = new WeakMap();\nlet ObservableSanityClient = _ObservableSanityClient;\nconst _SanityClient = class _SanityClient {\n  constructor(httpRequest) {\n    let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n    /**\n     * Private properties\n     */\n    __privateAdd(this, _clientConfig2, void 0);\n    __privateAdd(this, _httpRequest2, void 0);\n    /**\n     * Instance properties\n     */\n    this.listen = _listen;\n    this.config(config);\n    __privateSet(this, _httpRequest2, httpRequest);\n    this.assets = new AssetsClient(this, __privateGet(this, _httpRequest2));\n    this.datasets = new DatasetsClient(this, __privateGet(this, _httpRequest2));\n    this.projects = new ProjectsClient(this, __privateGet(this, _httpRequest2));\n    this.users = new UsersClient(this, __privateGet(this, _httpRequest2));\n    this.observable = new ObservableSanityClient(httpRequest, config);\n  }\n  /**\n   * Clone the client - returns a new instance\n   */\n  clone() {\n    return new _SanityClient(__privateGet(this, _httpRequest2), this.config());\n  }\n  config(newConfig) {\n    if (newConfig === void 0) {\n      return {\n        ...__privateGet(this, _clientConfig2)\n      };\n    }\n    if (__privateGet(this, _clientConfig2) && __privateGet(this, _clientConfig2).allowReconfigure === false) {\n      throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n    }\n    if (this.observable) {\n      this.observable.config(newConfig);\n    }\n    __privateSet(this, _clientConfig2, initConfig(newConfig, __privateGet(this, _clientConfig2) || {}));\n    return this;\n  }\n  /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */\n  withConfig(newConfig) {\n    return new _SanityClient(__privateGet(this, _httpRequest2), {\n      ...this.config(),\n      ...newConfig\n    });\n  }\n  fetch(query, params) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return rxjs.lastValueFrom(_fetch(this, __privateGet(this, _httpRequest2), query, params, options));\n  }\n  /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */\n  getDocument(id, options) {\n    return rxjs.lastValueFrom(_getDocument(this, __privateGet(this, _httpRequest2), id, options));\n  }\n  /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */\n  getDocuments(ids, options) {\n    return rxjs.lastValueFrom(_getDocuments(this, __privateGet(this, _httpRequest2), ids, options));\n  }\n  create(document, options) {\n    return rxjs.lastValueFrom(_create(this, __privateGet(this, _httpRequest2), document, \"create\", options));\n  }\n  createIfNotExists(document, options) {\n    return rxjs.lastValueFrom(_createIfNotExists(this, __privateGet(this, _httpRequest2), document, options));\n  }\n  createOrReplace(document, options) {\n    return rxjs.lastValueFrom(_createOrReplace(this, __privateGet(this, _httpRequest2), document, options));\n  }\n  delete(selection, options) {\n    return rxjs.lastValueFrom(_delete(this, __privateGet(this, _httpRequest2), selection, options));\n  }\n  mutate(operations, options) {\n    return rxjs.lastValueFrom(_mutate(this, __privateGet(this, _httpRequest2), operations, options));\n  }\n  /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param selection - Document ID, an array of document IDs, or an object with `query` and optional `params`, defining which document(s) to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   * @returns Patch instance - call `.commit()` to perform the operations defined\n   */\n  patch(documentId, operations) {\n    return new Patch(documentId, operations, this);\n  }\n  /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */\n  transaction(operations) {\n    return new Transaction(operations, this);\n  }\n  /**\n   * Perform a request against the Sanity API\n   * NOTE: Only use this for Sanity API endpoints, not for your own APIs!\n   *\n   * @param options - Request options\n   * @returns Promise resolving to the response body\n   */\n  request(options) {\n    return rxjs.lastValueFrom(_request(this, __privateGet(this, _httpRequest2), options));\n  }\n  /**\n   * Perform an HTTP request a `/data` sub-endpoint\n   * NOTE: Considered internal, thus marked as deprecated. Use `request` instead.\n   *\n   * @deprecated - Use `request()` or your own HTTP library instead\n   * @param endpoint - Endpoint to hit (mutate, query etc)\n   * @param body - Request body\n   * @param options - Request options\n   * @internal\n   */\n  dataRequest(endpoint, body, options) {\n    return rxjs.lastValueFrom(_dataRequest(this, __privateGet(this, _httpRequest2), endpoint, body, options));\n  }\n  /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */\n  getUrl(uri, canUseCdn) {\n    return _getUrl(this, uri, canUseCdn);\n  }\n  /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */\n  getDataUrl(operation, path) {\n    return _getDataUrl(this, operation, path);\n  }\n};\n_clientConfig2 = new WeakMap();\n_httpRequest2 = new WeakMap();\nlet SanityClient = _SanityClient;\nfunction defineCreateClientExports(envMiddleware, ClassConstructor) {\n  const httpRequest = defineHttpRequest(envMiddleware, {});\n  const requester = httpRequest.defaultRequester;\n  const createClient = config => new ClassConstructor(defineHttpRequest(envMiddleware, {\n    maxRetries: config.maxRetries,\n    retryDelay: config.retryDelay\n  }), config);\n  return {\n    requester,\n    createClient\n  };\n}\nfunction defineDeprecatedCreateClient(createClient) {\n  return function deprecatedCreateClient(config) {\n    printNoDefaultExport();\n    return createClient(config);\n  };\n}\nvar name = \"@sanity/client\";\nvar version = \"6.7.1\";\nconst middleware = [middleware$1.debug({\n  verbose: true,\n  namespace: \"sanity:client\"\n}), middleware$1.headers({\n  \"User-Agent\": \"\".concat(name, \" \").concat(version)\n}),\n// Enable keep-alive, and in addition limit the number of sockets that can be opened.\n// This avoids opening too many connections to the server if someone tries to execute\n// a bunch of requests in parallel. It's recommended to have a concurrency limit\n// at a \"higher limit\" (i.e. you shouldn't actually execute hundreds of requests in parallel),\n// and this is mainly to minimize the impact for the network and server.\n//\n// We're currently matching the same defaults as browsers:\n// https://stackoverflow.com/questions/26003756/is-there-a-limit-practical-or-otherwise-to-the-number-of-web-sockets-a-page-op\nmiddleware$1.agent({\n  keepAlive: true,\n  maxSockets: 30,\n  maxTotalSockets: 256\n})];\nconst exp = defineCreateClientExports(middleware, SanityClient);\nconst requester = exp.requester;\nconst createClient = exp.createClient;\nconst deprecatedCreateClient = defineDeprecatedCreateClient(createClient);\nObject.defineProperty(exports, \"unstable__adapter\", ({\n  enumerable: true,\n  get: function () {\n    return getIt.adapter;\n  }\n}));\nObject.defineProperty(exports, \"unstable__environment\", ({\n  enumerable: true,\n  get: function () {\n    return getIt.environment;\n  }\n}));\nexports.BasePatch = BasePatch;\nexports.BaseTransaction = BaseTransaction;\nexports.ClientError = ClientError;\nexports.ObservablePatch = ObservablePatch;\nexports.ObservableSanityClient = ObservableSanityClient;\nexports.ObservableTransaction = ObservableTransaction;\nexports.Patch = Patch;\nexports.SanityClient = SanityClient;\nexports.ServerError = ServerError;\nexports.Transaction = Transaction;\nexports.createClient = createClient;\nexports[\"default\"] = deprecatedCreateClient;\nexports.requester = requester;\n//# sourceMappingURL=index.cjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9jbGllbnQvZGlzdC9pbmRleC5janMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsWUFBWSxtQkFBTyxDQUFDLDBEQUFRO0FBQzVCLG1CQUFtQixtQkFBTyxDQUFDLDBFQUFtQjtBQUM5QyxXQUFXLG1CQUFPLENBQUMsMERBQU07QUFDekIsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsTUFBTTtBQUNUO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLEVBQUUsTUFBTSxLQUFLLFVBQVUsRUFBRSxNQUFNLEtBQUs7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsTUFBTTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELEtBQUs7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRkFBcUY7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLDRCQUE0QixvQ0FBb0M7QUFDaEUsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLHFDQUFxQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxxQ0FBcUM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLHNFQUFzRTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLDZCQUE2QixrQ0FBa0M7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQ7QUFDNUQ7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQUk7QUFDVjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLElBQUk7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLElBQUk7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxRQUFRLHlRQUE2QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUdBQXFHO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLGlCQUFpQjtBQUNqQix1QkFBdUI7QUFDdkIsbUJBQW1CO0FBQ25CLHVCQUF1QjtBQUN2Qiw4QkFBOEI7QUFDOUIsNkJBQTZCO0FBQzdCLGFBQWE7QUFDYixvQkFBb0I7QUFDcEIsbUJBQW1CO0FBQ25CLG1CQUFtQjtBQUNuQixvQkFBb0I7QUFDcEIsa0JBQWU7QUFDZixpQkFBaUI7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2NsaWVudC9kaXN0L2luZGV4LmNqcz9kN2UyIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgZ2V0SXQgPSByZXF1aXJlKCdnZXQtaXQnKTtcbnZhciBtaWRkbGV3YXJlJDEgPSByZXF1aXJlKCdnZXQtaXQvbWlkZGxld2FyZScpO1xudmFyIHJ4anMgPSByZXF1aXJlKCdyeGpzJyk7XG52YXIgb3BlcmF0b3JzID0gcmVxdWlyZSgncnhqcy9vcGVyYXRvcnMnKTtcbmNvbnN0IE1BWF9JVEVNU19JTl9FUlJPUl9NRVNTQUdFID0gNTtcbmNsYXNzIENsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyZXMpIHtcbiAgICBjb25zdCBwcm9wcyA9IGV4dHJhY3RFcnJvclByb3BzKHJlcyk7XG4gICAgc3VwZXIocHJvcHMubWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcHMpO1xuICB9XG59XG5jbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IocmVzKSB7XG4gICAgY29uc3QgcHJvcHMgPSBleHRyYWN0RXJyb3JQcm9wcyhyZXMpO1xuICAgIHN1cGVyKHByb3BzLm1lc3NhZ2UpO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IDUwMDtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIHByb3BzKTtcbiAgfVxufVxuZnVuY3Rpb24gZXh0cmFjdEVycm9yUHJvcHMocmVzKSB7XG4gIGNvbnN0IGJvZHkgPSByZXMuYm9keTtcbiAgY29uc3QgcHJvcHMgPSB7XG4gICAgcmVzcG9uc2U6IHJlcyxcbiAgICBzdGF0dXNDb2RlOiByZXMuc3RhdHVzQ29kZSxcbiAgICByZXNwb25zZUJvZHk6IHN0cmluZ2lmeUJvZHkoYm9keSwgcmVzKSxcbiAgICBtZXNzYWdlOiBcIlwiLFxuICAgIGRldGFpbHM6IHZvaWQgMFxuICB9O1xuICBpZiAoYm9keS5lcnJvciAmJiBib2R5Lm1lc3NhZ2UpIHtcbiAgICBwcm9wcy5tZXNzYWdlID0gXCJcIi5jb25jYXQoYm9keS5lcnJvciwgXCIgLSBcIikuY29uY2F0KGJvZHkubWVzc2FnZSk7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG4gIGlmIChpc011dGF0aW9uRXJyb3IoYm9keSkpIHtcbiAgICBjb25zdCBhbGxJdGVtcyA9IGJvZHkuZXJyb3IuaXRlbXMgfHwgW107XG4gICAgY29uc3QgaXRlbXMgPSBhbGxJdGVtcy5zbGljZSgwLCBNQVhfSVRFTVNfSU5fRVJST1JfTUVTU0FHRSkubWFwKGl0ZW0gPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIChfYSA9IGl0ZW0uZXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfYS5kZXNjcmlwdGlvbjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG4gICAgbGV0IGl0ZW1zU3RyID0gaXRlbXMubGVuZ3RoID8gXCI6XFxuLSBcIi5jb25jYXQoaXRlbXMuam9pbihcIlxcbi0gXCIpKSA6IFwiXCI7XG4gICAgaWYgKGFsbEl0ZW1zLmxlbmd0aCA+IE1BWF9JVEVNU19JTl9FUlJPUl9NRVNTQUdFKSB7XG4gICAgICBpdGVtc1N0ciArPSBcIlxcbi4uLmFuZCBcIi5jb25jYXQoYWxsSXRlbXMubGVuZ3RoIC0gTUFYX0lURU1TX0lOX0VSUk9SX01FU1NBR0UsIFwiIG1vcmVcIik7XG4gICAgfVxuICAgIHByb3BzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChib2R5LmVycm9yLmRlc2NyaXB0aW9uKS5jb25jYXQoaXRlbXNTdHIpO1xuICAgIHByb3BzLmRldGFpbHMgPSBib2R5LmVycm9yO1xuICAgIHJldHVybiBwcm9wcztcbiAgfVxuICBpZiAoYm9keS5lcnJvciAmJiBib2R5LmVycm9yLmRlc2NyaXB0aW9uKSB7XG4gICAgcHJvcHMubWVzc2FnZSA9IGJvZHkuZXJyb3IuZGVzY3JpcHRpb247XG4gICAgcHJvcHMuZGV0YWlscyA9IGJvZHkuZXJyb3I7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG4gIHByb3BzLm1lc3NhZ2UgPSBib2R5LmVycm9yIHx8IGJvZHkubWVzc2FnZSB8fCBodHRwRXJyb3JNZXNzYWdlKHJlcyk7XG4gIHJldHVybiBwcm9wcztcbn1cbmZ1bmN0aW9uIGlzTXV0YXRpb25FcnJvcihib2R5KSB7XG4gIHJldHVybiBpc1BsYWluT2JqZWN0KGJvZHkpICYmIGlzUGxhaW5PYmplY3QoYm9keS5lcnJvcikgJiYgYm9keS5lcnJvci50eXBlID09PSBcIm11dGF0aW9uRXJyb3JcIiAmJiB0eXBlb2YgYm9keS5lcnJvci5kZXNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShvYmopO1xufVxuZnVuY3Rpb24gaHR0cEVycm9yTWVzc2FnZShyZXMpIHtcbiAgY29uc3Qgc3RhdHVzTWVzc2FnZSA9IHJlcy5zdGF0dXNNZXNzYWdlID8gXCIgXCIuY29uY2F0KHJlcy5zdGF0dXNNZXNzYWdlKSA6IFwiXCI7XG4gIHJldHVybiBcIlwiLmNvbmNhdChyZXMubWV0aG9kLCBcIi1yZXF1ZXN0IHRvIFwiKS5jb25jYXQocmVzLnVybCwgXCIgcmVzdWx0ZWQgaW4gSFRUUCBcIikuY29uY2F0KHJlcy5zdGF0dXNDb2RlKS5jb25jYXQoc3RhdHVzTWVzc2FnZSk7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlCb2R5KGJvZHksIHJlcykge1xuICBjb25zdCBjb250ZW50VHlwZSA9IChyZXMuaGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBpc0pzb24gPSBjb250ZW50VHlwZS5pbmRleE9mKFwiYXBwbGljYXRpb24vanNvblwiKSAhPT0gLTE7XG4gIHJldHVybiBpc0pzb24gPyBKU09OLnN0cmluZ2lmeShib2R5LCBudWxsLCAyKSA6IGJvZHk7XG59XG5jb25zdCBodHRwRXJyb3IgPSB7XG4gIG9uUmVzcG9uc2U6IHJlcyA9PiB7XG4gICAgaWYgKHJlcy5zdGF0dXNDb2RlID49IDUwMCkge1xuICAgICAgdGhyb3cgbmV3IFNlcnZlckVycm9yKHJlcyk7XG4gICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgIHRocm93IG5ldyBDbGllbnRFcnJvcihyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG59O1xuY29uc3QgcHJpbnRXYXJuaW5ncyA9IHtcbiAgb25SZXNwb25zZTogcmVzID0+IHtcbiAgICBjb25zdCB3YXJuID0gcmVzLmhlYWRlcnNbXCJ4LXNhbml0eS13YXJuaW5nXCJdO1xuICAgIGNvbnN0IHdhcm5pbmdzID0gQXJyYXkuaXNBcnJheSh3YXJuKSA/IHdhcm4gOiBbd2Fybl07XG4gICAgd2FybmluZ3MuZmlsdGVyKEJvb2xlYW4pLmZvckVhY2gobXNnID0+IGNvbnNvbGUud2Fybihtc2cpKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG59O1xuZnVuY3Rpb24gZGVmaW5lSHR0cFJlcXVlc3QoZW52TWlkZGxld2FyZSwgX3JlZikge1xuICBsZXQge1xuICAgIG1heFJldHJpZXMgPSA1LFxuICAgIHJldHJ5RGVsYXlcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHJlcXVlc3QgPSBnZXRJdC5nZXRJdChbbWF4UmV0cmllcyA+IDAgPyBtaWRkbGV3YXJlJDEucmV0cnkoe1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0cnlEZWxheSxcbiAgICAvLyBUaGlzIG9wdGlvbiBpcyB0eXBlZCBpbmNvcnJlY3RseSBpbiBnZXQtaXQuXG4gICAgbWF4UmV0cmllcyxcbiAgICBzaG91bGRSZXRyeVxuICB9KSA6IHt9LCAuLi5lbnZNaWRkbGV3YXJlLCBwcmludFdhcm5pbmdzLCBtaWRkbGV3YXJlJDEuanNvblJlcXVlc3QoKSwgbWlkZGxld2FyZSQxLmpzb25SZXNwb25zZSgpLCBtaWRkbGV3YXJlJDEucHJvZ3Jlc3MoKSwgaHR0cEVycm9yLCBtaWRkbGV3YXJlJDEub2JzZXJ2YWJsZSh7XG4gICAgaW1wbGVtZW50YXRpb246IHJ4anMuT2JzZXJ2YWJsZVxuICB9KV0pO1xuICBmdW5jdGlvbiBodHRwUmVxdWVzdChvcHRpb25zKSB7XG4gICAgbGV0IHJlcXVlc3RlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogcmVxdWVzdDtcbiAgICByZXR1cm4gcmVxdWVzdGVyKHtcbiAgICAgIG1heFJlZGlyZWN0czogMCxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgfVxuICBodHRwUmVxdWVzdC5kZWZhdWx0UmVxdWVzdGVyID0gcmVxdWVzdDtcbiAgcmV0dXJuIGh0dHBSZXF1ZXN0O1xufVxuZnVuY3Rpb24gc2hvdWxkUmV0cnkoZXJyLCBhdHRlbXB0LCBvcHRpb25zKSB7XG4gIGNvbnN0IGlzU2FmZSA9IG9wdGlvbnMubWV0aG9kID09PSBcIkdFVFwiIHx8IG9wdGlvbnMubWV0aG9kID09PSBcIkhFQURcIjtcbiAgY29uc3QgdXJpID0gb3B0aW9ucy51cmkgfHwgb3B0aW9ucy51cmw7XG4gIGNvbnN0IGlzUXVlcnkgPSB1cmkuc3RhcnRzV2l0aChcIi9kYXRhL3F1ZXJ5XCIpO1xuICBjb25zdCBpc1JldHJpYWJsZVJlc3BvbnNlID0gZXJyLnJlc3BvbnNlICYmIChlcnIucmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNDI5IHx8IGVyci5yZXNwb25zZS5zdGF0dXNDb2RlID09PSA1MDIgfHwgZXJyLnJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDUwMyk7XG4gIGlmICgoaXNTYWZlIHx8IGlzUXVlcnkpICYmIGlzUmV0cmlhYmxlUmVzcG9uc2UpIHJldHVybiB0cnVlO1xuICByZXR1cm4gbWlkZGxld2FyZSQxLnJldHJ5LnNob3VsZFJldHJ5KGVyciwgYXR0ZW1wdCwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24oc2VsKSB7XG4gIGlmICh0eXBlb2Ygc2VsID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoc2VsKSkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogc2VsXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIHNlbCA9PT0gXCJvYmplY3RcIiAmJiBzZWwgIT09IG51bGwgJiYgXCJxdWVyeVwiIGluIHNlbCAmJiB0eXBlb2Ygc2VsLnF1ZXJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIFwicGFyYW1zXCIgaW4gc2VsICYmIHR5cGVvZiBzZWwucGFyYW1zID09PSBcIm9iamVjdFwiICYmIHNlbC5wYXJhbXMgIT09IG51bGwgPyB7XG4gICAgICBxdWVyeTogc2VsLnF1ZXJ5LFxuICAgICAgcGFyYW1zOiBzZWwucGFyYW1zXG4gICAgfSA6IHtcbiAgICAgIHF1ZXJ5OiBzZWwucXVlcnlcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNlbGVjdGlvbk9wdHMgPSBbXCIqIERvY3VtZW50IElEICg8ZG9jSWQ+KVwiLCBcIiogQXJyYXkgb2YgZG9jdW1lbnQgSURzXCIsIFwiKiBPYmplY3QgY29udGFpbmluZyBgcXVlcnlgXCJdLmpvaW4oXCJcXG5cIik7XG4gIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc2VsZWN0aW9uIC0gbXVzdCBiZSBvbmUgb2Y6XFxuXFxuXCIuY29uY2F0KHNlbGVjdGlvbk9wdHMpKTtcbn1cbmNvbnN0IFZBTElEX0FTU0VUX1RZUEVTID0gW1wiaW1hZ2VcIiwgXCJmaWxlXCJdO1xuY29uc3QgVkFMSURfSU5TRVJUX0xPQ0FUSU9OUyA9IFtcImJlZm9yZVwiLCBcImFmdGVyXCIsIFwicmVwbGFjZVwiXTtcbmNvbnN0IGRhdGFzZXQgPSBuYW1lID0+IHtcbiAgaWYgKCEvXih+W2EtejAtOV17MX1bLVxcd117MCw2M318W2EtejAtOV17MX1bLVxcd117MCw2M30pJC8udGVzdChuYW1lKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFzZXRzIGNhbiBvbmx5IGNvbnRhaW4gbG93ZXJjYXNlIGNoYXJhY3RlcnMsIG51bWJlcnMsIHVuZGVyc2NvcmVzIGFuZCBkYXNoZXMsIGFuZCBzdGFydCB3aXRoIHRpbGRlLCBhbmQgYmUgbWF4aW11bSA2NCBjaGFyYWN0ZXJzXCIpO1xuICB9XG59O1xuY29uc3QgcHJvamVjdElkID0gaWQgPT4ge1xuICBpZiAoIS9eWy1hLXowLTldKyQvaS50ZXN0KGlkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImBwcm9qZWN0SWRgIGNhbiBvbmx5IGNvbnRhaW4gb25seSBhLXosIDAtOSBhbmQgZGFzaGVzXCIpO1xuICB9XG59O1xuY29uc3QgdmFsaWRhdGVBc3NldFR5cGUgPSB0eXBlID0+IHtcbiAgaWYgKFZBTElEX0FTU0VUX1RZUEVTLmluZGV4T2YodHlwZSkgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhc3NldCB0eXBlOiBcIi5jb25jYXQodHlwZSwgXCIuIE11c3QgYmUgb25lIG9mIFwiKS5jb25jYXQoVkFMSURfQVNTRVRfVFlQRVMuam9pbihcIiwgXCIpKSk7XG4gIH1cbn07XG5jb25zdCB2YWxpZGF0ZU9iamVjdCA9IChvcCwgdmFsKSA9PiB7XG4gIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQob3AsIFwiKCkgdGFrZXMgYW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcIikpO1xuICB9XG59O1xuY29uc3QgdmFsaWRhdGVEb2N1bWVudElkID0gKG9wLCBpZCkgPT4ge1xuICBpZiAodHlwZW9mIGlkICE9PSBcInN0cmluZ1wiIHx8ICEvXlthLXowLTlfXVthLXowLTlfLi1dezAsMTI3fSQvaS50ZXN0KGlkKSB8fCBpZC5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KG9wLCAnKCk6IFwiJykuY29uY2F0KGlkLCAnXCIgaXMgbm90IGEgdmFsaWQgZG9jdW1lbnQgSUQnKSk7XG4gIH1cbn07XG5jb25zdCByZXF1aXJlRG9jdW1lbnRJZCA9IChvcCwgZG9jKSA9PiB7XG4gIGlmICghZG9jLl9pZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChvcCwgJygpIHJlcXVpcmVzIHRoYXQgdGhlIGRvY3VtZW50IGNvbnRhaW5zIGFuIElEIChcIl9pZFwiIHByb3BlcnR5KScpKTtcbiAgfVxuICB2YWxpZGF0ZURvY3VtZW50SWQob3AsIGRvYy5faWQpO1xufTtcbmNvbnN0IHZhbGlkYXRlSW5zZXJ0ID0gKGF0LCBzZWxlY3RvciwgaXRlbXMpID0+IHtcbiAgY29uc3Qgc2lnbmF0dXJlID0gXCJpbnNlcnQoYXQsIHNlbGVjdG9yLCBpdGVtcylcIjtcbiAgaWYgKFZBTElEX0lOU0VSVF9MT0NBVElPTlMuaW5kZXhPZihhdCkgPT09IC0xKSB7XG4gICAgY29uc3QgdmFsaWQgPSBWQUxJRF9JTlNFUlRfTE9DQVRJT05TLm1hcChsb2MgPT4gJ1wiJy5jb25jYXQobG9jLCAnXCInKSkuam9pbihcIiwgXCIpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChzaWduYXR1cmUsICcgdGFrZXMgYW4gXCJhdFwiLWFyZ3VtZW50IHdoaWNoIGlzIG9uZSBvZjogJykuY29uY2F0KHZhbGlkKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChzaWduYXR1cmUsICcgdGFrZXMgYSBcInNlbGVjdG9yXCItYXJndW1lbnQgd2hpY2ggbXVzdCBiZSBhIHN0cmluZycpKTtcbiAgfVxuICBpZiAoIUFycmF5LmlzQXJyYXkoaXRlbXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHNpZ25hdHVyZSwgJyB0YWtlcyBhbiBcIml0ZW1zXCItYXJndW1lbnQgd2hpY2ggbXVzdCBiZSBhbiBhcnJheScpKTtcbiAgfVxufTtcbmNvbnN0IGhhc0RhdGFzZXQgPSBjb25maWcgPT4ge1xuICBpZiAoIWNvbmZpZy5kYXRhc2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYGRhdGFzZXRgIG11c3QgYmUgcHJvdmlkZWQgdG8gcGVyZm9ybSBxdWVyaWVzXCIpO1xuICB9XG4gIHJldHVybiBjb25maWcuZGF0YXNldCB8fCBcIlwiO1xufTtcbmNvbnN0IHJlcXVlc3RUYWcgPSB0YWcgPT4ge1xuICBpZiAodHlwZW9mIHRhZyAhPT0gXCJzdHJpbmdcIiB8fCAhL15bYS16MC05Ll8tXXsxLDc1fSQvaS50ZXN0KHRhZykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUYWcgY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycywgdW5kZXJzY29yZXMsIGRhc2hlcyBhbmQgZG90cywgYW5kIGJlIGJldHdlZW4gb25lIGFuZCA3NSBjaGFyYWN0ZXJzIGxvbmcuXCIpO1xuICB9XG4gIHJldHVybiB0YWc7XG59O1xudmFyIF9fYWNjZXNzQ2hlY2skNiA9IChvYmosIG1lbWJlciwgbXNnKSA9PiB7XG4gIGlmICghbWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xufTtcbnZhciBfX3ByaXZhdGVHZXQkNiA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skNihvYmosIG1lbWJlciwgXCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgcmV0dXJuIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaik7XG59O1xudmFyIF9fcHJpdmF0ZUFkZCQ2ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSkgPT4ge1xuICBpZiAobWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIHRoZSBzYW1lIHByaXZhdGUgbWVtYmVyIG1vcmUgdGhhbiBvbmNlXCIpO1xuICBtZW1iZXIgaW5zdGFuY2VvZiBXZWFrU2V0ID8gbWVtYmVyLmFkZChvYmopIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbn07XG52YXIgX19wcml2YXRlU2V0JDYgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQ2KG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIik7XG4gIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBfY2xpZW50JDUsIF9jbGllbnQyJDU7XG5jbGFzcyBCYXNlUGF0Y2gge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rpb24pIHtcbiAgICBsZXQgb3BlcmF0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5zZWxlY3Rpb24gPSBzZWxlY3Rpb247XG4gICAgdGhpcy5vcGVyYXRpb25zID0gb3BlcmF0aW9ucztcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgZ2l2ZW4gYXR0cmlidXRlcyB0byB0aGUgZG9jdW1lbnQuIERvZXMgTk9UIG1lcmdlIG9iamVjdHMuXG4gICAqIFRoZSBvcGVyYXRpb24gaXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgcGF0Y2gsIHJlYWR5IHRvIGJlIGNvbW1pdGVkIGJ5IGBjb21taXQoKWBcbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gQXR0cmlidXRlcyB0byBzZXQuIFRvIHNldCBhIGRlZXAgYXR0cmlidXRlLCB1c2UgSlNPTk1hdGNoLCBlZzogXFx7XCJuZXN0ZWQucHJvcFwiOiBcInZhbHVlXCJcXH1cbiAgICovXG4gIHNldChhdHRycykge1xuICAgIHJldHVybiB0aGlzLl9hc3NpZ24oXCJzZXRcIiwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBnaXZlbiBhdHRyaWJ1dGVzIHRvIHRoZSBkb2N1bWVudCBpZiB0aGV5IGFyZSBub3QgY3VycmVudGx5IHNldC4gRG9lcyBOT1QgbWVyZ2Ugb2JqZWN0cy5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCBwYXRjaCwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBBdHRyaWJ1dGVzIHRvIHNldC4gVG8gc2V0IGEgZGVlcCBhdHRyaWJ1dGUsIHVzZSBKU09OTWF0Y2gsIGVnOiBcXHtcIm5lc3RlZC5wcm9wXCI6IFwidmFsdWVcIlxcfVxuICAgKi9cbiAgc2V0SWZNaXNzaW5nKGF0dHJzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbihcInNldElmTWlzc2luZ1wiLCBhdHRycyk7XG4gIH1cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgXCJkaWZmLW1hdGNoLXBhdGNoXCIgb3BlcmF0aW9uIG9uIHRoZSBzdHJpbmcgYXR0cmlidXRlcyBwcm92aWRlZC5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCBwYXRjaCwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBBdHRyaWJ1dGVzIHRvIHBlcmZvcm0gb3BlcmF0aW9uIG9uLiBUbyBzZXQgYSBkZWVwIGF0dHJpYnV0ZSwgdXNlIEpTT05NYXRjaCwgZWc6IFxce1wibmVzdGVkLnByb3BcIjogXCJkbXBcIlxcfVxuICAgKi9cbiAgZGlmZk1hdGNoUGF0Y2goYXR0cnMpIHtcbiAgICB2YWxpZGF0ZU9iamVjdChcImRpZmZNYXRjaFBhdGNoXCIsIGF0dHJzKTtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwiZGlmZk1hdGNoUGF0Y2hcIiwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBVbnNldHMgdGhlIGF0dHJpYnV0ZSBwYXRocyBwcm92aWRlZC5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCBwYXRjaCwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBBdHRyaWJ1dGUgcGF0aHMgdG8gdW5zZXQuXG4gICAqL1xuICB1bnNldChhdHRycykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhdHRycykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc2V0KGF0dHJzKSB0YWtlcyBhbiBhcnJheSBvZiBhdHRyaWJ1dGVzIHRvIHVuc2V0LCBub24tYXJyYXkgZ2l2ZW5cIik7XG4gICAgfVxuICAgIHRoaXMub3BlcmF0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3BlcmF0aW9ucywge1xuICAgICAgdW5zZXQ6IGF0dHJzXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEluY3JlbWVudCBhIG51bWVyaWMgdmFsdWUuIEVhY2ggZW50cnkgaW4gdGhlIGFyZ3VtZW50IGlzIGVpdGhlciBhbiBhdHRyaWJ1dGUgb3IgYSBKU09OIHBhdGguIFRoZSB2YWx1ZSBtYXkgYmUgYSBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBpbnRlZ2VyIG9yIGZsb2F0aW5nLXBvaW50IHZhbHVlLiBUaGUgb3BlcmF0aW9uIHdpbGwgZmFpbCBpZiB0YXJnZXQgdmFsdWUgaXMgbm90IGEgbnVtZXJpYyB2YWx1ZSwgb3IgZG9lc24ndCBleGlzdC5cbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gT2JqZWN0IG9mIGF0dHJpYnV0ZSBwYXRocyB0byBpbmNyZW1lbnQsIHZhbHVlcyByZXByZXNlbnRpbmcgdGhlIG51bWJlciB0byBpbmNyZW1lbnQgYnkuXG4gICAqL1xuICBpbmMoYXR0cnMpIHtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwiaW5jXCIsIGF0dHJzKTtcbiAgfVxuICAvKipcbiAgICogRGVjcmVtZW50IGEgbnVtZXJpYyB2YWx1ZS4gRWFjaCBlbnRyeSBpbiB0aGUgYXJndW1lbnQgaXMgZWl0aGVyIGFuIGF0dHJpYnV0ZSBvciBhIEpTT04gcGF0aC4gVGhlIHZhbHVlIG1heSBiZSBhIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIGludGVnZXIgb3IgZmxvYXRpbmctcG9pbnQgdmFsdWUuIFRoZSBvcGVyYXRpb24gd2lsbCBmYWlsIGlmIHRhcmdldCB2YWx1ZSBpcyBub3QgYSBudW1lcmljIHZhbHVlLCBvciBkb2Vzbid0IGV4aXN0LlxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBPYmplY3Qgb2YgYXR0cmlidXRlIHBhdGhzIHRvIGRlY3JlbWVudCwgdmFsdWVzIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIHRvIGRlY3JlbWVudCBieS5cbiAgICovXG4gIGRlYyhhdHRycykge1xuICAgIHJldHVybiB0aGlzLl9hc3NpZ24oXCJkZWNcIiwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBQcm92aWRlcyBtZXRob2RzIGZvciBtb2RpZnlpbmcgYXJyYXlzLCBieSBpbnNlcnRpbmcsIGFwcGVuZGluZyBhbmQgcmVwbGFjaW5nIGVsZW1lbnRzIHZpYSBhIEpTT05QYXRoIGV4cHJlc3Npb24uXG4gICAqXG4gICAqIEBwYXJhbSBhdCAtIExvY2F0aW9uIHRvIGluc2VydCBhdCwgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIHNlbGVjdG9yLCBvciAncmVwbGFjZScgdGhlIG1hdGNoZWQgcGF0aFxuICAgKiBAcGFyYW0gc2VsZWN0b3IgLSBKU09OUGF0aCBleHByZXNzaW9uLCBlZyBgY29tbWVudHNbLTFdYCBvciBgYmxvY2tzW19rZXk9PVwiYWJjMTIzXCJdYFxuICAgKiBAcGFyYW0gaXRlbXMgLSBBcnJheSBvZiBpdGVtcyB0byBpbnNlcnQvcmVwbGFjZVxuICAgKi9cbiAgaW5zZXJ0KGF0LCBzZWxlY3RvciwgaXRlbXMpIHtcbiAgICB2YWxpZGF0ZUluc2VydChhdCwgc2VsZWN0b3IsIGl0ZW1zKTtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwiaW5zZXJ0XCIsIHtcbiAgICAgIFthdF06IHNlbGVjdG9yLFxuICAgICAgaXRlbXNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQXBwZW5kIHRoZSBnaXZlbiBpdGVtcyB0byB0aGUgYXJyYXkgYXQgdGhlIGdpdmVuIEpTT05QYXRoXG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvciAtIEF0dHJpYnV0ZS9wYXRoIHRvIGFwcGVuZCB0bywgZWcgYGNvbW1lbnRzYCBvciBgcGVyc29uLmhvYmJpZXNgXG4gICAqIEBwYXJhbSBpdGVtcyAtIEFycmF5IG9mIGl0ZW1zIHRvIGFwcGVuZCB0byB0aGUgYXJyYXlcbiAgICovXG4gIGFwcGVuZChzZWxlY3RvciwgaXRlbXMpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnQoXCJhZnRlclwiLCBcIlwiLmNvbmNhdChzZWxlY3RvciwgXCJbLTFdXCIpLCBpdGVtcyk7XG4gIH1cbiAgLyoqXG4gICAqIFByZXBlbmQgdGhlIGdpdmVuIGl0ZW1zIHRvIHRoZSBhcnJheSBhdCB0aGUgZ2l2ZW4gSlNPTlBhdGhcbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdG9yIC0gQXR0cmlidXRlL3BhdGggdG8gcHJlcGVuZCB0bywgZWcgYGNvbW1lbnRzYCBvciBgcGVyc29uLmhvYmJpZXNgXG4gICAqIEBwYXJhbSBpdGVtcyAtIEFycmF5IG9mIGl0ZW1zIHRvIHByZXBlbmQgdG8gdGhlIGFycmF5XG4gICAqL1xuICBwcmVwZW5kKHNlbGVjdG9yLCBpdGVtcykge1xuICAgIHJldHVybiB0aGlzLmluc2VydChcImJlZm9yZVwiLCBcIlwiLmNvbmNhdChzZWxlY3RvciwgXCJbMF1cIiksIGl0ZW1zKTtcbiAgfVxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBjb250ZW50cyBvZiBhbiBhcnJheSBieSByZW1vdmluZyBleGlzdGluZyBlbGVtZW50cyBhbmQvb3IgYWRkaW5nIG5ldyBlbGVtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdG9yIC0gQXR0cmlidXRlIG9yIEpTT05QYXRoIGV4cHJlc3Npb24gZm9yIGFycmF5XG4gICAqIEBwYXJhbSBzdGFydCAtIEluZGV4IGF0IHdoaWNoIHRvIHN0YXJ0IGNoYW5naW5nIHRoZSBhcnJheSAod2l0aCBvcmlnaW4gMCkuIElmIGdyZWF0ZXIgdGhhbiB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheSwgYWN0dWFsIHN0YXJ0aW5nIGluZGV4IHdpbGwgYmUgc2V0IHRvIHRoZSBsZW5ndGggb2YgdGhlIGFycmF5LiBJZiBuZWdhdGl2ZSwgd2lsbCBiZWdpbiB0aGF0IG1hbnkgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBhcnJheSAod2l0aCBvcmlnaW4gLTEpIGFuZCB3aWxsIGJlIHNldCB0byAwIGlmIGFic29sdXRlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheS54XG4gICAqIEBwYXJhbSBkZWxldGVDb3VudCAtIEFuIGludGVnZXIgaW5kaWNhdGluZyB0aGUgbnVtYmVyIG9mIG9sZCBhcnJheSBlbGVtZW50cyB0byByZW1vdmUuXG4gICAqIEBwYXJhbSBpdGVtcyAtIFRoZSBlbGVtZW50cyB0byBhZGQgdG8gdGhlIGFycmF5LCBiZWdpbm5pbmcgYXQgdGhlIHN0YXJ0IGluZGV4LiBJZiB5b3UgZG9uJ3Qgc3BlY2lmeSBhbnkgZWxlbWVudHMsIHNwbGljZSgpIHdpbGwgb25seSByZW1vdmUgZWxlbWVudHMgZnJvbSB0aGUgYXJyYXkuXG4gICAqL1xuICBzcGxpY2Uoc2VsZWN0b3IsIHN0YXJ0LCBkZWxldGVDb3VudCwgaXRlbXMpIHtcbiAgICBjb25zdCBkZWxBbGwgPSB0eXBlb2YgZGVsZXRlQ291bnQgPT09IFwidW5kZWZpbmVkXCIgfHwgZGVsZXRlQ291bnQgPT09IC0xO1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBzdGFydCA8IDAgPyBzdGFydCAtIDEgOiBzdGFydDtcbiAgICBjb25zdCBkZWxDb3VudCA9IGRlbEFsbCA/IC0xIDogTWF0aC5tYXgoMCwgc3RhcnQgKyBkZWxldGVDb3VudCk7XG4gICAgY29uc3QgZGVsUmFuZ2UgPSBzdGFydEluZGV4IDwgMCAmJiBkZWxDb3VudCA+PSAwID8gXCJcIiA6IGRlbENvdW50O1xuICAgIGNvbnN0IHJhbmdlU2VsZWN0b3IgPSBcIlwiLmNvbmNhdChzZWxlY3RvciwgXCJbXCIpLmNvbmNhdChzdGFydEluZGV4LCBcIjpcIikuY29uY2F0KGRlbFJhbmdlLCBcIl1cIik7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0KFwicmVwbGFjZVwiLCByYW5nZVNlbGVjdG9yLCBpdGVtcyB8fCBbXSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSByZXZpc2lvbiBjbGF1c2UsIHByZXZlbnRpbmcgdGhlIGRvY3VtZW50IGZyb20gYmVpbmcgcGF0Y2hlZCBpZiB0aGUgYF9yZXZgIHByb3BlcnR5IGRvZXMgbm90IG1hdGNoIHRoZSBnaXZlbiB2YWx1ZVxuICAgKlxuICAgKiBAcGFyYW0gcmV2IC0gUmV2aXNpb24gdG8gbG9jayB0aGUgcGF0Y2ggdG9cbiAgICovXG4gIGlmUmV2aXNpb25JZChyZXYpIHtcbiAgICB0aGlzLm9wZXJhdGlvbnMuaWZSZXZpc2lvbklEID0gcmV2O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYSBwbGFpbiBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwYXRjaFxuICAgKi9cbiAgc2VyaWFsaXplKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5nZXRTZWxlY3Rpb24odGhpcy5zZWxlY3Rpb24pLFxuICAgICAgLi4udGhpcy5vcGVyYXRpb25zXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGEgcGxhaW4gSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGF0Y2hcbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5zZXJpYWxpemUoKTtcbiAgfVxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBwYXRjaCBvZiBhbGwgb3BlcmF0aW9uc1xuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5vcGVyYXRpb25zID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgX2Fzc2lnbihvcCwgcHJvcHMpIHtcbiAgICBsZXQgbWVyZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHRydWU7XG4gICAgdmFsaWRhdGVPYmplY3Qob3AsIHByb3BzKTtcbiAgICB0aGlzLm9wZXJhdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wZXJhdGlvbnMsIHtcbiAgICAgIFtvcF06IE9iamVjdC5hc3NpZ24oe30sIG1lcmdlICYmIHRoaXMub3BlcmF0aW9uc1tvcF0gfHwge30sIHByb3BzKVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIF9zZXQob3AsIHByb3BzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbihvcCwgcHJvcHMsIGZhbHNlKTtcbiAgfVxufVxuY29uc3QgX09ic2VydmFibGVQYXRjaCA9IGNsYXNzIF9PYnNlcnZhYmxlUGF0Y2ggZXh0ZW5kcyBCYXNlUGF0Y2gge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rpb24sIG9wZXJhdGlvbnMsIGNsaWVudCkge1xuICAgIHN1cGVyKHNlbGVjdGlvbiwgb3BlcmF0aW9ucyk7XG4gICAgX19wcml2YXRlQWRkJDYodGhpcywgX2NsaWVudCQ1LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ2KHRoaXMsIF9jbGllbnQkNSwgY2xpZW50KTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoZSBwYXRjaFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZVBhdGNoKHRoaXMuc2VsZWN0aW9uLCB7XG4gICAgICAuLi50aGlzLm9wZXJhdGlvbnNcbiAgICB9LCBfX3ByaXZhdGVHZXQkNih0aGlzLCBfY2xpZW50JDUpKTtcbiAgfVxuICBjb21taXQob3B0aW9ucykge1xuICAgIGlmICghX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudCQ1KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYGNsaWVudGAgcGFzc2VkIHRvIHBhdGNoLCBlaXRoZXIgcHJvdmlkZSBvbmUgb3IgcGFzcyB0aGUgcGF0Y2ggdG8gYSBjbGllbnRzIGBtdXRhdGUoKWAgbWV0aG9kXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXR1cm5GaXJzdCA9IHR5cGVvZiB0aGlzLnNlbGVjdGlvbiA9PT0gXCJzdHJpbmdcIjtcbiAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICByZXR1cm5GaXJzdCxcbiAgICAgIHJldHVybkRvY3VtZW50czogdHJ1ZVxuICAgIH0sIG9wdGlvbnMpO1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQkNih0aGlzLCBfY2xpZW50JDUpLm11dGF0ZSh7XG4gICAgICBwYXRjaDogdGhpcy5zZXJpYWxpemUoKVxuICAgIH0sIG9wdHMpO1xuICB9XG59O1xuX2NsaWVudCQ1ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBPYnNlcnZhYmxlUGF0Y2ggPSBfT2JzZXJ2YWJsZVBhdGNoO1xuY29uc3QgX1BhdGNoID0gY2xhc3MgX1BhdGNoIGV4dGVuZHMgQmFzZVBhdGNoIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0aW9uLCBvcGVyYXRpb25zLCBjbGllbnQpIHtcbiAgICBzdXBlcihzZWxlY3Rpb24sIG9wZXJhdGlvbnMpO1xuICAgIF9fcHJpdmF0ZUFkZCQ2KHRoaXMsIF9jbGllbnQyJDUsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDYodGhpcywgX2NsaWVudDIkNSwgY2xpZW50KTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoZSBwYXRjaFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfUGF0Y2godGhpcy5zZWxlY3Rpb24sIHtcbiAgICAgIC4uLnRoaXMub3BlcmF0aW9uc1xuICAgIH0sIF9fcHJpdmF0ZUdldCQ2KHRoaXMsIF9jbGllbnQyJDUpKTtcbiAgfVxuICBjb21taXQob3B0aW9ucykge1xuICAgIGlmICghX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudDIkNSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGBjbGllbnRgIHBhc3NlZCB0byBwYXRjaCwgZWl0aGVyIHByb3ZpZGUgb25lIG9yIHBhc3MgdGhlIHBhdGNoIHRvIGEgY2xpZW50cyBgbXV0YXRlKClgIG1ldGhvZFwiKTtcbiAgICB9XG4gICAgY29uc3QgcmV0dXJuRmlyc3QgPSB0eXBlb2YgdGhpcy5zZWxlY3Rpb24gPT09IFwic3RyaW5nXCI7XG4gICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgcmV0dXJuRmlyc3QsXG4gICAgICByZXR1cm5Eb2N1bWVudHM6IHRydWVcbiAgICB9LCBvcHRpb25zKTtcbiAgICByZXR1cm4gX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudDIkNSkubXV0YXRlKHtcbiAgICAgIHBhdGNoOiB0aGlzLnNlcmlhbGl6ZSgpXG4gICAgfSwgb3B0cyk7XG4gIH1cbn07XG5fY2xpZW50MiQ1ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBQYXRjaCA9IF9QYXRjaDtcbnZhciBfX2FjY2Vzc0NoZWNrJDUgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDUgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDUob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkNSA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQ1ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skNShvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCQ0LCBfY2xpZW50MiQ0O1xuY29uc3QgZGVmYXVsdE11dGF0ZU9wdGlvbnMgPSB7XG4gIHJldHVybkRvY3VtZW50czogZmFsc2Vcbn07XG5jbGFzcyBCYXNlVHJhbnNhY3Rpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3BlcmF0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgbGV0IHRyYW5zYWN0aW9uSWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9wZXJhdGlvbnMgPSBvcGVyYXRpb25zO1xuICAgIHRoaXMudHJ4SWQgPSB0cmFuc2FjdGlvbklkO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFNhbml0eSBkb2N1bWVudC4gSWYgYF9pZGAgaXMgcHJvdmlkZWQgYW5kIGFscmVhZHkgZXhpc3RzLCB0aGUgbXV0YXRpb24gd2lsbCBmYWlsLiBJZiBubyBgX2lkYCBpcyBnaXZlbiwgb25lIHdpbGwgYXV0b21hdGljYWxseSBiZSBnZW5lcmF0ZWQgYnkgdGhlIGRhdGFiYXNlLlxuICAgKiBUaGUgb3BlcmF0aW9uIGlzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLCByZWFkeSB0byBiZSBjb21taXRlZCBieSBgY29tbWl0KClgXG4gICAqXG4gICAqIEBwYXJhbSBkb2MgLSBEb2N1bWVudCB0byBjcmVhdGUuIFJlcXVpcmVzIGEgYF90eXBlYCBwcm9wZXJ0eS5cbiAgICovXG4gIGNyZWF0ZShkb2MpIHtcbiAgICB2YWxpZGF0ZU9iamVjdChcImNyZWF0ZVwiLCBkb2MpO1xuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgY3JlYXRlOiBkb2NcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBTYW5pdHkgZG9jdW1lbnQuIElmIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBgX2lkYCBhbHJlYWR5IGV4aXN0cywgdGhlIGNyZWF0ZSBvcGVyYXRpb24gd2lsbCBiZSBpZ25vcmVkLlxuICAgKiBUaGUgb3BlcmF0aW9uIGlzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLCByZWFkeSB0byBiZSBjb21taXRlZCBieSBgY29tbWl0KClgXG4gICAqXG4gICAqIEBwYXJhbSBkb2MgLSBEb2N1bWVudCB0byBjcmVhdGUgaWYgaXQgZG9lcyBub3QgYWxyZWFkeSBleGlzdC4gUmVxdWlyZXMgYF9pZGAgYW5kIGBfdHlwZWAgcHJvcGVydGllcy5cbiAgICovXG4gIGNyZWF0ZUlmTm90RXhpc3RzKGRvYykge1xuICAgIGNvbnN0IG9wID0gXCJjcmVhdGVJZk5vdEV4aXN0c1wiO1xuICAgIHZhbGlkYXRlT2JqZWN0KG9wLCBkb2MpO1xuICAgIHJlcXVpcmVEb2N1bWVudElkKG9wLCBkb2MpO1xuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgW29wXTogZG9jXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgU2FuaXR5IGRvY3VtZW50LCBvciByZXBsYWNlcyBhbiBleGlzdGluZyBvbmUgaWYgdGhlIHNhbWUgYF9pZGAgaXMgYWxyZWFkeSB1c2VkLlxuICAgKiBUaGUgb3BlcmF0aW9uIGlzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLCByZWFkeSB0byBiZSBjb21taXRlZCBieSBgY29tbWl0KClgXG4gICAqXG4gICAqIEBwYXJhbSBkb2MgLSBEb2N1bWVudCB0byBjcmVhdGUgb3IgcmVwbGFjZS4gUmVxdWlyZXMgYF9pZGAgYW5kIGBfdHlwZWAgcHJvcGVydGllcy5cbiAgICovXG4gIGNyZWF0ZU9yUmVwbGFjZShkb2MpIHtcbiAgICBjb25zdCBvcCA9IFwiY3JlYXRlT3JSZXBsYWNlXCI7XG4gICAgdmFsaWRhdGVPYmplY3Qob3AsIGRvYyk7XG4gICAgcmVxdWlyZURvY3VtZW50SWQob3AsIGRvYyk7XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBbb3BdOiBkb2NcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgd2l0aCB0aGUgZ2l2ZW4gZG9jdW1lbnQgSURcbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCB0cmFuc2FjdGlvbiwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gZG9jdW1lbnRJZCAtIERvY3VtZW50IElEIHRvIGRlbGV0ZVxuICAgKi9cbiAgZGVsZXRlKGRvY3VtZW50SWQpIHtcbiAgICB2YWxpZGF0ZURvY3VtZW50SWQoXCJkZWxldGVcIiwgZG9jdW1lbnRJZCk7XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBkZWxldGU6IHtcbiAgICAgICAgaWQ6IGRvY3VtZW50SWRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICB0cmFuc2FjdGlvbklkKGlkKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIHRoaXMudHJ4SWQ7XG4gICAgfVxuICAgIHRoaXMudHJ4SWQgPSBpZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGEgcGxhaW4gSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgdHJhbnNhY3Rpb25cbiAgICovXG4gIHNlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4gWy4uLnRoaXMub3BlcmF0aW9uc107XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhIHBsYWluIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHRyYW5zYWN0aW9uXG4gICAqL1xuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgdHJhbnNhY3Rpb24gb2YgYWxsIG9wZXJhdGlvbnNcbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMub3BlcmF0aW9ucyA9IFtdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIF9hZGQobXV0KSB7XG4gICAgdGhpcy5vcGVyYXRpb25zLnB1c2gobXV0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuY29uc3QgX1RyYW5zYWN0aW9uID0gY2xhc3MgX1RyYW5zYWN0aW9uIGV4dGVuZHMgQmFzZVRyYW5zYWN0aW9uIHtcbiAgY29uc3RydWN0b3Iob3BlcmF0aW9ucywgY2xpZW50LCB0cmFuc2FjdGlvbklkKSB7XG4gICAgc3VwZXIob3BlcmF0aW9ucywgdHJhbnNhY3Rpb25JZCk7XG4gICAgX19wcml2YXRlQWRkJDUodGhpcywgX2NsaWVudCQ0LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ1KHRoaXMsIF9jbGllbnQkNCwgY2xpZW50KTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoZSB0cmFuc2FjdGlvblxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfVHJhbnNhY3Rpb24oWy4uLnRoaXMub3BlcmF0aW9uc10sIF9fcHJpdmF0ZUdldCQ1KHRoaXMsIF9jbGllbnQkNCksIHRoaXMudHJ4SWQpO1xuICB9XG4gIGNvbW1pdChvcHRpb25zKSB7XG4gICAgaWYgKCFfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50JDQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBgY2xpZW50YCBwYXNzZWQgdG8gdHJhbnNhY3Rpb24sIGVpdGhlciBwcm92aWRlIG9uZSBvciBwYXNzIHRoZSB0cmFuc2FjdGlvbiB0byBhIGNsaWVudHMgYG11dGF0ZSgpYCBtZXRob2RcIik7XG4gICAgfVxuICAgIHJldHVybiBfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50JDQpLm11dGF0ZSh0aGlzLnNlcmlhbGl6ZSgpLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIHRyYW5zYWN0aW9uSWQ6IHRoaXMudHJ4SWRcbiAgICB9LCBkZWZhdWx0TXV0YXRlT3B0aW9ucywgb3B0aW9ucyB8fCB7fSkpO1xuICB9XG4gIHBhdGNoKHBhdGNoT3JEb2N1bWVudElkLCBwYXRjaE9wcykge1xuICAgIGNvbnN0IGlzQnVpbGRlciA9IHR5cGVvZiBwYXRjaE9wcyA9PT0gXCJmdW5jdGlvblwiO1xuICAgIGNvbnN0IGlzUGF0Y2ggPSB0eXBlb2YgcGF0Y2hPckRvY3VtZW50SWQgIT09IFwic3RyaW5nXCIgJiYgcGF0Y2hPckRvY3VtZW50SWQgaW5zdGFuY2VvZiBQYXRjaDtcbiAgICBpZiAoaXNQYXRjaCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICAgIHBhdGNoOiBwYXRjaE9yRG9jdW1lbnRJZC5zZXJpYWxpemUoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc0J1aWxkZXIpIHtcbiAgICAgIGNvbnN0IHBhdGNoID0gcGF0Y2hPcHMobmV3IFBhdGNoKHBhdGNoT3JEb2N1bWVudElkLCB7fSwgX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudCQ0KSkpO1xuICAgICAgaWYgKCEocGF0Y2ggaW5zdGFuY2VvZiBQYXRjaCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZnVuY3Rpb24gcGFzc2VkIHRvIGBwYXRjaCgpYCBtdXN0IHJldHVybiB0aGUgcGF0Y2hcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fYWRkKHtcbiAgICAgICAgcGF0Y2g6IHBhdGNoLnNlcmlhbGl6ZSgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBwYXRjaDoge1xuICAgICAgICBpZDogcGF0Y2hPckRvY3VtZW50SWQsXG4gICAgICAgIC4uLnBhdGNoT3BzXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5fY2xpZW50JDQgPSBuZXcgV2Vha01hcCgpO1xubGV0IFRyYW5zYWN0aW9uID0gX1RyYW5zYWN0aW9uO1xuY29uc3QgX09ic2VydmFibGVUcmFuc2FjdGlvbiA9IGNsYXNzIF9PYnNlcnZhYmxlVHJhbnNhY3Rpb24gZXh0ZW5kcyBCYXNlVHJhbnNhY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihvcGVyYXRpb25zLCBjbGllbnQsIHRyYW5zYWN0aW9uSWQpIHtcbiAgICBzdXBlcihvcGVyYXRpb25zLCB0cmFuc2FjdGlvbklkKTtcbiAgICBfX3ByaXZhdGVBZGQkNSh0aGlzLCBfY2xpZW50MiQ0LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ1KHRoaXMsIF9jbGllbnQyJDQsIGNsaWVudCk7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lcyB0aGUgdHJhbnNhY3Rpb25cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX09ic2VydmFibGVUcmFuc2FjdGlvbihbLi4udGhpcy5vcGVyYXRpb25zXSwgX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudDIkNCksIHRoaXMudHJ4SWQpO1xuICB9XG4gIGNvbW1pdChvcHRpb25zKSB7XG4gICAgaWYgKCFfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50MiQ0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYGNsaWVudGAgcGFzc2VkIHRvIHRyYW5zYWN0aW9uLCBlaXRoZXIgcHJvdmlkZSBvbmUgb3IgcGFzcyB0aGUgdHJhbnNhY3Rpb24gdG8gYSBjbGllbnRzIGBtdXRhdGUoKWAgbWV0aG9kXCIpO1xuICAgIH1cbiAgICByZXR1cm4gX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudDIkNCkubXV0YXRlKHRoaXMuc2VyaWFsaXplKCksIE9iamVjdC5hc3NpZ24oe1xuICAgICAgdHJhbnNhY3Rpb25JZDogdGhpcy50cnhJZFxuICAgIH0sIGRlZmF1bHRNdXRhdGVPcHRpb25zLCBvcHRpb25zIHx8IHt9KSk7XG4gIH1cbiAgcGF0Y2gocGF0Y2hPckRvY3VtZW50SWQsIHBhdGNoT3BzKSB7XG4gICAgY29uc3QgaXNCdWlsZGVyID0gdHlwZW9mIHBhdGNoT3BzID09PSBcImZ1bmN0aW9uXCI7XG4gICAgY29uc3QgaXNQYXRjaCA9IHR5cGVvZiBwYXRjaE9yRG9jdW1lbnRJZCAhPT0gXCJzdHJpbmdcIiAmJiBwYXRjaE9yRG9jdW1lbnRJZCBpbnN0YW5jZW9mIE9ic2VydmFibGVQYXRjaDtcbiAgICBpZiAoaXNQYXRjaCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICAgIHBhdGNoOiBwYXRjaE9yRG9jdW1lbnRJZC5zZXJpYWxpemUoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc0J1aWxkZXIpIHtcbiAgICAgIGNvbnN0IHBhdGNoID0gcGF0Y2hPcHMobmV3IE9ic2VydmFibGVQYXRjaChwYXRjaE9yRG9jdW1lbnRJZCwge30sIF9fcHJpdmF0ZUdldCQ1KHRoaXMsIF9jbGllbnQyJDQpKSk7XG4gICAgICBpZiAoIShwYXRjaCBpbnN0YW5jZW9mIE9ic2VydmFibGVQYXRjaCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZnVuY3Rpb24gcGFzc2VkIHRvIGBwYXRjaCgpYCBtdXN0IHJldHVybiB0aGUgcGF0Y2hcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fYWRkKHtcbiAgICAgICAgcGF0Y2g6IHBhdGNoLnNlcmlhbGl6ZSgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBwYXRjaDoge1xuICAgICAgICBpZDogcGF0Y2hPckRvY3VtZW50SWQsXG4gICAgICAgIC4uLnBhdGNoT3BzXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5fY2xpZW50MiQ0ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBPYnNlcnZhYmxlVHJhbnNhY3Rpb24gPSBfT2JzZXJ2YWJsZVRyYW5zYWN0aW9uO1xuY29uc3QgQkFTRV9VUkwgPSBcImh0dHBzOi8vd3d3LnNhbml0eS5pby9oZWxwL1wiO1xuZnVuY3Rpb24gZ2VuZXJhdGVIZWxwVXJsKHNsdWcpIHtcbiAgcmV0dXJuIEJBU0VfVVJMICsgc2x1Zztcbn1cbmZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgbGV0IGRpZENhbGwgPSBmYWxzZTtcbiAgbGV0IHJldHVyblZhbHVlO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChkaWRDYWxsKSB7XG4gICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgfVxuICAgIHJldHVyblZhbHVlID0gZm4oLi4uYXJndW1lbnRzKTtcbiAgICBkaWRDYWxsID0gdHJ1ZTtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gIH07XG59XG5jb25zdCBjcmVhdGVXYXJuaW5nUHJpbnRlciA9IG1lc3NhZ2UgPT5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5vbmNlKGZ1bmN0aW9uICgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuICByZXR1cm4gY29uc29sZS53YXJuKG1lc3NhZ2Uuam9pbihcIiBcIiksIC4uLmFyZ3MpO1xufSk7XG5jb25zdCBwcmludENkbldhcm5pbmcgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJTaW5jZSB5b3UgaGF2ZW4ndCBzZXQgYSB2YWx1ZSBmb3IgYHVzZUNkbmAsIHdlIHdpbGwgZGVsaXZlciBjb250ZW50IHVzaW5nIG91clwiLCBcImdsb2JhbCwgZWRnZS1jYWNoZWQgQVBJLUNETi4gSWYgeW91IHdpc2ggdG8gaGF2ZSBjb250ZW50IGRlbGl2ZXJlZCBmYXN0ZXIsIHNldFwiLCBcImB1c2VDZG46IGZhbHNlYCB0byB1c2UgdGhlIExpdmUgQVBJLiBOb3RlOiBZb3UgbWF5IGluY3VyIGhpZ2hlciBjb3N0cyB1c2luZyB0aGUgbGl2ZSBBUEkuXCJdKTtcbmNvbnN0IHByaW50Q2RuUHJldmlld0RyYWZ0c1dhcm5pbmcgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJUaGUgU2FuaXR5IGNsaWVudCBpcyBjb25maWd1cmVkIHdpdGggdGhlIGBwZXJzcGVjdGl2ZWAgc2V0IHRvIGBwcmV2aWV3RHJhZnRzYCwgd2hpY2ggZG9lc24ndCBzdXBwb3J0IHRoZSBBUEktQ0ROLlwiLCBcIlRoZSBMaXZlIEFQSSB3aWxsIGJlIHVzZWQgaW5zdGVhZC4gU2V0IGB1c2VDZG46IGZhbHNlYCBpbiB5b3VyIGNvbmZpZ3VyYXRpb24gdG8gaGlkZSB0aGlzIHdhcm5pbmcuXCJdKTtcbmNvbnN0IHByaW50QnJvd3NlclRva2VuV2FybmluZyA9IGNyZWF0ZVdhcm5pbmdQcmludGVyKFtcIllvdSBoYXZlIGNvbmZpZ3VyZWQgU2FuaXR5IGNsaWVudCB0byB1c2UgYSB0b2tlbiBpbiB0aGUgYnJvd3Nlci4gVGhpcyBtYXkgY2F1c2UgdW5pbnRlbnRpb25hbCBzZWN1cml0eSBpc3N1ZXMuXCIsIFwiU2VlIFwiLmNvbmNhdChnZW5lcmF0ZUhlbHBVcmwoXCJqcy1jbGllbnQtYnJvd3Nlci10b2tlblwiKSwgXCIgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5kIGhvdyB0byBoaWRlIHRoaXMgd2FybmluZy5cIildKTtcbmNvbnN0IHByaW50Tm9BcGlWZXJzaW9uU3BlY2lmaWVkV2FybmluZyA9IGNyZWF0ZVdhcm5pbmdQcmludGVyKFtcIlVzaW5nIHRoZSBTYW5pdHkgY2xpZW50IHdpdGhvdXQgc3BlY2lmeWluZyBhbiBBUEkgdmVyc2lvbiBpcyBkZXByZWNhdGVkLlwiLCBcIlNlZSBcIi5jb25jYXQoZ2VuZXJhdGVIZWxwVXJsKFwianMtY2xpZW50LWFwaS12ZXJzaW9uXCIpKV0pO1xuY29uc3QgcHJpbnROb0RlZmF1bHRFeHBvcnQgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJUaGUgZGVmYXVsdCBleHBvcnQgb2YgQHNhbml0eS9jbGllbnQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIHRoZSBuYW1lZCBleHBvcnQgYGNyZWF0ZUNsaWVudGAgaW5zdGVhZC5cIl0pO1xuY29uc3QgZGVmYXVsdENkbkhvc3QgPSBcImFwaWNkbi5zYW5pdHkuaW9cIjtcbmNvbnN0IGRlZmF1bHRDb25maWcgPSB7XG4gIGFwaUhvc3Q6IFwiaHR0cHM6Ly9hcGkuc2FuaXR5LmlvXCIsXG4gIGFwaVZlcnNpb246IFwiMVwiLFxuICB1c2VQcm9qZWN0SG9zdG5hbWU6IHRydWVcbn07XG5jb25zdCBMT0NBTEhPU1RTID0gW1wibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCIsIFwiMC4wLjAuMFwiXTtcbmNvbnN0IGlzTG9jYWwgPSBob3N0ID0+IExPQ0FMSE9TVFMuaW5kZXhPZihob3N0KSAhPT0gLTE7XG5jb25zdCB2YWxpZGF0ZUFwaVZlcnNpb24gPSBmdW5jdGlvbiB2YWxpZGF0ZUFwaVZlcnNpb24yKGFwaVZlcnNpb24pIHtcbiAgaWYgKGFwaVZlcnNpb24gPT09IFwiMVwiIHx8IGFwaVZlcnNpb24gPT09IFwiWFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGFwaURhdGUgPSBuZXcgRGF0ZShhcGlWZXJzaW9uKTtcbiAgY29uc3QgYXBpVmVyc2lvblZhbGlkID0gL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvLnRlc3QoYXBpVmVyc2lvbikgJiYgYXBpRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgYXBpRGF0ZS5nZXRUaW1lKCkgPiAwO1xuICBpZiAoIWFwaVZlcnNpb25WYWxpZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQVBJIHZlcnNpb24gc3RyaW5nLCBleHBlY3RlZCBgMWAgb3IgZGF0ZSBpbiBmb3JtYXQgYFlZWVktTU0tRERgXCIpO1xuICB9XG59O1xuY29uc3QgdmFsaWRhdGVBcGlQZXJzcGVjdGl2ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlQXBpUGVyc3BlY3RpdmUyKHBlcnNwZWN0aXZlKSB7XG4gIHN3aXRjaCAocGVyc3BlY3RpdmUpIHtcbiAgICBjYXNlIFwicHJldmlld0RyYWZ0c1wiOlxuICAgIGNhc2UgXCJwdWJsaXNoZWRcIjpcbiAgICBjYXNlIFwicmF3XCI6XG4gICAgICByZXR1cm47XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIEFQSSBwZXJzcGVjdGl2ZSBzdHJpbmcsIGV4cGVjdGVkIGBwdWJsaXNoZWRgLCBgcHJldmlld0RyYWZ0c2Agb3IgYHJhd2BcIik7XG4gIH1cbn07XG5jb25zdCBpbml0Q29uZmlnID0gKGNvbmZpZywgcHJldkNvbmZpZykgPT4ge1xuICBjb25zdCBzcGVjaWZpZWRDb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBwcmV2Q29uZmlnLCBjb25maWcpO1xuICBpZiAoIXNwZWNpZmllZENvbmZpZy5hcGlWZXJzaW9uKSB7XG4gICAgcHJpbnROb0FwaVZlcnNpb25TcGVjaWZpZWRXYXJuaW5nKCk7XG4gIH1cbiAgY29uc3QgbmV3Q29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdENvbmZpZywgc3BlY2lmaWVkQ29uZmlnKTtcbiAgY29uc3QgcHJvamVjdEJhc2VkID0gbmV3Q29uZmlnLnVzZVByb2plY3RIb3N0bmFtZTtcbiAgaWYgKHR5cGVvZiBQcm9taXNlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY29uc3QgaGVscFVybCA9IGdlbmVyYXRlSGVscFVybChcImpzLWNsaWVudC1wcm9taXNlLXBvbHlmaWxsXCIpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIG5hdGl2ZSBQcm9taXNlLWltcGxlbWVudGF0aW9uIGZvdW5kLCBwb2x5ZmlsbCBuZWVkZWQgLSBzZWUgXCIuY29uY2F0KGhlbHBVcmwpKTtcbiAgfVxuICBpZiAocHJvamVjdEJhc2VkICYmICFuZXdDb25maWcucHJvamVjdElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBtdXN0IGNvbnRhaW4gYHByb2plY3RJZGBcIik7XG4gIH1cbiAgaWYgKHR5cGVvZiBuZXdDb25maWcucGVyc3BlY3RpdmUgPT09IFwic3RyaW5nXCIpIHtcbiAgICB2YWxpZGF0ZUFwaVBlcnNwZWN0aXZlKG5ld0NvbmZpZy5wZXJzcGVjdGl2ZSk7XG4gIH1cbiAgaWYgKFwiZW5jb2RlU291cmNlTWFwQXRQYXRoXCIgaW4gbmV3Q29uZmlnIHx8IFwiZW5jb2RlU291cmNlTWFwXCIgaW4gbmV3Q29uZmlnIHx8IFwic3R1ZGlvVXJsXCIgaW4gbmV3Q29uZmlnIHx8IFwibG9nZ2VyXCIgaW4gbmV3Q29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSXQgbG9va3MgbGlrZSB5b3UncmUgdXNpbmcgb3B0aW9ucyBtZWFudCBmb3IgJ0BzYW5pdHkvcHJldmlldy1raXQvY2xpZW50Jywgc3VjaCBhcyAnZW5jb2RlU291cmNlTWFwQXRQYXRoJywgJ2VuY29kZVNvdXJjZU1hcCcsICdzdHVkaW9VcmwnIGFuZCAnbG9nZ2VyJy4gTWFrZSBzdXJlIHlvdSdyZSB1c2luZyB0aGUgcmlnaHQgaW1wb3J0LlwiKTtcbiAgfVxuICBjb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG4gIGNvbnN0IGlzTG9jYWxob3N0ID0gaXNCcm93c2VyICYmIGlzTG9jYWwod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKTtcbiAgaWYgKGlzQnJvd3NlciAmJiBpc0xvY2FsaG9zdCAmJiBuZXdDb25maWcudG9rZW4gJiYgbmV3Q29uZmlnLmlnbm9yZUJyb3dzZXJUb2tlbldhcm5pbmcgIT09IHRydWUpIHtcbiAgICBwcmludEJyb3dzZXJUb2tlbldhcm5pbmcoKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbmV3Q29uZmlnLnVzZUNkbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHByaW50Q2RuV2FybmluZygpO1xuICB9XG4gIGlmIChwcm9qZWN0QmFzZWQpIHtcbiAgICBwcm9qZWN0SWQobmV3Q29uZmlnLnByb2plY3RJZCk7XG4gIH1cbiAgaWYgKG5ld0NvbmZpZy5kYXRhc2V0KSB7XG4gICAgZGF0YXNldChuZXdDb25maWcuZGF0YXNldCk7XG4gIH1cbiAgaWYgKFwicmVxdWVzdFRhZ1ByZWZpeFwiIGluIG5ld0NvbmZpZykge1xuICAgIG5ld0NvbmZpZy5yZXF1ZXN0VGFnUHJlZml4ID0gbmV3Q29uZmlnLnJlcXVlc3RUYWdQcmVmaXggPyByZXF1ZXN0VGFnKG5ld0NvbmZpZy5yZXF1ZXN0VGFnUHJlZml4KS5yZXBsYWNlKC9cXC4rJC8sIFwiXCIpIDogdm9pZCAwO1xuICB9XG4gIG5ld0NvbmZpZy5hcGlWZXJzaW9uID0gXCJcIi5jb25jYXQobmV3Q29uZmlnLmFwaVZlcnNpb24pLnJlcGxhY2UoL152LywgXCJcIik7XG4gIG5ld0NvbmZpZy5pc0RlZmF1bHRBcGkgPSBuZXdDb25maWcuYXBpSG9zdCA9PT0gZGVmYXVsdENvbmZpZy5hcGlIb3N0O1xuICBuZXdDb25maWcudXNlQ2RuID0gbmV3Q29uZmlnLnVzZUNkbiAhPT0gZmFsc2UgJiYgIW5ld0NvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gIHZhbGlkYXRlQXBpVmVyc2lvbihuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gIGNvbnN0IGhvc3RQYXJ0cyA9IG5ld0NvbmZpZy5hcGlIb3N0LnNwbGl0KFwiOi8vXCIsIDIpO1xuICBjb25zdCBwcm90b2NvbCA9IGhvc3RQYXJ0c1swXTtcbiAgY29uc3QgaG9zdCA9IGhvc3RQYXJ0c1sxXTtcbiAgY29uc3QgY2RuSG9zdCA9IG5ld0NvbmZpZy5pc0RlZmF1bHRBcGkgPyBkZWZhdWx0Q2RuSG9zdCA6IGhvc3Q7XG4gIGlmIChuZXdDb25maWcudXNlUHJvamVjdEhvc3RuYW1lKSB7XG4gICAgbmV3Q29uZmlnLnVybCA9IFwiXCIuY29uY2F0KHByb3RvY29sLCBcIjovL1wiKS5jb25jYXQobmV3Q29uZmlnLnByb2plY3RJZCwgXCIuXCIpLmNvbmNhdChob3N0LCBcIi92XCIpLmNvbmNhdChuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gICAgbmV3Q29uZmlnLmNkblVybCA9IFwiXCIuY29uY2F0KHByb3RvY29sLCBcIjovL1wiKS5jb25jYXQobmV3Q29uZmlnLnByb2plY3RJZCwgXCIuXCIpLmNvbmNhdChjZG5Ib3N0LCBcIi92XCIpLmNvbmNhdChuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gIH0gZWxzZSB7XG4gICAgbmV3Q29uZmlnLnVybCA9IFwiXCIuY29uY2F0KG5ld0NvbmZpZy5hcGlIb3N0LCBcIi92XCIpLmNvbmNhdChuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gICAgbmV3Q29uZmlnLmNkblVybCA9IG5ld0NvbmZpZy51cmw7XG4gIH1cbiAgcmV0dXJuIG5ld0NvbmZpZztcbn07XG5jb25zdCBwcm9qZWN0SGVhZGVyID0gXCJYLVNhbml0eS1Qcm9qZWN0LUlEXCI7XG5mdW5jdGlvbiByZXF1ZXN0T3B0aW9ucyhjb25maWcpIHtcbiAgbGV0IG92ZXJyaWRlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgY29uc3QgdG9rZW4gPSBvdmVycmlkZXMudG9rZW4gfHwgY29uZmlnLnRva2VuO1xuICBpZiAodG9rZW4pIHtcbiAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBcIkJlYXJlciBcIi5jb25jYXQodG9rZW4pO1xuICB9XG4gIGlmICghb3ZlcnJpZGVzLnVzZUdsb2JhbEFwaSAmJiAhY29uZmlnLnVzZVByb2plY3RIb3N0bmFtZSAmJiBjb25maWcucHJvamVjdElkKSB7XG4gICAgaGVhZGVyc1twcm9qZWN0SGVhZGVyXSA9IGNvbmZpZy5wcm9qZWN0SWQ7XG4gIH1cbiAgY29uc3Qgd2l0aENyZWRlbnRpYWxzID0gQm9vbGVhbih0eXBlb2Ygb3ZlcnJpZGVzLndpdGhDcmVkZW50aWFscyA9PT0gXCJ1bmRlZmluZWRcIiA/IGNvbmZpZy50b2tlbiB8fCBjb25maWcud2l0aENyZWRlbnRpYWxzIDogb3ZlcnJpZGVzLndpdGhDcmVkZW50aWFscyk7XG4gIGNvbnN0IHRpbWVvdXQgPSB0eXBlb2Ygb3ZlcnJpZGVzLnRpbWVvdXQgPT09IFwidW5kZWZpbmVkXCIgPyBjb25maWcudGltZW91dCA6IG92ZXJyaWRlcy50aW1lb3V0O1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgb3ZlcnJpZGVzLCB7XG4gICAgaGVhZGVyczogT2JqZWN0LmFzc2lnbih7fSwgaGVhZGVycywgb3ZlcnJpZGVzLmhlYWRlcnMgfHwge30pLFxuICAgIHRpbWVvdXQ6IHR5cGVvZiB0aW1lb3V0ID09PSBcInVuZGVmaW5lZFwiID8gNSAqIDYwICogMWUzIDogdGltZW91dCxcbiAgICBwcm94eTogb3ZlcnJpZGVzLnByb3h5IHx8IGNvbmZpZy5wcm94eSxcbiAgICBqc29uOiB0cnVlLFxuICAgIHdpdGhDcmVkZW50aWFscyxcbiAgICBmZXRjaDogdHlwZW9mIG92ZXJyaWRlcy5mZXRjaCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgY29uZmlnLmZldGNoID09PSBcIm9iamVjdFwiID8ge1xuICAgICAgLi4uY29uZmlnLmZldGNoLFxuICAgICAgLi4ub3ZlcnJpZGVzLmZldGNoXG4gICAgfSA6IG92ZXJyaWRlcy5mZXRjaCB8fCBjb25maWcuZmV0Y2hcbiAgfSk7XG59XG5jb25zdCBlbmNvZGVRdWVyeVN0cmluZyA9IF9yZWYyID0+IHtcbiAgbGV0IHtcbiAgICBxdWVyeSxcbiAgICBwYXJhbXMgPSB7fSxcbiAgICBvcHRpb25zID0ge31cbiAgfSA9IF9yZWYyO1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGNvbnN0IHtcbiAgICB0YWcsXG4gICAgLi4ub3B0c1xuICB9ID0gb3B0aW9ucztcbiAgaWYgKHRhZykgc2VhcmNoUGFyYW1zLmFwcGVuZChcInRhZ1wiLCB0YWcpO1xuICBzZWFyY2hQYXJhbXMuYXBwZW5kKFwicXVlcnlcIiwgcXVlcnkpO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwYXJhbXMpKSB7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZChcIiRcIi5jb25jYXQoa2V5KSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgfVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvcHRzKSkge1xuICAgIGlmICh2YWx1ZSkgc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIFwiXCIuY29uY2F0KHZhbHVlKSk7XG4gIH1cbiAgcmV0dXJuIFwiP1wiLmNvbmNhdChzZWFyY2hQYXJhbXMpO1xufTtcbmNvbnN0IGV4Y2x1ZGVGYWxzZXkgPSAocGFyYW0sIGRlZlZhbHVlKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gdHlwZW9mIHBhcmFtID09PSBcInVuZGVmaW5lZFwiID8gZGVmVmFsdWUgOiBwYXJhbTtcbiAgcmV0dXJuIHBhcmFtID09PSBmYWxzZSA/IHZvaWQgMCA6IHZhbHVlO1xufTtcbmNvbnN0IGdldE11dGF0aW9uUXVlcnkgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgcmV0dXJuIHtcbiAgICBkcnlSdW46IG9wdGlvbnMuZHJ5UnVuLFxuICAgIHJldHVybklkczogdHJ1ZSxcbiAgICByZXR1cm5Eb2N1bWVudHM6IGV4Y2x1ZGVGYWxzZXkob3B0aW9ucy5yZXR1cm5Eb2N1bWVudHMsIHRydWUpLFxuICAgIHZpc2liaWxpdHk6IG9wdGlvbnMudmlzaWJpbGl0eSB8fCBcInN5bmNcIixcbiAgICBhdXRvR2VuZXJhdGVBcnJheUtleXM6IG9wdGlvbnMuYXV0b0dlbmVyYXRlQXJyYXlLZXlzLFxuICAgIHNraXBDcm9zc0RhdGFzZXRSZWZlcmVuY2VWYWxpZGF0aW9uOiBvcHRpb25zLnNraXBDcm9zc0RhdGFzZXRSZWZlcmVuY2VWYWxpZGF0aW9uXG4gIH07XG59O1xuY29uc3QgaXNSZXNwb25zZSA9IGV2ZW50ID0+IGV2ZW50LnR5cGUgPT09IFwicmVzcG9uc2VcIjtcbmNvbnN0IGdldEJvZHkgPSBldmVudCA9PiBldmVudC5ib2R5O1xuY29uc3QgaW5kZXhCeSA9IChkb2NzLCBhdHRyKSA9PiBkb2NzLnJlZHVjZSgoaW5kZXhlZCwgZG9jKSA9PiB7XG4gIGluZGV4ZWRbYXR0cihkb2MpXSA9IGRvYztcbiAgcmV0dXJuIGluZGV4ZWQ7XG59LCAvKiBAX19QVVJFX18gKi9PYmplY3QuY3JlYXRlKG51bGwpKTtcbmNvbnN0IGdldFF1ZXJ5U2l6ZUxpbWl0ID0gMTEyNjQ7XG5mdW5jdGlvbiBfZmV0Y2goY2xpZW50LCBodHRwUmVxdWVzdCwgcXVlcnksIHBhcmFtcykge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge307XG4gIGNvbnN0IG1hcFJlc3BvbnNlID0gb3B0aW9ucy5maWx0ZXJSZXNwb25zZSA9PT0gZmFsc2UgPyByZXMgPT4gcmVzIDogcmVzID0+IHJlcy5yZXN1bHQ7XG4gIGNvbnN0IHtcbiAgICBjYWNoZSxcbiAgICBuZXh0LFxuICAgIC4uLm9wdHNcbiAgfSA9IHtcbiAgICAvLyBPcHQgb3V0IG9mIHNldHRpbmcgYSBgc2lnbmFsYCBvbiBhbiBpbnRlcm5hbCBgZmV0Y2hgIGlmIG9uZSBpc24ndCBwcm92aWRlZC5cbiAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBpbiBSZWFjdCBTZXJ2ZXIgQ29tcG9uZW50cyB0byBhdm9pZCBvcHRpbmcgb3V0IG9mIFJlcXVlc3QgTWVtb2l6YXRpb24uXG4gICAgdXNlQWJvcnRTaWduYWw6IHR5cGVvZiBvcHRpb25zLnNpZ25hbCAhPT0gXCJ1bmRlZmluZWRcIixcbiAgICAuLi5vcHRpb25zXG4gIH07XG4gIGNvbnN0IHJlcU9wdHMgPSB0eXBlb2YgY2FjaGUgIT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIG5leHQgIT09IFwidW5kZWZpbmVkXCIgPyB7XG4gICAgLi4ub3B0cyxcbiAgICBmZXRjaDoge1xuICAgICAgY2FjaGUsXG4gICAgICBuZXh0XG4gICAgfVxuICB9IDogb3B0cztcbiAgcmV0dXJuIF9kYXRhUmVxdWVzdChjbGllbnQsIGh0dHBSZXF1ZXN0LCBcInF1ZXJ5XCIsIHtcbiAgICBxdWVyeSxcbiAgICBwYXJhbXNcbiAgfSwgcmVxT3B0cykucGlwZShvcGVyYXRvcnMubWFwKG1hcFJlc3BvbnNlKSk7XG59XG5mdW5jdGlvbiBfZ2V0RG9jdW1lbnQoY2xpZW50LCBodHRwUmVxdWVzdCwgaWQpIHtcbiAgbGV0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIHVyaTogX2dldERhdGFVcmwoY2xpZW50LCBcImRvY1wiLCBpZCksXG4gICAganNvbjogdHJ1ZSxcbiAgICB0YWc6IG9wdHMudGFnXG4gIH07XG4gIHJldHVybiBfcmVxdWVzdE9ic2VydmFibGUoY2xpZW50LCBodHRwUmVxdWVzdCwgb3B0aW9ucykucGlwZShvcGVyYXRvcnMuZmlsdGVyKGlzUmVzcG9uc2UpLCBvcGVyYXRvcnMubWFwKGV2ZW50ID0+IGV2ZW50LmJvZHkuZG9jdW1lbnRzICYmIGV2ZW50LmJvZHkuZG9jdW1lbnRzWzBdKSk7XG59XG5mdW5jdGlvbiBfZ2V0RG9jdW1lbnRzKGNsaWVudCwgaHR0cFJlcXVlc3QsIGlkcykge1xuICBsZXQgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgdXJpOiBfZ2V0RGF0YVVybChjbGllbnQsIFwiZG9jXCIsIGlkcy5qb2luKFwiLFwiKSksXG4gICAganNvbjogdHJ1ZSxcbiAgICB0YWc6IG9wdHMudGFnXG4gIH07XG4gIHJldHVybiBfcmVxdWVzdE9ic2VydmFibGUoY2xpZW50LCBodHRwUmVxdWVzdCwgb3B0aW9ucykucGlwZShvcGVyYXRvcnMuZmlsdGVyKGlzUmVzcG9uc2UpLCBvcGVyYXRvcnMubWFwKGV2ZW50ID0+IHtcbiAgICBjb25zdCBpbmRleGVkID0gaW5kZXhCeShldmVudC5ib2R5LmRvY3VtZW50cyB8fCBbXSwgZG9jID0+IGRvYy5faWQpO1xuICAgIHJldHVybiBpZHMubWFwKGlkID0+IGluZGV4ZWRbaWRdIHx8IG51bGwpO1xuICB9KSk7XG59XG5mdW5jdGlvbiBfY3JlYXRlSWZOb3RFeGlzdHMoY2xpZW50LCBodHRwUmVxdWVzdCwgZG9jLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVEb2N1bWVudElkKFwiY3JlYXRlSWZOb3RFeGlzdHNcIiwgZG9jKTtcbiAgcmV0dXJuIF9jcmVhdGUoY2xpZW50LCBodHRwUmVxdWVzdCwgZG9jLCBcImNyZWF0ZUlmTm90RXhpc3RzXCIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gX2NyZWF0ZU9yUmVwbGFjZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBkb2MsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZURvY3VtZW50SWQoXCJjcmVhdGVPclJlcGxhY2VcIiwgZG9jKTtcbiAgcmV0dXJuIF9jcmVhdGUoY2xpZW50LCBodHRwUmVxdWVzdCwgZG9jLCBcImNyZWF0ZU9yUmVwbGFjZVwiLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIF9kZWxldGUoY2xpZW50LCBodHRwUmVxdWVzdCwgc2VsZWN0aW9uLCBvcHRpb25zKSB7XG4gIHJldHVybiBfZGF0YVJlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwgXCJtdXRhdGVcIiwge1xuICAgIG11dGF0aW9uczogW3tcbiAgICAgIGRlbGV0ZTogZ2V0U2VsZWN0aW9uKHNlbGVjdGlvbilcbiAgICB9XVxuICB9LCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIF9tdXRhdGUoY2xpZW50LCBodHRwUmVxdWVzdCwgbXV0YXRpb25zLCBvcHRpb25zKSB7XG4gIGxldCBtdXQ7XG4gIGlmIChtdXRhdGlvbnMgaW5zdGFuY2VvZiBQYXRjaCB8fCBtdXRhdGlvbnMgaW5zdGFuY2VvZiBPYnNlcnZhYmxlUGF0Y2gpIHtcbiAgICBtdXQgPSB7XG4gICAgICBwYXRjaDogbXV0YXRpb25zLnNlcmlhbGl6ZSgpXG4gICAgfTtcbiAgfSBlbHNlIGlmIChtdXRhdGlvbnMgaW5zdGFuY2VvZiBUcmFuc2FjdGlvbiB8fCBtdXRhdGlvbnMgaW5zdGFuY2VvZiBPYnNlcnZhYmxlVHJhbnNhY3Rpb24pIHtcbiAgICBtdXQgPSBtdXRhdGlvbnMuc2VyaWFsaXplKCk7XG4gIH0gZWxzZSB7XG4gICAgbXV0ID0gbXV0YXRpb25zO1xuICB9XG4gIGNvbnN0IG11dHMgPSBBcnJheS5pc0FycmF5KG11dCkgPyBtdXQgOiBbbXV0XTtcbiAgY29uc3QgdHJhbnNhY3Rpb25JZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy50cmFuc2FjdGlvbklkIHx8IHZvaWQgMDtcbiAgcmV0dXJuIF9kYXRhUmVxdWVzdChjbGllbnQsIGh0dHBSZXF1ZXN0LCBcIm11dGF0ZVwiLCB7XG4gICAgbXV0YXRpb25zOiBtdXRzLFxuICAgIHRyYW5zYWN0aW9uSWRcbiAgfSwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBfZGF0YVJlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwgZW5kcG9pbnQsIGJvZHkpIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuICBjb25zdCBpc011dGF0aW9uID0gZW5kcG9pbnQgPT09IFwibXV0YXRlXCI7XG4gIGNvbnN0IGlzUXVlcnkgPSBlbmRwb2ludCA9PT0gXCJxdWVyeVwiO1xuICBjb25zdCBzdHJRdWVyeSA9IGlzTXV0YXRpb24gPyBcIlwiIDogZW5jb2RlUXVlcnlTdHJpbmcoYm9keSk7XG4gIGNvbnN0IHVzZUdldCA9ICFpc011dGF0aW9uICYmIHN0clF1ZXJ5Lmxlbmd0aCA8IGdldFF1ZXJ5U2l6ZUxpbWl0O1xuICBjb25zdCBzdHJpbmdRdWVyeSA9IHVzZUdldCA/IHN0clF1ZXJ5IDogXCJcIjtcbiAgY29uc3QgcmV0dXJuRmlyc3QgPSBvcHRpb25zLnJldHVybkZpcnN0O1xuICBjb25zdCB7XG4gICAgdGltZW91dCxcbiAgICB0b2tlbixcbiAgICB0YWcsXG4gICAgaGVhZGVyc1xuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgdXJpID0gX2dldERhdGFVcmwoY2xpZW50LCBlbmRwb2ludCwgc3RyaW5nUXVlcnkpO1xuICBjb25zdCByZXFPcHRpb25zID0ge1xuICAgIG1ldGhvZDogdXNlR2V0ID8gXCJHRVRcIiA6IFwiUE9TVFwiLFxuICAgIHVyaSxcbiAgICBqc29uOiB0cnVlLFxuICAgIGJvZHk6IHVzZUdldCA/IHZvaWQgMCA6IGJvZHksXG4gICAgcXVlcnk6IGlzTXV0YXRpb24gJiYgZ2V0TXV0YXRpb25RdWVyeShvcHRpb25zKSxcbiAgICB0aW1lb3V0LFxuICAgIGhlYWRlcnMsXG4gICAgdG9rZW4sXG4gICAgdGFnLFxuICAgIHBlcnNwZWN0aXZlOiBvcHRpb25zLnBlcnNwZWN0aXZlLFxuICAgIHJlc3VsdFNvdXJjZU1hcDogb3B0aW9ucy5yZXN1bHRTb3VyY2VNYXAsXG4gICAgY2FuVXNlQ2RuOiBpc1F1ZXJ5LFxuICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgdXNlQWJvcnRTaWduYWw6IG9wdGlvbnMudXNlQWJvcnRTaWduYWxcbiAgfTtcbiAgcmV0dXJuIF9yZXF1ZXN0T2JzZXJ2YWJsZShjbGllbnQsIGh0dHBSZXF1ZXN0LCByZXFPcHRpb25zKS5waXBlKG9wZXJhdG9ycy5maWx0ZXIoaXNSZXNwb25zZSksIG9wZXJhdG9ycy5tYXAoZ2V0Qm9keSksIG9wZXJhdG9ycy5tYXAocmVzID0+IHtcbiAgICBpZiAoIWlzTXV0YXRpb24pIHtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdHMgPSByZXMucmVzdWx0cyB8fCBbXTtcbiAgICBpZiAob3B0aW9ucy5yZXR1cm5Eb2N1bWVudHMpIHtcbiAgICAgIHJldHVybiByZXR1cm5GaXJzdCA/IHJlc3VsdHNbMF0gJiYgcmVzdWx0c1swXS5kb2N1bWVudCA6IHJlc3VsdHMubWFwKG11dCA9PiBtdXQuZG9jdW1lbnQpO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSByZXR1cm5GaXJzdCA/IFwiZG9jdW1lbnRJZFwiIDogXCJkb2N1bWVudElkc1wiO1xuICAgIGNvbnN0IGlkcyA9IHJldHVybkZpcnN0ID8gcmVzdWx0c1swXSAmJiByZXN1bHRzWzBdLmlkIDogcmVzdWx0cy5tYXAobXV0ID0+IG11dC5pZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRyYW5zYWN0aW9uSWQ6IHJlcy50cmFuc2FjdGlvbklkLFxuICAgICAgcmVzdWx0cyxcbiAgICAgIFtrZXldOiBpZHNcbiAgICB9O1xuICB9KSk7XG59XG5mdW5jdGlvbiBfY3JlYXRlKGNsaWVudCwgaHR0cFJlcXVlc3QsIGRvYywgb3ApIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuICBjb25zdCBtdXRhdGlvbiA9IHtcbiAgICBbb3BdOiBkb2NcbiAgfTtcbiAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIHJldHVybkZpcnN0OiB0cnVlLFxuICAgIHJldHVybkRvY3VtZW50czogdHJ1ZVxuICB9LCBvcHRpb25zKTtcbiAgcmV0dXJuIF9kYXRhUmVxdWVzdChjbGllbnQsIGh0dHBSZXF1ZXN0LCBcIm11dGF0ZVwiLCB7XG4gICAgbXV0YXRpb25zOiBbbXV0YXRpb25dXG4gIH0sIG9wdHMpO1xufVxuZnVuY3Rpb24gX3JlcXVlc3RPYnNlcnZhYmxlKGNsaWVudCwgaHR0cFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgdmFyIF9hO1xuICBjb25zdCB1cmkgPSBvcHRpb25zLnVybCB8fCBvcHRpb25zLnVyaTtcbiAgY29uc3QgY29uZmlnID0gY2xpZW50LmNvbmZpZygpO1xuICBjb25zdCBjYW5Vc2VDZG4gPSB0eXBlb2Ygb3B0aW9ucy5jYW5Vc2VDZG4gPT09IFwidW5kZWZpbmVkXCIgPyBbXCJHRVRcIiwgXCJIRUFEXCJdLmluZGV4T2Yob3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIikgPj0gMCAmJiB1cmkuaW5kZXhPZihcIi9kYXRhL1wiKSA9PT0gMCA6IG9wdGlvbnMuY2FuVXNlQ2RuO1xuICBsZXQgdXNlQ2RuID0gY29uZmlnLnVzZUNkbiAmJiBjYW5Vc2VDZG47XG4gIGNvbnN0IHRhZyA9IG9wdGlvbnMudGFnICYmIGNvbmZpZy5yZXF1ZXN0VGFnUHJlZml4ID8gW2NvbmZpZy5yZXF1ZXN0VGFnUHJlZml4LCBvcHRpb25zLnRhZ10uam9pbihcIi5cIikgOiBvcHRpb25zLnRhZyB8fCBjb25maWcucmVxdWVzdFRhZ1ByZWZpeDtcbiAgaWYgKHRhZyAmJiBvcHRpb25zLnRhZyAhPT0gbnVsbCkge1xuICAgIG9wdGlvbnMucXVlcnkgPSB7XG4gICAgICB0YWc6IHJlcXVlc3RUYWcodGFnKSxcbiAgICAgIC4uLm9wdGlvbnMucXVlcnlcbiAgICB9O1xuICB9XG4gIGlmIChbXCJHRVRcIiwgXCJIRUFEXCIsIFwiUE9TVFwiXS5pbmRleE9mKG9wdGlvbnMubWV0aG9kIHx8IFwiR0VUXCIpID49IDAgJiYgdXJpLmluZGV4T2YoXCIvZGF0YS9xdWVyeS9cIikgPT09IDApIHtcbiAgICBjb25zdCByZXN1bHRTb3VyY2VNYXAgPSAoX2EgPSBvcHRpb25zLnJlc3VsdFNvdXJjZU1hcCkgIT0gbnVsbCA/IF9hIDogY29uZmlnLnJlc3VsdFNvdXJjZU1hcDtcbiAgICBpZiAocmVzdWx0U291cmNlTWFwICE9PSB2b2lkIDAgJiYgcmVzdWx0U291cmNlTWFwICE9PSBmYWxzZSkge1xuICAgICAgb3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgICAgcmVzdWx0U291cmNlTWFwLFxuICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBwZXJzcGVjdGl2ZSA9IG9wdGlvbnMucGVyc3BlY3RpdmUgfHwgY29uZmlnLnBlcnNwZWN0aXZlO1xuICAgIGlmICh0eXBlb2YgcGVyc3BlY3RpdmUgPT09IFwic3RyaW5nXCIgJiYgcGVyc3BlY3RpdmUgIT09IFwicmF3XCIpIHtcbiAgICAgIHZhbGlkYXRlQXBpUGVyc3BlY3RpdmUocGVyc3BlY3RpdmUpO1xuICAgICAgb3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgICAgcGVyc3BlY3RpdmUsXG4gICAgICAgIC4uLm9wdGlvbnMucXVlcnlcbiAgICAgIH07XG4gICAgICBpZiAocGVyc3BlY3RpdmUgPT09IFwicHJldmlld0RyYWZ0c1wiICYmIHVzZUNkbikge1xuICAgICAgICB1c2VDZG4gPSBmYWxzZTtcbiAgICAgICAgcHJpbnRDZG5QcmV2aWV3RHJhZnRzV2FybmluZygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCByZXFPcHRpb25zID0gcmVxdWVzdE9wdGlvbnMoY29uZmlnLCBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCB7XG4gICAgdXJsOiBfZ2V0VXJsKGNsaWVudCwgdXJpLCB1c2VDZG4pXG4gIH0pKTtcbiAgY29uc3QgcmVxdWVzdCA9IG5ldyByeGpzLk9ic2VydmFibGUoc3Vic2NyaWJlciA9PiBodHRwUmVxdWVzdChyZXFPcHRpb25zLCBjb25maWcucmVxdWVzdGVyKS5zdWJzY3JpYmUoc3Vic2NyaWJlcikpO1xuICByZXR1cm4gb3B0aW9ucy5zaWduYWwgPyByZXF1ZXN0LnBpcGUoX3dpdGhBYm9ydFNpZ25hbChvcHRpb25zLnNpZ25hbCkpIDogcmVxdWVzdDtcbn1cbmZ1bmN0aW9uIF9yZXF1ZXN0KGNsaWVudCwgaHR0cFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IF9yZXF1ZXN0T2JzZXJ2YWJsZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBvcHRpb25zKS5waXBlKG9wZXJhdG9ycy5maWx0ZXIoZXZlbnQgPT4gZXZlbnQudHlwZSA9PT0gXCJyZXNwb25zZVwiKSwgb3BlcmF0b3JzLm1hcChldmVudCA9PiBldmVudC5ib2R5KSk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gX2dldERhdGFVcmwoY2xpZW50LCBvcGVyYXRpb24sIHBhdGgpIHtcbiAgY29uc3QgY29uZmlnID0gY2xpZW50LmNvbmZpZygpO1xuICBjb25zdCBjYXRhbG9nID0gaGFzRGF0YXNldChjb25maWcpO1xuICBjb25zdCBiYXNlVXJpID0gXCIvXCIuY29uY2F0KG9wZXJhdGlvbiwgXCIvXCIpLmNvbmNhdChjYXRhbG9nKTtcbiAgY29uc3QgdXJpID0gcGF0aCA/IFwiXCIuY29uY2F0KGJhc2VVcmksIFwiL1wiKS5jb25jYXQocGF0aCkgOiBiYXNlVXJpO1xuICByZXR1cm4gXCIvZGF0YVwiLmNvbmNhdCh1cmkpLnJlcGxhY2UoL1xcLygkfFxcPykvLCBcIiQxXCIpO1xufVxuZnVuY3Rpb24gX2dldFVybChjbGllbnQsIHVyaSkge1xuICBsZXQgY2FuVXNlQ2RuID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcbiAgY29uc3Qge1xuICAgIHVybCxcbiAgICBjZG5VcmxcbiAgfSA9IGNsaWVudC5jb25maWcoKTtcbiAgY29uc3QgYmFzZSA9IGNhblVzZUNkbiA/IGNkblVybCA6IHVybDtcbiAgcmV0dXJuIFwiXCIuY29uY2F0KGJhc2UsIFwiL1wiKS5jb25jYXQodXJpLnJlcGxhY2UoL15cXC8vLCBcIlwiKSk7XG59XG5mdW5jdGlvbiBfd2l0aEFib3J0U2lnbmFsKHNpZ25hbCkge1xuICByZXR1cm4gaW5wdXQgPT4ge1xuICAgIHJldHVybiBuZXcgcnhqcy5PYnNlcnZhYmxlKG9ic2VydmVyID0+IHtcbiAgICAgIGNvbnN0IGFib3J0ID0gKCkgPT4gb2JzZXJ2ZXIuZXJyb3IoX2NyZWF0ZUFib3J0RXJyb3Ioc2lnbmFsKSk7XG4gICAgICBpZiAoc2lnbmFsICYmIHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIGFib3J0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGlucHV0LnN1YnNjcmliZShvYnNlcnZlcik7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGFib3J0KTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgYWJvcnQpO1xuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG59XG5jb25zdCBpc0RvbUV4Y2VwdGlvblN1cHBvcnRlZCA9IEJvb2xlYW4oZ2xvYmFsVGhpcy5ET01FeGNlcHRpb24pO1xuZnVuY3Rpb24gX2NyZWF0ZUFib3J0RXJyb3Ioc2lnbmFsKSB7XG4gIHZhciBfYSwgX2I7XG4gIGlmIChpc0RvbUV4Y2VwdGlvblN1cHBvcnRlZCkge1xuICAgIHJldHVybiBuZXcgRE9NRXhjZXB0aW9uKChfYSA9IHNpZ25hbCA9PSBudWxsID8gdm9pZCAwIDogc2lnbmFsLnJlYXNvbikgIT0gbnVsbCA/IF9hIDogXCJUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLlwiLCBcIkFib3J0RXJyb3JcIik7XG4gIH1cbiAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoKF9iID0gc2lnbmFsID09IG51bGwgPyB2b2lkIDAgOiBzaWduYWwucmVhc29uKSAhPSBudWxsID8gX2IgOiBcIlRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQuXCIpO1xuICBlcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gIHJldHVybiBlcnJvcjtcbn1cbnZhciBfX2FjY2Vzc0NoZWNrJDQgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDQob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkNCA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQ0ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skNChvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCQzLCBfaHR0cFJlcXVlc3QkNCwgX2NsaWVudDIkMywgX2h0dHBSZXF1ZXN0MiQ0O1xuY2xhc3MgT2JzZXJ2YWJsZUFzc2V0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkNCh0aGlzLCBfY2xpZW50JDMsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkJDQodGhpcywgX2h0dHBSZXF1ZXN0JDQsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDQodGhpcywgX2NsaWVudCQzLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQ0KHRoaXMsIF9odHRwUmVxdWVzdCQ0LCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgdXBsb2FkKGFzc2V0VHlwZSwgYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfdXBsb2FkKF9fcHJpdmF0ZUdldCQ0KHRoaXMsIF9jbGllbnQkMyksIF9fcHJpdmF0ZUdldCQ0KHRoaXMsIF9odHRwUmVxdWVzdCQ0KSwgYXNzZXRUeXBlLCBib2R5LCBvcHRpb25zKTtcbiAgfVxufVxuX2NsaWVudCQzID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdCQ0ID0gbmV3IFdlYWtNYXAoKTtcbmNsYXNzIEFzc2V0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkNCh0aGlzLCBfY2xpZW50MiQzLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCQ0KHRoaXMsIF9odHRwUmVxdWVzdDIkNCwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkNCh0aGlzLCBfY2xpZW50MiQzLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQ0KHRoaXMsIF9odHRwUmVxdWVzdDIkNCwgaHR0cFJlcXVlc3QpO1xuICB9XG4gIHVwbG9hZChhc3NldFR5cGUsIGJvZHksIG9wdGlvbnMpIHtcbiAgICBjb25zdCBvYnNlcnZhYmxlID0gX3VwbG9hZChfX3ByaXZhdGVHZXQkNCh0aGlzLCBfY2xpZW50MiQzKSwgX19wcml2YXRlR2V0JDQodGhpcywgX2h0dHBSZXF1ZXN0MiQ0KSwgYXNzZXRUeXBlLCBib2R5LCBvcHRpb25zKTtcbiAgICByZXR1cm4gcnhqcy5sYXN0VmFsdWVGcm9tKG9ic2VydmFibGUucGlwZShvcGVyYXRvcnMuZmlsdGVyKGV2ZW50ID0+IGV2ZW50LnR5cGUgPT09IFwicmVzcG9uc2VcIiksIG9wZXJhdG9ycy5tYXAoZXZlbnQgPT4gZXZlbnQuYm9keS5kb2N1bWVudCkpKTtcbiAgfVxufVxuX2NsaWVudDIkMyA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QyJDQgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gX3VwbG9hZChjbGllbnQsIGh0dHBSZXF1ZXN0LCBhc3NldFR5cGUsIGJvZHkpIHtcbiAgbGV0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuICB2YWxpZGF0ZUFzc2V0VHlwZShhc3NldFR5cGUpO1xuICBsZXQgbWV0YSA9IG9wdHMuZXh0cmFjdCB8fCB2b2lkIDA7XG4gIGlmIChtZXRhICYmICFtZXRhLmxlbmd0aCkge1xuICAgIG1ldGEgPSBbXCJub25lXCJdO1xuICB9XG4gIGNvbnN0IGRhdGFzZXQgPSBoYXNEYXRhc2V0KGNsaWVudC5jb25maWcoKSk7XG4gIGNvbnN0IGFzc2V0RW5kcG9pbnQgPSBhc3NldFR5cGUgPT09IFwiaW1hZ2VcIiA/IFwiaW1hZ2VzXCIgOiBcImZpbGVzXCI7XG4gIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25zRnJvbUZpbGUob3B0cywgYm9keSk7XG4gIGNvbnN0IHtcbiAgICB0YWcsXG4gICAgbGFiZWwsXG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgY3JlZGl0TGluZSxcbiAgICBmaWxlbmFtZSxcbiAgICBzb3VyY2VcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHF1ZXJ5ID0ge1xuICAgIGxhYmVsLFxuICAgIHRpdGxlLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGZpbGVuYW1lLFxuICAgIG1ldGEsXG4gICAgY3JlZGl0TGluZVxuICB9O1xuICBpZiAoc291cmNlKSB7XG4gICAgcXVlcnkuc291cmNlSWQgPSBzb3VyY2UuaWQ7XG4gICAgcXVlcnkuc291cmNlTmFtZSA9IHNvdXJjZS5uYW1lO1xuICAgIHF1ZXJ5LnNvdXJjZVVybCA9IHNvdXJjZS51cmw7XG4gIH1cbiAgcmV0dXJuIF9yZXF1ZXN0T2JzZXJ2YWJsZShjbGllbnQsIGh0dHBSZXF1ZXN0LCB7XG4gICAgdGFnLFxuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0IHx8IDAsXG4gICAgdXJpOiBcIi9hc3NldHMvXCIuY29uY2F0KGFzc2V0RW5kcG9pbnQsIFwiL1wiKS5jb25jYXQoZGF0YXNldCksXG4gICAgaGVhZGVyczogb3B0aW9ucy5jb250ZW50VHlwZSA/IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IG9wdGlvbnMuY29udGVudFR5cGVcbiAgICB9IDoge30sXG4gICAgcXVlcnksXG4gICAgYm9keVxuICB9KTtcbn1cbmZ1bmN0aW9uIG9wdGlvbnNGcm9tRmlsZShvcHRzLCBmaWxlKSB7XG4gIGlmICh0eXBlb2YgRmlsZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKGZpbGUgaW5zdGFuY2VvZiBGaWxlKSkge1xuICAgIHJldHVybiBvcHRzO1xuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICBmaWxlbmFtZTogb3B0cy5wcmVzZXJ2ZUZpbGVuYW1lID09PSBmYWxzZSA/IHZvaWQgMCA6IGZpbGUubmFtZSxcbiAgICBjb250ZW50VHlwZTogZmlsZS50eXBlXG4gIH0sIG9wdHMpO1xufVxudmFyIGRlZmF1bHRzID0gKG9iaiwgZGVmYXVsdHMpID0+IE9iamVjdC5rZXlzKGRlZmF1bHRzKS5jb25jYXQoT2JqZWN0LmtleXMob2JqKSkucmVkdWNlKCh0YXJnZXQsIHByb3ApID0+IHtcbiAgdGFyZ2V0W3Byb3BdID0gdHlwZW9mIG9ialtwcm9wXSA9PT0gXCJ1bmRlZmluZWRcIiA/IGRlZmF1bHRzW3Byb3BdIDogb2JqW3Byb3BdO1xuICByZXR1cm4gdGFyZ2V0O1xufSwge30pO1xuY29uc3QgcGljayA9IChvYmosIHByb3BzKSA9PiBwcm9wcy5yZWR1Y2UoKHNlbGVjdGlvbiwgcHJvcCkgPT4ge1xuICBpZiAodHlwZW9mIG9ialtwcm9wXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cbiAgc2VsZWN0aW9uW3Byb3BdID0gb2JqW3Byb3BdO1xuICByZXR1cm4gc2VsZWN0aW9uO1xufSwge30pO1xuY29uc3QgTUFYX1VSTF9MRU5HVEggPSAxNmUzIC0gMTIwMDtcbmNvbnN0IHBvc3NpYmxlT3B0aW9ucyA9IFtcImluY2x1ZGVQcmV2aW91c1JldmlzaW9uXCIsIFwiaW5jbHVkZVJlc3VsdFwiLCBcInZpc2liaWxpdHlcIiwgXCJlZmZlY3RGb3JtYXRcIiwgXCJ0YWdcIl07XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgaW5jbHVkZVJlc3VsdDogdHJ1ZVxufTtcbmZ1bmN0aW9uIF9saXN0ZW4ocXVlcnksIHBhcmFtcykge1xuICBsZXQgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gIGNvbnN0IHtcbiAgICB1cmwsXG4gICAgdG9rZW4sXG4gICAgd2l0aENyZWRlbnRpYWxzLFxuICAgIHJlcXVlc3RUYWdQcmVmaXhcbiAgfSA9IHRoaXMuY29uZmlnKCk7XG4gIGNvbnN0IHRhZyA9IG9wdHMudGFnICYmIHJlcXVlc3RUYWdQcmVmaXggPyBbcmVxdWVzdFRhZ1ByZWZpeCwgb3B0cy50YWddLmpvaW4oXCIuXCIpIDogb3B0cy50YWc7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgLi4uZGVmYXVsdHMob3B0cywgZGVmYXVsdE9wdGlvbnMpLFxuICAgIHRhZ1xuICB9O1xuICBjb25zdCBsaXN0ZW5PcHRzID0gcGljayhvcHRpb25zLCBwb3NzaWJsZU9wdGlvbnMpO1xuICBjb25zdCBxcyA9IGVuY29kZVF1ZXJ5U3RyaW5nKHtcbiAgICBxdWVyeSxcbiAgICBwYXJhbXMsXG4gICAgb3B0aW9uczoge1xuICAgICAgdGFnLFxuICAgICAgLi4ubGlzdGVuT3B0c1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHVyaSA9IFwiXCIuY29uY2F0KHVybCkuY29uY2F0KF9nZXREYXRhVXJsKHRoaXMsIFwibGlzdGVuXCIsIHFzKSk7XG4gIGlmICh1cmkubGVuZ3RoID4gTUFYX1VSTF9MRU5HVEgpIHtcbiAgICByZXR1cm4gbmV3IHJ4anMuT2JzZXJ2YWJsZShvYnNlcnZlciA9PiBvYnNlcnZlci5lcnJvcihuZXcgRXJyb3IoXCJRdWVyeSB0b28gbGFyZ2UgZm9yIGxpc3RlbmVyXCIpKSk7XG4gIH1cbiAgY29uc3QgbGlzdGVuRm9yID0gb3B0aW9ucy5ldmVudHMgPyBvcHRpb25zLmV2ZW50cyA6IFtcIm11dGF0aW9uXCJdO1xuICBjb25zdCBzaG91bGRFbWl0UmVjb25uZWN0ID0gbGlzdGVuRm9yLmluZGV4T2YoXCJyZWNvbm5lY3RcIikgIT09IC0xO1xuICBjb25zdCBlc09wdGlvbnMgPSB7fTtcbiAgaWYgKHRva2VuIHx8IHdpdGhDcmVkZW50aWFscykge1xuICAgIGVzT3B0aW9ucy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICB9XG4gIGlmICh0b2tlbikge1xuICAgIGVzT3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIuY29uY2F0KHRva2VuKVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIG5ldyByeGpzLk9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgIGxldCBlcztcbiAgICBnZXRFdmVudFNvdXJjZSgpLnRoZW4oZXZlbnRTb3VyY2UgPT4ge1xuICAgICAgZXMgPSBldmVudFNvdXJjZTtcbiAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgb2JzZXJ2ZXIuZXJyb3IocmVhc29uKTtcbiAgICAgIHN0b3AoKTtcbiAgICB9KTtcbiAgICBsZXQgcmVjb25uZWN0VGltZXI7XG4gICAgbGV0IHN0b3BwZWQgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBvbkVycm9yKCkge1xuICAgICAgaWYgKHN0b3BwZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZW1pdFJlY29ubmVjdCgpO1xuICAgICAgaWYgKHN0b3BwZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGVzLnJlYWR5U3RhdGUgPT09IGVzLkNMT1NFRCkge1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZXIpO1xuICAgICAgICByZWNvbm5lY3RUaW1lciA9IHNldFRpbWVvdXQob3BlbiwgMTAwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gb25DaGFubmVsRXJyb3IoZXJyKSB7XG4gICAgICBvYnNlcnZlci5lcnJvcihjb29lcmNlRXJyb3IoZXJyKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uTWVzc2FnZShldnQpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gcGFyc2VFdmVudChldnQpO1xuICAgICAgcmV0dXJuIGV2ZW50IGluc3RhbmNlb2YgRXJyb3IgPyBvYnNlcnZlci5lcnJvcihldmVudCkgOiBvYnNlcnZlci5uZXh0KGV2ZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25EaXNjb25uZWN0KCkge1xuICAgICAgc3RvcHBlZCA9IHRydWU7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICBpZiAoIWVzKSByZXR1cm47XG4gICAgICBlcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25FcnJvcik7XG4gICAgICBlcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbm5lbEVycm9yXCIsIG9uQ2hhbm5lbEVycm9yKTtcbiAgICAgIGVzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIG9uRGlzY29ubmVjdCk7XG4gICAgICBsaXN0ZW5Gb3IuZm9yRWFjaCh0eXBlID0+IGVzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgb25NZXNzYWdlKSk7XG4gICAgICBlcy5jbG9zZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbWl0UmVjb25uZWN0KCkge1xuICAgICAgaWYgKHNob3VsZEVtaXRSZWNvbm5lY3QpIHtcbiAgICAgICAgb2JzZXJ2ZXIubmV4dCh7XG4gICAgICAgICAgdHlwZTogXCJyZWNvbm5lY3RcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0RXZlbnRTb3VyY2UoKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRlZmF1bHQ6IEV2ZW50U291cmNlXG4gICAgICB9ID0gYXdhaXQgaW1wb3J0KCdAc2FuaXR5L2V2ZW50c291cmNlJyk7XG4gICAgICBjb25zdCBldnMgPSBuZXcgRXZlbnRTb3VyY2UodXJpLCBlc09wdGlvbnMpO1xuICAgICAgZXZzLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgIGV2cy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbm5lbEVycm9yXCIsIG9uQ2hhbm5lbEVycm9yKTtcbiAgICAgIGV2cy5hZGRFdmVudExpc3RlbmVyKFwiZGlzY29ubmVjdFwiLCBvbkRpc2Nvbm5lY3QpO1xuICAgICAgbGlzdGVuRm9yLmZvckVhY2godHlwZSA9PiBldnMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBvbk1lc3NhZ2UpKTtcbiAgICAgIHJldHVybiBldnM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICBnZXRFdmVudFNvdXJjZSgpLnRoZW4oZXZlbnRTb3VyY2UgPT4ge1xuICAgICAgICBlcyA9IGV2ZW50U291cmNlO1xuICAgICAgfSkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgb2JzZXJ2ZXIuZXJyb3IocmVhc29uKTtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICBzdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHJldHVybiBzdG9wO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlRXZlbnQoZXZlbnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YSAmJiBKU09OLnBhcnNlKGV2ZW50LmRhdGEpIHx8IHt9O1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICAgIHR5cGU6IGV2ZW50LnR5cGVcbiAgICB9LCBkYXRhKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIGVycjtcbiAgfVxufVxuZnVuY3Rpb24gY29vZXJjZUVycm9yKGVycikge1xuICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXR1cm4gZXJyO1xuICB9XG4gIGNvbnN0IGV2dCA9IHBhcnNlRXZlbnQoZXJyKTtcbiAgcmV0dXJuIGV2dCBpbnN0YW5jZW9mIEVycm9yID8gZXZ0IDogbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UoZXZ0KSk7XG59XG5mdW5jdGlvbiBleHRyYWN0RXJyb3JNZXNzYWdlKGVycikge1xuICBpZiAoIWVyci5lcnJvcikge1xuICAgIHJldHVybiBlcnIubWVzc2FnZSB8fCBcIlVua25vd24gbGlzdGVuZXIgZXJyb3JcIjtcbiAgfVxuICBpZiAoZXJyLmVycm9yLmRlc2NyaXB0aW9uKSB7XG4gICAgcmV0dXJuIGVyci5lcnJvci5kZXNjcmlwdGlvbjtcbiAgfVxuICByZXR1cm4gdHlwZW9mIGVyci5lcnJvciA9PT0gXCJzdHJpbmdcIiA/IGVyci5lcnJvciA6IEpTT04uc3RyaW5naWZ5KGVyci5lcnJvciwgbnVsbCwgMik7XG59XG52YXIgX19hY2Nlc3NDaGVjayQzID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCQzID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQzKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkJDMgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQkMyA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDMob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnQkMiwgX2h0dHBSZXF1ZXN0JDMsIF9jbGllbnQyJDIsIF9odHRwUmVxdWVzdDIkMztcbmNsYXNzIE9ic2VydmFibGVEYXRhc2V0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMyh0aGlzLCBfY2xpZW50JDIsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkJDModGhpcywgX2h0dHBSZXF1ZXN0JDMsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDModGhpcywgX2NsaWVudCQyLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQzKHRoaXMsIF9odHRwUmVxdWVzdCQzLCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGNyZWF0ZVxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBkYXRhc2V0XG4gICAqL1xuICBjcmVhdGUobmFtZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQkMiksIF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9odHRwUmVxdWVzdCQzKSwgXCJQVVRcIiwgbmFtZSwgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEVkaXQgYSBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGVkaXRcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBOZXcgb3B0aW9ucyBmb3IgdGhlIGRhdGFzZXRcbiAgICovXG4gIGVkaXQobmFtZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQkMiksIF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9odHRwUmVxdWVzdCQzKSwgXCJQQVRDSFwiLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgZGF0YXNldCB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBvZiB0aGUgZGF0YXNldCB0byBkZWxldGVcbiAgICovXG4gIGRlbGV0ZShuYW1lKSB7XG4gICAgcmV0dXJuIF9tb2RpZnkoX19wcml2YXRlR2V0JDModGhpcywgX2NsaWVudCQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0JDMpLCBcIkRFTEVURVwiLCBuYW1lKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggYSBsaXN0IG9mIGRhdGFzZXRzIGZvciB0aGUgY29uZmlndXJlZCBwcm9qZWN0XG4gICAqL1xuICBsaXN0KCkge1xuICAgIHJldHVybiBfcmVxdWVzdChfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50JDIpLCBfX3ByaXZhdGVHZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QkMyksIHtcbiAgICAgIHVyaTogXCIvZGF0YXNldHNcIixcbiAgICAgIHRhZzogbnVsbFxuICAgIH0pO1xuICB9XG59XG5fY2xpZW50JDIgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0JDMgPSBuZXcgV2Vha01hcCgpO1xuY2xhc3MgRGF0YXNldHNDbGllbnQge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIGh0dHBSZXF1ZXN0KSB7XG4gICAgX19wcml2YXRlQWRkJDModGhpcywgX2NsaWVudDIkMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDModGhpcywgX2NsaWVudDIkMiwgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGRhdGFzZXQgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIGRhdGFzZXQgdG8gY3JlYXRlXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGRhdGFzZXRcbiAgICovXG4gIGNyZWF0ZShuYW1lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHJ4anMubGFzdFZhbHVlRnJvbShfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQyJDIpLCBfX3ByaXZhdGVHZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMpLCBcIlBVVFwiLCBuYW1lLCBvcHRpb25zKSk7XG4gIH1cbiAgLyoqXG4gICAqIEVkaXQgYSBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGVkaXRcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBOZXcgb3B0aW9ucyBmb3IgdGhlIGRhdGFzZXRcbiAgICovXG4gIGVkaXQobmFtZSwgb3B0aW9ucykge1xuICAgIHJldHVybiByeGpzLmxhc3RWYWx1ZUZyb20oX21vZGlmeShfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50MiQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0MiQzKSwgXCJQQVRDSFwiLCBuYW1lLCBvcHRpb25zKSk7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGRhdGFzZXQgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIGRhdGFzZXQgdG8gZGVsZXRlXG4gICAqL1xuICBkZWxldGUobmFtZSkge1xuICAgIHJldHVybiByeGpzLmxhc3RWYWx1ZUZyb20oX21vZGlmeShfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50MiQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0MiQzKSwgXCJERUxFVEVcIiwgbmFtZSkpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIGxpc3Qgb2YgZGF0YXNldHMgZm9yIHRoZSBjb25maWd1cmVkIHByb2plY3RcbiAgICovXG4gIGxpc3QoKSB7XG4gICAgcmV0dXJuIHJ4anMubGFzdFZhbHVlRnJvbShfcmVxdWVzdChfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50MiQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0MiQzKSwge1xuICAgICAgdXJpOiBcIi9kYXRhc2V0c1wiLFxuICAgICAgdGFnOiBudWxsXG4gICAgfSkpO1xuICB9XG59XG5fY2xpZW50MiQyID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdDIkMyA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBfbW9kaWZ5KGNsaWVudCwgaHR0cFJlcXVlc3QsIG1ldGhvZCwgbmFtZSwgb3B0aW9ucykge1xuICBkYXRhc2V0KG5hbWUpO1xuICByZXR1cm4gX3JlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwge1xuICAgIG1ldGhvZCxcbiAgICB1cmk6IFwiL2RhdGFzZXRzL1wiLmNvbmNhdChuYW1lKSxcbiAgICBib2R5OiBvcHRpb25zLFxuICAgIHRhZzogbnVsbFxuICB9KTtcbn1cbnZhciBfX2FjY2Vzc0NoZWNrJDIgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDIgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDIob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkMiA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQyID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skMihvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCQxLCBfaHR0cFJlcXVlc3QkMiwgX2NsaWVudDIkMSwgX2h0dHBSZXF1ZXN0MiQyO1xuY2xhc3MgT2JzZXJ2YWJsZVByb2plY3RzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQyKHRoaXMsIF9jbGllbnQkMSwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMih0aGlzLCBfaHR0cFJlcXVlc3QkMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMih0aGlzLCBfY2xpZW50JDEsIGNsaWVudCk7XG4gICAgX19wcml2YXRlU2V0JDIodGhpcywgX2h0dHBSZXF1ZXN0JDIsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICBsaXN0KG9wdGlvbnMpIHtcbiAgICBjb25zdCB1cmkgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pbmNsdWRlTWVtYmVycykgPT09IGZhbHNlID8gXCIvcHJvamVjdHM/aW5jbHVkZU1lbWJlcnM9ZmFsc2VcIiA6IFwiL3Byb2plY3RzXCI7XG4gICAgcmV0dXJuIF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9jbGllbnQkMSksIF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9odHRwUmVxdWVzdCQyKSwge1xuICAgICAgdXJpXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgcHJvamVjdCBieSBwcm9qZWN0IElEXG4gICAqXG4gICAqIEBwYXJhbSBwcm9qZWN0SWQgLSBJRCBvZiB0aGUgcHJvamVjdCB0byBmZXRjaFxuICAgKi9cbiAgZ2V0QnlJZChwcm9qZWN0SWQpIHtcbiAgICByZXR1cm4gX3JlcXVlc3QoX19wcml2YXRlR2V0JDIodGhpcywgX2NsaWVudCQxKSwgX19wcml2YXRlR2V0JDIodGhpcywgX2h0dHBSZXF1ZXN0JDIpLCB7XG4gICAgICB1cmk6IFwiL3Byb2plY3RzL1wiLmNvbmNhdChwcm9qZWN0SWQpXG4gICAgfSk7XG4gIH1cbn1cbl9jbGllbnQkMSA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QkMiA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBQcm9qZWN0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMih0aGlzLCBfY2xpZW50MiQxLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCQyKHRoaXMsIF9odHRwUmVxdWVzdDIkMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMih0aGlzLCBfY2xpZW50MiQxLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQyKHRoaXMsIF9odHRwUmVxdWVzdDIkMiwgaHR0cFJlcXVlc3QpO1xuICB9XG4gIGxpc3Qob3B0aW9ucykge1xuICAgIGNvbnN0IHVyaSA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmluY2x1ZGVNZW1iZXJzKSA9PT0gZmFsc2UgPyBcIi9wcm9qZWN0cz9pbmNsdWRlTWVtYmVycz1mYWxzZVwiIDogXCIvcHJvamVjdHNcIjtcbiAgICByZXR1cm4gcnhqcy5sYXN0VmFsdWVGcm9tKF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9jbGllbnQyJDEpLCBfX3ByaXZhdGVHZXQkMih0aGlzLCBfaHR0cFJlcXVlc3QyJDIpLCB7XG4gICAgICB1cmlcbiAgICB9KSk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgcHJvamVjdCBieSBwcm9qZWN0IElEXG4gICAqXG4gICAqIEBwYXJhbSBwcm9qZWN0SWQgLSBJRCBvZiB0aGUgcHJvamVjdCB0byBmZXRjaFxuICAgKi9cbiAgZ2V0QnlJZChwcm9qZWN0SWQpIHtcbiAgICByZXR1cm4gcnhqcy5sYXN0VmFsdWVGcm9tKF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9jbGllbnQyJDEpLCBfX3ByaXZhdGVHZXQkMih0aGlzLCBfaHR0cFJlcXVlc3QyJDIpLCB7XG4gICAgICB1cmk6IFwiL3Byb2plY3RzL1wiLmNvbmNhdChwcm9qZWN0SWQpXG4gICAgfSkpO1xuICB9XG59XG5fY2xpZW50MiQxID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdDIkMiA9IG5ldyBXZWFrTWFwKCk7XG52YXIgX19hY2Nlc3NDaGVjayQxID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCQxID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQxKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkJDEgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQkMSA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDEob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnQsIF9odHRwUmVxdWVzdCQxLCBfY2xpZW50MiwgX2h0dHBSZXF1ZXN0MiQxO1xuY2xhc3MgT2JzZXJ2YWJsZVVzZXJzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQxKHRoaXMsIF9jbGllbnQsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkJDEodGhpcywgX2h0dHBSZXF1ZXN0JDEsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDEodGhpcywgX2NsaWVudCwgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkMSh0aGlzLCBfaHR0cFJlcXVlc3QkMSwgaHR0cFJlcXVlc3QpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHVzZXIgYnkgdXNlciBJRFxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBVc2VyIElEIG9mIHRoZSB1c2VyIHRvIGZldGNoLiBJZiBgbWVgIGlzIHByb3ZpZGVkLCBhIG1pbmltYWwgcmVzcG9uc2UgaW5jbHVkaW5nIHRoZSB1c2VycyByb2xlIGlzIHJldHVybmVkLlxuICAgKi9cbiAgZ2V0QnlJZChpZCkge1xuICAgIHJldHVybiBfcmVxdWVzdChfX3ByaXZhdGVHZXQkMSh0aGlzLCBfY2xpZW50KSwgX19wcml2YXRlR2V0JDEodGhpcywgX2h0dHBSZXF1ZXN0JDEpLCB7XG4gICAgICB1cmk6IFwiL3VzZXJzL1wiLmNvbmNhdChpZClcbiAgICB9KTtcbiAgfVxufVxuX2NsaWVudCA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QkMSA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBVc2Vyc0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMSh0aGlzLCBfY2xpZW50Miwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMSh0aGlzLCBfaHR0cFJlcXVlc3QyJDEsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDEodGhpcywgX2NsaWVudDIsIGNsaWVudCk7XG4gICAgX19wcml2YXRlU2V0JDEodGhpcywgX2h0dHBSZXF1ZXN0MiQxLCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgdXNlciBieSB1c2VyIElEXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFVzZXIgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2guIElmIGBtZWAgaXMgcHJvdmlkZWQsIGEgbWluaW1hbCByZXNwb25zZSBpbmNsdWRpbmcgdGhlIHVzZXJzIHJvbGUgaXMgcmV0dXJuZWQuXG4gICAqL1xuICBnZXRCeUlkKGlkKSB7XG4gICAgcmV0dXJuIHJ4anMubGFzdFZhbHVlRnJvbShfcmVxdWVzdChfX3ByaXZhdGVHZXQkMSh0aGlzLCBfY2xpZW50MiksIF9fcHJpdmF0ZUdldCQxKHRoaXMsIF9odHRwUmVxdWVzdDIkMSksIHtcbiAgICAgIHVyaTogXCIvdXNlcnMvXCIuY29uY2F0KGlkKVxuICAgIH0pKTtcbiAgfVxufVxuX2NsaWVudDIgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0MiQxID0gbmV3IFdlYWtNYXAoKTtcbnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudENvbmZpZywgX2h0dHBSZXF1ZXN0LCBfY2xpZW50Q29uZmlnMiwgX2h0dHBSZXF1ZXN0MjtcbmNvbnN0IF9PYnNlcnZhYmxlU2FuaXR5Q2xpZW50ID0gY2xhc3MgX09ic2VydmFibGVTYW5pdHlDbGllbnQge1xuICBjb25zdHJ1Y3RvcihodHRwUmVxdWVzdCkge1xuICAgIGxldCBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGRlZmF1bHRDb25maWc7XG4gICAgLyoqXG4gICAgICogUHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9jbGllbnRDb25maWcsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9odHRwUmVxdWVzdCwgdm9pZCAwKTtcbiAgICAvKipcbiAgICAgKiBJbnN0YW5jZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgdGhpcy5saXN0ZW4gPSBfbGlzdGVuO1xuICAgIHRoaXMuY29uZmlnKGNvbmZpZyk7XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9odHRwUmVxdWVzdCwgaHR0cFJlcXVlc3QpO1xuICAgIHRoaXMuYXNzZXRzID0gbmV3IE9ic2VydmFibGVBc3NldHNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCkpO1xuICAgIHRoaXMuZGF0YXNldHMgPSBuZXcgT2JzZXJ2YWJsZURhdGFzZXRzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpKTtcbiAgICB0aGlzLnByb2plY3RzID0gbmV3IE9ic2VydmFibGVQcm9qZWN0c0NsaWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSk7XG4gICAgdGhpcy51c2VycyA9IG5ldyBPYnNlcnZhYmxlVXNlcnNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCkpO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgY2xpZW50IC0gcmV0dXJucyBhIG5ldyBpbnN0YW5jZVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZVNhbml0eUNsaWVudChfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgdGhpcy5jb25maWcoKSk7XG4gIH1cbiAgY29uZmlnKG5ld0NvbmZpZykge1xuICAgIGlmIChuZXdDb25maWcgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcpICYmIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnKS5hbGxvd1JlY29uZmlndXJlID09PSBmYWxzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhpc3RpbmcgY2xpZW50IGluc3RhbmNlIGNhbm5vdCBiZSByZWNvbmZpZ3VyZWQgLSB1c2UgYHdpdGhDb25maWcobmV3Q29uZmlnKWAgdG8gcmV0dXJuIGEgbmV3IGNsaWVudFwiKTtcbiAgICB9XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9jbGllbnRDb25maWcsIGluaXRDb25maWcobmV3Q29uZmlnLCBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudENvbmZpZykgfHwge30pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgdGhlIGNsaWVudCB3aXRoIGEgbmV3IChwYXJ0aWFsKSBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gbmV3Q29uZmlnIC0gTmV3IGNsaWVudCBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMsIHNoYWxsb3dseSBtZXJnZWQgd2l0aCBleGlzdGluZyBjb25maWd1cmF0aW9uXG4gICAqL1xuICB3aXRoQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHJldHVybiBuZXcgX09ic2VydmFibGVTYW5pdHlDbGllbnQoX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIHtcbiAgICAgIC4uLnRoaXMuY29uZmlnKCksXG4gICAgICAuLi5uZXdDb25maWdcbiAgICB9KTtcbiAgfVxuICBmZXRjaChxdWVyeSwgcGFyYW1zKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIHJldHVybiBfZmV0Y2godGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIHF1ZXJ5LCBwYXJhbXMsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHNpbmdsZSBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiBJRC5cbiAgICpcbiAgICogQHBhcmFtIGlkIC0gRG9jdW1lbnQgSUQgdG8gZmV0Y2hcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICovXG4gIGdldERvY3VtZW50KGlkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9nZXREb2N1bWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgaWQsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBtdWx0aXBsZSBkb2N1bWVudHMgaW4gb25lIHJlcXVlc3QuXG4gICAqIFNob3VsZCBiZSB1c2VkIHNwYXJpbmdseSAtIHBlcmZvcm1pbmcgYSBxdWVyeSBpcyB1c3VhbGx5IGEgYmV0dGVyIG9wdGlvbi5cbiAgICogVGhlIG9yZGVyL3Bvc2l0aW9uIG9mIGRvY3VtZW50cyBpcyBwcmVzZXJ2ZWQgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGFycmF5IG9mIElEcy5cbiAgICogSWYgYW55IG9mIHRoZSBkb2N1bWVudHMgYXJlIG1pc3NpbmcsIHRoZXkgd2lsbCBiZSByZXBsYWNlZCBieSBhIGBudWxsYCBlbnRyeSBpbiB0aGUgcmV0dXJuZWQgYXJyYXlcbiAgICpcbiAgICogQHBhcmFtIGlkcyAtIERvY3VtZW50IElEcyB0byBmZXRjaFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlcXVlc3Qgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RG9jdW1lbnRzKGlkcywgb3B0aW9ucykge1xuICAgIHJldHVybiBfZ2V0RG9jdW1lbnRzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBpZHMsIG9wdGlvbnMpO1xuICB9XG4gIGNyZWF0ZShkb2N1bWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiBfY3JlYXRlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBkb2N1bWVudCwgXCJjcmVhdGVcIiwgb3B0aW9ucyk7XG4gIH1cbiAgY3JlYXRlSWZOb3RFeGlzdHMoZG9jdW1lbnQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX2NyZWF0ZUlmTm90RXhpc3RzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBkb2N1bWVudCwgb3B0aW9ucyk7XG4gIH1cbiAgY3JlYXRlT3JSZXBsYWNlKGRvY3VtZW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVPclJlcGxhY2UodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIGRvY3VtZW50LCBvcHRpb25zKTtcbiAgfVxuICBkZWxldGUoc2VsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9kZWxldGUodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIHNlbGVjdGlvbiwgb3B0aW9ucyk7XG4gIH1cbiAgbXV0YXRlKG9wZXJhdGlvbnMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX211dGF0ZSh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgb3BlcmF0aW9ucywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBidWlsZGFibGUgcGF0Y2ggb2Ygb3BlcmF0aW9ucyB0byBwZXJmb3JtXG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3Rpb24gLSBEb2N1bWVudCBJRCwgYW4gYXJyYXkgb2YgZG9jdW1lbnQgSURzLCBvciBhbiBvYmplY3Qgd2l0aCBgcXVlcnlgIGFuZCBvcHRpb25hbCBgcGFyYW1zYCwgZGVmaW5pbmcgd2hpY2ggZG9jdW1lbnQocykgdG8gcGF0Y2hcbiAgICogQHBhcmFtIG9wZXJhdGlvbnMgLSBPcHRpb25hbCBvYmplY3Qgb2YgcGF0Y2ggb3BlcmF0aW9ucyB0byBpbml0aWFsaXplIHRoZSBwYXRjaCBpbnN0YW5jZSB3aXRoXG4gICAqIEByZXR1cm5zIFBhdGNoIGluc3RhbmNlIC0gY2FsbCBgLmNvbW1pdCgpYCB0byBwZXJmb3JtIHRoZSBvcGVyYXRpb25zIGRlZmluZWRcbiAgICovXG4gIHBhdGNoKHNlbGVjdGlvbiwgb3BlcmF0aW9ucykge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZVBhdGNoKHNlbGVjdGlvbiwgb3BlcmF0aW9ucywgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyB0cmFuc2FjdGlvbiBvZiBtdXRhdGlvbnNcbiAgICpcbiAgICogQHBhcmFtIG9wZXJhdGlvbnMgLSBPcHRpb25hbCBhcnJheSBvZiBtdXRhdGlvbiBvcGVyYXRpb25zIHRvIGluaXRpYWxpemUgdGhlIHRyYW5zYWN0aW9uIGluc3RhbmNlIHdpdGhcbiAgICovXG4gIHRyYW5zYWN0aW9uKG9wZXJhdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogUGVyZm9ybSBhbiBIVFRQIHJlcXVlc3QgYWdhaW5zdCB0aGUgU2FuaXR5IEFQSVxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlcXVlc3Qgb3B0aW9uc1xuICAgKi9cbiAgcmVxdWVzdChvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9yZXF1ZXN0KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgU2FuaXR5IEFQSSBVUkwgZm9yIHRoZSBVUkkgcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIHVyaSAtIFVSSS9wYXRoIHRvIGJ1aWxkIFVSTCBmb3JcbiAgICogQHBhcmFtIGNhblVzZUNkbiAtIFdoZXRoZXIgb3Igbm90IHRvIGFsbG93IHVzaW5nIHRoZSBBUEkgQ0ROIGZvciB0aGlzIHJvdXRlXG4gICAqL1xuICBnZXRVcmwodXJpLCBjYW5Vc2VDZG4pIHtcbiAgICByZXR1cm4gX2dldFVybCh0aGlzLCB1cmksIGNhblVzZUNkbik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIFNhbml0eSBBUEkgVVJMIGZvciB0aGUgZGF0YSBvcGVyYXRpb24gYW5kIHBhdGggcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIG9wZXJhdGlvbiAtIERhdGEgb3BlcmF0aW9uIChlZyBgcXVlcnlgLCBgbXV0YXRlYCwgYGxpc3RlbmAgb3Igc2ltaWxhcilcbiAgICogQHBhcmFtIHBhdGggLSBQYXRoIHRvIGFwcGVuZCBhZnRlciB0aGUgb3BlcmF0aW9uXG4gICAqL1xuICBnZXREYXRhVXJsKG9wZXJhdGlvbiwgcGF0aCkge1xuICAgIHJldHVybiBfZ2V0RGF0YVVybCh0aGlzLCBvcGVyYXRpb24sIHBhdGgpO1xuICB9XG59O1xuX2NsaWVudENvbmZpZyA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QgPSBuZXcgV2Vha01hcCgpO1xubGV0IE9ic2VydmFibGVTYW5pdHlDbGllbnQgPSBfT2JzZXJ2YWJsZVNhbml0eUNsaWVudDtcbmNvbnN0IF9TYW5pdHlDbGllbnQgPSBjbGFzcyBfU2FuaXR5Q2xpZW50IHtcbiAgY29uc3RydWN0b3IoaHR0cFJlcXVlc3QpIHtcbiAgICBsZXQgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBkZWZhdWx0Q29uZmlnO1xuICAgIC8qKlxuICAgICAqIFByaXZhdGUgcHJvcGVydGllc1xuICAgICAqL1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2xpZW50Q29uZmlnMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2h0dHBSZXF1ZXN0Miwgdm9pZCAwKTtcbiAgICAvKipcbiAgICAgKiBJbnN0YW5jZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgdGhpcy5saXN0ZW4gPSBfbGlzdGVuO1xuICAgIHRoaXMuY29uZmlnKGNvbmZpZyk7XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9odHRwUmVxdWVzdDIsIGh0dHBSZXF1ZXN0KTtcbiAgICB0aGlzLmFzc2V0cyA9IG5ldyBBc3NldHNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpKTtcbiAgICB0aGlzLmRhdGFzZXRzID0gbmV3IERhdGFzZXRzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSk7XG4gICAgdGhpcy5wcm9qZWN0cyA9IG5ldyBQcm9qZWN0c0NsaWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MikpO1xuICAgIHRoaXMudXNlcnMgPSBuZXcgVXNlcnNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpKTtcbiAgICB0aGlzLm9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZVNhbml0eUNsaWVudChodHRwUmVxdWVzdCwgY29uZmlnKTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgdGhlIGNsaWVudCAtIHJldHVybnMgYSBuZXcgaW5zdGFuY2VcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX1Nhbml0eUNsaWVudChfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIHRoaXMuY29uZmlnKCkpO1xuICB9XG4gIGNvbmZpZyhuZXdDb25maWcpIHtcbiAgICBpZiAobmV3Q29uZmlnID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLl9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnMilcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudENvbmZpZzIpICYmIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnMikuYWxsb3dSZWNvbmZpZ3VyZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4aXN0aW5nIGNsaWVudCBpbnN0YW5jZSBjYW5ub3QgYmUgcmVjb25maWd1cmVkIC0gdXNlIGB3aXRoQ29uZmlnKG5ld0NvbmZpZylgIHRvIHJldHVybiBhIG5ldyBjbGllbnRcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLm9ic2VydmFibGUpIHtcbiAgICAgIHRoaXMub2JzZXJ2YWJsZS5jb25maWcobmV3Q29uZmlnKTtcbiAgICB9XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9jbGllbnRDb25maWcyLCBpbml0Q29uZmlnKG5ld0NvbmZpZywgX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcyKSB8fCB7fSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgY2xpZW50IHdpdGggYSBuZXcgKHBhcnRpYWwpIGNvbmZpZ3VyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuZXdDb25maWcgLSBOZXcgY2xpZW50IGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcywgc2hhbGxvd2x5IG1lcmdlZCB3aXRoIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHdpdGhDb25maWcobmV3Q29uZmlnKSB7XG4gICAgcmV0dXJuIG5ldyBfU2FuaXR5Q2xpZW50KF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwge1xuICAgICAgLi4udGhpcy5jb25maWcoKSxcbiAgICAgIC4uLm5ld0NvbmZpZ1xuICAgIH0pO1xuICB9XG4gIGZldGNoKHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgcmV0dXJuIHJ4anMubGFzdFZhbHVlRnJvbShfZmV0Y2godGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCBxdWVyeSwgcGFyYW1zLCBvcHRpb25zKSk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgc2luZ2xlIGRvY3VtZW50IHdpdGggdGhlIGdpdmVuIElELlxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBEb2N1bWVudCBJRCB0byBmZXRjaFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlcXVlc3Qgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RG9jdW1lbnQoaWQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcnhqcy5sYXN0VmFsdWVGcm9tKF9nZXREb2N1bWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIGlkLCBvcHRpb25zKSk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIG11bHRpcGxlIGRvY3VtZW50cyBpbiBvbmUgcmVxdWVzdC5cbiAgICogU2hvdWxkIGJlIHVzZWQgc3BhcmluZ2x5IC0gcGVyZm9ybWluZyBhIHF1ZXJ5IGlzIHVzdWFsbHkgYSBiZXR0ZXIgb3B0aW9uLlxuICAgKiBUaGUgb3JkZXIvcG9zaXRpb24gb2YgZG9jdW1lbnRzIGlzIHByZXNlcnZlZCBiYXNlZCBvbiB0aGUgb3JpZ2luYWwgYXJyYXkgb2YgSURzLlxuICAgKiBJZiBhbnkgb2YgdGhlIGRvY3VtZW50cyBhcmUgbWlzc2luZywgdGhleSB3aWxsIGJlIHJlcGxhY2VkIGJ5IGEgYG51bGxgIGVudHJ5IGluIHRoZSByZXR1cm5lZCBhcnJheVxuICAgKlxuICAgKiBAcGFyYW0gaWRzIC0gRG9jdW1lbnQgSURzIHRvIGZldGNoXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gICAqL1xuICBnZXREb2N1bWVudHMoaWRzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHJ4anMubGFzdFZhbHVlRnJvbShfZ2V0RG9jdW1lbnRzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgaWRzLCBvcHRpb25zKSk7XG4gIH1cbiAgY3JlYXRlKGRvY3VtZW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHJ4anMubGFzdFZhbHVlRnJvbShfY3JlYXRlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgZG9jdW1lbnQsIFwiY3JlYXRlXCIsIG9wdGlvbnMpKTtcbiAgfVxuICBjcmVhdGVJZk5vdEV4aXN0cyhkb2N1bWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiByeGpzLmxhc3RWYWx1ZUZyb20oX2NyZWF0ZUlmTm90RXhpc3RzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgZG9jdW1lbnQsIG9wdGlvbnMpKTtcbiAgfVxuICBjcmVhdGVPclJlcGxhY2UoZG9jdW1lbnQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcnhqcy5sYXN0VmFsdWVGcm9tKF9jcmVhdGVPclJlcGxhY2UodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCBkb2N1bWVudCwgb3B0aW9ucykpO1xuICB9XG4gIGRlbGV0ZShzZWxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcnhqcy5sYXN0VmFsdWVGcm9tKF9kZWxldGUodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCBzZWxlY3Rpb24sIG9wdGlvbnMpKTtcbiAgfVxuICBtdXRhdGUob3BlcmF0aW9ucywgb3B0aW9ucykge1xuICAgIHJldHVybiByeGpzLmxhc3RWYWx1ZUZyb20oX211dGF0ZSh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIG9wZXJhdGlvbnMsIG9wdGlvbnMpKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGJ1aWxkYWJsZSBwYXRjaCBvZiBvcGVyYXRpb25zIHRvIHBlcmZvcm1cbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdGlvbiAtIERvY3VtZW50IElELCBhbiBhcnJheSBvZiBkb2N1bWVudCBJRHMsIG9yIGFuIG9iamVjdCB3aXRoIGBxdWVyeWAgYW5kIG9wdGlvbmFsIGBwYXJhbXNgLCBkZWZpbmluZyB3aGljaCBkb2N1bWVudChzKSB0byBwYXRjaFxuICAgKiBAcGFyYW0gb3BlcmF0aW9ucyAtIE9wdGlvbmFsIG9iamVjdCBvZiBwYXRjaCBvcGVyYXRpb25zIHRvIGluaXRpYWxpemUgdGhlIHBhdGNoIGluc3RhbmNlIHdpdGhcbiAgICogQHJldHVybnMgUGF0Y2ggaW5zdGFuY2UgLSBjYWxsIGAuY29tbWl0KClgIHRvIHBlcmZvcm0gdGhlIG9wZXJhdGlvbnMgZGVmaW5lZFxuICAgKi9cbiAgcGF0Y2goZG9jdW1lbnRJZCwgb3BlcmF0aW9ucykge1xuICAgIHJldHVybiBuZXcgUGF0Y2goZG9jdW1lbnRJZCwgb3BlcmF0aW9ucywgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyB0cmFuc2FjdGlvbiBvZiBtdXRhdGlvbnNcbiAgICpcbiAgICogQHBhcmFtIG9wZXJhdGlvbnMgLSBPcHRpb25hbCBhcnJheSBvZiBtdXRhdGlvbiBvcGVyYXRpb25zIHRvIGluaXRpYWxpemUgdGhlIHRyYW5zYWN0aW9uIGluc3RhbmNlIHdpdGhcbiAgICovXG4gIHRyYW5zYWN0aW9uKG9wZXJhdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgcmVxdWVzdCBhZ2FpbnN0IHRoZSBTYW5pdHkgQVBJXG4gICAqIE5PVEU6IE9ubHkgdXNlIHRoaXMgZm9yIFNhbml0eSBBUEkgZW5kcG9pbnRzLCBub3QgZm9yIHlvdXIgb3duIEFQSXMhXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSByZXNwb25zZSBib2R5XG4gICAqL1xuICByZXF1ZXN0KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcnhqcy5sYXN0VmFsdWVGcm9tKF9yZXF1ZXN0KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgb3B0aW9ucykpO1xuICB9XG4gIC8qKlxuICAgKiBQZXJmb3JtIGFuIEhUVFAgcmVxdWVzdCBhIGAvZGF0YWAgc3ViLWVuZHBvaW50XG4gICAqIE5PVEU6IENvbnNpZGVyZWQgaW50ZXJuYWwsIHRodXMgbWFya2VkIGFzIGRlcHJlY2F0ZWQuIFVzZSBgcmVxdWVzdGAgaW5zdGVhZC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgLSBVc2UgYHJlcXVlc3QoKWAgb3IgeW91ciBvd24gSFRUUCBsaWJyYXJ5IGluc3RlYWRcbiAgICogQHBhcmFtIGVuZHBvaW50IC0gRW5kcG9pbnQgdG8gaGl0IChtdXRhdGUsIHF1ZXJ5IGV0YylcbiAgICogQHBhcmFtIGJvZHkgLSBSZXF1ZXN0IGJvZHlcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYXRhUmVxdWVzdChlbmRwb2ludCwgYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiByeGpzLmxhc3RWYWx1ZUZyb20oX2RhdGFSZXF1ZXN0KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgZW5kcG9pbnQsIGJvZHksIG9wdGlvbnMpKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgU2FuaXR5IEFQSSBVUkwgZm9yIHRoZSBVUkkgcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIHVyaSAtIFVSSS9wYXRoIHRvIGJ1aWxkIFVSTCBmb3JcbiAgICogQHBhcmFtIGNhblVzZUNkbiAtIFdoZXRoZXIgb3Igbm90IHRvIGFsbG93IHVzaW5nIHRoZSBBUEkgQ0ROIGZvciB0aGlzIHJvdXRlXG4gICAqL1xuICBnZXRVcmwodXJpLCBjYW5Vc2VDZG4pIHtcbiAgICByZXR1cm4gX2dldFVybCh0aGlzLCB1cmksIGNhblVzZUNkbik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIFNhbml0eSBBUEkgVVJMIGZvciB0aGUgZGF0YSBvcGVyYXRpb24gYW5kIHBhdGggcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIG9wZXJhdGlvbiAtIERhdGEgb3BlcmF0aW9uIChlZyBgcXVlcnlgLCBgbXV0YXRlYCwgYGxpc3RlbmAgb3Igc2ltaWxhcilcbiAgICogQHBhcmFtIHBhdGggLSBQYXRoIHRvIGFwcGVuZCBhZnRlciB0aGUgb3BlcmF0aW9uXG4gICAqL1xuICBnZXREYXRhVXJsKG9wZXJhdGlvbiwgcGF0aCkge1xuICAgIHJldHVybiBfZ2V0RGF0YVVybCh0aGlzLCBvcGVyYXRpb24sIHBhdGgpO1xuICB9XG59O1xuX2NsaWVudENvbmZpZzIgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0MiA9IG5ldyBXZWFrTWFwKCk7XG5sZXQgU2FuaXR5Q2xpZW50ID0gX1Nhbml0eUNsaWVudDtcbmZ1bmN0aW9uIGRlZmluZUNyZWF0ZUNsaWVudEV4cG9ydHMoZW52TWlkZGxld2FyZSwgQ2xhc3NDb25zdHJ1Y3Rvcikge1xuICBjb25zdCBodHRwUmVxdWVzdCA9IGRlZmluZUh0dHBSZXF1ZXN0KGVudk1pZGRsZXdhcmUsIHt9KTtcbiAgY29uc3QgcmVxdWVzdGVyID0gaHR0cFJlcXVlc3QuZGVmYXVsdFJlcXVlc3RlcjtcbiAgY29uc3QgY3JlYXRlQ2xpZW50ID0gY29uZmlnID0+IG5ldyBDbGFzc0NvbnN0cnVjdG9yKGRlZmluZUh0dHBSZXF1ZXN0KGVudk1pZGRsZXdhcmUsIHtcbiAgICBtYXhSZXRyaWVzOiBjb25maWcubWF4UmV0cmllcyxcbiAgICByZXRyeURlbGF5OiBjb25maWcucmV0cnlEZWxheVxuICB9KSwgY29uZmlnKTtcbiAgcmV0dXJuIHtcbiAgICByZXF1ZXN0ZXIsXG4gICAgY3JlYXRlQ2xpZW50XG4gIH07XG59XG5mdW5jdGlvbiBkZWZpbmVEZXByZWNhdGVkQ3JlYXRlQ2xpZW50KGNyZWF0ZUNsaWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gZGVwcmVjYXRlZENyZWF0ZUNsaWVudChjb25maWcpIHtcbiAgICBwcmludE5vRGVmYXVsdEV4cG9ydCgpO1xuICAgIHJldHVybiBjcmVhdGVDbGllbnQoY29uZmlnKTtcbiAgfTtcbn1cbnZhciBuYW1lID0gXCJAc2FuaXR5L2NsaWVudFwiO1xudmFyIHZlcnNpb24gPSBcIjYuNy4xXCI7XG5jb25zdCBtaWRkbGV3YXJlID0gW21pZGRsZXdhcmUkMS5kZWJ1Zyh7XG4gIHZlcmJvc2U6IHRydWUsXG4gIG5hbWVzcGFjZTogXCJzYW5pdHk6Y2xpZW50XCJcbn0pLCBtaWRkbGV3YXJlJDEuaGVhZGVycyh7XG4gIFwiVXNlci1BZ2VudFwiOiBcIlwiLmNvbmNhdChuYW1lLCBcIiBcIikuY29uY2F0KHZlcnNpb24pXG59KSxcbi8vIEVuYWJsZSBrZWVwLWFsaXZlLCBhbmQgaW4gYWRkaXRpb24gbGltaXQgdGhlIG51bWJlciBvZiBzb2NrZXRzIHRoYXQgY2FuIGJlIG9wZW5lZC5cbi8vIFRoaXMgYXZvaWRzIG9wZW5pbmcgdG9vIG1hbnkgY29ubmVjdGlvbnMgdG8gdGhlIHNlcnZlciBpZiBzb21lb25lIHRyaWVzIHRvIGV4ZWN1dGVcbi8vIGEgYnVuY2ggb2YgcmVxdWVzdHMgaW4gcGFyYWxsZWwuIEl0J3MgcmVjb21tZW5kZWQgdG8gaGF2ZSBhIGNvbmN1cnJlbmN5IGxpbWl0XG4vLyBhdCBhIFwiaGlnaGVyIGxpbWl0XCIgKGkuZS4geW91IHNob3VsZG4ndCBhY3R1YWxseSBleGVjdXRlIGh1bmRyZWRzIG9mIHJlcXVlc3RzIGluIHBhcmFsbGVsKSxcbi8vIGFuZCB0aGlzIGlzIG1haW5seSB0byBtaW5pbWl6ZSB0aGUgaW1wYWN0IGZvciB0aGUgbmV0d29yayBhbmQgc2VydmVyLlxuLy9cbi8vIFdlJ3JlIGN1cnJlbnRseSBtYXRjaGluZyB0aGUgc2FtZSBkZWZhdWx0cyBhcyBicm93c2Vyczpcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI2MDAzNzU2L2lzLXRoZXJlLWEtbGltaXQtcHJhY3RpY2FsLW9yLW90aGVyd2lzZS10by10aGUtbnVtYmVyLW9mLXdlYi1zb2NrZXRzLWEtcGFnZS1vcFxubWlkZGxld2FyZSQxLmFnZW50KHtcbiAga2VlcEFsaXZlOiB0cnVlLFxuICBtYXhTb2NrZXRzOiAzMCxcbiAgbWF4VG90YWxTb2NrZXRzOiAyNTZcbn0pXTtcbmNvbnN0IGV4cCA9IGRlZmluZUNyZWF0ZUNsaWVudEV4cG9ydHMobWlkZGxld2FyZSwgU2FuaXR5Q2xpZW50KTtcbmNvbnN0IHJlcXVlc3RlciA9IGV4cC5yZXF1ZXN0ZXI7XG5jb25zdCBjcmVhdGVDbGllbnQgPSBleHAuY3JlYXRlQ2xpZW50O1xuY29uc3QgZGVwcmVjYXRlZENyZWF0ZUNsaWVudCA9IGRlZmluZURlcHJlY2F0ZWRDcmVhdGVDbGllbnQoY3JlYXRlQ2xpZW50KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAndW5zdGFibGVfX2FkYXB0ZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRJdC5hZGFwdGVyO1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAndW5zdGFibGVfX2Vudmlyb25tZW50Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0SXQuZW52aXJvbm1lbnQ7XG4gIH1cbn0pO1xuZXhwb3J0cy5CYXNlUGF0Y2ggPSBCYXNlUGF0Y2g7XG5leHBvcnRzLkJhc2VUcmFuc2FjdGlvbiA9IEJhc2VUcmFuc2FjdGlvbjtcbmV4cG9ydHMuQ2xpZW50RXJyb3IgPSBDbGllbnRFcnJvcjtcbmV4cG9ydHMuT2JzZXJ2YWJsZVBhdGNoID0gT2JzZXJ2YWJsZVBhdGNoO1xuZXhwb3J0cy5PYnNlcnZhYmxlU2FuaXR5Q2xpZW50ID0gT2JzZXJ2YWJsZVNhbml0eUNsaWVudDtcbmV4cG9ydHMuT2JzZXJ2YWJsZVRyYW5zYWN0aW9uID0gT2JzZXJ2YWJsZVRyYW5zYWN0aW9uO1xuZXhwb3J0cy5QYXRjaCA9IFBhdGNoO1xuZXhwb3J0cy5TYW5pdHlDbGllbnQgPSBTYW5pdHlDbGllbnQ7XG5leHBvcnRzLlNlcnZlckVycm9yID0gU2VydmVyRXJyb3I7XG5leHBvcnRzLlRyYW5zYWN0aW9uID0gVHJhbnNhY3Rpb247XG5leHBvcnRzLmNyZWF0ZUNsaWVudCA9IGNyZWF0ZUNsaWVudDtcbmV4cG9ydHMuZGVmYXVsdCA9IGRlcHJlY2F0ZWRDcmVhdGVDbGllbnQ7XG5leHBvcnRzLnJlcXVlc3RlciA9IHJlcXVlc3Rlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmNqcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/client/dist/index.cjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/eventsource/node.js":
/*!**************************************************!*\
  !*** ./node_modules/@sanity/eventsource/node.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__(/*! eventsource */ \"(ssr)/./node_modules/eventsource/lib/eventsource.js\")\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9ldmVudHNvdXJjZS9ub2RlLmpzIiwibWFwcGluZ3MiOiJBQUFBLDhHQUF1QyIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvZXZlbnRzb3VyY2Uvbm9kZS5qcz81MTFjIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnZXZlbnRzb3VyY2UnKVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/eventsource/node.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/eventsource/node.js":
/*!**************************************************!*\
  !*** ./node_modules/@sanity/eventsource/node.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nmodule.exports = __webpack_require__(/*! eventsource */ \"(action-browser)/./node_modules/eventsource/lib/eventsource.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2V2ZW50c291cmNlL25vZGUuanMiLCJtYXBwaW5ncyI6IjtBQUFBQSx5SEFBeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2V2ZW50c291cmNlL25vZGUuanM/ZDg4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2V2ZW50c291cmNlJylcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicmVxdWlyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/eventsource/node.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/eventsource/node.js":
/*!**************************************************!*\
  !*** ./node_modules/@sanity/eventsource/node.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nmodule.exports = __webpack_require__(/*! eventsource */ \"(rsc)/./node_modules/eventsource/lib/eventsource.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9ldmVudHNvdXJjZS9ub2RlLmpzIiwibWFwcGluZ3MiOiI7QUFBQUEsOEdBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2liYmFyb3NhLXByb2QvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9ldmVudHNvdXJjZS9ub2RlLmpzP2Q4ODkiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCdldmVudHNvdXJjZScpXG4iXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/eventsource/node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/client/dist/index.cjs.js":
/*!*******************************************************!*\
  !*** ./node_modules/@sanity/client/dist/index.cjs.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePatch: () => (/* binding */ BasePatch),\n/* harmony export */   BaseTransaction: () => (/* binding */ BaseTransaction),\n/* harmony export */   ClientError: () => (/* binding */ ClientError),\n/* harmony export */   ObservablePatch: () => (/* binding */ ObservablePatch),\n/* harmony export */   ObservableSanityClient: () => (/* binding */ ObservableSanityClient),\n/* harmony export */   ObservableTransaction: () => (/* binding */ ObservableTransaction),\n/* harmony export */   Patch: () => (/* binding */ Patch),\n/* harmony export */   SanityClient: () => (/* binding */ SanityClient),\n/* harmony export */   ServerError: () => (/* binding */ ServerError),\n/* harmony export */   Transaction: () => (/* binding */ Transaction),\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   requester: () => (/* binding */ requester),\n/* harmony export */   unstable__adapter: () => (/* binding */ unstable__adapter),\n/* harmony export */   unstable__environment: () => (/* binding */ unstable__environment)\n/* harmony export */ });\n/* harmony import */ var _index_cjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.cjs */ \"(ssr)/./node_modules/@sanity/client/dist/index.cjs\");\n\n\nconst unstable__adapter = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.unstable__adapter;\nconst unstable__environment = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.unstable__environment;\nconst BasePatch = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.BasePatch;\nconst BaseTransaction = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.BaseTransaction;\nconst ClientError = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.ClientError;\nconst ObservablePatch = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.ObservablePatch;\nconst ObservableSanityClient = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.ObservableSanityClient;\nconst ObservableTransaction = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.ObservableTransaction;\nconst Patch = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.Patch;\nconst SanityClient = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.SanityClient;\nconst ServerError = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.ServerError;\nconst Transaction = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.Transaction;\nconst createClient = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.createClient;\nconst requester = _index_cjs__WEBPACK_IMPORTED_MODULE_0__.requester;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_index_cjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9jbGllbnQvZGlzdC9pbmRleC5janMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4Qjs7QUFFdkIsMEJBQTBCLHlEQUFxQjtBQUMvQyw4QkFBOEIsNkRBQXlCO0FBQ3ZELGtCQUFrQixpREFBYTtBQUMvQix3QkFBd0IsdURBQW1CO0FBQzNDLG9CQUFvQixtREFBZTtBQUNuQyx3QkFBd0IsdURBQW1CO0FBQzNDLCtCQUErQiw4REFBMEI7QUFDekQsOEJBQThCLDZEQUF5QjtBQUN2RCxjQUFjLDZDQUFTO0FBQ3ZCLHFCQUFxQixvREFBZ0I7QUFDckMsb0JBQW9CLG1EQUFlO0FBQ25DLG9CQUFvQixtREFBZTtBQUNuQyxxQkFBcUIsb0RBQWdCO0FBQ3JDLGtCQUFrQixpREFBYTs7QUFFdEMsaUVBQWUsa0RBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvY2xpZW50L2Rpc3QvaW5kZXguY2pzLmpzPzNhODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNqcyBmcm9tICcuL2luZGV4LmNqcyc7XG5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9fYWRhcHRlciA9IGNqcy51bnN0YWJsZV9fYWRhcHRlcjtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9fZW52aXJvbm1lbnQgPSBjanMudW5zdGFibGVfX2Vudmlyb25tZW50O1xuZXhwb3J0IGNvbnN0IEJhc2VQYXRjaCA9IGNqcy5CYXNlUGF0Y2g7XG5leHBvcnQgY29uc3QgQmFzZVRyYW5zYWN0aW9uID0gY2pzLkJhc2VUcmFuc2FjdGlvbjtcbmV4cG9ydCBjb25zdCBDbGllbnRFcnJvciA9IGNqcy5DbGllbnRFcnJvcjtcbmV4cG9ydCBjb25zdCBPYnNlcnZhYmxlUGF0Y2ggPSBjanMuT2JzZXJ2YWJsZVBhdGNoO1xuZXhwb3J0IGNvbnN0IE9ic2VydmFibGVTYW5pdHlDbGllbnQgPSBjanMuT2JzZXJ2YWJsZVNhbml0eUNsaWVudDtcbmV4cG9ydCBjb25zdCBPYnNlcnZhYmxlVHJhbnNhY3Rpb24gPSBjanMuT2JzZXJ2YWJsZVRyYW5zYWN0aW9uO1xuZXhwb3J0IGNvbnN0IFBhdGNoID0gY2pzLlBhdGNoO1xuZXhwb3J0IGNvbnN0IFNhbml0eUNsaWVudCA9IGNqcy5TYW5pdHlDbGllbnQ7XG5leHBvcnQgY29uc3QgU2VydmVyRXJyb3IgPSBjanMuU2VydmVyRXJyb3I7XG5leHBvcnQgY29uc3QgVHJhbnNhY3Rpb24gPSBjanMuVHJhbnNhY3Rpb247XG5leHBvcnQgY29uc3QgY3JlYXRlQ2xpZW50ID0gY2pzLmNyZWF0ZUNsaWVudDtcbmV4cG9ydCBjb25zdCByZXF1ZXN0ZXIgPSBjanMucmVxdWVzdGVyO1xuXG5leHBvcnQgZGVmYXVsdCBjanMuZGVmYXVsdDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/client/dist/index.cjs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodeIntoResult: () => (/* binding */ encodeIntoResult),\n/* harmony export */   parseNormalisedJsonPath: () => (/* binding */ parseNormalisedJsonPath),\n/* harmony export */   resolveMapping: () => (/* binding */ resolveMapping),\n/* harmony export */   walkMap: () => (/* binding */ walkMap)\n/* harmony export */ });\nconst ESCAPE = {\n  \"\\f\": \"\\\\f\",\n  \"\\n\": \"\\\\n\",\n  \"\\r\": \"\\\\r\",\n  \"\t\": \"\\\\t\",\n  \"'\": \"\\\\'\",\n  \"\\\\\": \"\\\\\\\\\"\n};\nconst UNESCAPE = {\n  \"\\\\f\": \"\\f\",\n  \"\\\\n\": \"\\n\",\n  \"\\\\r\": \"\\r\",\n  \"\\\\t\": \"\t\",\n  \"\\\\'\": \"'\",\n  \"\\\\\\\\\": \"\\\\\"\n};\nfunction normalisedJsonPath(path) {\n  return \"$\".concat(path.map(key => {\n    if (typeof key === \"string\") {\n      const escapedKey = key.replace(/[\\f\\n\\r\\t'\\\\]/g, match => {\n        return ESCAPE[match];\n      });\n      return \"['\".concat(escapedKey, \"']\");\n    }\n    return \"[\".concat(key, \"]\");\n  }).join(\"\"));\n}\nfunction parseNormalisedJsonPath(path) {\n  const parsed = [];\n  const parseRe = /\\['(.*?)'\\]|\\[(\\d+)\\]/g;\n  let match;\n  while ((match = parseRe.exec(path)) !== null) {\n    if (match[1] !== void 0) {\n      const key = match[1].replace(/\\\\(\\\\|f|n|r|t|')/g, m => {\n        return UNESCAPE[m];\n      });\n      parsed.push(key);\n      continue;\n    }\n    if (match[2] !== void 0) {\n      parsed.push(parseInt(match[2], 10));\n      continue;\n    }\n  }\n  return parsed;\n}\nfunction isRecord(value) {\n  return typeof value === \"object\" && value !== null;\n}\nfunction isArray(value) {\n  return value !== null && Array.isArray(value);\n}\nfunction encode(result, csm, encoder) {\n  return encodeIntoResult(result, csm, encoder);\n}\nfunction encodeIntoResult(result, csm, encoder) {\n  return walkMap(result, (value, path) => {\n    if (typeof value !== \"string\") {\n      return value;\n    }\n    const resolveMappingResult = resolveMapping(path, csm);\n    if (!resolveMappingResult) {\n      return value;\n    }\n    const [mapping,, pathSuffix] = resolveMappingResult;\n    if (mapping.type !== \"value\") {\n      return value;\n    }\n    if (mapping.source.type !== \"documentValue\") {\n      return value;\n    }\n    const sourceDocument =\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    csm.documents[mapping.source.document];\n    const sourcePath = csm.paths[mapping.source.path];\n    return encoder(value, sourceDocument, parseNormalisedJsonPath(sourcePath + pathSuffix));\n  });\n}\nfunction walkMap(value, mappingFn) {\n  let path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  if (isArray(value)) {\n    return value.map((v, idx) => walkMap(v, mappingFn, path.concat(idx)));\n  }\n  if (isRecord(value)) {\n    return Object.fromEntries(Object.entries(value).map(_ref => {\n      let [k, v] = _ref;\n      return [k, walkMap(v, mappingFn, path.concat(k))];\n    }));\n  }\n  return mappingFn(value, path);\n}\nfunction resolveMapping(resultPath, csm, logger) {\n  var _a;\n  const resultJsonPath = normalisedJsonPath(resultPath);\n  if (!csm.mappings) {\n    (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"Missing mappings\", {\n      resultSourceMap: csm\n    });\n    return void 0;\n  }\n  if (csm.mappings[resultJsonPath] !== void 0) {\n    return [csm.mappings[resultJsonPath], resultJsonPath, \"\"];\n  }\n  const mappings = Object.entries(csm.mappings).filter(_ref2 => {\n    let [key] = _ref2;\n    return resultJsonPath.startsWith(key);\n  }).sort((_ref3, _ref4) => {\n    let [key1] = _ref3;\n    let [key2] = _ref4;\n    return key2.length - key1.length;\n  });\n  if (mappings.length == 0) {\n    return void 0;\n  }\n  const [matchedPath, mapping] = mappings[0];\n  const pathSuffix = resultJsonPath.substring(matchedPath.length);\n  return [mapping, matchedPath, pathSuffix];\n}\n\n//# sourceMappingURL=sourcemap-r-TuProy.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L19jaHVua3Mvc291cmNlbWFwLXItVHVQcm95LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NGO0FBQ3RGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2liYmFyb3NhLXByb2QvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L19jaHVua3Mvc291cmNlbWFwLXItVHVQcm95LmpzP2UzNDMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRVNDQVBFID0ge1xuICBcIlxcZlwiOiBcIlxcXFxmXCIsXG4gIFwiXFxuXCI6IFwiXFxcXG5cIixcbiAgXCJcXHJcIjogXCJcXFxcclwiLFxuICBcIlx0XCI6IFwiXFxcXHRcIixcbiAgXCInXCI6IFwiXFxcXCdcIixcbiAgXCJcXFxcXCI6IFwiXFxcXFxcXFxcIlxufTtcbmNvbnN0IFVORVNDQVBFID0ge1xuICBcIlxcXFxmXCI6IFwiXFxmXCIsXG4gIFwiXFxcXG5cIjogXCJcXG5cIixcbiAgXCJcXFxcclwiOiBcIlxcclwiLFxuICBcIlxcXFx0XCI6IFwiXHRcIixcbiAgXCJcXFxcJ1wiOiBcIidcIixcbiAgXCJcXFxcXFxcXFwiOiBcIlxcXFxcIlxufTtcbmZ1bmN0aW9uIG5vcm1hbGlzZWRKc29uUGF0aChwYXRoKSB7XG4gIHJldHVybiBcIiRcIi5jb25jYXQocGF0aC5tYXAoa2V5ID0+IHtcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgZXNjYXBlZEtleSA9IGtleS5yZXBsYWNlKC9bXFxmXFxuXFxyXFx0J1xcXFxdL2csIG1hdGNoID0+IHtcbiAgICAgICAgcmV0dXJuIEVTQ0FQRVttYXRjaF07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBcIlsnXCIuY29uY2F0KGVzY2FwZWRLZXksIFwiJ11cIik7XG4gICAgfVxuICAgIHJldHVybiBcIltcIi5jb25jYXQoa2V5LCBcIl1cIik7XG4gIH0pLmpvaW4oXCJcIikpO1xufVxuZnVuY3Rpb24gcGFyc2VOb3JtYWxpc2VkSnNvblBhdGgocGF0aCkge1xuICBjb25zdCBwYXJzZWQgPSBbXTtcbiAgY29uc3QgcGFyc2VSZSA9IC9cXFsnKC4qPyknXFxdfFxcWyhcXGQrKVxcXS9nO1xuICBsZXQgbWF0Y2g7XG4gIHdoaWxlICgobWF0Y2ggPSBwYXJzZVJlLmV4ZWMocGF0aCkpICE9PSBudWxsKSB7XG4gICAgaWYgKG1hdGNoWzFdICE9PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdLnJlcGxhY2UoL1xcXFwoXFxcXHxmfG58cnx0fCcpL2csIG0gPT4ge1xuICAgICAgICByZXR1cm4gVU5FU0NBUEVbbV07XG4gICAgICB9KTtcbiAgICAgIHBhcnNlZC5wdXNoKGtleSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG1hdGNoWzJdICE9PSB2b2lkIDApIHtcbiAgICAgIHBhcnNlZC5wdXNoKHBhcnNlSW50KG1hdGNoWzJdLCAxMCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBpc1JlY29yZCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5mdW5jdGlvbiBlbmNvZGUocmVzdWx0LCBjc20sIGVuY29kZXIpIHtcbiAgcmV0dXJuIGVuY29kZUludG9SZXN1bHQocmVzdWx0LCBjc20sIGVuY29kZXIpO1xufVxuZnVuY3Rpb24gZW5jb2RlSW50b1Jlc3VsdChyZXN1bHQsIGNzbSwgZW5jb2Rlcikge1xuICByZXR1cm4gd2Fsa01hcChyZXN1bHQsICh2YWx1ZSwgcGF0aCkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgcmVzb2x2ZU1hcHBpbmdSZXN1bHQgPSByZXNvbHZlTWFwcGluZyhwYXRoLCBjc20pO1xuICAgIGlmICghcmVzb2x2ZU1hcHBpbmdSZXN1bHQpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgW21hcHBpbmcsLCBwYXRoU3VmZml4XSA9IHJlc29sdmVNYXBwaW5nUmVzdWx0O1xuICAgIGlmIChtYXBwaW5nLnR5cGUgIT09IFwidmFsdWVcIikge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAobWFwcGluZy5zb3VyY2UudHlwZSAhPT0gXCJkb2N1bWVudFZhbHVlXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3Qgc291cmNlRG9jdW1lbnQgPVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgY3NtLmRvY3VtZW50c1ttYXBwaW5nLnNvdXJjZS5kb2N1bWVudF07XG4gICAgY29uc3Qgc291cmNlUGF0aCA9IGNzbS5wYXRoc1ttYXBwaW5nLnNvdXJjZS5wYXRoXTtcbiAgICByZXR1cm4gZW5jb2Rlcih2YWx1ZSwgc291cmNlRG9jdW1lbnQsIHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoKHNvdXJjZVBhdGggKyBwYXRoU3VmZml4KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gd2Fsa01hcCh2YWx1ZSwgbWFwcGluZ0ZuKSB7XG4gIGxldCBwYXRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBbXTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcCgodiwgaWR4KSA9PiB3YWxrTWFwKHYsIG1hcHBpbmdGbiwgcGF0aC5jb25jYXQoaWR4KSkpO1xuICB9XG4gIGlmIChpc1JlY29yZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHZhbHVlKS5tYXAoX3JlZiA9PiB7XG4gICAgICBsZXQgW2ssIHZdID0gX3JlZjtcbiAgICAgIHJldHVybiBbaywgd2Fsa01hcCh2LCBtYXBwaW5nRm4sIHBhdGguY29uY2F0KGspKV07XG4gICAgfSkpO1xuICB9XG4gIHJldHVybiBtYXBwaW5nRm4odmFsdWUsIHBhdGgpO1xufVxuZnVuY3Rpb24gcmVzb2x2ZU1hcHBpbmcocmVzdWx0UGF0aCwgY3NtLCBsb2dnZXIpIHtcbiAgdmFyIF9hO1xuICBjb25zdCByZXN1bHRKc29uUGF0aCA9IG5vcm1hbGlzZWRKc29uUGF0aChyZXN1bHRQYXRoKTtcbiAgaWYgKCFjc20ubWFwcGluZ3MpIHtcbiAgICAoX2EgPSBsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwobG9nZ2VyLCBcIk1pc3NpbmcgbWFwcGluZ3NcIiwge1xuICAgICAgcmVzdWx0U291cmNlTWFwOiBjc21cbiAgICB9KTtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIGlmIChjc20ubWFwcGluZ3NbcmVzdWx0SnNvblBhdGhdICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gW2NzbS5tYXBwaW5nc1tyZXN1bHRKc29uUGF0aF0sIHJlc3VsdEpzb25QYXRoLCBcIlwiXTtcbiAgfVxuICBjb25zdCBtYXBwaW5ncyA9IE9iamVjdC5lbnRyaWVzKGNzbS5tYXBwaW5ncykuZmlsdGVyKF9yZWYyID0+IHtcbiAgICBsZXQgW2tleV0gPSBfcmVmMjtcbiAgICByZXR1cm4gcmVzdWx0SnNvblBhdGguc3RhcnRzV2l0aChrZXkpO1xuICB9KS5zb3J0KChfcmVmMywgX3JlZjQpID0+IHtcbiAgICBsZXQgW2tleTFdID0gX3JlZjM7XG4gICAgbGV0IFtrZXkyXSA9IF9yZWY0O1xuICAgIHJldHVybiBrZXkyLmxlbmd0aCAtIGtleTEubGVuZ3RoO1xuICB9KTtcbiAgaWYgKG1hcHBpbmdzLmxlbmd0aCA9PSAwKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBjb25zdCBbbWF0Y2hlZFBhdGgsIG1hcHBpbmddID0gbWFwcGluZ3NbMF07XG4gIGNvbnN0IHBhdGhTdWZmaXggPSByZXN1bHRKc29uUGF0aC5zdWJzdHJpbmcobWF0Y2hlZFBhdGgubGVuZ3RoKTtcbiAgcmV0dXJuIFttYXBwaW5nLCBtYXRjaGVkUGF0aCwgcGF0aFN1ZmZpeF07XG59XG5leHBvcnQgeyBlbmNvZGUsIGVuY29kZUludG9SZXN1bHQsIHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoLCByZXNvbHZlTWFwcGluZywgd2Fsa01hcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c291cmNlbWFwLXItVHVQcm95LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/preview-kit/dist/client.js":
/*!*********************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/client.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   mapToEditLinks: () => (/* binding */ mapToEditLinks)\n/* harmony export */ });\n/* harmony import */ var _sanity_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sanity/client */ \"(ssr)/./node_modules/@sanity/client/dist/index.cjs.js\");\n/* harmony import */ var lodash_isplainobject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.isplainobject */ \"(ssr)/./node_modules/lodash.isplainobject/index.js\");\n/* harmony import */ var _csm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./csm.js */ \"(ssr)/./node_modules/@sanity/preview-kit/dist/csm.js\");\n\n\n\nfunction transcodeResponse(_ref) {\n  let {\n    studioUrl,\n    encodeSourceMapAtPath,\n    logger\n  } = _ref;\n  const transcoder = (0,_csm_js__WEBPACK_IMPORTED_MODULE_1__.createTranscoder)({\n    studioUrl,\n    encodeSourceMapAtPath,\n    logger\n  });\n  return {\n    onResponse: response => {\n      var _a, _b, _c, _d, _e, _f, _g;\n      if (!isBodyResponse(response)) {\n        return response;\n      }\n      if (Array.isArray(response.body) || typeof response.body === \"string\" || lodash_isplainobject__WEBPACK_IMPORTED_MODULE_0__(response.body)) {\n        if (!isContentSourceMapBody(response.body)) {\n          if (logger && isResultBody(response.body)) {\n            (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"[@sanity/preview-kit]: Missing Content Source Map from response body\", response.body);\n          }\n          return response;\n        }\n        const transcoderResult = transcoder(response.body.result, response.body.resultSourceMap);\n        if (logger) {\n          const isSkipping = transcoderResult.report.skipped.length;\n          const isEncoding = transcoderResult.report.encoded.length;\n          if (isSkipping || isEncoding) {\n            (_b = (logger == null ? void 0 : logger.groupCollapsed) || logger.log) == null ? void 0 : _b(\"[@sanity/preview-kit]: Stega encoding source map into result\");\n            (_c = logger.log) == null ? void 0 : _c.call(logger, \"[@sanity/preview-kit]: Paths encoded: \".concat(transcoderResult.report.encoded.length, \", skipped: \").concat(transcoderResult.report.skipped.length));\n          }\n          if (transcoderResult.report.encoded.length > 0) {\n            (_d = logger == null ? void 0 : logger.log) == null ? void 0 : _d.call(logger, \"[@sanity/preview-kit]: Table of encoded paths\");\n            (_e = (logger == null ? void 0 : logger.table) || logger.log) == null ? void 0 : _e(transcoderResult.report.encoded);\n          }\n          if (transcoderResult.report.skipped.length > 0) {\n            const skipped = /* @__PURE__ */new Set();\n            for (const {\n              path\n            } of transcoderResult.report.skipped) {\n              skipped.add(path.replace(/\\[\\d+\\]/g, \"[]\"));\n            }\n            (_f = logger == null ? void 0 : logger.log) == null ? void 0 : _f.call(logger, \"[@sanity/preview-kit]: List of skipped paths\", [...skipped.values()]);\n          }\n          if (isSkipping || isEncoding) {\n            (_g = logger == null ? void 0 : logger.groupEnd) == null ? void 0 : _g.call(logger);\n          }\n        }\n        const body = {\n          ...response.body,\n          result: transcoderResult.result\n        };\n        return {\n          ...response,\n          body\n        };\n      }\n      return response;\n    }\n  };\n}\nfunction createHttpRequest(_ref2) {\n  let {\n    studioUrl,\n    encodeSourceMapAtPath,\n    logger\n  } = _ref2;\n  const superRequester = _sanity_client__WEBPACK_IMPORTED_MODULE_2__.requester.clone();\n  superRequester.use(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- support the improved get-it typings\n  transcodeResponse({\n    studioUrl,\n    encodeSourceMapAtPath,\n    logger\n  }));\n  function httpRequest(options) {\n    let requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : superRequester;\n    return requester({\n      maxRedirects: 0,\n      ...options\n    });\n  }\n  httpRequest.defaultRequester = superRequester;\n  return httpRequest;\n}\nfunction isBodyResponse(response) {\n  return typeof response === \"object\" && response !== null;\n}\nfunction isResultBody(body) {\n  return typeof body === \"object\" && body !== null && \"result\" in body;\n}\nfunction isContentSourceMapBody(body) {\n  return typeof body === \"object\" && body !== null && \"resultSourceMap\" in body;\n}\nconst createClient = config => {\n  var _a, _b;\n  const {\n    encodeSourceMap = detectEnableSourceMap(),\n    encodeSourceMapAtPath,\n    studioUrl = detectStudioUrl(),\n    logger,\n    ...options\n  } = config;\n  let shouldEncodeSourceMap = encodeSourceMap === true;\n  if (encodeSourceMap === \"auto\") {\n    shouldEncodeSourceMap = isVercelPreviewEnvironment();\n  }\n  if (typeof encodeSourceMap === \"string\" && encodeSourceMap !== \"auto\") {\n    throw new Error(\"Invalid value for encodeSourceMap: \".concat(encodeSourceMap, \". Did you mean 'auto'?\"));\n  }\n  try {\n    if (shouldEncodeSourceMap && config.resultSourceMap !== false) {\n      if (!studioUrl) {\n        (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"[@sanity/preview-kit]: Content source map enabled client is enabled, but no studioUrl is provided. Falling back to @sanity/client\");\n        return (0,_sanity_client__WEBPACK_IMPORTED_MODULE_2__.createClient)(options);\n      }\n      (_b = logger == null ? void 0 : logger.debug) == null ? void 0 : _b.call(logger, \"[@sanity/preview-kit]: Creating source map enabled client\");\n      const httpRequest = createHttpRequest({\n        encodeSourceMapAtPath,\n        studioUrl,\n        logger\n      });\n      return new _sanity_client__WEBPACK_IMPORTED_MODULE_2__.SanityClient(httpRequest, {\n        ...options,\n        // Source maps by Content Lake are required in order to know where to insert the encoded source maps into strings\n        resultSourceMap: true\n      });\n    }\n  } catch (err) {\n    console.error(\"[@sanity/preview-kit]: Error creating client\", err, \"falling back to non-embedded sourcemap mode\");\n  }\n  return (0,_sanity_client__WEBPACK_IMPORTED_MODULE_2__.createClient)(options);\n};\nfunction isVercelPreviewEnvironment() {\n  try {\n    return /* unsupported import.meta.env.VERCEL_ENV */ undefined.VERCEL_ENV === \"preview\";\n  } catch {}\n  try {\n    return process.env.VERCEL_ENV === \"preview\";\n  } catch {}\n  return false;\n}\nfunction detectEnableSourceMap() {\n  try {\n    return /* unsupported import.meta.env.SANITY_SOURCE_MAP */ undefined.SANITY_SOURCE_MAP === \"true\" || \"auto\";\n  } catch {}\n  try {\n    return process.env.SANITY_SOURCE_MAP === \"true\" || \"auto\";\n  } catch {}\n  return \"auto\";\n}\nfunction detectStudioUrl() {\n  try {\n    return /* unsupported import.meta.env.SANITY_STUDIO_URL */ undefined.SANITY_STUDIO_URL;\n  } catch {}\n  try {\n    return process.env.SANITY_STUDIO_URL;\n  } catch {}\n}\nfunction mapToEditLinks(response, studioUrl) {\n  return (0,_csm_js__WEBPACK_IMPORTED_MODULE_1__.mapToEditLinks)(response.result, response.resultSourceMap, studioUrl);\n}\n\n//# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5RjtBQUN4QztBQUMrQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHFCQUFxQix5REFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxpREFBYTtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHlCQUF5QixxREFBUztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNERBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLGlCQUFpQix3REFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLFNBQVMsNERBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpRUFBMEI7QUFDckMsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtFQUFpQztBQUM1QyxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0VBQWlDO0FBQzVDLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxTQUFTLHVEQUFnQjtBQUN6QjtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvcHJldmlldy1raXQvZGlzdC9jbGllbnQuanM/ZDgwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZXF1ZXN0ZXIsIGNyZWF0ZUNsaWVudCBhcyBjcmVhdGVDbGllbnQkMSwgU2FuaXR5Q2xpZW50IH0gZnJvbSAnQHNhbml0eS9jbGllbnQnO1xuaW1wb3J0IGlzUGxhaW5PYmplY3QgZnJvbSAnbG9kYXNoLmlzcGxhaW5vYmplY3QnO1xuaW1wb3J0IHsgY3JlYXRlVHJhbnNjb2RlciwgbWFwVG9FZGl0TGlua3MgYXMgbWFwVG9FZGl0TGlua3MkMSB9IGZyb20gJy4vY3NtLmpzJztcbmZ1bmN0aW9uIHRyYW5zY29kZVJlc3BvbnNlKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzdHVkaW9VcmwsXG4gICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgIGxvZ2dlclxuICB9ID0gX3JlZjtcbiAgY29uc3QgdHJhbnNjb2RlciA9IGNyZWF0ZVRyYW5zY29kZXIoe1xuICAgIHN0dWRpb1VybCxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgbG9nZ2VyXG4gIH0pO1xuICByZXR1cm4ge1xuICAgIG9uUmVzcG9uc2U6IHJlc3BvbnNlID0+IHtcbiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgIGlmICghaXNCb2R5UmVzcG9uc2UocmVzcG9uc2UpKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkpIHx8IHR5cGVvZiByZXNwb25zZS5ib2R5ID09PSBcInN0cmluZ1wiIHx8IGlzUGxhaW5PYmplY3QocmVzcG9uc2UuYm9keSkpIHtcbiAgICAgICAgaWYgKCFpc0NvbnRlbnRTb3VyY2VNYXBCb2R5KHJlc3BvbnNlLmJvZHkpKSB7XG4gICAgICAgICAgaWYgKGxvZ2dlciAmJiBpc1Jlc3VsdEJvZHkocmVzcG9uc2UuYm9keSkpIHtcbiAgICAgICAgICAgIChfYSA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChsb2dnZXIsIFwiW0BzYW5pdHkvcHJldmlldy1raXRdOiBNaXNzaW5nIENvbnRlbnQgU291cmNlIE1hcCBmcm9tIHJlc3BvbnNlIGJvZHlcIiwgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NvZGVyUmVzdWx0ID0gdHJhbnNjb2RlcihyZXNwb25zZS5ib2R5LnJlc3VsdCwgcmVzcG9uc2UuYm9keS5yZXN1bHRTb3VyY2VNYXApO1xuICAgICAgICBpZiAobG9nZ2VyKSB7XG4gICAgICAgICAgY29uc3QgaXNTa2lwcGluZyA9IHRyYW5zY29kZXJSZXN1bHQucmVwb3J0LnNraXBwZWQubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IGlzRW5jb2RpbmcgPSB0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5lbmNvZGVkLmxlbmd0aDtcbiAgICAgICAgICBpZiAoaXNTa2lwcGluZyB8fCBpc0VuY29kaW5nKSB7XG4gICAgICAgICAgICAoX2IgPSAobG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIuZ3JvdXBDb2xsYXBzZWQpIHx8IGxvZ2dlci5sb2cpID09IG51bGwgPyB2b2lkIDAgOiBfYihcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogU3RlZ2EgZW5jb2Rpbmcgc291cmNlIG1hcCBpbnRvIHJlc3VsdFwiKTtcbiAgICAgICAgICAgIChfYyA9IGxvZ2dlci5sb2cpID09IG51bGwgPyB2b2lkIDAgOiBfYy5jYWxsKGxvZ2dlciwgXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IFBhdGhzIGVuY29kZWQ6IFwiLmNvbmNhdCh0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5lbmNvZGVkLmxlbmd0aCwgXCIsIHNraXBwZWQ6IFwiKS5jb25jYXQodHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuc2tpcHBlZC5sZW5ndGgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRyYW5zY29kZXJSZXN1bHQucmVwb3J0LmVuY29kZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgKF9kID0gbG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIubG9nKSA9PSBudWxsID8gdm9pZCAwIDogX2QuY2FsbChsb2dnZXIsIFwiW0BzYW5pdHkvcHJldmlldy1raXRdOiBUYWJsZSBvZiBlbmNvZGVkIHBhdGhzXCIpO1xuICAgICAgICAgICAgKF9lID0gKGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLnRhYmxlKSB8fCBsb2dnZXIubG9nKSA9PSBudWxsID8gdm9pZCAwIDogX2UodHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuZW5jb2RlZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5za2lwcGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNraXBwZWQgPSAvKiBAX19QVVJFX18gKi9uZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHtcbiAgICAgICAgICAgICAgcGF0aFxuICAgICAgICAgICAgfSBvZiB0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5za2lwcGVkKSB7XG4gICAgICAgICAgICAgIHNraXBwZWQuYWRkKHBhdGgucmVwbGFjZSgvXFxbXFxkK1xcXS9nLCBcIltdXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChfZiA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmxvZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNhbGwobG9nZ2VyLCBcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogTGlzdCBvZiBza2lwcGVkIHBhdGhzXCIsIFsuLi5za2lwcGVkLnZhbHVlcygpXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1NraXBwaW5nIHx8IGlzRW5jb2RpbmcpIHtcbiAgICAgICAgICAgIChfZyA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmdyb3VwRW5kKSA9PSBudWxsID8gdm9pZCAwIDogX2cuY2FsbChsb2dnZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgIC4uLnJlc3BvbnNlLmJvZHksXG4gICAgICAgICAgcmVzdWx0OiB0cmFuc2NvZGVyUmVzdWx0LnJlc3VsdFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgIGJvZHlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVIdHRwUmVxdWVzdChfcmVmMikge1xuICBsZXQge1xuICAgIHN0dWRpb1VybCxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgbG9nZ2VyXG4gIH0gPSBfcmVmMjtcbiAgY29uc3Qgc3VwZXJSZXF1ZXN0ZXIgPSByZXF1ZXN0ZXIuY2xvbmUoKTtcbiAgc3VwZXJSZXF1ZXN0ZXIudXNlKFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAtLSBzdXBwb3J0IHRoZSBpbXByb3ZlZCBnZXQtaXQgdHlwaW5nc1xuICB0cmFuc2NvZGVSZXNwb25zZSh7XG4gICAgc3R1ZGlvVXJsLFxuICAgIGVuY29kZVNvdXJjZU1hcEF0UGF0aCxcbiAgICBsb2dnZXJcbiAgfSkpO1xuICBmdW5jdGlvbiBodHRwUmVxdWVzdChvcHRpb25zKSB7XG4gICAgbGV0IHJlcXVlc3RlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogc3VwZXJSZXF1ZXN0ZXI7XG4gICAgcmV0dXJuIHJlcXVlc3Rlcih7XG4gICAgICBtYXhSZWRpcmVjdHM6IDAsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgaHR0cFJlcXVlc3QuZGVmYXVsdFJlcXVlc3RlciA9IHN1cGVyUmVxdWVzdGVyO1xuICByZXR1cm4gaHR0cFJlcXVlc3Q7XG59XG5mdW5jdGlvbiBpc0JvZHlSZXNwb25zZShyZXNwb25zZSkge1xuICByZXR1cm4gdHlwZW9mIHJlc3BvbnNlID09PSBcIm9iamVjdFwiICYmIHJlc3BvbnNlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNSZXN1bHRCb2R5KGJvZHkpIHtcbiAgcmV0dXJuIHR5cGVvZiBib2R5ID09PSBcIm9iamVjdFwiICYmIGJvZHkgIT09IG51bGwgJiYgXCJyZXN1bHRcIiBpbiBib2R5O1xufVxuZnVuY3Rpb24gaXNDb250ZW50U291cmNlTWFwQm9keShib2R5KSB7XG4gIHJldHVybiB0eXBlb2YgYm9keSA9PT0gXCJvYmplY3RcIiAmJiBib2R5ICE9PSBudWxsICYmIFwicmVzdWx0U291cmNlTWFwXCIgaW4gYm9keTtcbn1cbmNvbnN0IGNyZWF0ZUNsaWVudCA9IGNvbmZpZyA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHtcbiAgICBlbmNvZGVTb3VyY2VNYXAgPSBkZXRlY3RFbmFibGVTb3VyY2VNYXAoKSxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgc3R1ZGlvVXJsID0gZGV0ZWN0U3R1ZGlvVXJsKCksXG4gICAgbG9nZ2VyLFxuICAgIC4uLm9wdGlvbnNcbiAgfSA9IGNvbmZpZztcbiAgbGV0IHNob3VsZEVuY29kZVNvdXJjZU1hcCA9IGVuY29kZVNvdXJjZU1hcCA9PT0gdHJ1ZTtcbiAgaWYgKGVuY29kZVNvdXJjZU1hcCA9PT0gXCJhdXRvXCIpIHtcbiAgICBzaG91bGRFbmNvZGVTb3VyY2VNYXAgPSBpc1ZlcmNlbFByZXZpZXdFbnZpcm9ubWVudCgpO1xuICB9XG4gIGlmICh0eXBlb2YgZW5jb2RlU291cmNlTWFwID09PSBcInN0cmluZ1wiICYmIGVuY29kZVNvdXJjZU1hcCAhPT0gXCJhdXRvXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBlbmNvZGVTb3VyY2VNYXA6IFwiLmNvbmNhdChlbmNvZGVTb3VyY2VNYXAsIFwiLiBEaWQgeW91IG1lYW4gJ2F1dG8nP1wiKSk7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAoc2hvdWxkRW5jb2RlU291cmNlTWFwICYmIGNvbmZpZy5yZXN1bHRTb3VyY2VNYXAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoIXN0dWRpb1VybCkge1xuICAgICAgICAoX2EgPSBsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwobG9nZ2VyLCBcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogQ29udGVudCBzb3VyY2UgbWFwIGVuYWJsZWQgY2xpZW50IGlzIGVuYWJsZWQsIGJ1dCBubyBzdHVkaW9VcmwgaXMgcHJvdmlkZWQuIEZhbGxpbmcgYmFjayB0byBAc2FuaXR5L2NsaWVudFwiKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNsaWVudCQxKG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgKF9iID0gbG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIuZGVidWcpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKGxvZ2dlciwgXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IENyZWF0aW5nIHNvdXJjZSBtYXAgZW5hYmxlZCBjbGllbnRcIik7XG4gICAgICBjb25zdCBodHRwUmVxdWVzdCA9IGNyZWF0ZUh0dHBSZXF1ZXN0KHtcbiAgICAgICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgICAgICBzdHVkaW9VcmwsXG4gICAgICAgIGxvZ2dlclxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IFNhbml0eUNsaWVudChodHRwUmVxdWVzdCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAvLyBTb3VyY2UgbWFwcyBieSBDb250ZW50IExha2UgYXJlIHJlcXVpcmVkIGluIG9yZGVyIHRvIGtub3cgd2hlcmUgdG8gaW5zZXJ0IHRoZSBlbmNvZGVkIHNvdXJjZSBtYXBzIGludG8gc3RyaW5nc1xuICAgICAgICByZXN1bHRTb3VyY2VNYXA6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogRXJyb3IgY3JlYXRpbmcgY2xpZW50XCIsIGVyciwgXCJmYWxsaW5nIGJhY2sgdG8gbm9uLWVtYmVkZGVkIHNvdXJjZW1hcCBtb2RlXCIpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDbGllbnQkMShvcHRpb25zKTtcbn07XG5mdW5jdGlvbiBpc1ZlcmNlbFByZXZpZXdFbnZpcm9ubWVudCgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaW1wb3J0Lm1ldGEuZW52LlZFUkNFTF9FTlYgPT09IFwicHJldmlld1wiO1xuICB9IGNhdGNoIHt9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52LlZFUkNFTF9FTlYgPT09IFwicHJldmlld1wiO1xuICB9IGNhdGNoIHt9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGRldGVjdEVuYWJsZVNvdXJjZU1hcCgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaW1wb3J0Lm1ldGEuZW52LlNBTklUWV9TT1VSQ0VfTUFQID09PSBcInRydWVcIiB8fCBcImF1dG9cIjtcbiAgfSBjYXRjaCB7fVxuICB0cnkge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5TQU5JVFlfU09VUkNFX01BUCA9PT0gXCJ0cnVlXCIgfHwgXCJhdXRvXCI7XG4gIH0gY2F0Y2gge31cbiAgcmV0dXJuIFwiYXV0b1wiO1xufVxuZnVuY3Rpb24gZGV0ZWN0U3R1ZGlvVXJsKCkge1xuICB0cnkge1xuICAgIHJldHVybiBpbXBvcnQubWV0YS5lbnYuU0FOSVRZX1NUVURJT19VUkw7XG4gIH0gY2F0Y2gge31cbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuU0FOSVRZX1NUVURJT19VUkw7XG4gIH0gY2F0Y2gge31cbn1cbmZ1bmN0aW9uIG1hcFRvRWRpdExpbmtzKHJlc3BvbnNlLCBzdHVkaW9VcmwpIHtcbiAgcmV0dXJuIG1hcFRvRWRpdExpbmtzJDEocmVzcG9uc2UucmVzdWx0LCByZXNwb25zZS5yZXN1bHRTb3VyY2VNYXAsIHN0dWRpb1VybCk7XG59XG5leHBvcnQgeyBjcmVhdGVDbGllbnQsIG1hcFRvRWRpdExpbmtzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/preview-kit/dist/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@sanity/preview-kit/dist/csm.js":
/*!******************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/csm.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTranscoder: () => (/* binding */ createTranscoder),\n/* harmony export */   encodeJsonPathToUriComponent: () => (/* binding */ encodeJsonPathToUriComponent),\n/* harmony export */   mapToEditLinks: () => (/* binding */ mapToEditLinks),\n/* harmony export */   parseNormalisedJsonPath: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.parseNormalisedJsonPath),\n/* harmony export */   resolveMapping: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.resolveMapping),\n/* harmony export */   walkMap: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.walkMap)\n/* harmony export */ });\n/* harmony import */ var _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_chunks/sourcemap-r-TuProy.js */ \"(ssr)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js\");\n/* harmony import */ var _vercel_stega__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/stega */ \"(ssr)/./node_modules/@vercel/stega/dist/index.js\");\n\n\n\nfunction defineEditLink(_studioUrl) {\n  const studioUrl = _studioUrl.replace(/\\/$/, \"\");\n  return (sourceDocument, path) => \"\".concat(studioUrl, \"/intent/edit/id=\").concat(sourceDocument._id, \";\").concat(sourceDocument._type ? \"type=\".concat(sourceDocument._type, \";\") : \"\", \"path=\").concat(encodeJsonPathToUriComponent(path));\n}\nfunction encodeJsonPathToUriComponent(path) {\n  const sourcePath = Array.isArray(path) ? path : (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.parseNormalisedJsonPath)(path);\n  return encodeURIComponent(sourcePath.map((key, i) =>\n  // eslint-disable-next-line no-nested-ternary\n  typeof key === \"number\" ? \"[\".concat(key, \"]\") : i > 0 ? \".\".concat(key) : key).join(\"\"));\n}\nconst filterDefault = _ref => {\n  let {\n    path\n  } = _ref;\n  const endPath = path.at(-1);\n  if (path.at(-2) === \"slug\" && endPath === \"current\") {\n    return false;\n  }\n  if (typeof endPath === \"string\" && endPath.startsWith(\"_\")) {\n    return false;\n  }\n  if (typeof endPath === \"number\" && path.at(-2) === \"marks\" && typeof path.at(-3) === \"number\" && path.at(-4) === \"children\" && typeof path.at(-5) === \"number\") {\n    return false;\n  }\n  if (endPath === \"href\" && typeof path.at(-2) === \"number\" && path.at(-3) === \"markDefs\" && typeof path.at(-4) === \"number\") {\n    return false;\n  }\n  if (typeof endPath === \"string\" && typeof path.at(-2) === \"number\") {\n    if (endPath === \"style\" || endPath === \"listItem\") {\n      return false;\n    }\n  }\n  return true;\n};\nconst TRUNCATE_LENGTH = 20;\nfunction createTranscoder(config) {\n  const {\n    studioUrl,\n    encodeSourceMapAtPath,\n    logger\n  } = config;\n  const createEditLink = defineEditLink(studioUrl);\n  const report = {\n    encoded: [],\n    skipped: []\n  };\n  const transcode = (input, sourceDocument, sourcePath) => {\n    if ((typeof encodeSourceMapAtPath === \"function\" ? encodeSourceMapAtPath({\n      path: sourcePath,\n      filterDefault\n    }) : filterDefault({\n      path: sourcePath,\n      filterDefault\n    })) === false) {\n      if (logger) {\n        report.skipped.push({\n          path: prettyPathForLogging(sourcePath),\n          value: \"\".concat(input.slice(0, TRUNCATE_LENGTH)).concat(input.length > TRUNCATE_LENGTH ? \"...\" : \"\"),\n          length: input.length\n        });\n      }\n      return input;\n    }\n    if (logger) {\n      report.encoded.push({\n        path: prettyPathForLogging(sourcePath),\n        value: \"\".concat(input.slice(0, TRUNCATE_LENGTH)).concat(input.length > TRUNCATE_LENGTH ? \"...\" : \"\"),\n        length: input.length\n      });\n    }\n    return (0,_vercel_stega__WEBPACK_IMPORTED_MODULE_1__.vercelStegaCombine)(input, {\n      origin: \"sanity.io\",\n      href: createEditLink(sourceDocument, sourcePath)\n    }, \"auto\");\n  };\n  return (result, csm) => {\n    report.encoded.length = 0;\n    report.skipped.length = 0;\n    return {\n      result: (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.encode)(result, csm, (value, sourceDocument, path) => transcode(value, sourceDocument, path)),\n      report\n    };\n  };\n}\nfunction prettyPathForLogging(path) {\n  return path.map((segment, index) => typeof segment === \"number\" ? \"[\".concat(segment, \"]\") : index > 0 ? \".\".concat(segment) : segment).join(\"\");\n}\nfunction mapToEditLinks(result, csm, studioUrl) {\n  const createEditLink = defineEditLink(studioUrl);\n  return (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.encodeIntoResult)(result, csm, (_, sourceDocument, path) => {\n    return createEditLink(sourceDocument, path);\n  });\n}\n\n//# sourceMappingURL=csm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L2NzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFvRztBQUMxQjtBQUN2QjtBQUNuRDtBQUNBO0FBQ0EseUdBQXlHLHdFQUF3RTtBQUNqTDtBQUNBO0FBQ0Esa0RBQWtELHNGQUF1QjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLFdBQVcsaUVBQWtCO0FBQzdCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMscUVBQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrRUFBZ0I7QUFDekI7QUFDQSxHQUFHO0FBQ0g7QUFDbUc7QUFDbkciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L3ByZXZpZXcta2l0L2Rpc3QvY3NtLmpzPzJiZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VOb3JtYWxpc2VkSnNvblBhdGgsIGVuY29kZSwgZW5jb2RlSW50b1Jlc3VsdCB9IGZyb20gJy4vX2NodW5rcy9zb3VyY2VtYXAtci1UdVByb3kuanMnO1xuZXhwb3J0IHsgcmVzb2x2ZU1hcHBpbmcsIHdhbGtNYXAgfSBmcm9tICcuL19jaHVua3Mvc291cmNlbWFwLXItVHVQcm95LmpzJztcbmltcG9ydCB7IHZlcmNlbFN0ZWdhQ29tYmluZSB9IGZyb20gJ0B2ZXJjZWwvc3RlZ2EnO1xuZnVuY3Rpb24gZGVmaW5lRWRpdExpbmsoX3N0dWRpb1VybCkge1xuICBjb25zdCBzdHVkaW9VcmwgPSBfc3R1ZGlvVXJsLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTtcbiAgcmV0dXJuIChzb3VyY2VEb2N1bWVudCwgcGF0aCkgPT4gXCJcIi5jb25jYXQoc3R1ZGlvVXJsLCBcIi9pbnRlbnQvZWRpdC9pZD1cIikuY29uY2F0KHNvdXJjZURvY3VtZW50Ll9pZCwgXCI7XCIpLmNvbmNhdChzb3VyY2VEb2N1bWVudC5fdHlwZSA/IFwidHlwZT1cIi5jb25jYXQoc291cmNlRG9jdW1lbnQuX3R5cGUsIFwiO1wiKSA6IFwiXCIsIFwicGF0aD1cIikuY29uY2F0KGVuY29kZUpzb25QYXRoVG9VcmlDb21wb25lbnQocGF0aCkpO1xufVxuZnVuY3Rpb24gZW5jb2RlSnNvblBhdGhUb1VyaUNvbXBvbmVudChwYXRoKSB7XG4gIGNvbnN0IHNvdXJjZVBhdGggPSBBcnJheS5pc0FycmF5KHBhdGgpID8gcGF0aCA6IHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoKHBhdGgpO1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHNvdXJjZVBhdGgubWFwKChrZXksIGkpID0+XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICB0eXBlb2Yga2V5ID09PSBcIm51bWJlclwiID8gXCJbXCIuY29uY2F0KGtleSwgXCJdXCIpIDogaSA+IDAgPyBcIi5cIi5jb25jYXQoa2V5KSA6IGtleSkuam9pbihcIlwiKSk7XG59XG5jb25zdCBmaWx0ZXJEZWZhdWx0ID0gX3JlZiA9PiB7XG4gIGxldCB7XG4gICAgcGF0aFxuICB9ID0gX3JlZjtcbiAgY29uc3QgZW5kUGF0aCA9IHBhdGguYXQoLTEpO1xuICBpZiAocGF0aC5hdCgtMikgPT09IFwic2x1Z1wiICYmIGVuZFBhdGggPT09IFwiY3VycmVudFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZW5kUGF0aCA9PT0gXCJzdHJpbmdcIiAmJiBlbmRQYXRoLnN0YXJ0c1dpdGgoXCJfXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZW5kUGF0aCA9PT0gXCJudW1iZXJcIiAmJiBwYXRoLmF0KC0yKSA9PT0gXCJtYXJrc1wiICYmIHR5cGVvZiBwYXRoLmF0KC0zKSA9PT0gXCJudW1iZXJcIiAmJiBwYXRoLmF0KC00KSA9PT0gXCJjaGlsZHJlblwiICYmIHR5cGVvZiBwYXRoLmF0KC01KSA9PT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoZW5kUGF0aCA9PT0gXCJocmVmXCIgJiYgdHlwZW9mIHBhdGguYXQoLTIpID09PSBcIm51bWJlclwiICYmIHBhdGguYXQoLTMpID09PSBcIm1hcmtEZWZzXCIgJiYgdHlwZW9mIHBhdGguYXQoLTQpID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZW5kUGF0aCA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgcGF0aC5hdCgtMikgPT09IFwibnVtYmVyXCIpIHtcbiAgICBpZiAoZW5kUGF0aCA9PT0gXCJzdHlsZVwiIHx8IGVuZFBhdGggPT09IFwibGlzdEl0ZW1cIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5jb25zdCBUUlVOQ0FURV9MRU5HVEggPSAyMDtcbmZ1bmN0aW9uIGNyZWF0ZVRyYW5zY29kZXIoY29uZmlnKSB7XG4gIGNvbnN0IHtcbiAgICBzdHVkaW9VcmwsXG4gICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgIGxvZ2dlclxuICB9ID0gY29uZmlnO1xuICBjb25zdCBjcmVhdGVFZGl0TGluayA9IGRlZmluZUVkaXRMaW5rKHN0dWRpb1VybCk7XG4gIGNvbnN0IHJlcG9ydCA9IHtcbiAgICBlbmNvZGVkOiBbXSxcbiAgICBza2lwcGVkOiBbXVxuICB9O1xuICBjb25zdCB0cmFuc2NvZGUgPSAoaW5wdXQsIHNvdXJjZURvY3VtZW50LCBzb3VyY2VQYXRoKSA9PiB7XG4gICAgaWYgKCh0eXBlb2YgZW5jb2RlU291cmNlTWFwQXRQYXRoID09PSBcImZ1bmN0aW9uXCIgPyBlbmNvZGVTb3VyY2VNYXBBdFBhdGgoe1xuICAgICAgcGF0aDogc291cmNlUGF0aCxcbiAgICAgIGZpbHRlckRlZmF1bHRcbiAgICB9KSA6IGZpbHRlckRlZmF1bHQoe1xuICAgICAgcGF0aDogc291cmNlUGF0aCxcbiAgICAgIGZpbHRlckRlZmF1bHRcbiAgICB9KSkgPT09IGZhbHNlKSB7XG4gICAgICBpZiAobG9nZ2VyKSB7XG4gICAgICAgIHJlcG9ydC5za2lwcGVkLnB1c2goe1xuICAgICAgICAgIHBhdGg6IHByZXR0eVBhdGhGb3JMb2dnaW5nKHNvdXJjZVBhdGgpLFxuICAgICAgICAgIHZhbHVlOiBcIlwiLmNvbmNhdChpbnB1dC5zbGljZSgwLCBUUlVOQ0FURV9MRU5HVEgpKS5jb25jYXQoaW5wdXQubGVuZ3RoID4gVFJVTkNBVEVfTEVOR1RIID8gXCIuLi5cIiA6IFwiXCIpLFxuICAgICAgICAgIGxlbmd0aDogaW5wdXQubGVuZ3RoXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICBpZiAobG9nZ2VyKSB7XG4gICAgICByZXBvcnQuZW5jb2RlZC5wdXNoKHtcbiAgICAgICAgcGF0aDogcHJldHR5UGF0aEZvckxvZ2dpbmcoc291cmNlUGF0aCksXG4gICAgICAgIHZhbHVlOiBcIlwiLmNvbmNhdChpbnB1dC5zbGljZSgwLCBUUlVOQ0FURV9MRU5HVEgpKS5jb25jYXQoaW5wdXQubGVuZ3RoID4gVFJVTkNBVEVfTEVOR1RIID8gXCIuLi5cIiA6IFwiXCIpLFxuICAgICAgICBsZW5ndGg6IGlucHV0Lmxlbmd0aFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB2ZXJjZWxTdGVnYUNvbWJpbmUoaW5wdXQsIHtcbiAgICAgIG9yaWdpbjogXCJzYW5pdHkuaW9cIixcbiAgICAgIGhyZWY6IGNyZWF0ZUVkaXRMaW5rKHNvdXJjZURvY3VtZW50LCBzb3VyY2VQYXRoKVxuICAgIH0sIFwiYXV0b1wiKTtcbiAgfTtcbiAgcmV0dXJuIChyZXN1bHQsIGNzbSkgPT4ge1xuICAgIHJlcG9ydC5lbmNvZGVkLmxlbmd0aCA9IDA7XG4gICAgcmVwb3J0LnNraXBwZWQubGVuZ3RoID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0OiBlbmNvZGUocmVzdWx0LCBjc20sICh2YWx1ZSwgc291cmNlRG9jdW1lbnQsIHBhdGgpID0+IHRyYW5zY29kZSh2YWx1ZSwgc291cmNlRG9jdW1lbnQsIHBhdGgpKSxcbiAgICAgIHJlcG9ydFxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBwcmV0dHlQYXRoRm9yTG9nZ2luZyhwYXRoKSB7XG4gIHJldHVybiBwYXRoLm1hcCgoc2VnbWVudCwgaW5kZXgpID0+IHR5cGVvZiBzZWdtZW50ID09PSBcIm51bWJlclwiID8gXCJbXCIuY29uY2F0KHNlZ21lbnQsIFwiXVwiKSA6IGluZGV4ID4gMCA/IFwiLlwiLmNvbmNhdChzZWdtZW50KSA6IHNlZ21lbnQpLmpvaW4oXCJcIik7XG59XG5mdW5jdGlvbiBtYXBUb0VkaXRMaW5rcyhyZXN1bHQsIGNzbSwgc3R1ZGlvVXJsKSB7XG4gIGNvbnN0IGNyZWF0ZUVkaXRMaW5rID0gZGVmaW5lRWRpdExpbmsoc3R1ZGlvVXJsKTtcbiAgcmV0dXJuIGVuY29kZUludG9SZXN1bHQocmVzdWx0LCBjc20sIChfLCBzb3VyY2VEb2N1bWVudCwgcGF0aCkgPT4ge1xuICAgIHJldHVybiBjcmVhdGVFZGl0TGluayhzb3VyY2VEb2N1bWVudCwgcGF0aCk7XG4gIH0pO1xufVxuZXhwb3J0IHsgY3JlYXRlVHJhbnNjb2RlciwgZW5jb2RlSnNvblBhdGhUb1VyaUNvbXBvbmVudCwgbWFwVG9FZGl0TGlua3MsIHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@sanity/preview-kit/dist/csm.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/client/dist/index.browser.js":
/*!***********************************************************!*\
  !*** ./node_modules/@sanity/client/dist/index.browser.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePatch: () => (/* binding */ BasePatch),\n/* harmony export */   BaseTransaction: () => (/* binding */ BaseTransaction),\n/* harmony export */   ClientError: () => (/* binding */ ClientError),\n/* harmony export */   ObservablePatch: () => (/* binding */ ObservablePatch),\n/* harmony export */   ObservableSanityClient: () => (/* binding */ ObservableSanityClient),\n/* harmony export */   ObservableTransaction: () => (/* binding */ ObservableTransaction),\n/* harmony export */   Patch: () => (/* binding */ Patch),\n/* harmony export */   SanityClient: () => (/* binding */ SanityClient),\n/* harmony export */   ServerError: () => (/* binding */ ServerError),\n/* harmony export */   Transaction: () => (/* binding */ Transaction),\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   \"default\": () => (/* binding */ deprecatedCreateClient),\n/* harmony export */   requester: () => (/* binding */ requester),\n/* harmony export */   unstable__adapter: () => (/* reexport safe */ get_it__WEBPACK_IMPORTED_MODULE_0__.adapter),\n/* harmony export */   unstable__environment: () => (/* reexport safe */ get_it__WEBPACK_IMPORTED_MODULE_0__.environment)\n/* harmony export */ });\n/* harmony import */ var get_it__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! get-it */ \"(action-browser)/./node_modules/get-it/dist/index.react-server.js\");\n/* harmony import */ var get_it_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! get-it/middleware */ \"(action-browser)/./node_modules/get-it/dist/middleware.browser.js\");\n/* harmony import */ var _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=Observable,lastValueFrom!=!rxjs */ \"(action-browser)/__barrel_optimize__?names=Observable,lastValueFrom!=!./node_modules/rxjs/dist/esm5/index.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ \"(action-browser)/./node_modules/rxjs/dist/cjs/operators/index.js\");\n\n\n\n\n\nconst MAX_ITEMS_IN_ERROR_MESSAGE = 5;\nclass ClientError extends Error {\n    constructor(res){\n        const props = extractErrorProps(res);\n        super(props.message);\n        this.statusCode = 400;\n        Object.assign(this, props);\n    }\n}\nclass ServerError extends Error {\n    constructor(res){\n        const props = extractErrorProps(res);\n        super(props.message);\n        this.statusCode = 500;\n        Object.assign(this, props);\n    }\n}\nfunction extractErrorProps(res) {\n    const body = res.body;\n    const props = {\n        response: res,\n        statusCode: res.statusCode,\n        responseBody: stringifyBody(body, res),\n        message: \"\",\n        details: void 0\n    };\n    if (body.error && body.message) {\n        props.message = \"\".concat(body.error, \" - \").concat(body.message);\n        return props;\n    }\n    if (isMutationError(body)) {\n        const allItems = body.error.items || [];\n        const items = allItems.slice(0, MAX_ITEMS_IN_ERROR_MESSAGE).map((item)=>{\n            var _a;\n            return (_a = item.error) == null ? void 0 : _a.description;\n        }).filter(Boolean);\n        let itemsStr = items.length ? \":\\n- \".concat(items.join(\"\\n- \")) : \"\";\n        if (allItems.length > MAX_ITEMS_IN_ERROR_MESSAGE) {\n            itemsStr += \"\\n...and \".concat(allItems.length - MAX_ITEMS_IN_ERROR_MESSAGE, \" more\");\n        }\n        props.message = \"\".concat(body.error.description).concat(itemsStr);\n        props.details = body.error;\n        return props;\n    }\n    if (body.error && body.error.description) {\n        props.message = body.error.description;\n        props.details = body.error;\n        return props;\n    }\n    props.message = body.error || body.message || httpErrorMessage(res);\n    return props;\n}\nfunction isMutationError(body) {\n    return isPlainObject(body) && isPlainObject(body.error) && body.error.type === \"mutationError\" && typeof body.error.description === \"string\";\n}\nfunction isPlainObject(obj) {\n    return typeof obj === \"object\" && obj !== null && !Array.isArray(obj);\n}\nfunction httpErrorMessage(res) {\n    const statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : \"\";\n    return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\nfunction stringifyBody(body, res) {\n    const contentType = (res.headers[\"content-type\"] || \"\").toLowerCase();\n    const isJson = contentType.indexOf(\"application/json\") !== -1;\n    return isJson ? JSON.stringify(body, null, 2) : body;\n}\nconst httpError = {\n    onResponse: (res)=>{\n        if (res.statusCode >= 500) {\n            throw new ServerError(res);\n        } else if (res.statusCode >= 400) {\n            throw new ClientError(res);\n        }\n        return res;\n    }\n};\nconst printWarnings = {\n    onResponse: (res)=>{\n        const warn = res.headers[\"x-sanity-warning\"];\n        const warnings = Array.isArray(warn) ? warn : [\n            warn\n        ];\n        warnings.filter(Boolean).forEach((msg)=>console.warn(msg));\n        return res;\n    }\n};\nfunction defineHttpRequest(envMiddleware, _ref) {\n    let { maxRetries = 5, retryDelay } = _ref;\n    const request = (0,get_it__WEBPACK_IMPORTED_MODULE_0__.getIt)([\n        maxRetries > 0 ? (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.retry)({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            retryDelay,\n            // This option is typed incorrectly in get-it.\n            maxRetries,\n            shouldRetry\n        }) : {},\n        ...envMiddleware,\n        printWarnings,\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.jsonRequest)(),\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.jsonResponse)(),\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.progress)(),\n        httpError,\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.observable)({\n            implementation: _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable\n        })\n    ]);\n    function httpRequest(options) {\n        let requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n        return requester({\n            maxRedirects: 0,\n            ...options\n        });\n    }\n    httpRequest.defaultRequester = request;\n    return httpRequest;\n}\nfunction shouldRetry(err, attempt, options) {\n    const isSafe = options.method === \"GET\" || options.method === \"HEAD\";\n    const uri = options.uri || options.url;\n    const isQuery = uri.startsWith(\"/data/query\");\n    const isRetriableResponse = err.response && (err.response.statusCode === 429 || err.response.statusCode === 502 || err.response.statusCode === 503);\n    if ((isSafe || isQuery) && isRetriableResponse) return true;\n    return get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.retry.shouldRetry(err, attempt, options);\n}\nfunction getSelection(sel) {\n    if (typeof sel === \"string\" || Array.isArray(sel)) {\n        return {\n            id: sel\n        };\n    }\n    if (typeof sel === \"object\" && sel !== null && \"query\" in sel && typeof sel.query === \"string\") {\n        return \"params\" in sel && typeof sel.params === \"object\" && sel.params !== null ? {\n            query: sel.query,\n            params: sel.params\n        } : {\n            query: sel.query\n        };\n    }\n    const selectionOpts = [\n        \"* Document ID (<docId>)\",\n        \"* Array of document IDs\",\n        \"* Object containing `query`\"\n    ].join(\"\\n\");\n    throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n}\nconst VALID_ASSET_TYPES = [\n    \"image\",\n    \"file\"\n];\nconst VALID_INSERT_LOCATIONS = [\n    \"before\",\n    \"after\",\n    \"replace\"\n];\nconst dataset = (name)=>{\n    if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n        throw new Error(\"Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters\");\n    }\n};\nconst projectId = (id)=>{\n    if (!/^[-a-z0-9]+$/i.test(id)) {\n        throw new Error(\"`projectId` can only contain only a-z, 0-9 and dashes\");\n    }\n};\nconst validateAssetType = (type)=>{\n    if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n        throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(\", \")));\n    }\n};\nconst validateObject = (op, val)=>{\n    if (val === null || typeof val !== \"object\" || Array.isArray(val)) {\n        throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n    }\n};\nconst validateDocumentId = (op, id)=>{\n    if (typeof id !== \"string\" || !/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(id) || id.includes(\"..\")) {\n        throw new Error(\"\".concat(op, '(): \"').concat(id, '\" is not a valid document ID'));\n    }\n};\nconst requireDocumentId = (op, doc)=>{\n    if (!doc._id) {\n        throw new Error(\"\".concat(op, '() requires that the document contains an ID (\"_id\" property)'));\n    }\n    validateDocumentId(op, doc._id);\n};\nconst validateInsert = (at, selector, items)=>{\n    const signature = \"insert(at, selector, items)\";\n    if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n        const valid = VALID_INSERT_LOCATIONS.map((loc)=>'\"'.concat(loc, '\"')).join(\", \");\n        throw new Error(\"\".concat(signature, ' takes an \"at\"-argument which is one of: ').concat(valid));\n    }\n    if (typeof selector !== \"string\") {\n        throw new Error(\"\".concat(signature, ' takes a \"selector\"-argument which must be a string'));\n    }\n    if (!Array.isArray(items)) {\n        throw new Error(\"\".concat(signature, ' takes an \"items\"-argument which must be an array'));\n    }\n};\nconst hasDataset = (config)=>{\n    if (!config.dataset) {\n        throw new Error(\"`dataset` must be provided to perform queries\");\n    }\n    return config.dataset || \"\";\n};\nconst requestTag = (tag)=>{\n    if (typeof tag !== \"string\" || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n        throw new Error(\"Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.\");\n    }\n    return tag;\n};\nvar __accessCheck$6 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$6 = (obj, member, getter)=>{\n    __accessCheck$6(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$6 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$6 = (obj, member, value, setter)=>{\n    __accessCheck$6(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$5, _client2$5;\nclass BasePatch {\n    constructor(selection){\n        let operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        this.selection = selection;\n        this.operations = operations;\n    }\n    /**\n   * Sets the given attributes to the document. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */ set(attrs) {\n        return this._assign(\"set\", attrs);\n    }\n    /**\n   * Sets the given attributes to the document if they are not currently set. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */ setIfMissing(attrs) {\n        return this._assign(\"setIfMissing\", attrs);\n    }\n    /**\n   * Performs a \"diff-match-patch\" operation on the string attributes provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to perform operation on. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"dmp\"\\}\n   */ diffMatchPatch(attrs) {\n        validateObject(\"diffMatchPatch\", attrs);\n        return this._assign(\"diffMatchPatch\", attrs);\n    }\n    /**\n   * Unsets the attribute paths provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attribute paths to unset.\n   */ unset(attrs) {\n        if (!Array.isArray(attrs)) {\n            throw new Error(\"unset(attrs) takes an array of attributes to unset, non-array given\");\n        }\n        this.operations = Object.assign({}, this.operations, {\n            unset: attrs\n        });\n        return this;\n    }\n    /**\n   * Increment a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to increment, values representing the number to increment by.\n   */ inc(attrs) {\n        return this._assign(\"inc\", attrs);\n    }\n    /**\n   * Decrement a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to decrement, values representing the number to decrement by.\n   */ dec(attrs) {\n        return this._assign(\"dec\", attrs);\n    }\n    /**\n   * Provides methods for modifying arrays, by inserting, appending and replacing elements via a JSONPath expression.\n   *\n   * @param at - Location to insert at, relative to the given selector, or 'replace' the matched path\n   * @param selector - JSONPath expression, eg `comments[-1]` or `blocks[_key==\"abc123\"]`\n   * @param items - Array of items to insert/replace\n   */ insert(at, selector, items) {\n        validateInsert(at, selector, items);\n        return this._assign(\"insert\", {\n            [at]: selector,\n            items\n        });\n    }\n    /**\n   * Append the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to append to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to append to the array\n   */ append(selector, items) {\n        return this.insert(\"after\", \"\".concat(selector, \"[-1]\"), items);\n    }\n    /**\n   * Prepend the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to prepend to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to prepend to the array\n   */ prepend(selector, items) {\n        return this.insert(\"before\", \"\".concat(selector, \"[0]\"), items);\n    }\n    /**\n   * Change the contents of an array by removing existing elements and/or adding new elements.\n   *\n   * @param selector - Attribute or JSONPath expression for array\n   * @param start - Index at which to start changing the array (with origin 0). If greater than the length of the array, actual starting index will be set to the length of the array. If negative, will begin that many elements from the end of the array (with origin -1) and will be set to 0 if absolute value is greater than the length of the array.x\n   * @param deleteCount - An integer indicating the number of old array elements to remove.\n   * @param items - The elements to add to the array, beginning at the start index. If you don't specify any elements, splice() will only remove elements from the array.\n   */ splice(selector, start, deleteCount, items) {\n        const delAll = typeof deleteCount === \"undefined\" || deleteCount === -1;\n        const startIndex = start < 0 ? start - 1 : start;\n        const delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n        const delRange = startIndex < 0 && delCount >= 0 ? \"\" : delCount;\n        const rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n        return this.insert(\"replace\", rangeSelector, items || []);\n    }\n    /**\n   * Adds a revision clause, preventing the document from being patched if the `_rev` property does not match the given value\n   *\n   * @param rev - Revision to lock the patch to\n   */ ifRevisionId(rev) {\n        this.operations.ifRevisionID = rev;\n        return this;\n    }\n    /**\n   * Return a plain JSON representation of the patch\n   */ serialize() {\n        return {\n            ...getSelection(this.selection),\n            ...this.operations\n        };\n    }\n    /**\n   * Return a plain JSON representation of the patch\n   */ toJSON() {\n        return this.serialize();\n    }\n    /**\n   * Clears the patch of all operations\n   */ reset() {\n        this.operations = {};\n        return this;\n    }\n    _assign(op, props) {\n        let merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        validateObject(op, props);\n        this.operations = Object.assign({}, this.operations, {\n            [op]: Object.assign({}, merge && this.operations[op] || {}, props)\n        });\n        return this;\n    }\n    _set(op, props) {\n        return this._assign(op, props, false);\n    }\n}\nconst _ObservablePatch = class _ObservablePatch extends BasePatch {\n    constructor(selection, operations, client){\n        super(selection, operations);\n        __privateAdd$6(this, _client$5, void 0);\n        __privateSet$6(this, _client$5, client);\n    }\n    /**\n   * Clones the patch\n   */ clone() {\n        return new _ObservablePatch(this.selection, {\n            ...this.operations\n        }, __privateGet$6(this, _client$5));\n    }\n    commit(options) {\n        if (!__privateGet$6(this, _client$5)) {\n            throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n        }\n        const returnFirst = typeof this.selection === \"string\";\n        const opts = Object.assign({\n            returnFirst,\n            returnDocuments: true\n        }, options);\n        return __privateGet$6(this, _client$5).mutate({\n            patch: this.serialize()\n        }, opts);\n    }\n};\n_client$5 = new WeakMap();\nlet ObservablePatch = _ObservablePatch;\nconst _Patch = class _Patch extends BasePatch {\n    constructor(selection, operations, client){\n        super(selection, operations);\n        __privateAdd$6(this, _client2$5, void 0);\n        __privateSet$6(this, _client2$5, client);\n    }\n    /**\n   * Clones the patch\n   */ clone() {\n        return new _Patch(this.selection, {\n            ...this.operations\n        }, __privateGet$6(this, _client2$5));\n    }\n    commit(options) {\n        if (!__privateGet$6(this, _client2$5)) {\n            throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n        }\n        const returnFirst = typeof this.selection === \"string\";\n        const opts = Object.assign({\n            returnFirst,\n            returnDocuments: true\n        }, options);\n        return __privateGet$6(this, _client2$5).mutate({\n            patch: this.serialize()\n        }, opts);\n    }\n};\n_client2$5 = new WeakMap();\nlet Patch = _Patch;\nvar __accessCheck$5 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$5 = (obj, member, getter)=>{\n    __accessCheck$5(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$5 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$5 = (obj, member, value, setter)=>{\n    __accessCheck$5(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$4, _client2$4;\nconst defaultMutateOptions = {\n    returnDocuments: false\n};\nclass BaseTransaction {\n    constructor(){\n        let operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        let transactionId = arguments.length > 1 ? arguments[1] : undefined;\n        this.operations = operations;\n        this.trxId = transactionId;\n    }\n    /**\n   * Creates a new Sanity document. If `_id` is provided and already exists, the mutation will fail. If no `_id` is given, one will automatically be generated by the database.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create. Requires a `_type` property.\n   */ create(doc) {\n        validateObject(\"create\", doc);\n        return this._add({\n            create: doc\n        });\n    }\n    /**\n   * Creates a new Sanity document. If a document with the same `_id` already exists, the create operation will be ignored.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create if it does not already exist. Requires `_id` and `_type` properties.\n   */ createIfNotExists(doc) {\n        const op = \"createIfNotExists\";\n        validateObject(op, doc);\n        requireDocumentId(op, doc);\n        return this._add({\n            [op]: doc\n        });\n    }\n    /**\n   * Creates a new Sanity document, or replaces an existing one if the same `_id` is already used.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create or replace. Requires `_id` and `_type` properties.\n   */ createOrReplace(doc) {\n        const op = \"createOrReplace\";\n        validateObject(op, doc);\n        requireDocumentId(op, doc);\n        return this._add({\n            [op]: doc\n        });\n    }\n    /**\n   * Deletes the document with the given document ID\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param documentId - Document ID to delete\n   */ delete(documentId) {\n        validateDocumentId(\"delete\", documentId);\n        return this._add({\n            delete: {\n                id: documentId\n            }\n        });\n    }\n    transactionId(id) {\n        if (!id) {\n            return this.trxId;\n        }\n        this.trxId = id;\n        return this;\n    }\n    /**\n   * Return a plain JSON representation of the transaction\n   */ serialize() {\n        return [\n            ...this.operations\n        ];\n    }\n    /**\n   * Return a plain JSON representation of the transaction\n   */ toJSON() {\n        return this.serialize();\n    }\n    /**\n   * Clears the transaction of all operations\n   */ reset() {\n        this.operations = [];\n        return this;\n    }\n    _add(mut) {\n        this.operations.push(mut);\n        return this;\n    }\n}\nconst _Transaction = class _Transaction extends BaseTransaction {\n    constructor(operations, client, transactionId){\n        super(operations, transactionId);\n        __privateAdd$5(this, _client$4, void 0);\n        __privateSet$5(this, _client$4, client);\n    }\n    /**\n   * Clones the transaction\n   */ clone() {\n        return new _Transaction([\n            ...this.operations\n        ], __privateGet$5(this, _client$4), this.trxId);\n    }\n    commit(options) {\n        if (!__privateGet$5(this, _client$4)) {\n            throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n        }\n        return __privateGet$5(this, _client$4).mutate(this.serialize(), Object.assign({\n            transactionId: this.trxId\n        }, defaultMutateOptions, options || {}));\n    }\n    patch(patchOrDocumentId, patchOps) {\n        const isBuilder = typeof patchOps === \"function\";\n        const isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof Patch;\n        if (isPatch) {\n            return this._add({\n                patch: patchOrDocumentId.serialize()\n            });\n        }\n        if (isBuilder) {\n            const patch = patchOps(new Patch(patchOrDocumentId, {}, __privateGet$5(this, _client$4)));\n            if (!(patch instanceof Patch)) {\n                throw new Error(\"function passed to `patch()` must return the patch\");\n            }\n            return this._add({\n                patch: patch.serialize()\n            });\n        }\n        return this._add({\n            patch: {\n                id: patchOrDocumentId,\n                ...patchOps\n            }\n        });\n    }\n};\n_client$4 = new WeakMap();\nlet Transaction = _Transaction;\nconst _ObservableTransaction = class _ObservableTransaction extends BaseTransaction {\n    constructor(operations, client, transactionId){\n        super(operations, transactionId);\n        __privateAdd$5(this, _client2$4, void 0);\n        __privateSet$5(this, _client2$4, client);\n    }\n    /**\n   * Clones the transaction\n   */ clone() {\n        return new _ObservableTransaction([\n            ...this.operations\n        ], __privateGet$5(this, _client2$4), this.trxId);\n    }\n    commit(options) {\n        if (!__privateGet$5(this, _client2$4)) {\n            throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n        }\n        return __privateGet$5(this, _client2$4).mutate(this.serialize(), Object.assign({\n            transactionId: this.trxId\n        }, defaultMutateOptions, options || {}));\n    }\n    patch(patchOrDocumentId, patchOps) {\n        const isBuilder = typeof patchOps === \"function\";\n        const isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof ObservablePatch;\n        if (isPatch) {\n            return this._add({\n                patch: patchOrDocumentId.serialize()\n            });\n        }\n        if (isBuilder) {\n            const patch = patchOps(new ObservablePatch(patchOrDocumentId, {}, __privateGet$5(this, _client2$4)));\n            if (!(patch instanceof ObservablePatch)) {\n                throw new Error(\"function passed to `patch()` must return the patch\");\n            }\n            return this._add({\n                patch: patch.serialize()\n            });\n        }\n        return this._add({\n            patch: {\n                id: patchOrDocumentId,\n                ...patchOps\n            }\n        });\n    }\n};\n_client2$4 = new WeakMap();\nlet ObservableTransaction = _ObservableTransaction;\nconst BASE_URL = \"https://www.sanity.io/help/\";\nfunction generateHelpUrl(slug) {\n    return BASE_URL + slug;\n}\nfunction once(fn) {\n    let didCall = false;\n    let returnValue;\n    return function() {\n        if (didCall) {\n            return returnValue;\n        }\n        returnValue = fn(...arguments);\n        didCall = true;\n        return returnValue;\n    };\n}\nconst createWarningPrinter = (message)=>// eslint-disable-next-line no-console\n    once(function() {\n        for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){\n            args[_key] = arguments[_key];\n        }\n        return console.warn(message.join(\" \"), ...args);\n    });\nconst printCdnWarning = createWarningPrinter([\n    \"Since you haven't set a value for `useCdn`, we will deliver content using our\",\n    \"global, edge-cached API-CDN. If you wish to have content delivered faster, set\",\n    \"`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API.\"\n]);\nconst printCdnPreviewDraftsWarning = createWarningPrinter([\n    \"The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.\",\n    \"The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning.\"\n]);\nconst printBrowserTokenWarning = createWarningPrinter([\n    \"You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.\",\n    \"See \".concat(generateHelpUrl(\"js-client-browser-token\"), \" for more information and how to hide this warning.\")\n]);\nconst printNoApiVersionSpecifiedWarning = createWarningPrinter([\n    \"Using the Sanity client without specifying an API version is deprecated.\",\n    \"See \".concat(generateHelpUrl(\"js-client-api-version\"))\n]);\nconst printNoDefaultExport = createWarningPrinter([\n    \"The default export of @sanity/client has been deprecated. Use the named export `createClient` instead.\"\n]);\nconst defaultCdnHost = \"apicdn.sanity.io\";\nconst defaultConfig = {\n    apiHost: \"https://api.sanity.io\",\n    apiVersion: \"1\",\n    useProjectHostname: true\n};\nconst LOCALHOSTS = [\n    \"localhost\",\n    \"127.0.0.1\",\n    \"0.0.0.0\"\n];\nconst isLocal = (host)=>LOCALHOSTS.indexOf(host) !== -1;\nconst validateApiVersion = function validateApiVersion2(apiVersion) {\n    if (apiVersion === \"1\" || apiVersion === \"X\") {\n        return;\n    }\n    const apiDate = new Date(apiVersion);\n    const apiVersionValid = /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0;\n    if (!apiVersionValid) {\n        throw new Error(\"Invalid API version string, expected `1` or date in format `YYYY-MM-DD`\");\n    }\n};\nconst validateApiPerspective = function validateApiPerspective2(perspective) {\n    switch(perspective){\n        case \"previewDrafts\":\n        case \"published\":\n        case \"raw\":\n            return;\n        default:\n            throw new TypeError(\"Invalid API perspective string, expected `published`, `previewDrafts` or `raw`\");\n    }\n};\nconst initConfig = (config, prevConfig)=>{\n    const specifiedConfig = Object.assign({}, prevConfig, config);\n    if (!specifiedConfig.apiVersion) {\n        printNoApiVersionSpecifiedWarning();\n    }\n    const newConfig = Object.assign({}, defaultConfig, specifiedConfig);\n    const projectBased = newConfig.useProjectHostname;\n    if (typeof Promise === \"undefined\") {\n        const helpUrl = generateHelpUrl(\"js-client-promise-polyfill\");\n        throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n    }\n    if (projectBased && !newConfig.projectId) {\n        throw new Error(\"Configuration must contain `projectId`\");\n    }\n    if (typeof newConfig.perspective === \"string\") {\n        validateApiPerspective(newConfig.perspective);\n    }\n    if (\"encodeSourceMapAtPath\" in newConfig || \"encodeSourceMap\" in newConfig || \"studioUrl\" in newConfig || \"logger\" in newConfig) {\n        throw new Error(\"It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.\");\n    }\n    const isBrowser =  false && 0;\n    const isLocalhost = isBrowser && isLocal(window.location.hostname);\n    if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n        printBrowserTokenWarning();\n    } else if (typeof newConfig.useCdn === \"undefined\") {\n        printCdnWarning();\n    }\n    if (projectBased) {\n        projectId(newConfig.projectId);\n    }\n    if (newConfig.dataset) {\n        dataset(newConfig.dataset);\n    }\n    if (\"requestTagPrefix\" in newConfig) {\n        newConfig.requestTagPrefix = newConfig.requestTagPrefix ? requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, \"\") : void 0;\n    }\n    newConfig.apiVersion = \"\".concat(newConfig.apiVersion).replace(/^v/, \"\");\n    newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n    newConfig.useCdn = newConfig.useCdn !== false && !newConfig.withCredentials;\n    validateApiVersion(newConfig.apiVersion);\n    const hostParts = newConfig.apiHost.split(\"://\", 2);\n    const protocol = hostParts[0];\n    const host = hostParts[1];\n    const cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n    if (newConfig.useProjectHostname) {\n        newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v\").concat(newConfig.apiVersion);\n        newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v\").concat(newConfig.apiVersion);\n    } else {\n        newConfig.url = \"\".concat(newConfig.apiHost, \"/v\").concat(newConfig.apiVersion);\n        newConfig.cdnUrl = newConfig.url;\n    }\n    return newConfig;\n};\nconst projectHeader = \"X-Sanity-Project-ID\";\nfunction requestOptions(config) {\n    let overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const headers = {};\n    const token = overrides.token || config.token;\n    if (token) {\n        headers.Authorization = \"Bearer \".concat(token);\n    }\n    if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n        headers[projectHeader] = config.projectId;\n    }\n    const withCredentials = Boolean(typeof overrides.withCredentials === \"undefined\" ? config.token || config.withCredentials : overrides.withCredentials);\n    const timeout = typeof overrides.timeout === \"undefined\" ? config.timeout : overrides.timeout;\n    return Object.assign({}, overrides, {\n        headers: Object.assign({}, headers, overrides.headers || {}),\n        timeout: typeof timeout === \"undefined\" ? 5 * 60 * 1e3 : timeout,\n        proxy: overrides.proxy || config.proxy,\n        json: true,\n        withCredentials,\n        fetch: typeof overrides.fetch === \"object\" && typeof config.fetch === \"object\" ? {\n            ...config.fetch,\n            ...overrides.fetch\n        } : overrides.fetch || config.fetch\n    });\n}\nconst encodeQueryString = (_ref2)=>{\n    let { query, params = {}, options = {} } = _ref2;\n    const searchParams = new URLSearchParams();\n    const { tag, ...opts } = options;\n    if (tag) searchParams.append(\"tag\", tag);\n    searchParams.append(\"query\", query);\n    for (const [key, value] of Object.entries(params)){\n        searchParams.append(\"$\".concat(key), JSON.stringify(value));\n    }\n    for (const [key, value] of Object.entries(opts)){\n        if (value) searchParams.append(key, \"\".concat(value));\n    }\n    return \"?\".concat(searchParams);\n};\nconst excludeFalsey = (param, defValue)=>{\n    const value = typeof param === \"undefined\" ? defValue : param;\n    return param === false ? void 0 : value;\n};\nconst getMutationQuery = function() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return {\n        dryRun: options.dryRun,\n        returnIds: true,\n        returnDocuments: excludeFalsey(options.returnDocuments, true),\n        visibility: options.visibility || \"sync\",\n        autoGenerateArrayKeys: options.autoGenerateArrayKeys,\n        skipCrossDatasetReferenceValidation: options.skipCrossDatasetReferenceValidation\n    };\n};\nconst isResponse = (event)=>event.type === \"response\";\nconst getBody = (event)=>event.body;\nconst indexBy = (docs, attr)=>docs.reduce((indexed, doc)=>{\n        indexed[attr(doc)] = doc;\n        return indexed;\n    }, /* @__PURE__ */ Object.create(null));\nconst getQuerySizeLimit = 11264;\nfunction _fetch(client, httpRequest, query, params) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    const mapResponse = options.filterResponse === false ? (res)=>res : (res)=>res.result;\n    const { cache, next, ...opts } = {\n        // Opt out of setting a `signal` on an internal `fetch` if one isn't provided.\n        // This is necessary in React Server Components to avoid opting out of Request Memoization.\n        useAbortSignal: typeof options.signal !== \"undefined\",\n        ...options\n    };\n    const reqOpts = typeof cache !== \"undefined\" || typeof next !== \"undefined\" ? {\n        ...opts,\n        fetch: {\n            cache,\n            next\n        }\n    } : opts;\n    return _dataRequest(client, httpRequest, \"query\", {\n        query,\n        params\n    }, reqOpts).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(mapResponse));\n}\nfunction _getDocument(client, httpRequest, id) {\n    let opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const options = {\n        uri: _getDataUrl(client, \"doc\", id),\n        json: true,\n        tag: opts.tag\n    };\n    return _requestObservable(client, httpRequest, options).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)(isResponse), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>event.body.documents && event.body.documents[0]));\n}\nfunction _getDocuments(client, httpRequest, ids) {\n    let opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const options = {\n        uri: _getDataUrl(client, \"doc\", ids.join(\",\")),\n        json: true,\n        tag: opts.tag\n    };\n    return _requestObservable(client, httpRequest, options).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)(isResponse), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>{\n        const indexed = indexBy(event.body.documents || [], (doc)=>doc._id);\n        return ids.map((id)=>indexed[id] || null);\n    }));\n}\nfunction _createIfNotExists(client, httpRequest, doc, options) {\n    requireDocumentId(\"createIfNotExists\", doc);\n    return _create(client, httpRequest, doc, \"createIfNotExists\", options);\n}\nfunction _createOrReplace(client, httpRequest, doc, options) {\n    requireDocumentId(\"createOrReplace\", doc);\n    return _create(client, httpRequest, doc, \"createOrReplace\", options);\n}\nfunction _delete(client, httpRequest, selection, options) {\n    return _dataRequest(client, httpRequest, \"mutate\", {\n        mutations: [\n            {\n                delete: getSelection(selection)\n            }\n        ]\n    }, options);\n}\nfunction _mutate(client, httpRequest, mutations, options) {\n    let mut;\n    if (mutations instanceof Patch || mutations instanceof ObservablePatch) {\n        mut = {\n            patch: mutations.serialize()\n        };\n    } else if (mutations instanceof Transaction || mutations instanceof ObservableTransaction) {\n        mut = mutations.serialize();\n    } else {\n        mut = mutations;\n    }\n    const muts = Array.isArray(mut) ? mut : [\n        mut\n    ];\n    const transactionId = options && options.transactionId || void 0;\n    return _dataRequest(client, httpRequest, \"mutate\", {\n        mutations: muts,\n        transactionId\n    }, options);\n}\nfunction _dataRequest(client, httpRequest, endpoint, body) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    const isMutation = endpoint === \"mutate\";\n    const isQuery = endpoint === \"query\";\n    const strQuery = isMutation ? \"\" : encodeQueryString(body);\n    const useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n    const stringQuery = useGet ? strQuery : \"\";\n    const returnFirst = options.returnFirst;\n    const { timeout, token, tag, headers } = options;\n    const uri = _getDataUrl(client, endpoint, stringQuery);\n    const reqOptions = {\n        method: useGet ? \"GET\" : \"POST\",\n        uri,\n        json: true,\n        body: useGet ? void 0 : body,\n        query: isMutation && getMutationQuery(options),\n        timeout,\n        headers,\n        token,\n        tag,\n        perspective: options.perspective,\n        resultSourceMap: options.resultSourceMap,\n        canUseCdn: isQuery,\n        signal: options.signal,\n        fetch: options.fetch,\n        useAbortSignal: options.useAbortSignal\n    };\n    return _requestObservable(client, httpRequest, reqOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)(isResponse), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(getBody), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((res)=>{\n        if (!isMutation) {\n            return res;\n        }\n        const results = res.results || [];\n        if (options.returnDocuments) {\n            return returnFirst ? results[0] && results[0].document : results.map((mut)=>mut.document);\n        }\n        const key = returnFirst ? \"documentId\" : \"documentIds\";\n        const ids = returnFirst ? results[0] && results[0].id : results.map((mut)=>mut.id);\n        return {\n            transactionId: res.transactionId,\n            results,\n            [key]: ids\n        };\n    }));\n}\nfunction _create(client, httpRequest, doc, op) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    const mutation = {\n        [op]: doc\n    };\n    const opts = Object.assign({\n        returnFirst: true,\n        returnDocuments: true\n    }, options);\n    return _dataRequest(client, httpRequest, \"mutate\", {\n        mutations: [\n            mutation\n        ]\n    }, opts);\n}\nfunction _requestObservable(client, httpRequest, options) {\n    var _a;\n    const uri = options.url || options.uri;\n    const config = client.config();\n    const canUseCdn = typeof options.canUseCdn === \"undefined\" ? [\n        \"GET\",\n        \"HEAD\"\n    ].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/\") === 0 : options.canUseCdn;\n    let useCdn = config.useCdn && canUseCdn;\n    const tag = options.tag && config.requestTagPrefix ? [\n        config.requestTagPrefix,\n        options.tag\n    ].join(\".\") : options.tag || config.requestTagPrefix;\n    if (tag && options.tag !== null) {\n        options.query = {\n            tag: requestTag(tag),\n            ...options.query\n        };\n    }\n    if ([\n        \"GET\",\n        \"HEAD\",\n        \"POST\"\n    ].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/query/\") === 0) {\n        const resultSourceMap = (_a = options.resultSourceMap) != null ? _a : config.resultSourceMap;\n        if (resultSourceMap !== void 0 && resultSourceMap !== false) {\n            options.query = {\n                resultSourceMap,\n                ...options.query\n            };\n        }\n        const perspective = options.perspective || config.perspective;\n        if (typeof perspective === \"string\" && perspective !== \"raw\") {\n            validateApiPerspective(perspective);\n            options.query = {\n                perspective,\n                ...options.query\n            };\n            if (perspective === \"previewDrafts\" && useCdn) {\n                useCdn = false;\n                printCdnPreviewDraftsWarning();\n            }\n        }\n    }\n    const reqOptions = requestOptions(config, Object.assign({}, options, {\n        url: _getUrl(client, uri, useCdn)\n    }));\n    const request = new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((subscriber)=>httpRequest(reqOptions, config.requester).subscribe(subscriber));\n    return options.signal ? request.pipe(_withAbortSignal(options.signal)) : request;\n}\nfunction _request(client, httpRequest, options) {\n    const observable = _requestObservable(client, httpRequest, options).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)((event)=>event.type === \"response\"), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>event.body));\n    return observable;\n}\nfunction _getDataUrl(client, operation, path) {\n    const config = client.config();\n    const catalog = hasDataset(config);\n    const baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n    const uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n    return \"/data\".concat(uri).replace(/\\/($|\\?)/, \"$1\");\n}\nfunction _getUrl(client, uri) {\n    let canUseCdn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    const { url, cdnUrl } = client.config();\n    const base = canUseCdn ? cdnUrl : url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, \"\"));\n}\nfunction _withAbortSignal(signal) {\n    return (input)=>{\n        return new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((observer)=>{\n            const abort = ()=>observer.error(_createAbortError(signal));\n            if (signal && signal.aborted) {\n                abort();\n                return;\n            }\n            const subscription = input.subscribe(observer);\n            signal.addEventListener(\"abort\", abort);\n            return ()=>{\n                signal.removeEventListener(\"abort\", abort);\n                subscription.unsubscribe();\n            };\n        });\n    };\n}\nconst isDomExceptionSupported = Boolean(globalThis.DOMException);\nfunction _createAbortError(signal) {\n    var _a, _b;\n    if (isDomExceptionSupported) {\n        return new DOMException((_a = signal == null ? void 0 : signal.reason) != null ? _a : \"The operation was aborted.\", \"AbortError\");\n    }\n    const error = new Error((_b = signal == null ? void 0 : signal.reason) != null ? _b : \"The operation was aborted.\");\n    error.name = \"AbortError\";\n    return error;\n}\nvar __accessCheck$4 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$4 = (obj, member, getter)=>{\n    __accessCheck$4(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$4 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$4 = (obj, member, value, setter)=>{\n    __accessCheck$4(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$3, _httpRequest$4, _client2$3, _httpRequest2$4;\nclass ObservableAssetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$4(this, _client$3, void 0);\n        __privateAdd$4(this, _httpRequest$4, void 0);\n        __privateSet$4(this, _client$3, client);\n        __privateSet$4(this, _httpRequest$4, httpRequest);\n    }\n    upload(assetType, body, options) {\n        return _upload(__privateGet$4(this, _client$3), __privateGet$4(this, _httpRequest$4), assetType, body, options);\n    }\n}\n_client$3 = new WeakMap();\n_httpRequest$4 = new WeakMap();\nclass AssetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$4(this, _client2$3, void 0);\n        __privateAdd$4(this, _httpRequest2$4, void 0);\n        __privateSet$4(this, _client2$3, client);\n        __privateSet$4(this, _httpRequest2$4, httpRequest);\n    }\n    upload(assetType, body, options) {\n        const observable = _upload(__privateGet$4(this, _client2$3), __privateGet$4(this, _httpRequest2$4), assetType, body, options);\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(observable.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)((event)=>event.type === \"response\"), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>event.body.document)));\n    }\n}\n_client2$3 = new WeakMap();\n_httpRequest2$4 = new WeakMap();\nfunction _upload(client, httpRequest, assetType, body) {\n    let opts = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    validateAssetType(assetType);\n    let meta = opts.extract || void 0;\n    if (meta && !meta.length) {\n        meta = [\n            \"none\"\n        ];\n    }\n    const dataset = hasDataset(client.config());\n    const assetEndpoint = assetType === \"image\" ? \"images\" : \"files\";\n    const options = optionsFromFile(opts, body);\n    const { tag, label, title, description, creditLine, filename, source } = options;\n    const query = {\n        label,\n        title,\n        description,\n        filename,\n        meta,\n        creditLine\n    };\n    if (source) {\n        query.sourceId = source.id;\n        query.sourceName = source.name;\n        query.sourceUrl = source.url;\n    }\n    return _requestObservable(client, httpRequest, {\n        tag,\n        method: \"POST\",\n        timeout: options.timeout || 0,\n        uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n        headers: options.contentType ? {\n            \"Content-Type\": options.contentType\n        } : {},\n        query,\n        body\n    });\n}\nfunction optionsFromFile(opts, file) {\n    if (typeof File === \"undefined\" || !(file instanceof File)) {\n        return opts;\n    }\n    return Object.assign({\n        filename: opts.preserveFilename === false ? void 0 : file.name,\n        contentType: file.type\n    }, opts);\n}\nvar defaults = (obj, defaults)=>Object.keys(defaults).concat(Object.keys(obj)).reduce((target, prop)=>{\n        target[prop] = typeof obj[prop] === \"undefined\" ? defaults[prop] : obj[prop];\n        return target;\n    }, {});\nconst pick = (obj, props)=>props.reduce((selection, prop)=>{\n        if (typeof obj[prop] === \"undefined\") {\n            return selection;\n        }\n        selection[prop] = obj[prop];\n        return selection;\n    }, {});\nconst MAX_URL_LENGTH = 16e3 - 1200;\nconst possibleOptions = [\n    \"includePreviousRevision\",\n    \"includeResult\",\n    \"visibility\",\n    \"effectFormat\",\n    \"tag\"\n];\nconst defaultOptions = {\n    includeResult: true\n};\nfunction _listen(query, params) {\n    let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const { url, token, withCredentials, requestTagPrefix } = this.config();\n    const tag = opts.tag && requestTagPrefix ? [\n        requestTagPrefix,\n        opts.tag\n    ].join(\".\") : opts.tag;\n    const options = {\n        ...defaults(opts, defaultOptions),\n        tag\n    };\n    const listenOpts = pick(options, possibleOptions);\n    const qs = encodeQueryString({\n        query,\n        params,\n        options: {\n            tag,\n            ...listenOpts\n        }\n    });\n    const uri = \"\".concat(url).concat(_getDataUrl(this, \"listen\", qs));\n    if (uri.length > MAX_URL_LENGTH) {\n        return new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((observer)=>observer.error(new Error(\"Query too large for listener\")));\n    }\n    const listenFor = options.events ? options.events : [\n        \"mutation\"\n    ];\n    const shouldEmitReconnect = listenFor.indexOf(\"reconnect\") !== -1;\n    const esOptions = {};\n    if (token || withCredentials) {\n        esOptions.withCredentials = true;\n    }\n    if (token) {\n        esOptions.headers = {\n            Authorization: \"Bearer \".concat(token)\n        };\n    }\n    return new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((observer)=>{\n        let es;\n        getEventSource().then((eventSource)=>{\n            es = eventSource;\n        }).catch((reason)=>{\n            observer.error(reason);\n            stop();\n        });\n        let reconnectTimer;\n        let stopped = false;\n        function onError() {\n            if (stopped) {\n                return;\n            }\n            emitReconnect();\n            if (stopped) {\n                return;\n            }\n            if (es.readyState === es.CLOSED) {\n                unsubscribe();\n                clearTimeout(reconnectTimer);\n                reconnectTimer = setTimeout(open, 100);\n            }\n        }\n        function onChannelError(err) {\n            observer.error(cooerceError(err));\n        }\n        function onMessage(evt) {\n            const event = parseEvent(evt);\n            return event instanceof Error ? observer.error(event) : observer.next(event);\n        }\n        function onDisconnect() {\n            stopped = true;\n            unsubscribe();\n            observer.complete();\n        }\n        function unsubscribe() {\n            if (!es) return;\n            es.removeEventListener(\"error\", onError);\n            es.removeEventListener(\"channelError\", onChannelError);\n            es.removeEventListener(\"disconnect\", onDisconnect);\n            listenFor.forEach((type)=>es.removeEventListener(type, onMessage));\n            es.close();\n        }\n        function emitReconnect() {\n            if (shouldEmitReconnect) {\n                observer.next({\n                    type: \"reconnect\"\n                });\n            }\n        }\n        async function getEventSource() {\n            const { default: EventSource } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@sanity\"), __webpack_require__.e(\"vendor-chunks/eventsource\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @sanity/eventsource */ \"(action-browser)/./node_modules/@sanity/eventsource/node.js\", 19));\n            const evs = new EventSource(uri, esOptions);\n            evs.addEventListener(\"error\", onError);\n            evs.addEventListener(\"channelError\", onChannelError);\n            evs.addEventListener(\"disconnect\", onDisconnect);\n            listenFor.forEach((type)=>evs.addEventListener(type, onMessage));\n            return evs;\n        }\n        function open() {\n            getEventSource().then((eventSource)=>{\n                es = eventSource;\n            }).catch((reason)=>{\n                observer.error(reason);\n                stop();\n            });\n        }\n        function stop() {\n            stopped = true;\n            unsubscribe();\n        }\n        return stop;\n    });\n}\nfunction parseEvent(event) {\n    try {\n        const data = event.data && JSON.parse(event.data) || {};\n        return Object.assign({\n            type: event.type\n        }, data);\n    } catch (err) {\n        return err;\n    }\n}\nfunction cooerceError(err) {\n    if (err instanceof Error) {\n        return err;\n    }\n    const evt = parseEvent(err);\n    return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\nfunction extractErrorMessage(err) {\n    if (!err.error) {\n        return err.message || \"Unknown listener error\";\n    }\n    if (err.error.description) {\n        return err.error.description;\n    }\n    return typeof err.error === \"string\" ? err.error : JSON.stringify(err.error, null, 2);\n}\nvar __accessCheck$3 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$3 = (obj, member, getter)=>{\n    __accessCheck$3(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$3 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$3 = (obj, member, value, setter)=>{\n    __accessCheck$3(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$2, _httpRequest$3, _client2$2, _httpRequest2$3;\nclass ObservableDatasetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$3(this, _client$2, void 0);\n        __privateAdd$3(this, _httpRequest$3, void 0);\n        __privateSet$3(this, _client$2, client);\n        __privateSet$3(this, _httpRequest$3, httpRequest);\n    }\n    /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */ create(name, options) {\n        return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PUT\", name, options);\n    }\n    /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */ edit(name, options) {\n        return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PATCH\", name, options);\n    }\n    /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */ delete(name) {\n        return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"DELETE\", name);\n    }\n    /**\n   * Fetch a list of datasets for the configured project\n   */ list() {\n        return _request(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), {\n            uri: \"/datasets\",\n            tag: null\n        });\n    }\n}\n_client$2 = new WeakMap();\n_httpRequest$3 = new WeakMap();\nclass DatasetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$3(this, _client2$2, void 0);\n        __privateAdd$3(this, _httpRequest2$3, void 0);\n        __privateSet$3(this, _client2$2, client);\n        __privateSet$3(this, _httpRequest2$3, httpRequest);\n    }\n    /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */ create(name, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PUT\", name, options));\n    }\n    /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */ edit(name, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PATCH\", name, options));\n    }\n    /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */ delete(name) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"DELETE\", name));\n    }\n    /**\n   * Fetch a list of datasets for the configured project\n   */ list() {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_request(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), {\n            uri: \"/datasets\",\n            tag: null\n        }));\n    }\n}\n_client2$2 = new WeakMap();\n_httpRequest2$3 = new WeakMap();\nfunction _modify(client, httpRequest, method, name, options) {\n    dataset(name);\n    return _request(client, httpRequest, {\n        method,\n        uri: \"/datasets/\".concat(name),\n        body: options,\n        tag: null\n    });\n}\nvar __accessCheck$2 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = (obj, member, getter)=>{\n    __accessCheck$2(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = (obj, member, value, setter)=>{\n    __accessCheck$2(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$1, _httpRequest$2, _client2$1, _httpRequest2$2;\nclass ObservableProjectsClient {\n    constructor(client, httpRequest){\n        __privateAdd$2(this, _client$1, void 0);\n        __privateAdd$2(this, _httpRequest$2, void 0);\n        __privateSet$2(this, _client$1, client);\n        __privateSet$2(this, _httpRequest$2, httpRequest);\n    }\n    list(options) {\n        const uri = (options == null ? void 0 : options.includeMembers) === false ? \"/projects?includeMembers=false\" : \"/projects\";\n        return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n            uri\n        });\n    }\n    /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */ getById(projectId) {\n        return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n            uri: \"/projects/\".concat(projectId)\n        });\n    }\n}\n_client$1 = new WeakMap();\n_httpRequest$2 = new WeakMap();\nclass ProjectsClient {\n    constructor(client, httpRequest){\n        __privateAdd$2(this, _client2$1, void 0);\n        __privateAdd$2(this, _httpRequest2$2, void 0);\n        __privateSet$2(this, _client2$1, client);\n        __privateSet$2(this, _httpRequest2$2, httpRequest);\n    }\n    list(options) {\n        const uri = (options == null ? void 0 : options.includeMembers) === false ? \"/projects?includeMembers=false\" : \"/projects\";\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n            uri\n        }));\n    }\n    /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */ getById(projectId) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n            uri: \"/projects/\".concat(projectId)\n        }));\n    }\n}\n_client2$1 = new WeakMap();\n_httpRequest2$2 = new WeakMap();\nvar __accessCheck$1 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter)=>{\n    __accessCheck$1(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter)=>{\n    __accessCheck$1(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client, _httpRequest$1, _client2, _httpRequest2$1;\nclass ObservableUsersClient {\n    constructor(client, httpRequest){\n        __privateAdd$1(this, _client, void 0);\n        __privateAdd$1(this, _httpRequest$1, void 0);\n        __privateSet$1(this, _client, client);\n        __privateSet$1(this, _httpRequest$1, httpRequest);\n    }\n    /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */ getById(id) {\n        return _request(__privateGet$1(this, _client), __privateGet$1(this, _httpRequest$1), {\n            uri: \"/users/\".concat(id)\n        });\n    }\n}\n_client = new WeakMap();\n_httpRequest$1 = new WeakMap();\nclass UsersClient {\n    constructor(client, httpRequest){\n        __privateAdd$1(this, _client2, void 0);\n        __privateAdd$1(this, _httpRequest2$1, void 0);\n        __privateSet$1(this, _client2, client);\n        __privateSet$1(this, _httpRequest2$1, httpRequest);\n    }\n    /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */ getById(id) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_request(__privateGet$1(this, _client2), __privateGet$1(this, _httpRequest2$1), {\n            uri: \"/users/\".concat(id)\n        }));\n    }\n}\n_client2 = new WeakMap();\n_httpRequest2$1 = new WeakMap();\nvar __accessCheck = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter)=>{\n    __accessCheck(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter)=>{\n    __accessCheck(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _clientConfig, _httpRequest, _clientConfig2, _httpRequest2;\nconst _ObservableSanityClient = class _ObservableSanityClient {\n    constructor(httpRequest){\n        let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n        /**\n     * Private properties\n     */ __privateAdd(this, _clientConfig, void 0);\n        __privateAdd(this, _httpRequest, void 0);\n        /**\n     * Instance properties\n     */ this.listen = _listen;\n        this.config(config);\n        __privateSet(this, _httpRequest, httpRequest);\n        this.assets = new ObservableAssetsClient(this, __privateGet(this, _httpRequest));\n        this.datasets = new ObservableDatasetsClient(this, __privateGet(this, _httpRequest));\n        this.projects = new ObservableProjectsClient(this, __privateGet(this, _httpRequest));\n        this.users = new ObservableUsersClient(this, __privateGet(this, _httpRequest));\n    }\n    /**\n   * Clone the client - returns a new instance\n   */ clone() {\n        return new _ObservableSanityClient(__privateGet(this, _httpRequest), this.config());\n    }\n    config(newConfig) {\n        if (newConfig === void 0) {\n            return {\n                ...__privateGet(this, _clientConfig)\n            };\n        }\n        if (__privateGet(this, _clientConfig) && __privateGet(this, _clientConfig).allowReconfigure === false) {\n            throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n        }\n        __privateSet(this, _clientConfig, initConfig(newConfig, __privateGet(this, _clientConfig) || {}));\n        return this;\n    }\n    /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */ withConfig(newConfig) {\n        return new _ObservableSanityClient(__privateGet(this, _httpRequest), {\n            ...this.config(),\n            ...newConfig\n        });\n    }\n    fetch(query, params) {\n        let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return _fetch(this, __privateGet(this, _httpRequest), query, params, options);\n    }\n    /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */ getDocument(id, options) {\n        return _getDocument(this, __privateGet(this, _httpRequest), id, options);\n    }\n    /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */ getDocuments(ids, options) {\n        return _getDocuments(this, __privateGet(this, _httpRequest), ids, options);\n    }\n    create(document, options) {\n        return _create(this, __privateGet(this, _httpRequest), document, \"create\", options);\n    }\n    createIfNotExists(document, options) {\n        return _createIfNotExists(this, __privateGet(this, _httpRequest), document, options);\n    }\n    createOrReplace(document, options) {\n        return _createOrReplace(this, __privateGet(this, _httpRequest), document, options);\n    }\n    delete(selection, options) {\n        return _delete(this, __privateGet(this, _httpRequest), selection, options);\n    }\n    mutate(operations, options) {\n        return _mutate(this, __privateGet(this, _httpRequest), operations, options);\n    }\n    /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param selection - Document ID, an array of document IDs, or an object with `query` and optional `params`, defining which document(s) to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   * @returns Patch instance - call `.commit()` to perform the operations defined\n   */ patch(selection, operations) {\n        return new ObservablePatch(selection, operations, this);\n    }\n    /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */ transaction(operations) {\n        return new ObservableTransaction(operations, this);\n    }\n    /**\n   * Perform an HTTP request against the Sanity API\n   *\n   * @param options - Request options\n   */ request(options) {\n        return _request(this, __privateGet(this, _httpRequest), options);\n    }\n    /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */ getUrl(uri, canUseCdn) {\n        return _getUrl(this, uri, canUseCdn);\n    }\n    /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */ getDataUrl(operation, path) {\n        return _getDataUrl(this, operation, path);\n    }\n};\n_clientConfig = new WeakMap();\n_httpRequest = new WeakMap();\nlet ObservableSanityClient = _ObservableSanityClient;\nconst _SanityClient = class _SanityClient {\n    constructor(httpRequest){\n        let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n        /**\n     * Private properties\n     */ __privateAdd(this, _clientConfig2, void 0);\n        __privateAdd(this, _httpRequest2, void 0);\n        /**\n     * Instance properties\n     */ this.listen = _listen;\n        this.config(config);\n        __privateSet(this, _httpRequest2, httpRequest);\n        this.assets = new AssetsClient(this, __privateGet(this, _httpRequest2));\n        this.datasets = new DatasetsClient(this, __privateGet(this, _httpRequest2));\n        this.projects = new ProjectsClient(this, __privateGet(this, _httpRequest2));\n        this.users = new UsersClient(this, __privateGet(this, _httpRequest2));\n        this.observable = new ObservableSanityClient(httpRequest, config);\n    }\n    /**\n   * Clone the client - returns a new instance\n   */ clone() {\n        return new _SanityClient(__privateGet(this, _httpRequest2), this.config());\n    }\n    config(newConfig) {\n        if (newConfig === void 0) {\n            return {\n                ...__privateGet(this, _clientConfig2)\n            };\n        }\n        if (__privateGet(this, _clientConfig2) && __privateGet(this, _clientConfig2).allowReconfigure === false) {\n            throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n        }\n        if (this.observable) {\n            this.observable.config(newConfig);\n        }\n        __privateSet(this, _clientConfig2, initConfig(newConfig, __privateGet(this, _clientConfig2) || {}));\n        return this;\n    }\n    /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */ withConfig(newConfig) {\n        return new _SanityClient(__privateGet(this, _httpRequest2), {\n            ...this.config(),\n            ...newConfig\n        });\n    }\n    fetch(query, params) {\n        let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_fetch(this, __privateGet(this, _httpRequest2), query, params, options));\n    }\n    /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */ getDocument(id, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_getDocument(this, __privateGet(this, _httpRequest2), id, options));\n    }\n    /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */ getDocuments(ids, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_getDocuments(this, __privateGet(this, _httpRequest2), ids, options));\n    }\n    create(document, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_create(this, __privateGet(this, _httpRequest2), document, \"create\", options));\n    }\n    createIfNotExists(document, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_createIfNotExists(this, __privateGet(this, _httpRequest2), document, options));\n    }\n    createOrReplace(document, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_createOrReplace(this, __privateGet(this, _httpRequest2), document, options));\n    }\n    delete(selection, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_delete(this, __privateGet(this, _httpRequest2), selection, options));\n    }\n    mutate(operations, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_mutate(this, __privateGet(this, _httpRequest2), operations, options));\n    }\n    /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param selection - Document ID, an array of document IDs, or an object with `query` and optional `params`, defining which document(s) to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   * @returns Patch instance - call `.commit()` to perform the operations defined\n   */ patch(documentId, operations) {\n        return new Patch(documentId, operations, this);\n    }\n    /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */ transaction(operations) {\n        return new Transaction(operations, this);\n    }\n    /**\n   * Perform a request against the Sanity API\n   * NOTE: Only use this for Sanity API endpoints, not for your own APIs!\n   *\n   * @param options - Request options\n   * @returns Promise resolving to the response body\n   */ request(options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_request(this, __privateGet(this, _httpRequest2), options));\n    }\n    /**\n   * Perform an HTTP request a `/data` sub-endpoint\n   * NOTE: Considered internal, thus marked as deprecated. Use `request` instead.\n   *\n   * @deprecated - Use `request()` or your own HTTP library instead\n   * @param endpoint - Endpoint to hit (mutate, query etc)\n   * @param body - Request body\n   * @param options - Request options\n   * @internal\n   */ dataRequest(endpoint, body, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.lastValueFrom)(_dataRequest(this, __privateGet(this, _httpRequest2), endpoint, body, options));\n    }\n    /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */ getUrl(uri, canUseCdn) {\n        return _getUrl(this, uri, canUseCdn);\n    }\n    /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */ getDataUrl(operation, path) {\n        return _getDataUrl(this, operation, path);\n    }\n};\n_clientConfig2 = new WeakMap();\n_httpRequest2 = new WeakMap();\nlet SanityClient = _SanityClient;\nfunction defineCreateClientExports(envMiddleware, ClassConstructor) {\n    const httpRequest = defineHttpRequest(envMiddleware, {});\n    const requester = httpRequest.defaultRequester;\n    const createClient = (config)=>new ClassConstructor(defineHttpRequest(envMiddleware, {\n            maxRetries: config.maxRetries,\n            retryDelay: config.retryDelay\n        }), config);\n    return {\n        requester,\n        createClient\n    };\n}\nfunction defineDeprecatedCreateClient(createClient) {\n    return function deprecatedCreateClient(config) {\n        printNoDefaultExport();\n        return createClient(config);\n    };\n}\nvar envMiddleware = [];\nconst exp = defineCreateClientExports(envMiddleware, SanityClient);\nconst requester = exp.requester;\nconst createClient = exp.createClient;\nconst deprecatedCreateClient = defineDeprecatedCreateClient(createClient);\n //# sourceMappingURL=index.browser.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L2NsaWVudC9kaXN0L2luZGV4LmJyb3dzZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUM2RDtBQUNEO0FBQzFDO0FBQ0o7QUFDN0MsTUFBTWMsNkJBQTZCO0FBQ25DLE1BQU1DLG9CQUFvQkM7SUFDeEJDLFlBQVlDLEdBQUcsQ0FBRTtRQUNmLE1BQU1DLFFBQVFDLGtCQUFrQkY7UUFDaEMsS0FBSyxDQUFDQyxNQUFNRSxPQUFPO1FBQ25CLElBQUksQ0FBQ0MsVUFBVSxHQUFHO1FBQ2xCQyxPQUFPQyxNQUFNLENBQUMsSUFBSSxFQUFFTDtJQUN0QjtBQUNGO0FBQ0EsTUFBTU0sb0JBQW9CVDtJQUN4QkMsWUFBWUMsR0FBRyxDQUFFO1FBQ2YsTUFBTUMsUUFBUUMsa0JBQWtCRjtRQUNoQyxLQUFLLENBQUNDLE1BQU1FLE9BQU87UUFDbkIsSUFBSSxDQUFDQyxVQUFVLEdBQUc7UUFDbEJDLE9BQU9DLE1BQU0sQ0FBQyxJQUFJLEVBQUVMO0lBQ3RCO0FBQ0Y7QUFDQSxTQUFTQyxrQkFBa0JGLEdBQUc7SUFDNUIsTUFBTVEsT0FBT1IsSUFBSVEsSUFBSTtJQUNyQixNQUFNUCxRQUFRO1FBQ1pRLFVBQVVUO1FBQ1ZJLFlBQVlKLElBQUlJLFVBQVU7UUFDMUJNLGNBQWNDLGNBQWNILE1BQU1SO1FBQ2xDRyxTQUFTO1FBQ1RTLFNBQVMsS0FBSztJQUNoQjtJQUNBLElBQUlKLEtBQUtLLEtBQUssSUFBSUwsS0FBS0wsT0FBTyxFQUFFO1FBQzlCRixNQUFNRSxPQUFPLEdBQUcsR0FBR1csTUFBTSxDQUFDTixLQUFLSyxLQUFLLEVBQUUsT0FBT0MsTUFBTSxDQUFDTixLQUFLTCxPQUFPO1FBQ2hFLE9BQU9GO0lBQ1Q7SUFDQSxJQUFJYyxnQkFBZ0JQLE9BQU87UUFDekIsTUFBTVEsV0FBV1IsS0FBS0ssS0FBSyxDQUFDSSxLQUFLLElBQUksRUFBRTtRQUN2QyxNQUFN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L0BzYW5pdHkvY2xpZW50L2Rpc3QvaW5kZXguYnJvd3Nlci5qcz85OThhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEl0IH0gZnJvbSAnZ2V0LWl0JztcbmV4cG9ydCB7IGFkYXB0ZXIgYXMgdW5zdGFibGVfX2FkYXB0ZXIsIGVudmlyb25tZW50IGFzIHVuc3RhYmxlX19lbnZpcm9ubWVudCB9IGZyb20gJ2dldC1pdCc7XG5pbXBvcnQgeyByZXRyeSwganNvblJlcXVlc3QsIGpzb25SZXNwb25zZSwgcHJvZ3Jlc3MsIG9ic2VydmFibGUgfSBmcm9tICdnZXQtaXQvbWlkZGxld2FyZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBsYXN0VmFsdWVGcm9tIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmNvbnN0IE1BWF9JVEVNU19JTl9FUlJPUl9NRVNTQUdFID0gNTtcbmNsYXNzIENsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyZXMpIHtcbiAgICBjb25zdCBwcm9wcyA9IGV4dHJhY3RFcnJvclByb3BzKHJlcyk7XG4gICAgc3VwZXIocHJvcHMubWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcHMpO1xuICB9XG59XG5jbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IocmVzKSB7XG4gICAgY29uc3QgcHJvcHMgPSBleHRyYWN0RXJyb3JQcm9wcyhyZXMpO1xuICAgIHN1cGVyKHByb3BzLm1lc3NhZ2UpO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IDUwMDtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIHByb3BzKTtcbiAgfVxufVxuZnVuY3Rpb24gZXh0cmFjdEVycm9yUHJvcHMocmVzKSB7XG4gIGNvbnN0IGJvZHkgPSByZXMuYm9keTtcbiAgY29uc3QgcHJvcHMgPSB7XG4gICAgcmVzcG9uc2U6IHJlcyxcbiAgICBzdGF0dXNDb2RlOiByZXMuc3RhdHVzQ29kZSxcbiAgICByZXNwb25zZUJvZHk6IHN0cmluZ2lmeUJvZHkoYm9keSwgcmVzKSxcbiAgICBtZXNzYWdlOiBcIlwiLFxuICAgIGRldGFpbHM6IHZvaWQgMFxuICB9O1xuICBpZiAoYm9keS5lcnJvciAmJiBib2R5Lm1lc3NhZ2UpIHtcbiAgICBwcm9wcy5tZXNzYWdlID0gXCJcIi5jb25jYXQoYm9keS5lcnJvciwgXCIgLSBcIikuY29uY2F0KGJvZHkubWVzc2FnZSk7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG4gIGlmIChpc011dGF0aW9uRXJyb3IoYm9keSkpIHtcbiAgICBjb25zdCBhbGxJdGVtcyA9IGJvZHkuZXJyb3IuaXRlbXMgfHwgW107XG4gICAgY29uc3QgaXRlbXMgPSBhbGxJdGVtcy5zbGljZSgwLCBNQVhfSVRFTVNfSU5fRVJST1JfTUVTU0FHRSkubWFwKGl0ZW0gPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIChfYSA9IGl0ZW0uZXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfYS5kZXNjcmlwdGlvbjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG4gICAgbGV0IGl0ZW1zU3RyID0gaXRlbXMubGVuZ3RoID8gXCI6XFxuLSBcIi5jb25jYXQoaXRlbXMuam9pbihcIlxcbi0gXCIpKSA6IFwiXCI7XG4gICAgaWYgKGFsbEl0ZW1zLmxlbmd0aCA+IE1BWF9JVEVNU19JTl9FUlJPUl9NRVNTQUdFKSB7XG4gICAgICBpdGVtc1N0ciArPSBcIlxcbi4uLmFuZCBcIi5jb25jYXQoYWxsSXRlbXMubGVuZ3RoIC0gTUFYX0lURU1TX0lOX0VSUk9SX01FU1NBR0UsIFwiIG1vcmVcIik7XG4gICAgfVxuICAgIHByb3BzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChib2R5LmVycm9yLmRlc2NyaXB0aW9uKS5jb25jYXQoaXRlbXNTdHIpO1xuICAgIHByb3BzLmRldGFpbHMgPSBib2R5LmVycm9yO1xuICAgIHJldHVybiBwcm9wcztcbiAgfVxuICBpZiAoYm9keS5lcnJvciAmJiBib2R5LmVycm9yLmRlc2NyaXB0aW9uKSB7XG4gICAgcHJvcHMubWVzc2FnZSA9IGJvZHkuZXJyb3IuZGVzY3JpcHRpb247XG4gICAgcHJvcHMuZGV0YWlscyA9IGJvZHkuZXJyb3I7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG4gIHByb3BzLm1lc3NhZ2UgPSBib2R5LmVycm9yIHx8IGJvZHkubWVzc2FnZSB8fCBodHRwRXJyb3JNZXNzYWdlKHJlcyk7XG4gIHJldHVybiBwcm9wcztcbn1cbmZ1bmN0aW9uIGlzTXV0YXRpb25FcnJvcihib2R5KSB7XG4gIHJldHVybiBpc1BsYWluT2JqZWN0KGJvZHkpICYmIGlzUGxhaW5PYmplY3QoYm9keS5lcnJvcikgJiYgYm9keS5lcnJvci50eXBlID09PSBcIm11dGF0aW9uRXJyb3JcIiAmJiB0eXBlb2YgYm9keS5lcnJvci5kZXNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShvYmopO1xufVxuZnVuY3Rpb24gaHR0cEVycm9yTWVzc2FnZShyZXMpIHtcbiAgY29uc3Qgc3RhdHVzTWVzc2FnZSA9IHJlcy5zdGF0dXNNZXNzYWdlID8gXCIgXCIuY29uY2F0KHJlcy5zdGF0dXNNZXNzYWdlKSA6IFwiXCI7XG4gIHJldHVybiBcIlwiLmNvbmNhdChyZXMubWV0aG9kLCBcIi1yZXF1ZXN0IHRvIFwiKS5jb25jYXQocmVzLnVybCwgXCIgcmVzdWx0ZWQgaW4gSFRUUCBcIikuY29uY2F0KHJlcy5zdGF0dXNDb2RlKS5jb25jYXQoc3RhdHVzTWVzc2FnZSk7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlCb2R5KGJvZHksIHJlcykge1xuICBjb25zdCBjb250ZW50VHlwZSA9IChyZXMuaGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBpc0pzb24gPSBjb250ZW50VHlwZS5pbmRleE9mKFwiYXBwbGljYXRpb24vanNvblwiKSAhPT0gLTE7XG4gIHJldHVybiBpc0pzb24gPyBKU09OLnN0cmluZ2lmeShib2R5LCBudWxsLCAyKSA6IGJvZHk7XG59XG5jb25zdCBodHRwRXJyb3IgPSB7XG4gIG9uUmVzcG9uc2U6IHJlcyA9PiB7XG4gICAgaWYgKHJlcy5zdGF0dXNDb2RlID49IDUwMCkge1xuICAgICAgdGhyb3cgbmV3IFNlcnZlckVycm9yKHJlcyk7XG4gICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgIHRocm93IG5ldyBDbGllbnRFcnJvcihyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG59O1xuY29uc3QgcHJpbnRXYXJuaW5ncyA9IHtcbiAgb25SZXNwb25zZTogcmVzID0+IHtcbiAgICBjb25zdCB3YXJuID0gcmVzLmhlYWRlcnNbXCJ4LXNhbml0eS13YXJuaW5nXCJdO1xuICAgIGNvbnN0IHdhcm5pbmdzID0gQXJyYXkuaXNBcnJheSh3YXJuKSA/IHdhcm4gOiBbd2Fybl07XG4gICAgd2FybmluZ3MuZmlsdGVyKEJvb2xlYW4pLmZvckVhY2gobXNnID0+IGNvbnNvbGUud2Fybihtc2cpKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG59O1xuZnVuY3Rpb24gZGVmaW5lSHR0cFJlcXVlc3QoZW52TWlkZGxld2FyZSwgX3JlZikge1xuICBsZXQge1xuICAgIG1heFJldHJpZXMgPSA1LFxuICAgIHJldHJ5RGVsYXlcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHJlcXVlc3QgPSBnZXRJdChbbWF4UmV0cmllcyA+IDAgPyByZXRyeSh7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXRyeURlbGF5LFxuICAgIC8vIFRoaXMgb3B0aW9uIGlzIHR5cGVkIGluY29ycmVjdGx5IGluIGdldC1pdC5cbiAgICBtYXhSZXRyaWVzLFxuICAgIHNob3VsZFJldHJ5XG4gIH0pIDoge30sIC4uLmVudk1pZGRsZXdhcmUsIHByaW50V2FybmluZ3MsIGpzb25SZXF1ZXN0KCksIGpzb25SZXNwb25zZSgpLCBwcm9ncmVzcygpLCBodHRwRXJyb3IsIG9ic2VydmFibGUoe1xuICAgIGltcGxlbWVudGF0aW9uOiBPYnNlcnZhYmxlXG4gIH0pXSk7XG4gIGZ1bmN0aW9uIGh0dHBSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgICBsZXQgcmVxdWVzdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiByZXF1ZXN0O1xuICAgIHJldHVybiByZXF1ZXN0ZXIoe1xuICAgICAgbWF4UmVkaXJlY3RzOiAwLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICB9XG4gIGh0dHBSZXF1ZXN0LmRlZmF1bHRSZXF1ZXN0ZXIgPSByZXF1ZXN0O1xuICByZXR1cm4gaHR0cFJlcXVlc3Q7XG59XG5mdW5jdGlvbiBzaG91bGRSZXRyeShlcnIsIGF0dGVtcHQsIG9wdGlvbnMpIHtcbiAgY29uc3QgaXNTYWZlID0gb3B0aW9ucy5tZXRob2QgPT09IFwiR0VUXCIgfHwgb3B0aW9ucy5tZXRob2QgPT09IFwiSEVBRFwiO1xuICBjb25zdCB1cmkgPSBvcHRpb25zLnVyaSB8fCBvcHRpb25zLnVybDtcbiAgY29uc3QgaXNRdWVyeSA9IHVyaS5zdGFydHNXaXRoKFwiL2RhdGEvcXVlcnlcIik7XG4gIGNvbnN0IGlzUmV0cmlhYmxlUmVzcG9uc2UgPSBlcnIucmVzcG9uc2UgJiYgKGVyci5yZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MjkgfHwgZXJyLnJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDUwMiB8fCBlcnIucmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNTAzKTtcbiAgaWYgKChpc1NhZmUgfHwgaXNRdWVyeSkgJiYgaXNSZXRyaWFibGVSZXNwb25zZSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiByZXRyeS5zaG91bGRSZXRyeShlcnIsIGF0dGVtcHQsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKHNlbCkge1xuICBpZiAodHlwZW9mIHNlbCA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KHNlbCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHNlbFxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBzZWwgPT09IFwib2JqZWN0XCIgJiYgc2VsICE9PSBudWxsICYmIFwicXVlcnlcIiBpbiBzZWwgJiYgdHlwZW9mIHNlbC5xdWVyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBcInBhcmFtc1wiIGluIHNlbCAmJiB0eXBlb2Ygc2VsLnBhcmFtcyA9PT0gXCJvYmplY3RcIiAmJiBzZWwucGFyYW1zICE9PSBudWxsID8ge1xuICAgICAgcXVlcnk6IHNlbC5xdWVyeSxcbiAgICAgIHBhcmFtczogc2VsLnBhcmFtc1xuICAgIH0gOiB7XG4gICAgICBxdWVyeTogc2VsLnF1ZXJ5XG4gICAgfTtcbiAgfVxuICBjb25zdCBzZWxlY3Rpb25PcHRzID0gW1wiKiBEb2N1bWVudCBJRCAoPGRvY0lkPilcIiwgXCIqIEFycmF5IG9mIGRvY3VtZW50IElEc1wiLCBcIiogT2JqZWN0IGNvbnRhaW5pbmcgYHF1ZXJ5YFwiXS5qb2luKFwiXFxuXCIpO1xuICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHNlbGVjdGlvbiAtIG11c3QgYmUgb25lIG9mOlxcblxcblwiLmNvbmNhdChzZWxlY3Rpb25PcHRzKSk7XG59XG5jb25zdCBWQUxJRF9BU1NFVF9UWVBFUyA9IFtcImltYWdlXCIsIFwiZmlsZVwiXTtcbmNvbnN0IFZBTElEX0lOU0VSVF9MT0NBVElPTlMgPSBbXCJiZWZvcmVcIiwgXCJhZnRlclwiLCBcInJlcGxhY2VcIl07XG5jb25zdCBkYXRhc2V0ID0gbmFtZSA9PiB7XG4gIGlmICghL14oflthLXowLTldezF9Wy1cXHddezAsNjN9fFthLXowLTldezF9Wy1cXHddezAsNjN9KSQvLnRlc3QobmFtZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhc2V0cyBjYW4gb25seSBjb250YWluIGxvd2VyY2FzZSBjaGFyYWN0ZXJzLCBudW1iZXJzLCB1bmRlcnNjb3JlcyBhbmQgZGFzaGVzLCBhbmQgc3RhcnQgd2l0aCB0aWxkZSwgYW5kIGJlIG1heGltdW0gNjQgY2hhcmFjdGVyc1wiKTtcbiAgfVxufTtcbmNvbnN0IHByb2plY3RJZCA9IGlkID0+IHtcbiAgaWYgKCEvXlstYS16MC05XSskL2kudGVzdChpZCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJgcHJvamVjdElkYCBjYW4gb25seSBjb250YWluIG9ubHkgYS16LCAwLTkgYW5kIGRhc2hlc1wiKTtcbiAgfVxufTtcbmNvbnN0IHZhbGlkYXRlQXNzZXRUeXBlID0gdHlwZSA9PiB7XG4gIGlmIChWQUxJRF9BU1NFVF9UWVBFUy5pbmRleE9mKHR5cGUpID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXNzZXQgdHlwZTogXCIuY29uY2F0KHR5cGUsIFwiLiBNdXN0IGJlIG9uZSBvZiBcIikuY29uY2F0KFZBTElEX0FTU0VUX1RZUEVTLmpvaW4oXCIsIFwiKSkpO1xuICB9XG59O1xuY29uc3QgdmFsaWRhdGVPYmplY3QgPSAob3AsIHZhbCkgPT4ge1xuICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KG9wLCBcIigpIHRha2VzIGFuIG9iamVjdCBvZiBwcm9wZXJ0aWVzXCIpKTtcbiAgfVxufTtcbmNvbnN0IHZhbGlkYXRlRG9jdW1lbnRJZCA9IChvcCwgaWQpID0+IHtcbiAgaWYgKHR5cGVvZiBpZCAhPT0gXCJzdHJpbmdcIiB8fCAhL15bYS16MC05X11bYS16MC05Xy4tXXswLDEyN30kL2kudGVzdChpZCkgfHwgaWQuaW5jbHVkZXMoXCIuLlwiKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChvcCwgJygpOiBcIicpLmNvbmNhdChpZCwgJ1wiIGlzIG5vdCBhIHZhbGlkIGRvY3VtZW50IElEJykpO1xuICB9XG59O1xuY29uc3QgcmVxdWlyZURvY3VtZW50SWQgPSAob3AsIGRvYykgPT4ge1xuICBpZiAoIWRvYy5faWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQob3AsICcoKSByZXF1aXJlcyB0aGF0IHRoZSBkb2N1bWVudCBjb250YWlucyBhbiBJRCAoXCJfaWRcIiBwcm9wZXJ0eSknKSk7XG4gIH1cbiAgdmFsaWRhdGVEb2N1bWVudElkKG9wLCBkb2MuX2lkKTtcbn07XG5jb25zdCB2YWxpZGF0ZUluc2VydCA9IChhdCwgc2VsZWN0b3IsIGl0ZW1zKSA9PiB7XG4gIGNvbnN0IHNpZ25hdHVyZSA9IFwiaW5zZXJ0KGF0LCBzZWxlY3RvciwgaXRlbXMpXCI7XG4gIGlmIChWQUxJRF9JTlNFUlRfTE9DQVRJT05TLmluZGV4T2YoYXQpID09PSAtMSkge1xuICAgIGNvbnN0IHZhbGlkID0gVkFMSURfSU5TRVJUX0xPQ0FUSU9OUy5tYXAobG9jID0+ICdcIicuY29uY2F0KGxvYywgJ1wiJykpLmpvaW4oXCIsIFwiKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQoc2lnbmF0dXJlLCAnIHRha2VzIGFuIFwiYXRcIi1hcmd1bWVudCB3aGljaCBpcyBvbmUgb2Y6ICcpLmNvbmNhdCh2YWxpZCkpO1xuICB9XG4gIGlmICh0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQoc2lnbmF0dXJlLCAnIHRha2VzIGEgXCJzZWxlY3RvclwiLWFyZ3VtZW50IHdoaWNoIG11c3QgYmUgYSBzdHJpbmcnKSk7XG4gIH1cbiAgaWYgKCFBcnJheS5pc0FycmF5KGl0ZW1zKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChzaWduYXR1cmUsICcgdGFrZXMgYW4gXCJpdGVtc1wiLWFyZ3VtZW50IHdoaWNoIG11c3QgYmUgYW4gYXJyYXknKSk7XG4gIH1cbn07XG5jb25zdCBoYXNEYXRhc2V0ID0gY29uZmlnID0+IHtcbiAgaWYgKCFjb25maWcuZGF0YXNldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImBkYXRhc2V0YCBtdXN0IGJlIHByb3ZpZGVkIHRvIHBlcmZvcm0gcXVlcmllc1wiKTtcbiAgfVxuICByZXR1cm4gY29uZmlnLmRhdGFzZXQgfHwgXCJcIjtcbn07XG5jb25zdCByZXF1ZXN0VGFnID0gdGFnID0+IHtcbiAgaWYgKHR5cGVvZiB0YWcgIT09IFwic3RyaW5nXCIgfHwgIS9eW2EtejAtOS5fLV17MSw3NX0kL2kudGVzdCh0YWcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGFnIGNhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY3RlcnMsIHVuZGVyc2NvcmVzLCBkYXNoZXMgYW5kIGRvdHMsIGFuZCBiZSBiZXR3ZWVuIG9uZSBhbmQgNzUgY2hhcmFjdGVycyBsb25nLlwiKTtcbiAgfVxuICByZXR1cm4gdGFnO1xufTtcbnZhciBfX2FjY2Vzc0NoZWNrJDYgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDYgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDYob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkNiA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQ2ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skNihvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCQ1LCBfY2xpZW50MiQ1O1xuY2xhc3MgQmFzZVBhdGNoIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0aW9uKSB7XG4gICAgbGV0IG9wZXJhdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICAgIHRoaXMub3BlcmF0aW9ucyA9IG9wZXJhdGlvbnM7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIGdpdmVuIGF0dHJpYnV0ZXMgdG8gdGhlIGRvY3VtZW50LiBEb2VzIE5PVCBtZXJnZSBvYmplY3RzLlxuICAgKiBUaGUgb3BlcmF0aW9uIGlzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHBhdGNoLCByZWFkeSB0byBiZSBjb21taXRlZCBieSBgY29tbWl0KClgXG4gICAqXG4gICAqIEBwYXJhbSBhdHRycyAtIEF0dHJpYnV0ZXMgdG8gc2V0LiBUbyBzZXQgYSBkZWVwIGF0dHJpYnV0ZSwgdXNlIEpTT05NYXRjaCwgZWc6IFxce1wibmVzdGVkLnByb3BcIjogXCJ2YWx1ZVwiXFx9XG4gICAqL1xuICBzZXQoYXR0cnMpIHtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwic2V0XCIsIGF0dHJzKTtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgZ2l2ZW4gYXR0cmlidXRlcyB0byB0aGUgZG9jdW1lbnQgaWYgdGhleSBhcmUgbm90IGN1cnJlbnRseSBzZXQuIERvZXMgTk9UIG1lcmdlIG9iamVjdHMuXG4gICAqIFRoZSBvcGVyYXRpb24gaXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgcGF0Y2gsIHJlYWR5IHRvIGJlIGNvbW1pdGVkIGJ5IGBjb21taXQoKWBcbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gQXR0cmlidXRlcyB0byBzZXQuIFRvIHNldCBhIGRlZXAgYXR0cmlidXRlLCB1c2UgSlNPTk1hdGNoLCBlZzogXFx7XCJuZXN0ZWQucHJvcFwiOiBcInZhbHVlXCJcXH1cbiAgICovXG4gIHNldElmTWlzc2luZyhhdHRycykge1xuICAgIHJldHVybiB0aGlzLl9hc3NpZ24oXCJzZXRJZk1pc3NpbmdcIiwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIFwiZGlmZi1tYXRjaC1wYXRjaFwiIG9wZXJhdGlvbiBvbiB0aGUgc3RyaW5nIGF0dHJpYnV0ZXMgcHJvdmlkZWQuXG4gICAqIFRoZSBvcGVyYXRpb24gaXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgcGF0Y2gsIHJlYWR5IHRvIGJlIGNvbW1pdGVkIGJ5IGBjb21taXQoKWBcbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gQXR0cmlidXRlcyB0byBwZXJmb3JtIG9wZXJhdGlvbiBvbi4gVG8gc2V0IGEgZGVlcCBhdHRyaWJ1dGUsIHVzZSBKU09OTWF0Y2gsIGVnOiBcXHtcIm5lc3RlZC5wcm9wXCI6IFwiZG1wXCJcXH1cbiAgICovXG4gIGRpZmZNYXRjaFBhdGNoKGF0dHJzKSB7XG4gICAgdmFsaWRhdGVPYmplY3QoXCJkaWZmTWF0Y2hQYXRjaFwiLCBhdHRycyk7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbihcImRpZmZNYXRjaFBhdGNoXCIsIGF0dHJzKTtcbiAgfVxuICAvKipcbiAgICogVW5zZXRzIHRoZSBhdHRyaWJ1dGUgcGF0aHMgcHJvdmlkZWQuXG4gICAqIFRoZSBvcGVyYXRpb24gaXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgcGF0Y2gsIHJlYWR5IHRvIGJlIGNvbW1pdGVkIGJ5IGBjb21taXQoKWBcbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gQXR0cmlidXRlIHBhdGhzIHRvIHVuc2V0LlxuICAgKi9cbiAgdW5zZXQoYXR0cnMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXR0cnMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnNldChhdHRycykgdGFrZXMgYW4gYXJyYXkgb2YgYXR0cmlidXRlcyB0byB1bnNldCwgbm9uLWFycmF5IGdpdmVuXCIpO1xuICAgIH1cbiAgICB0aGlzLm9wZXJhdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wZXJhdGlvbnMsIHtcbiAgICAgIHVuc2V0OiBhdHRyc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBJbmNyZW1lbnQgYSBudW1lcmljIHZhbHVlLiBFYWNoIGVudHJ5IGluIHRoZSBhcmd1bWVudCBpcyBlaXRoZXIgYW4gYXR0cmlidXRlIG9yIGEgSlNPTiBwYXRoLiBUaGUgdmFsdWUgbWF5IGJlIGEgcG9zaXRpdmUgb3IgbmVnYXRpdmUgaW50ZWdlciBvciBmbG9hdGluZy1wb2ludCB2YWx1ZS4gVGhlIG9wZXJhdGlvbiB3aWxsIGZhaWwgaWYgdGFyZ2V0IHZhbHVlIGlzIG5vdCBhIG51bWVyaWMgdmFsdWUsIG9yIGRvZXNuJ3QgZXhpc3QuXG4gICAqXG4gICAqIEBwYXJhbSBhdHRycyAtIE9iamVjdCBvZiBhdHRyaWJ1dGUgcGF0aHMgdG8gaW5jcmVtZW50LCB2YWx1ZXMgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgdG8gaW5jcmVtZW50IGJ5LlxuICAgKi9cbiAgaW5jKGF0dHJzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbihcImluY1wiLCBhdHRycyk7XG4gIH1cbiAgLyoqXG4gICAqIERlY3JlbWVudCBhIG51bWVyaWMgdmFsdWUuIEVhY2ggZW50cnkgaW4gdGhlIGFyZ3VtZW50IGlzIGVpdGhlciBhbiBhdHRyaWJ1dGUgb3IgYSBKU09OIHBhdGguIFRoZSB2YWx1ZSBtYXkgYmUgYSBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBpbnRlZ2VyIG9yIGZsb2F0aW5nLXBvaW50IHZhbHVlLiBUaGUgb3BlcmF0aW9uIHdpbGwgZmFpbCBpZiB0YXJnZXQgdmFsdWUgaXMgbm90IGEgbnVtZXJpYyB2YWx1ZSwgb3IgZG9lc24ndCBleGlzdC5cbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gT2JqZWN0IG9mIGF0dHJpYnV0ZSBwYXRocyB0byBkZWNyZW1lbnQsIHZhbHVlcyByZXByZXNlbnRpbmcgdGhlIG51bWJlciB0byBkZWNyZW1lbnQgYnkuXG4gICAqL1xuICBkZWMoYXR0cnMpIHtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwiZGVjXCIsIGF0dHJzKTtcbiAgfVxuICAvKipcbiAgICogUHJvdmlkZXMgbWV0aG9kcyBmb3IgbW9kaWZ5aW5nIGFycmF5cywgYnkgaW5zZXJ0aW5nLCBhcHBlbmRpbmcgYW5kIHJlcGxhY2luZyBlbGVtZW50cyB2aWEgYSBKU09OUGF0aCBleHByZXNzaW9uLlxuICAgKlxuICAgKiBAcGFyYW0gYXQgLSBMb2NhdGlvbiB0byBpbnNlcnQgYXQsIHJlbGF0aXZlIHRvIHRoZSBnaXZlbiBzZWxlY3Rvciwgb3IgJ3JlcGxhY2UnIHRoZSBtYXRjaGVkIHBhdGhcbiAgICogQHBhcmFtIHNlbGVjdG9yIC0gSlNPTlBhdGggZXhwcmVzc2lvbiwgZWcgYGNvbW1lbnRzWy0xXWAgb3IgYGJsb2Nrc1tfa2V5PT1cImFiYzEyM1wiXWBcbiAgICogQHBhcmFtIGl0ZW1zIC0gQXJyYXkgb2YgaXRlbXMgdG8gaW5zZXJ0L3JlcGxhY2VcbiAgICovXG4gIGluc2VydChhdCwgc2VsZWN0b3IsIGl0ZW1zKSB7XG4gICAgdmFsaWRhdGVJbnNlcnQoYXQsIHNlbGVjdG9yLCBpdGVtcyk7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbihcImluc2VydFwiLCB7XG4gICAgICBbYXRdOiBzZWxlY3RvcixcbiAgICAgIGl0ZW1zXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGVuZCB0aGUgZ2l2ZW4gaXRlbXMgdG8gdGhlIGFycmF5IGF0IHRoZSBnaXZlbiBKU09OUGF0aFxuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0b3IgLSBBdHRyaWJ1dGUvcGF0aCB0byBhcHBlbmQgdG8sIGVnIGBjb21tZW50c2Agb3IgYHBlcnNvbi5ob2JiaWVzYFxuICAgKiBAcGFyYW0gaXRlbXMgLSBBcnJheSBvZiBpdGVtcyB0byBhcHBlbmQgdG8gdGhlIGFycmF5XG4gICAqL1xuICBhcHBlbmQoc2VsZWN0b3IsIGl0ZW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0KFwiYWZ0ZXJcIiwgXCJcIi5jb25jYXQoc2VsZWN0b3IsIFwiWy0xXVwiKSwgaXRlbXMpO1xuICB9XG4gIC8qKlxuICAgKiBQcmVwZW5kIHRoZSBnaXZlbiBpdGVtcyB0byB0aGUgYXJyYXkgYXQgdGhlIGdpdmVuIEpTT05QYXRoXG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvciAtIEF0dHJpYnV0ZS9wYXRoIHRvIHByZXBlbmQgdG8sIGVnIGBjb21tZW50c2Agb3IgYHBlcnNvbi5ob2JiaWVzYFxuICAgKiBAcGFyYW0gaXRlbXMgLSBBcnJheSBvZiBpdGVtcyB0byBwcmVwZW5kIHRvIHRoZSBhcnJheVxuICAgKi9cbiAgcHJlcGVuZChzZWxlY3RvciwgaXRlbXMpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnQoXCJiZWZvcmVcIiwgXCJcIi5jb25jYXQoc2VsZWN0b3IsIFwiWzBdXCIpLCBpdGVtcyk7XG4gIH1cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgY29udGVudHMgb2YgYW4gYXJyYXkgYnkgcmVtb3ZpbmcgZXhpc3RpbmcgZWxlbWVudHMgYW5kL29yIGFkZGluZyBuZXcgZWxlbWVudHMuXG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvciAtIEF0dHJpYnV0ZSBvciBKU09OUGF0aCBleHByZXNzaW9uIGZvciBhcnJheVxuICAgKiBAcGFyYW0gc3RhcnQgLSBJbmRleCBhdCB3aGljaCB0byBzdGFydCBjaGFuZ2luZyB0aGUgYXJyYXkgKHdpdGggb3JpZ2luIDApLiBJZiBncmVhdGVyIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgYXJyYXksIGFjdHVhbCBzdGFydGluZyBpbmRleCB3aWxsIGJlIHNldCB0byB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheS4gSWYgbmVnYXRpdmUsIHdpbGwgYmVnaW4gdGhhdCBtYW55IGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgYXJyYXkgKHdpdGggb3JpZ2luIC0xKSBhbmQgd2lsbCBiZSBzZXQgdG8gMCBpZiBhYnNvbHV0ZSB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgYXJyYXkueFxuICAgKiBAcGFyYW0gZGVsZXRlQ291bnQgLSBBbiBpbnRlZ2VyIGluZGljYXRpbmcgdGhlIG51bWJlciBvZiBvbGQgYXJyYXkgZWxlbWVudHMgdG8gcmVtb3ZlLlxuICAgKiBAcGFyYW0gaXRlbXMgLSBUaGUgZWxlbWVudHMgdG8gYWRkIHRvIHRoZSBhcnJheSwgYmVnaW5uaW5nIGF0IHRoZSBzdGFydCBpbmRleC4gSWYgeW91IGRvbid0IHNwZWNpZnkgYW55IGVsZW1lbnRzLCBzcGxpY2UoKSB3aWxsIG9ubHkgcmVtb3ZlIGVsZW1lbnRzIGZyb20gdGhlIGFycmF5LlxuICAgKi9cbiAgc3BsaWNlKHNlbGVjdG9yLCBzdGFydCwgZGVsZXRlQ291bnQsIGl0ZW1zKSB7XG4gICAgY29uc3QgZGVsQWxsID0gdHlwZW9mIGRlbGV0ZUNvdW50ID09PSBcInVuZGVmaW5lZFwiIHx8IGRlbGV0ZUNvdW50ID09PSAtMTtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gc3RhcnQgPCAwID8gc3RhcnQgLSAxIDogc3RhcnQ7XG4gICAgY29uc3QgZGVsQ291bnQgPSBkZWxBbGwgPyAtMSA6IE1hdGgubWF4KDAsIHN0YXJ0ICsgZGVsZXRlQ291bnQpO1xuICAgIGNvbnN0IGRlbFJhbmdlID0gc3RhcnRJbmRleCA8IDAgJiYgZGVsQ291bnQgPj0gMCA/IFwiXCIgOiBkZWxDb3VudDtcbiAgICBjb25zdCByYW5nZVNlbGVjdG9yID0gXCJcIi5jb25jYXQoc2VsZWN0b3IsIFwiW1wiKS5jb25jYXQoc3RhcnRJbmRleCwgXCI6XCIpLmNvbmNhdChkZWxSYW5nZSwgXCJdXCIpO1xuICAgIHJldHVybiB0aGlzLmluc2VydChcInJlcGxhY2VcIiwgcmFuZ2VTZWxlY3RvciwgaXRlbXMgfHwgW10pO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgcmV2aXNpb24gY2xhdXNlLCBwcmV2ZW50aW5nIHRoZSBkb2N1bWVudCBmcm9tIGJlaW5nIHBhdGNoZWQgaWYgdGhlIGBfcmV2YCBwcm9wZXJ0eSBkb2VzIG5vdCBtYXRjaCB0aGUgZ2l2ZW4gdmFsdWVcbiAgICpcbiAgICogQHBhcmFtIHJldiAtIFJldmlzaW9uIHRvIGxvY2sgdGhlIHBhdGNoIHRvXG4gICAqL1xuICBpZlJldmlzaW9uSWQocmV2KSB7XG4gICAgdGhpcy5vcGVyYXRpb25zLmlmUmV2aXNpb25JRCA9IHJldjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGEgcGxhaW4gSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGF0Y2hcbiAgICovXG4gIHNlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZ2V0U2VsZWN0aW9uKHRoaXMuc2VsZWN0aW9uKSxcbiAgICAgIC4uLnRoaXMub3BlcmF0aW9uc1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhIHBsYWluIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHBhdGNoXG4gICAqL1xuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgcGF0Y2ggb2YgYWxsIG9wZXJhdGlvbnNcbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMub3BlcmF0aW9ucyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIF9hc3NpZ24ob3AsIHByb3BzKSB7XG4gICAgbGV0IG1lcmdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlO1xuICAgIHZhbGlkYXRlT2JqZWN0KG9wLCBwcm9wcyk7XG4gICAgdGhpcy5vcGVyYXRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcGVyYXRpb25zLCB7XG4gICAgICBbb3BdOiBPYmplY3QuYXNzaWduKHt9LCBtZXJnZSAmJiB0aGlzLm9wZXJhdGlvbnNbb3BdIHx8IHt9LCBwcm9wcylcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBfc2V0KG9wLCBwcm9wcykge1xuICAgIHJldHVybiB0aGlzLl9hc3NpZ24ob3AsIHByb3BzLCBmYWxzZSk7XG4gIH1cbn1cbmNvbnN0IF9PYnNlcnZhYmxlUGF0Y2ggPSBjbGFzcyBfT2JzZXJ2YWJsZVBhdGNoIGV4dGVuZHMgQmFzZVBhdGNoIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0aW9uLCBvcGVyYXRpb25zLCBjbGllbnQpIHtcbiAgICBzdXBlcihzZWxlY3Rpb24sIG9wZXJhdGlvbnMpO1xuICAgIF9fcHJpdmF0ZUFkZCQ2KHRoaXMsIF9jbGllbnQkNSwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkNih0aGlzLCBfY2xpZW50JDUsIGNsaWVudCk7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lcyB0aGUgcGF0Y2hcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX09ic2VydmFibGVQYXRjaCh0aGlzLnNlbGVjdGlvbiwge1xuICAgICAgLi4udGhpcy5vcGVyYXRpb25zXG4gICAgfSwgX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudCQ1KSk7XG4gIH1cbiAgY29tbWl0KG9wdGlvbnMpIHtcbiAgICBpZiAoIV9fcHJpdmF0ZUdldCQ2KHRoaXMsIF9jbGllbnQkNSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGBjbGllbnRgIHBhc3NlZCB0byBwYXRjaCwgZWl0aGVyIHByb3ZpZGUgb25lIG9yIHBhc3MgdGhlIHBhdGNoIHRvIGEgY2xpZW50cyBgbXV0YXRlKClgIG1ldGhvZFwiKTtcbiAgICB9XG4gICAgY29uc3QgcmV0dXJuRmlyc3QgPSB0eXBlb2YgdGhpcy5zZWxlY3Rpb24gPT09IFwic3RyaW5nXCI7XG4gICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgcmV0dXJuRmlyc3QsXG4gICAgICByZXR1cm5Eb2N1bWVudHM6IHRydWVcbiAgICB9LCBvcHRpb25zKTtcbiAgICByZXR1cm4gX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudCQ1KS5tdXRhdGUoe1xuICAgICAgcGF0Y2g6IHRoaXMuc2VyaWFsaXplKClcbiAgICB9LCBvcHRzKTtcbiAgfVxufTtcbl9jbGllbnQkNSA9IG5ldyBXZWFrTWFwKCk7XG5sZXQgT2JzZXJ2YWJsZVBhdGNoID0gX09ic2VydmFibGVQYXRjaDtcbmNvbnN0IF9QYXRjaCA9IGNsYXNzIF9QYXRjaCBleHRlbmRzIEJhc2VQYXRjaCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdGlvbiwgb3BlcmF0aW9ucywgY2xpZW50KSB7XG4gICAgc3VwZXIoc2VsZWN0aW9uLCBvcGVyYXRpb25zKTtcbiAgICBfX3ByaXZhdGVBZGQkNih0aGlzLCBfY2xpZW50MiQ1LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ2KHRoaXMsIF9jbGllbnQyJDUsIGNsaWVudCk7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lcyB0aGUgcGF0Y2hcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX1BhdGNoKHRoaXMuc2VsZWN0aW9uLCB7XG4gICAgICAuLi50aGlzLm9wZXJhdGlvbnNcbiAgICB9LCBfX3ByaXZhdGVHZXQkNih0aGlzLCBfY2xpZW50MiQ1KSk7XG4gIH1cbiAgY29tbWl0KG9wdGlvbnMpIHtcbiAgICBpZiAoIV9fcHJpdmF0ZUdldCQ2KHRoaXMsIF9jbGllbnQyJDUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBgY2xpZW50YCBwYXNzZWQgdG8gcGF0Y2gsIGVpdGhlciBwcm92aWRlIG9uZSBvciBwYXNzIHRoZSBwYXRjaCB0byBhIGNsaWVudHMgYG11dGF0ZSgpYCBtZXRob2RcIik7XG4gICAgfVxuICAgIGNvbnN0IHJldHVybkZpcnN0ID0gdHlwZW9mIHRoaXMuc2VsZWN0aW9uID09PSBcInN0cmluZ1wiO1xuICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIHJldHVybkZpcnN0LFxuICAgICAgcmV0dXJuRG9jdW1lbnRzOiB0cnVlXG4gICAgfSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZUdldCQ2KHRoaXMsIF9jbGllbnQyJDUpLm11dGF0ZSh7XG4gICAgICBwYXRjaDogdGhpcy5zZXJpYWxpemUoKVxuICAgIH0sIG9wdHMpO1xuICB9XG59O1xuX2NsaWVudDIkNSA9IG5ldyBXZWFrTWFwKCk7XG5sZXQgUGF0Y2ggPSBfUGF0Y2g7XG52YXIgX19hY2Nlc3NDaGVjayQ1ID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCQ1ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQ1KG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkJDUgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQkNSA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDUob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnQkNCwgX2NsaWVudDIkNDtcbmNvbnN0IGRlZmF1bHRNdXRhdGVPcHRpb25zID0ge1xuICByZXR1cm5Eb2N1bWVudHM6IGZhbHNlXG59O1xuY2xhc3MgQmFzZVRyYW5zYWN0aW9uIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG9wZXJhdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgIGxldCB0cmFuc2FjdGlvbklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcGVyYXRpb25zID0gb3BlcmF0aW9ucztcbiAgICB0aGlzLnRyeElkID0gdHJhbnNhY3Rpb25JZDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBTYW5pdHkgZG9jdW1lbnQuIElmIGBfaWRgIGlzIHByb3ZpZGVkIGFuZCBhbHJlYWR5IGV4aXN0cywgdGhlIG11dGF0aW9uIHdpbGwgZmFpbC4gSWYgbm8gYF9pZGAgaXMgZ2l2ZW4sIG9uZSB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgZ2VuZXJhdGVkIGJ5IHRoZSBkYXRhYmFzZS5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCB0cmFuc2FjdGlvbiwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gZG9jIC0gRG9jdW1lbnQgdG8gY3JlYXRlLiBSZXF1aXJlcyBhIGBfdHlwZWAgcHJvcGVydHkuXG4gICAqL1xuICBjcmVhdGUoZG9jKSB7XG4gICAgdmFsaWRhdGVPYmplY3QoXCJjcmVhdGVcIiwgZG9jKTtcbiAgICByZXR1cm4gdGhpcy5fYWRkKHtcbiAgICAgIGNyZWF0ZTogZG9jXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgU2FuaXR5IGRvY3VtZW50LiBJZiBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUgYF9pZGAgYWxyZWFkeSBleGlzdHMsIHRoZSBjcmVhdGUgb3BlcmF0aW9uIHdpbGwgYmUgaWdub3JlZC5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCB0cmFuc2FjdGlvbiwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gZG9jIC0gRG9jdW1lbnQgdG8gY3JlYXRlIGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3QuIFJlcXVpcmVzIGBfaWRgIGFuZCBgX3R5cGVgIHByb3BlcnRpZXMuXG4gICAqL1xuICBjcmVhdGVJZk5vdEV4aXN0cyhkb2MpIHtcbiAgICBjb25zdCBvcCA9IFwiY3JlYXRlSWZOb3RFeGlzdHNcIjtcbiAgICB2YWxpZGF0ZU9iamVjdChvcCwgZG9jKTtcbiAgICByZXF1aXJlRG9jdW1lbnRJZChvcCwgZG9jKTtcbiAgICByZXR1cm4gdGhpcy5fYWRkKHtcbiAgICAgIFtvcF06IGRvY1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFNhbml0eSBkb2N1bWVudCwgb3IgcmVwbGFjZXMgYW4gZXhpc3Rpbmcgb25lIGlmIHRoZSBzYW1lIGBfaWRgIGlzIGFscmVhZHkgdXNlZC5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCB0cmFuc2FjdGlvbiwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gZG9jIC0gRG9jdW1lbnQgdG8gY3JlYXRlIG9yIHJlcGxhY2UuIFJlcXVpcmVzIGBfaWRgIGFuZCBgX3R5cGVgIHByb3BlcnRpZXMuXG4gICAqL1xuICBjcmVhdGVPclJlcGxhY2UoZG9jKSB7XG4gICAgY29uc3Qgb3AgPSBcImNyZWF0ZU9yUmVwbGFjZVwiO1xuICAgIHZhbGlkYXRlT2JqZWN0KG9wLCBkb2MpO1xuICAgIHJlcXVpcmVEb2N1bWVudElkKG9wLCBkb2MpO1xuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgW29wXTogZG9jXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHdpdGggdGhlIGdpdmVuIGRvY3VtZW50IElEXG4gICAqIFRoZSBvcGVyYXRpb24gaXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgdHJhbnNhY3Rpb24sIHJlYWR5IHRvIGJlIGNvbW1pdGVkIGJ5IGBjb21taXQoKWBcbiAgICpcbiAgICogQHBhcmFtIGRvY3VtZW50SWQgLSBEb2N1bWVudCBJRCB0byBkZWxldGVcbiAgICovXG4gIGRlbGV0ZShkb2N1bWVudElkKSB7XG4gICAgdmFsaWRhdGVEb2N1bWVudElkKFwiZGVsZXRlXCIsIGRvY3VtZW50SWQpO1xuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgZGVsZXRlOiB7XG4gICAgICAgIGlkOiBkb2N1bWVudElkXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgdHJhbnNhY3Rpb25JZChpZCkge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyeElkO1xuICAgIH1cbiAgICB0aGlzLnRyeElkID0gaWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhIHBsYWluIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHRyYW5zYWN0aW9uXG4gICAqL1xuICBzZXJpYWxpemUoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLm9wZXJhdGlvbnNdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYSBwbGFpbiBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0cmFuc2FjdGlvblxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIHRyYW5zYWN0aW9uIG9mIGFsbCBvcGVyYXRpb25zXG4gICAqL1xuICByZXNldCgpIHtcbiAgICB0aGlzLm9wZXJhdGlvbnMgPSBbXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBfYWRkKG11dCkge1xuICAgIHRoaXMub3BlcmF0aW9ucy5wdXNoKG11dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbmNvbnN0IF9UcmFuc2FjdGlvbiA9IGNsYXNzIF9UcmFuc2FjdGlvbiBleHRlbmRzIEJhc2VUcmFuc2FjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG9wZXJhdGlvbnMsIGNsaWVudCwgdHJhbnNhY3Rpb25JZCkge1xuICAgIHN1cGVyKG9wZXJhdGlvbnMsIHRyYW5zYWN0aW9uSWQpO1xuICAgIF9fcHJpdmF0ZUFkZCQ1KHRoaXMsIF9jbGllbnQkNCwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkNSh0aGlzLCBfY2xpZW50JDQsIGNsaWVudCk7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lcyB0aGUgdHJhbnNhY3Rpb25cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX1RyYW5zYWN0aW9uKFsuLi50aGlzLm9wZXJhdGlvbnNdLCBfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50JDQpLCB0aGlzLnRyeElkKTtcbiAgfVxuICBjb21taXQob3B0aW9ucykge1xuICAgIGlmICghX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudCQ0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYGNsaWVudGAgcGFzc2VkIHRvIHRyYW5zYWN0aW9uLCBlaXRoZXIgcHJvdmlkZSBvbmUgb3IgcGFzcyB0aGUgdHJhbnNhY3Rpb24gdG8gYSBjbGllbnRzIGBtdXRhdGUoKWAgbWV0aG9kXCIpO1xuICAgIH1cbiAgICByZXR1cm4gX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudCQ0KS5tdXRhdGUodGhpcy5zZXJpYWxpemUoKSwgT2JqZWN0LmFzc2lnbih7XG4gICAgICB0cmFuc2FjdGlvbklkOiB0aGlzLnRyeElkXG4gICAgfSwgZGVmYXVsdE11dGF0ZU9wdGlvbnMsIG9wdGlvbnMgfHwge30pKTtcbiAgfVxuICBwYXRjaChwYXRjaE9yRG9jdW1lbnRJZCwgcGF0Y2hPcHMpIHtcbiAgICBjb25zdCBpc0J1aWxkZXIgPSB0eXBlb2YgcGF0Y2hPcHMgPT09IFwiZnVuY3Rpb25cIjtcbiAgICBjb25zdCBpc1BhdGNoID0gdHlwZW9mIHBhdGNoT3JEb2N1bWVudElkICE9PSBcInN0cmluZ1wiICYmIHBhdGNoT3JEb2N1bWVudElkIGluc3RhbmNlb2YgUGF0Y2g7XG4gICAgaWYgKGlzUGF0Y2gpIHtcbiAgICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgICBwYXRjaDogcGF0Y2hPckRvY3VtZW50SWQuc2VyaWFsaXplKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNCdWlsZGVyKSB7XG4gICAgICBjb25zdCBwYXRjaCA9IHBhdGNoT3BzKG5ldyBQYXRjaChwYXRjaE9yRG9jdW1lbnRJZCwge30sIF9fcHJpdmF0ZUdldCQ1KHRoaXMsIF9jbGllbnQkNCkpKTtcbiAgICAgIGlmICghKHBhdGNoIGluc3RhbmNlb2YgUGF0Y2gpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImZ1bmN0aW9uIHBhc3NlZCB0byBgcGF0Y2goKWAgbXVzdCByZXR1cm4gdGhlIHBhdGNoXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICAgIHBhdGNoOiBwYXRjaC5zZXJpYWxpemUoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgcGF0Y2g6IHtcbiAgICAgICAgaWQ6IHBhdGNoT3JEb2N1bWVudElkLFxuICAgICAgICAuLi5wYXRjaE9wc1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuX2NsaWVudCQ0ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBUcmFuc2FjdGlvbiA9IF9UcmFuc2FjdGlvbjtcbmNvbnN0IF9PYnNlcnZhYmxlVHJhbnNhY3Rpb24gPSBjbGFzcyBfT2JzZXJ2YWJsZVRyYW5zYWN0aW9uIGV4dGVuZHMgQmFzZVRyYW5zYWN0aW9uIHtcbiAgY29uc3RydWN0b3Iob3BlcmF0aW9ucywgY2xpZW50LCB0cmFuc2FjdGlvbklkKSB7XG4gICAgc3VwZXIob3BlcmF0aW9ucywgdHJhbnNhY3Rpb25JZCk7XG4gICAgX19wcml2YXRlQWRkJDUodGhpcywgX2NsaWVudDIkNCwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkNSh0aGlzLCBfY2xpZW50MiQ0LCBjbGllbnQpO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZXMgdGhlIHRyYW5zYWN0aW9uXG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlVHJhbnNhY3Rpb24oWy4uLnRoaXMub3BlcmF0aW9uc10sIF9fcHJpdmF0ZUdldCQ1KHRoaXMsIF9jbGllbnQyJDQpLCB0aGlzLnRyeElkKTtcbiAgfVxuICBjb21taXQob3B0aW9ucykge1xuICAgIGlmICghX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudDIkNCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGBjbGllbnRgIHBhc3NlZCB0byB0cmFuc2FjdGlvbiwgZWl0aGVyIHByb3ZpZGUgb25lIG9yIHBhc3MgdGhlIHRyYW5zYWN0aW9uIHRvIGEgY2xpZW50cyBgbXV0YXRlKClgIG1ldGhvZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIF9fcHJpdmF0ZUdldCQ1KHRoaXMsIF9jbGllbnQyJDQpLm11dGF0ZSh0aGlzLnNlcmlhbGl6ZSgpLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIHRyYW5zYWN0aW9uSWQ6IHRoaXMudHJ4SWRcbiAgICB9LCBkZWZhdWx0TXV0YXRlT3B0aW9ucywgb3B0aW9ucyB8fCB7fSkpO1xuICB9XG4gIHBhdGNoKHBhdGNoT3JEb2N1bWVudElkLCBwYXRjaE9wcykge1xuICAgIGNvbnN0IGlzQnVpbGRlciA9IHR5cGVvZiBwYXRjaE9wcyA9PT0gXCJmdW5jdGlvblwiO1xuICAgIGNvbnN0IGlzUGF0Y2ggPSB0eXBlb2YgcGF0Y2hPckRvY3VtZW50SWQgIT09IFwic3RyaW5nXCIgJiYgcGF0Y2hPckRvY3VtZW50SWQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlUGF0Y2g7XG4gICAgaWYgKGlzUGF0Y2gpIHtcbiAgICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgICBwYXRjaDogcGF0Y2hPckRvY3VtZW50SWQuc2VyaWFsaXplKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNCdWlsZGVyKSB7XG4gICAgICBjb25zdCBwYXRjaCA9IHBhdGNoT3BzKG5ldyBPYnNlcnZhYmxlUGF0Y2gocGF0Y2hPckRvY3VtZW50SWQsIHt9LCBfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50MiQ0KSkpO1xuICAgICAgaWYgKCEocGF0Y2ggaW5zdGFuY2VvZiBPYnNlcnZhYmxlUGF0Y2gpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImZ1bmN0aW9uIHBhc3NlZCB0byBgcGF0Y2goKWAgbXVzdCByZXR1cm4gdGhlIHBhdGNoXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICAgIHBhdGNoOiBwYXRjaC5zZXJpYWxpemUoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgcGF0Y2g6IHtcbiAgICAgICAgaWQ6IHBhdGNoT3JEb2N1bWVudElkLFxuICAgICAgICAuLi5wYXRjaE9wc1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuX2NsaWVudDIkNCA9IG5ldyBXZWFrTWFwKCk7XG5sZXQgT2JzZXJ2YWJsZVRyYW5zYWN0aW9uID0gX09ic2VydmFibGVUcmFuc2FjdGlvbjtcbmNvbnN0IEJBU0VfVVJMID0gXCJodHRwczovL3d3dy5zYW5pdHkuaW8vaGVscC9cIjtcbmZ1bmN0aW9uIGdlbmVyYXRlSGVscFVybChzbHVnKSB7XG4gIHJldHVybiBCQVNFX1VSTCArIHNsdWc7XG59XG5mdW5jdGlvbiBvbmNlKGZuKSB7XG4gIGxldCBkaWRDYWxsID0gZmFsc2U7XG4gIGxldCByZXR1cm5WYWx1ZTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZGlkQ2FsbCkge1xuICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH1cbiAgICByZXR1cm5WYWx1ZSA9IGZuKC4uLmFyZ3VtZW50cyk7XG4gICAgZGlkQ2FsbCA9IHRydWU7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICB9O1xufVxuY29uc3QgY3JlYXRlV2FybmluZ1ByaW50ZXIgPSBtZXNzYWdlID0+XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxub25jZShmdW5jdGlvbiAoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cbiAgcmV0dXJuIGNvbnNvbGUud2FybihtZXNzYWdlLmpvaW4oXCIgXCIpLCAuLi5hcmdzKTtcbn0pO1xuY29uc3QgcHJpbnRDZG5XYXJuaW5nID0gY3JlYXRlV2FybmluZ1ByaW50ZXIoW1wiU2luY2UgeW91IGhhdmVuJ3Qgc2V0IGEgdmFsdWUgZm9yIGB1c2VDZG5gLCB3ZSB3aWxsIGRlbGl2ZXIgY29udGVudCB1c2luZyBvdXJcIiwgXCJnbG9iYWwsIGVkZ2UtY2FjaGVkIEFQSS1DRE4uIElmIHlvdSB3aXNoIHRvIGhhdmUgY29udGVudCBkZWxpdmVyZWQgZmFzdGVyLCBzZXRcIiwgXCJgdXNlQ2RuOiBmYWxzZWAgdG8gdXNlIHRoZSBMaXZlIEFQSS4gTm90ZTogWW91IG1heSBpbmN1ciBoaWdoZXIgY29zdHMgdXNpbmcgdGhlIGxpdmUgQVBJLlwiXSk7XG5jb25zdCBwcmludENkblByZXZpZXdEcmFmdHNXYXJuaW5nID0gY3JlYXRlV2FybmluZ1ByaW50ZXIoW1wiVGhlIFNhbml0eSBjbGllbnQgaXMgY29uZmlndXJlZCB3aXRoIHRoZSBgcGVyc3BlY3RpdmVgIHNldCB0byBgcHJldmlld0RyYWZ0c2AsIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgQVBJLUNETi5cIiwgXCJUaGUgTGl2ZSBBUEkgd2lsbCBiZSB1c2VkIGluc3RlYWQuIFNldCBgdXNlQ2RuOiBmYWxzZWAgaW4geW91ciBjb25maWd1cmF0aW9uIHRvIGhpZGUgdGhpcyB3YXJuaW5nLlwiXSk7XG5jb25zdCBwcmludEJyb3dzZXJUb2tlbldhcm5pbmcgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJZb3UgaGF2ZSBjb25maWd1cmVkIFNhbml0eSBjbGllbnQgdG8gdXNlIGEgdG9rZW4gaW4gdGhlIGJyb3dzZXIuIFRoaXMgbWF5IGNhdXNlIHVuaW50ZW50aW9uYWwgc2VjdXJpdHkgaXNzdWVzLlwiLCBcIlNlZSBcIi5jb25jYXQoZ2VuZXJhdGVIZWxwVXJsKFwianMtY2xpZW50LWJyb3dzZXItdG9rZW5cIiksIFwiIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBob3cgdG8gaGlkZSB0aGlzIHdhcm5pbmcuXCIpXSk7XG5jb25zdCBwcmludE5vQXBpVmVyc2lvblNwZWNpZmllZFdhcm5pbmcgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJVc2luZyB0aGUgU2FuaXR5IGNsaWVudCB3aXRob3V0IHNwZWNpZnlpbmcgYW4gQVBJIHZlcnNpb24gaXMgZGVwcmVjYXRlZC5cIiwgXCJTZWUgXCIuY29uY2F0KGdlbmVyYXRlSGVscFVybChcImpzLWNsaWVudC1hcGktdmVyc2lvblwiKSldKTtcbmNvbnN0IHByaW50Tm9EZWZhdWx0RXhwb3J0ID0gY3JlYXRlV2FybmluZ1ByaW50ZXIoW1wiVGhlIGRlZmF1bHQgZXhwb3J0IG9mIEBzYW5pdHkvY2xpZW50IGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSB0aGUgbmFtZWQgZXhwb3J0IGBjcmVhdGVDbGllbnRgIGluc3RlYWQuXCJdKTtcbmNvbnN0IGRlZmF1bHRDZG5Ib3N0ID0gXCJhcGljZG4uc2FuaXR5LmlvXCI7XG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICBhcGlIb3N0OiBcImh0dHBzOi8vYXBpLnNhbml0eS5pb1wiLFxuICBhcGlWZXJzaW9uOiBcIjFcIixcbiAgdXNlUHJvamVjdEhvc3RuYW1lOiB0cnVlXG59O1xuY29uc3QgTE9DQUxIT1NUUyA9IFtcImxvY2FsaG9zdFwiLCBcIjEyNy4wLjAuMVwiLCBcIjAuMC4wLjBcIl07XG5jb25zdCBpc0xvY2FsID0gaG9zdCA9PiBMT0NBTEhPU1RTLmluZGV4T2YoaG9zdCkgIT09IC0xO1xuY29uc3QgdmFsaWRhdGVBcGlWZXJzaW9uID0gZnVuY3Rpb24gdmFsaWRhdGVBcGlWZXJzaW9uMihhcGlWZXJzaW9uKSB7XG4gIGlmIChhcGlWZXJzaW9uID09PSBcIjFcIiB8fCBhcGlWZXJzaW9uID09PSBcIlhcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBhcGlEYXRlID0gbmV3IERhdGUoYXBpVmVyc2lvbik7XG4gIGNvbnN0IGFwaVZlcnNpb25WYWxpZCA9IC9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KGFwaVZlcnNpb24pICYmIGFwaURhdGUgaW5zdGFuY2VvZiBEYXRlICYmIGFwaURhdGUuZ2V0VGltZSgpID4gMDtcbiAgaWYgKCFhcGlWZXJzaW9uVmFsaWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFQSSB2ZXJzaW9uIHN0cmluZywgZXhwZWN0ZWQgYDFgIG9yIGRhdGUgaW4gZm9ybWF0IGBZWVlZLU1NLUREYFwiKTtcbiAgfVxufTtcbmNvbnN0IHZhbGlkYXRlQXBpUGVyc3BlY3RpdmUgPSBmdW5jdGlvbiB2YWxpZGF0ZUFwaVBlcnNwZWN0aXZlMihwZXJzcGVjdGl2ZSkge1xuICBzd2l0Y2ggKHBlcnNwZWN0aXZlKSB7XG4gICAgY2FzZSBcInByZXZpZXdEcmFmdHNcIjpcbiAgICBjYXNlIFwicHVibGlzaGVkXCI6XG4gICAgY2FzZSBcInJhd1wiOlxuICAgICAgcmV0dXJuO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBBUEkgcGVyc3BlY3RpdmUgc3RyaW5nLCBleHBlY3RlZCBgcHVibGlzaGVkYCwgYHByZXZpZXdEcmFmdHNgIG9yIGByYXdgXCIpO1xuICB9XG59O1xuY29uc3QgaW5pdENvbmZpZyA9IChjb25maWcsIHByZXZDb25maWcpID0+IHtcbiAgY29uc3Qgc3BlY2lmaWVkQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgcHJldkNvbmZpZywgY29uZmlnKTtcbiAgaWYgKCFzcGVjaWZpZWRDb25maWcuYXBpVmVyc2lvbikge1xuICAgIHByaW50Tm9BcGlWZXJzaW9uU3BlY2lmaWVkV2FybmluZygpO1xuICB9XG4gIGNvbnN0IG5ld0NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRDb25maWcsIHNwZWNpZmllZENvbmZpZyk7XG4gIGNvbnN0IHByb2plY3RCYXNlZCA9IG5ld0NvbmZpZy51c2VQcm9qZWN0SG9zdG5hbWU7XG4gIGlmICh0eXBlb2YgUHJvbWlzZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNvbnN0IGhlbHBVcmwgPSBnZW5lcmF0ZUhlbHBVcmwoXCJqcy1jbGllbnQtcHJvbWlzZS1wb2x5ZmlsbFwiKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBuYXRpdmUgUHJvbWlzZS1pbXBsZW1lbnRhdGlvbiBmb3VuZCwgcG9seWZpbGwgbmVlZGVkIC0gc2VlIFwiLmNvbmNhdChoZWxwVXJsKSk7XG4gIH1cbiAgaWYgKHByb2plY3RCYXNlZCAmJiAhbmV3Q29uZmlnLnByb2plY3RJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gbXVzdCBjb250YWluIGBwcm9qZWN0SWRgXCIpO1xuICB9XG4gIGlmICh0eXBlb2YgbmV3Q29uZmlnLnBlcnNwZWN0aXZlID09PSBcInN0cmluZ1wiKSB7XG4gICAgdmFsaWRhdGVBcGlQZXJzcGVjdGl2ZShuZXdDb25maWcucGVyc3BlY3RpdmUpO1xuICB9XG4gIGlmIChcImVuY29kZVNvdXJjZU1hcEF0UGF0aFwiIGluIG5ld0NvbmZpZyB8fCBcImVuY29kZVNvdXJjZU1hcFwiIGluIG5ld0NvbmZpZyB8fCBcInN0dWRpb1VybFwiIGluIG5ld0NvbmZpZyB8fCBcImxvZ2dlclwiIGluIG5ld0NvbmZpZykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkl0IGxvb2tzIGxpa2UgeW91J3JlIHVzaW5nIG9wdGlvbnMgbWVhbnQgZm9yICdAc2FuaXR5L3ByZXZpZXcta2l0L2NsaWVudCcsIHN1Y2ggYXMgJ2VuY29kZVNvdXJjZU1hcEF0UGF0aCcsICdlbmNvZGVTb3VyY2VNYXAnLCAnc3R1ZGlvVXJsJyBhbmQgJ2xvZ2dlcicuIE1ha2Ugc3VyZSB5b3UncmUgdXNpbmcgdGhlIHJpZ2h0IGltcG9ydC5cIik7XG4gIH1cbiAgY29uc3QgaXNCcm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lO1xuICBjb25zdCBpc0xvY2FsaG9zdCA9IGlzQnJvd3NlciAmJiBpc0xvY2FsKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSk7XG4gIGlmIChpc0Jyb3dzZXIgJiYgaXNMb2NhbGhvc3QgJiYgbmV3Q29uZmlnLnRva2VuICYmIG5ld0NvbmZpZy5pZ25vcmVCcm93c2VyVG9rZW5XYXJuaW5nICE9PSB0cnVlKSB7XG4gICAgcHJpbnRCcm93c2VyVG9rZW5XYXJuaW5nKCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5ld0NvbmZpZy51c2VDZG4gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBwcmludENkbldhcm5pbmcoKTtcbiAgfVxuICBpZiAocHJvamVjdEJhc2VkKSB7XG4gICAgcHJvamVjdElkKG5ld0NvbmZpZy5wcm9qZWN0SWQpO1xuICB9XG4gIGlmIChuZXdDb25maWcuZGF0YXNldCkge1xuICAgIGRhdGFzZXQobmV3Q29uZmlnLmRhdGFzZXQpO1xuICB9XG4gIGlmIChcInJlcXVlc3RUYWdQcmVmaXhcIiBpbiBuZXdDb25maWcpIHtcbiAgICBuZXdDb25maWcucmVxdWVzdFRhZ1ByZWZpeCA9IG5ld0NvbmZpZy5yZXF1ZXN0VGFnUHJlZml4ID8gcmVxdWVzdFRhZyhuZXdDb25maWcucmVxdWVzdFRhZ1ByZWZpeCkucmVwbGFjZSgvXFwuKyQvLCBcIlwiKSA6IHZvaWQgMDtcbiAgfVxuICBuZXdDb25maWcuYXBpVmVyc2lvbiA9IFwiXCIuY29uY2F0KG5ld0NvbmZpZy5hcGlWZXJzaW9uKS5yZXBsYWNlKC9edi8sIFwiXCIpO1xuICBuZXdDb25maWcuaXNEZWZhdWx0QXBpID0gbmV3Q29uZmlnLmFwaUhvc3QgPT09IGRlZmF1bHRDb25maWcuYXBpSG9zdDtcbiAgbmV3Q29uZmlnLnVzZUNkbiA9IG5ld0NvbmZpZy51c2VDZG4gIT09IGZhbHNlICYmICFuZXdDb25maWcud2l0aENyZWRlbnRpYWxzO1xuICB2YWxpZGF0ZUFwaVZlcnNpb24obmV3Q29uZmlnLmFwaVZlcnNpb24pO1xuICBjb25zdCBob3N0UGFydHMgPSBuZXdDb25maWcuYXBpSG9zdC5zcGxpdChcIjovL1wiLCAyKTtcbiAgY29uc3QgcHJvdG9jb2wgPSBob3N0UGFydHNbMF07XG4gIGNvbnN0IGhvc3QgPSBob3N0UGFydHNbMV07XG4gIGNvbnN0IGNkbkhvc3QgPSBuZXdDb25maWcuaXNEZWZhdWx0QXBpID8gZGVmYXVsdENkbkhvc3QgOiBob3N0O1xuICBpZiAobmV3Q29uZmlnLnVzZVByb2plY3RIb3N0bmFtZSkge1xuICAgIG5ld0NvbmZpZy51cmwgPSBcIlwiLmNvbmNhdChwcm90b2NvbCwgXCI6Ly9cIikuY29uY2F0KG5ld0NvbmZpZy5wcm9qZWN0SWQsIFwiLlwiKS5jb25jYXQoaG9zdCwgXCIvdlwiKS5jb25jYXQobmV3Q29uZmlnLmFwaVZlcnNpb24pO1xuICAgIG5ld0NvbmZpZy5jZG5VcmwgPSBcIlwiLmNvbmNhdChwcm90b2NvbCwgXCI6Ly9cIikuY29uY2F0KG5ld0NvbmZpZy5wcm9qZWN0SWQsIFwiLlwiKS5jb25jYXQoY2RuSG9zdCwgXCIvdlwiKS5jb25jYXQobmV3Q29uZmlnLmFwaVZlcnNpb24pO1xuICB9IGVsc2Uge1xuICAgIG5ld0NvbmZpZy51cmwgPSBcIlwiLmNvbmNhdChuZXdDb25maWcuYXBpSG9zdCwgXCIvdlwiKS5jb25jYXQobmV3Q29uZmlnLmFwaVZlcnNpb24pO1xuICAgIG5ld0NvbmZpZy5jZG5VcmwgPSBuZXdDb25maWcudXJsO1xuICB9XG4gIHJldHVybiBuZXdDb25maWc7XG59O1xuY29uc3QgcHJvamVjdEhlYWRlciA9IFwiWC1TYW5pdHktUHJvamVjdC1JRFwiO1xuZnVuY3Rpb24gcmVxdWVzdE9wdGlvbnMoY29uZmlnKSB7XG4gIGxldCBvdmVycmlkZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICBjb25zdCBoZWFkZXJzID0ge307XG4gIGNvbnN0IHRva2VuID0gb3ZlcnJpZGVzLnRva2VuIHx8IGNvbmZpZy50b2tlbjtcbiAgaWYgKHRva2VuKSB7XG4gICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIuY29uY2F0KHRva2VuKTtcbiAgfVxuICBpZiAoIW92ZXJyaWRlcy51c2VHbG9iYWxBcGkgJiYgIWNvbmZpZy51c2VQcm9qZWN0SG9zdG5hbWUgJiYgY29uZmlnLnByb2plY3RJZCkge1xuICAgIGhlYWRlcnNbcHJvamVjdEhlYWRlcl0gPSBjb25maWcucHJvamVjdElkO1xuICB9XG4gIGNvbnN0IHdpdGhDcmVkZW50aWFscyA9IEJvb2xlYW4odHlwZW9mIG92ZXJyaWRlcy53aXRoQ3JlZGVudGlhbHMgPT09IFwidW5kZWZpbmVkXCIgPyBjb25maWcudG9rZW4gfHwgY29uZmlnLndpdGhDcmVkZW50aWFscyA6IG92ZXJyaWRlcy53aXRoQ3JlZGVudGlhbHMpO1xuICBjb25zdCB0aW1lb3V0ID0gdHlwZW9mIG92ZXJyaWRlcy50aW1lb3V0ID09PSBcInVuZGVmaW5lZFwiID8gY29uZmlnLnRpbWVvdXQgOiBvdmVycmlkZXMudGltZW91dDtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG92ZXJyaWRlcywge1xuICAgIGhlYWRlcnM6IE9iamVjdC5hc3NpZ24oe30sIGhlYWRlcnMsIG92ZXJyaWRlcy5oZWFkZXJzIHx8IHt9KSxcbiAgICB0aW1lb3V0OiB0eXBlb2YgdGltZW91dCA9PT0gXCJ1bmRlZmluZWRcIiA/IDUgKiA2MCAqIDFlMyA6IHRpbWVvdXQsXG4gICAgcHJveHk6IG92ZXJyaWRlcy5wcm94eSB8fCBjb25maWcucHJveHksXG4gICAganNvbjogdHJ1ZSxcbiAgICB3aXRoQ3JlZGVudGlhbHMsXG4gICAgZmV0Y2g6IHR5cGVvZiBvdmVycmlkZXMuZmV0Y2ggPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGNvbmZpZy5mZXRjaCA9PT0gXCJvYmplY3RcIiA/IHtcbiAgICAgIC4uLmNvbmZpZy5mZXRjaCxcbiAgICAgIC4uLm92ZXJyaWRlcy5mZXRjaFxuICAgIH0gOiBvdmVycmlkZXMuZmV0Y2ggfHwgY29uZmlnLmZldGNoXG4gIH0pO1xufVxuY29uc3QgZW5jb2RlUXVlcnlTdHJpbmcgPSBfcmVmMiA9PiB7XG4gIGxldCB7XG4gICAgcXVlcnksXG4gICAgcGFyYW1zID0ge30sXG4gICAgb3B0aW9ucyA9IHt9XG4gIH0gPSBfcmVmMjtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBjb25zdCB7XG4gICAgdGFnLFxuICAgIC4uLm9wdHNcbiAgfSA9IG9wdGlvbnM7XG4gIGlmICh0YWcpIHNlYXJjaFBhcmFtcy5hcHBlbmQoXCJ0YWdcIiwgdGFnKTtcbiAgc2VhcmNoUGFyYW1zLmFwcGVuZChcInF1ZXJ5XCIsIHF1ZXJ5KTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocGFyYW1zKSkge1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoXCIkXCIuY29uY2F0KGtleSksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gIH1cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob3B0cykpIHtcbiAgICBpZiAodmFsdWUpIHNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBcIlwiLmNvbmNhdCh2YWx1ZSkpO1xuICB9XG4gIHJldHVybiBcIj9cIi5jb25jYXQoc2VhcmNoUGFyYW1zKTtcbn07XG5jb25zdCBleGNsdWRlRmFsc2V5ID0gKHBhcmFtLCBkZWZWYWx1ZSkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IHR5cGVvZiBwYXJhbSA9PT0gXCJ1bmRlZmluZWRcIiA/IGRlZlZhbHVlIDogcGFyYW07XG4gIHJldHVybiBwYXJhbSA9PT0gZmFsc2UgPyB2b2lkIDAgOiB2YWx1ZTtcbn07XG5jb25zdCBnZXRNdXRhdGlvblF1ZXJ5ID0gZnVuY3Rpb24gKCkge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHJldHVybiB7XG4gICAgZHJ5UnVuOiBvcHRpb25zLmRyeVJ1bixcbiAgICByZXR1cm5JZHM6IHRydWUsXG4gICAgcmV0dXJuRG9jdW1lbnRzOiBleGNsdWRlRmFsc2V5KG9wdGlvbnMucmV0dXJuRG9jdW1lbnRzLCB0cnVlKSxcbiAgICB2aXNpYmlsaXR5OiBvcHRpb25zLnZpc2liaWxpdHkgfHwgXCJzeW5jXCIsXG4gICAgYXV0b0dlbmVyYXRlQXJyYXlLZXlzOiBvcHRpb25zLmF1dG9HZW5lcmF0ZUFycmF5S2V5cyxcbiAgICBza2lwQ3Jvc3NEYXRhc2V0UmVmZXJlbmNlVmFsaWRhdGlvbjogb3B0aW9ucy5za2lwQ3Jvc3NEYXRhc2V0UmVmZXJlbmNlVmFsaWRhdGlvblxuICB9O1xufTtcbmNvbnN0IGlzUmVzcG9uc2UgPSBldmVudCA9PiBldmVudC50eXBlID09PSBcInJlc3BvbnNlXCI7XG5jb25zdCBnZXRCb2R5ID0gZXZlbnQgPT4gZXZlbnQuYm9keTtcbmNvbnN0IGluZGV4QnkgPSAoZG9jcywgYXR0cikgPT4gZG9jcy5yZWR1Y2UoKGluZGV4ZWQsIGRvYykgPT4ge1xuICBpbmRleGVkW2F0dHIoZG9jKV0gPSBkb2M7XG4gIHJldHVybiBpbmRleGVkO1xufSwgLyogQF9fUFVSRV9fICovT2JqZWN0LmNyZWF0ZShudWxsKSk7XG5jb25zdCBnZXRRdWVyeVNpemVMaW1pdCA9IDExMjY0O1xuZnVuY3Rpb24gX2ZldGNoKGNsaWVudCwgaHR0cFJlcXVlc3QsIHF1ZXJ5LCBwYXJhbXMpIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuICBjb25zdCBtYXBSZXNwb25zZSA9IG9wdGlvbnMuZmlsdGVyUmVzcG9uc2UgPT09IGZhbHNlID8gcmVzID0+IHJlcyA6IHJlcyA9PiByZXMucmVzdWx0O1xuICBjb25zdCB7XG4gICAgY2FjaGUsXG4gICAgbmV4dCxcbiAgICAuLi5vcHRzXG4gIH0gPSB7XG4gICAgLy8gT3B0IG91dCBvZiBzZXR0aW5nIGEgYHNpZ25hbGAgb24gYW4gaW50ZXJuYWwgYGZldGNoYCBpZiBvbmUgaXNuJ3QgcHJvdmlkZWQuXG4gICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgaW4gUmVhY3QgU2VydmVyIENvbXBvbmVudHMgdG8gYXZvaWQgb3B0aW5nIG91dCBvZiBSZXF1ZXN0IE1lbW9pemF0aW9uLlxuICAgIHVzZUFib3J0U2lnbmFsOiB0eXBlb2Ygb3B0aW9ucy5zaWduYWwgIT09IFwidW5kZWZpbmVkXCIsXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuICBjb25zdCByZXFPcHRzID0gdHlwZW9mIGNhY2hlICE9PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBuZXh0ICE9PSBcInVuZGVmaW5lZFwiID8ge1xuICAgIC4uLm9wdHMsXG4gICAgZmV0Y2g6IHtcbiAgICAgIGNhY2hlLFxuICAgICAgbmV4dFxuICAgIH1cbiAgfSA6IG9wdHM7XG4gIHJldHVybiBfZGF0YVJlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwgXCJxdWVyeVwiLCB7XG4gICAgcXVlcnksXG4gICAgcGFyYW1zXG4gIH0sIHJlcU9wdHMpLnBpcGUobWFwKG1hcFJlc3BvbnNlKSk7XG59XG5mdW5jdGlvbiBfZ2V0RG9jdW1lbnQoY2xpZW50LCBodHRwUmVxdWVzdCwgaWQpIHtcbiAgbGV0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIHVyaTogX2dldERhdGFVcmwoY2xpZW50LCBcImRvY1wiLCBpZCksXG4gICAganNvbjogdHJ1ZSxcbiAgICB0YWc6IG9wdHMudGFnXG4gIH07XG4gIHJldHVybiBfcmVxdWVzdE9ic2VydmFibGUoY2xpZW50LCBodHRwUmVxdWVzdCwgb3B0aW9ucykucGlwZShmaWx0ZXIoaXNSZXNwb25zZSksIG1hcChldmVudCA9PiBldmVudC5ib2R5LmRvY3VtZW50cyAmJiBldmVudC5ib2R5LmRvY3VtZW50c1swXSkpO1xufVxuZnVuY3Rpb24gX2dldERvY3VtZW50cyhjbGllbnQsIGh0dHBSZXF1ZXN0LCBpZHMpIHtcbiAgbGV0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIHVyaTogX2dldERhdGFVcmwoY2xpZW50LCBcImRvY1wiLCBpZHMuam9pbihcIixcIikpLFxuICAgIGpzb246IHRydWUsXG4gICAgdGFnOiBvcHRzLnRhZ1xuICB9O1xuICByZXR1cm4gX3JlcXVlc3RPYnNlcnZhYmxlKGNsaWVudCwgaHR0cFJlcXVlc3QsIG9wdGlvbnMpLnBpcGUoZmlsdGVyKGlzUmVzcG9uc2UpLCBtYXAoZXZlbnQgPT4ge1xuICAgIGNvbnN0IGluZGV4ZWQgPSBpbmRleEJ5KGV2ZW50LmJvZHkuZG9jdW1lbnRzIHx8IFtdLCBkb2MgPT4gZG9jLl9pZCk7XG4gICAgcmV0dXJuIGlkcy5tYXAoaWQgPT4gaW5kZXhlZFtpZF0gfHwgbnVsbCk7XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIF9jcmVhdGVJZk5vdEV4aXN0cyhjbGllbnQsIGh0dHBSZXF1ZXN0LCBkb2MsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZURvY3VtZW50SWQoXCJjcmVhdGVJZk5vdEV4aXN0c1wiLCBkb2MpO1xuICByZXR1cm4gX2NyZWF0ZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBkb2MsIFwiY3JlYXRlSWZOb3RFeGlzdHNcIiwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBfY3JlYXRlT3JSZXBsYWNlKGNsaWVudCwgaHR0cFJlcXVlc3QsIGRvYywgb3B0aW9ucykge1xuICByZXF1aXJlRG9jdW1lbnRJZChcImNyZWF0ZU9yUmVwbGFjZVwiLCBkb2MpO1xuICByZXR1cm4gX2NyZWF0ZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBkb2MsIFwiY3JlYXRlT3JSZXBsYWNlXCIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gX2RlbGV0ZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBzZWxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgcmV0dXJuIF9kYXRhUmVxdWVzdChjbGllbnQsIGh0dHBSZXF1ZXN0LCBcIm11dGF0ZVwiLCB7XG4gICAgbXV0YXRpb25zOiBbe1xuICAgICAgZGVsZXRlOiBnZXRTZWxlY3Rpb24oc2VsZWN0aW9uKVxuICAgIH1dXG4gIH0sIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gX211dGF0ZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBtdXRhdGlvbnMsIG9wdGlvbnMpIHtcbiAgbGV0IG11dDtcbiAgaWYgKG11dGF0aW9ucyBpbnN0YW5jZW9mIFBhdGNoIHx8IG11dGF0aW9ucyBpbnN0YW5jZW9mIE9ic2VydmFibGVQYXRjaCkge1xuICAgIG11dCA9IHtcbiAgICAgIHBhdGNoOiBtdXRhdGlvbnMuc2VyaWFsaXplKClcbiAgICB9O1xuICB9IGVsc2UgaWYgKG11dGF0aW9ucyBpbnN0YW5jZW9mIFRyYW5zYWN0aW9uIHx8IG11dGF0aW9ucyBpbnN0YW5jZW9mIE9ic2VydmFibGVUcmFuc2FjdGlvbikge1xuICAgIG11dCA9IG11dGF0aW9ucy5zZXJpYWxpemUoKTtcbiAgfSBlbHNlIHtcbiAgICBtdXQgPSBtdXRhdGlvbnM7XG4gIH1cbiAgY29uc3QgbXV0cyA9IEFycmF5LmlzQXJyYXkobXV0KSA/IG11dCA6IFttdXRdO1xuICBjb25zdCB0cmFuc2FjdGlvbklkID0gb3B0aW9ucyAmJiBvcHRpb25zLnRyYW5zYWN0aW9uSWQgfHwgdm9pZCAwO1xuICByZXR1cm4gX2RhdGFSZXF1ZXN0KGNsaWVudCwgaHR0cFJlcXVlc3QsIFwibXV0YXRlXCIsIHtcbiAgICBtdXRhdGlvbnM6IG11dHMsXG4gICAgdHJhbnNhY3Rpb25JZFxuICB9LCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIF9kYXRhUmVxdWVzdChjbGllbnQsIGh0dHBSZXF1ZXN0LCBlbmRwb2ludCwgYm9keSkge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge307XG4gIGNvbnN0IGlzTXV0YXRpb24gPSBlbmRwb2ludCA9PT0gXCJtdXRhdGVcIjtcbiAgY29uc3QgaXNRdWVyeSA9IGVuZHBvaW50ID09PSBcInF1ZXJ5XCI7XG4gIGNvbnN0IHN0clF1ZXJ5ID0gaXNNdXRhdGlvbiA/IFwiXCIgOiBlbmNvZGVRdWVyeVN0cmluZyhib2R5KTtcbiAgY29uc3QgdXNlR2V0ID0gIWlzTXV0YXRpb24gJiYgc3RyUXVlcnkubGVuZ3RoIDwgZ2V0UXVlcnlTaXplTGltaXQ7XG4gIGNvbnN0IHN0cmluZ1F1ZXJ5ID0gdXNlR2V0ID8gc3RyUXVlcnkgOiBcIlwiO1xuICBjb25zdCByZXR1cm5GaXJzdCA9IG9wdGlvbnMucmV0dXJuRmlyc3Q7XG4gIGNvbnN0IHtcbiAgICB0aW1lb3V0LFxuICAgIHRva2VuLFxuICAgIHRhZyxcbiAgICBoZWFkZXJzXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB1cmkgPSBfZ2V0RGF0YVVybChjbGllbnQsIGVuZHBvaW50LCBzdHJpbmdRdWVyeSk7XG4gIGNvbnN0IHJlcU9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiB1c2VHZXQgPyBcIkdFVFwiIDogXCJQT1NUXCIsXG4gICAgdXJpLFxuICAgIGpzb246IHRydWUsXG4gICAgYm9keTogdXNlR2V0ID8gdm9pZCAwIDogYm9keSxcbiAgICBxdWVyeTogaXNNdXRhdGlvbiAmJiBnZXRNdXRhdGlvblF1ZXJ5KG9wdGlvbnMpLFxuICAgIHRpbWVvdXQsXG4gICAgaGVhZGVycyxcbiAgICB0b2tlbixcbiAgICB0YWcsXG4gICAgcGVyc3BlY3RpdmU6IG9wdGlvbnMucGVyc3BlY3RpdmUsXG4gICAgcmVzdWx0U291cmNlTWFwOiBvcHRpb25zLnJlc3VsdFNvdXJjZU1hcCxcbiAgICBjYW5Vc2VDZG46IGlzUXVlcnksXG4gICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaCxcbiAgICB1c2VBYm9ydFNpZ25hbDogb3B0aW9ucy51c2VBYm9ydFNpZ25hbFxuICB9O1xuICByZXR1cm4gX3JlcXVlc3RPYnNlcnZhYmxlKGNsaWVudCwgaHR0cFJlcXVlc3QsIHJlcU9wdGlvbnMpLnBpcGUoZmlsdGVyKGlzUmVzcG9uc2UpLCBtYXAoZ2V0Qm9keSksIG1hcChyZXMgPT4ge1xuICAgIGlmICghaXNNdXRhdGlvbikge1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0cyA9IHJlcy5yZXN1bHRzIHx8IFtdO1xuICAgIGlmIChvcHRpb25zLnJldHVybkRvY3VtZW50cykge1xuICAgICAgcmV0dXJuIHJldHVybkZpcnN0ID8gcmVzdWx0c1swXSAmJiByZXN1bHRzWzBdLmRvY3VtZW50IDogcmVzdWx0cy5tYXAobXV0ID0+IG11dC5kb2N1bWVudCk7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHJldHVybkZpcnN0ID8gXCJkb2N1bWVudElkXCIgOiBcImRvY3VtZW50SWRzXCI7XG4gICAgY29uc3QgaWRzID0gcmV0dXJuRmlyc3QgPyByZXN1bHRzWzBdICYmIHJlc3VsdHNbMF0uaWQgOiByZXN1bHRzLm1hcChtdXQgPT4gbXV0LmlkKTtcbiAgICByZXR1cm4ge1xuICAgICAgdHJhbnNhY3Rpb25JZDogcmVzLnRyYW5zYWN0aW9uSWQsXG4gICAgICByZXN1bHRzLFxuICAgICAgW2tleV06IGlkc1xuICAgIH07XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIF9jcmVhdGUoY2xpZW50LCBodHRwUmVxdWVzdCwgZG9jLCBvcCkge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge307XG4gIGNvbnN0IG11dGF0aW9uID0ge1xuICAgIFtvcF06IGRvY1xuICB9O1xuICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgcmV0dXJuRmlyc3Q6IHRydWUsXG4gICAgcmV0dXJuRG9jdW1lbnRzOiB0cnVlXG4gIH0sIG9wdGlvbnMpO1xuICByZXR1cm4gX2RhdGFSZXF1ZXN0KGNsaWVudCwgaHR0cFJlcXVlc3QsIFwibXV0YXRlXCIsIHtcbiAgICBtdXRhdGlvbnM6IFttdXRhdGlvbl1cbiAgfSwgb3B0cyk7XG59XG5mdW5jdGlvbiBfcmVxdWVzdE9ic2VydmFibGUoY2xpZW50LCBodHRwUmVxdWVzdCwgb3B0aW9ucykge1xuICB2YXIgX2E7XG4gIGNvbnN0IHVyaSA9IG9wdGlvbnMudXJsIHx8IG9wdGlvbnMudXJpO1xuICBjb25zdCBjb25maWcgPSBjbGllbnQuY29uZmlnKCk7XG4gIGNvbnN0IGNhblVzZUNkbiA9IHR5cGVvZiBvcHRpb25zLmNhblVzZUNkbiA9PT0gXCJ1bmRlZmluZWRcIiA/IFtcIkdFVFwiLCBcIkhFQURcIl0uaW5kZXhPZihvcHRpb25zLm1ldGhvZCB8fCBcIkdFVFwiKSA+PSAwICYmIHVyaS5pbmRleE9mKFwiL2RhdGEvXCIpID09PSAwIDogb3B0aW9ucy5jYW5Vc2VDZG47XG4gIGxldCB1c2VDZG4gPSBjb25maWcudXNlQ2RuICYmIGNhblVzZUNkbjtcbiAgY29uc3QgdGFnID0gb3B0aW9ucy50YWcgJiYgY29uZmlnLnJlcXVlc3RUYWdQcmVmaXggPyBbY29uZmlnLnJlcXVlc3RUYWdQcmVmaXgsIG9wdGlvbnMudGFnXS5qb2luKFwiLlwiKSA6IG9wdGlvbnMudGFnIHx8IGNvbmZpZy5yZXF1ZXN0VGFnUHJlZml4O1xuICBpZiAodGFnICYmIG9wdGlvbnMudGFnICE9PSBudWxsKSB7XG4gICAgb3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgIHRhZzogcmVxdWVzdFRhZyh0YWcpLFxuICAgICAgLi4ub3B0aW9ucy5xdWVyeVxuICAgIH07XG4gIH1cbiAgaWYgKFtcIkdFVFwiLCBcIkhFQURcIiwgXCJQT1NUXCJdLmluZGV4T2Yob3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIikgPj0gMCAmJiB1cmkuaW5kZXhPZihcIi9kYXRhL3F1ZXJ5L1wiKSA9PT0gMCkge1xuICAgIGNvbnN0IHJlc3VsdFNvdXJjZU1hcCA9IChfYSA9IG9wdGlvbnMucmVzdWx0U291cmNlTWFwKSAhPSBudWxsID8gX2EgOiBjb25maWcucmVzdWx0U291cmNlTWFwO1xuICAgIGlmIChyZXN1bHRTb3VyY2VNYXAgIT09IHZvaWQgMCAmJiByZXN1bHRTb3VyY2VNYXAgIT09IGZhbHNlKSB7XG4gICAgICBvcHRpb25zLnF1ZXJ5ID0ge1xuICAgICAgICByZXN1bHRTb3VyY2VNYXAsXG4gICAgICAgIC4uLm9wdGlvbnMucXVlcnlcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHBlcnNwZWN0aXZlID0gb3B0aW9ucy5wZXJzcGVjdGl2ZSB8fCBjb25maWcucGVyc3BlY3RpdmU7XG4gICAgaWYgKHR5cGVvZiBwZXJzcGVjdGl2ZSA9PT0gXCJzdHJpbmdcIiAmJiBwZXJzcGVjdGl2ZSAhPT0gXCJyYXdcIikge1xuICAgICAgdmFsaWRhdGVBcGlQZXJzcGVjdGl2ZShwZXJzcGVjdGl2ZSk7XG4gICAgICBvcHRpb25zLnF1ZXJ5ID0ge1xuICAgICAgICBwZXJzcGVjdGl2ZSxcbiAgICAgICAgLi4ub3B0aW9ucy5xdWVyeVxuICAgICAgfTtcbiAgICAgIGlmIChwZXJzcGVjdGl2ZSA9PT0gXCJwcmV2aWV3RHJhZnRzXCIgJiYgdXNlQ2RuKSB7XG4gICAgICAgIHVzZUNkbiA9IGZhbHNlO1xuICAgICAgICBwcmludENkblByZXZpZXdEcmFmdHNXYXJuaW5nKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IHJlcU9wdGlvbnMgPSByZXF1ZXN0T3B0aW9ucyhjb25maWcsIE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHtcbiAgICB1cmw6IF9nZXRVcmwoY2xpZW50LCB1cmksIHVzZUNkbilcbiAgfSkpO1xuICBjb25zdCByZXF1ZXN0ID0gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlciA9PiBodHRwUmVxdWVzdChyZXFPcHRpb25zLCBjb25maWcucmVxdWVzdGVyKS5zdWJzY3JpYmUoc3Vic2NyaWJlcikpO1xuICByZXR1cm4gb3B0aW9ucy5zaWduYWwgPyByZXF1ZXN0LnBpcGUoX3dpdGhBYm9ydFNpZ25hbChvcHRpb25zLnNpZ25hbCkpIDogcmVxdWVzdDtcbn1cbmZ1bmN0aW9uIF9yZXF1ZXN0KGNsaWVudCwgaHR0cFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IF9yZXF1ZXN0T2JzZXJ2YWJsZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBvcHRpb25zKS5waXBlKGZpbHRlcihldmVudCA9PiBldmVudC50eXBlID09PSBcInJlc3BvbnNlXCIpLCBtYXAoZXZlbnQgPT4gZXZlbnQuYm9keSkpO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cbmZ1bmN0aW9uIF9nZXREYXRhVXJsKGNsaWVudCwgb3BlcmF0aW9uLCBwYXRoKSB7XG4gIGNvbnN0IGNvbmZpZyA9IGNsaWVudC5jb25maWcoKTtcbiAgY29uc3QgY2F0YWxvZyA9IGhhc0RhdGFzZXQoY29uZmlnKTtcbiAgY29uc3QgYmFzZVVyaSA9IFwiL1wiLmNvbmNhdChvcGVyYXRpb24sIFwiL1wiKS5jb25jYXQoY2F0YWxvZyk7XG4gIGNvbnN0IHVyaSA9IHBhdGggPyBcIlwiLmNvbmNhdChiYXNlVXJpLCBcIi9cIikuY29uY2F0KHBhdGgpIDogYmFzZVVyaTtcbiAgcmV0dXJuIFwiL2RhdGFcIi5jb25jYXQodXJpKS5yZXBsYWNlKC9cXC8oJHxcXD8pLywgXCIkMVwiKTtcbn1cbmZ1bmN0aW9uIF9nZXRVcmwoY2xpZW50LCB1cmkpIHtcbiAgbGV0IGNhblVzZUNkbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7XG4gIGNvbnN0IHtcbiAgICB1cmwsXG4gICAgY2RuVXJsXG4gIH0gPSBjbGllbnQuY29uZmlnKCk7XG4gIGNvbnN0IGJhc2UgPSBjYW5Vc2VDZG4gPyBjZG5VcmwgOiB1cmw7XG4gIHJldHVybiBcIlwiLmNvbmNhdChiYXNlLCBcIi9cIikuY29uY2F0KHVyaS5yZXBsYWNlKC9eXFwvLywgXCJcIikpO1xufVxuZnVuY3Rpb24gX3dpdGhBYm9ydFNpZ25hbChzaWduYWwpIHtcbiAgcmV0dXJuIGlucHV0ID0+IHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgICAgY29uc3QgYWJvcnQgPSAoKSA9PiBvYnNlcnZlci5lcnJvcihfY3JlYXRlQWJvcnRFcnJvcihzaWduYWwpKTtcbiAgICAgIGlmIChzaWduYWwgJiYgc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gaW5wdXQuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgYWJvcnQpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBhYm9ydCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcbn1cbmNvbnN0IGlzRG9tRXhjZXB0aW9uU3VwcG9ydGVkID0gQm9vbGVhbihnbG9iYWxUaGlzLkRPTUV4Y2VwdGlvbik7XG5mdW5jdGlvbiBfY3JlYXRlQWJvcnRFcnJvcihzaWduYWwpIHtcbiAgdmFyIF9hLCBfYjtcbiAgaWYgKGlzRG9tRXhjZXB0aW9uU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIG5ldyBET01FeGNlcHRpb24oKF9hID0gc2lnbmFsID09IG51bGwgPyB2b2lkIDAgOiBzaWduYWwucmVhc29uKSAhPSBudWxsID8gX2EgOiBcIlRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQuXCIsIFwiQWJvcnRFcnJvclwiKTtcbiAgfVxuICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcigoX2IgPSBzaWduYWwgPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25hbC5yZWFzb24pICE9IG51bGwgPyBfYiA6IFwiVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZC5cIik7XG4gIGVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgcmV0dXJuIGVycm9yO1xufVxudmFyIF9fYWNjZXNzQ2hlY2skNCA9IChvYmosIG1lbWJlciwgbXNnKSA9PiB7XG4gIGlmICghbWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xufTtcbnZhciBfX3ByaXZhdGVHZXQkNCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skNChvYmosIG1lbWJlciwgXCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgcmV0dXJuIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaik7XG59O1xudmFyIF9fcHJpdmF0ZUFkZCQ0ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSkgPT4ge1xuICBpZiAobWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIHRoZSBzYW1lIHByaXZhdGUgbWVtYmVyIG1vcmUgdGhhbiBvbmNlXCIpO1xuICBtZW1iZXIgaW5zdGFuY2VvZiBXZWFrU2V0ID8gbWVtYmVyLmFkZChvYmopIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbn07XG52YXIgX19wcml2YXRlU2V0JDQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQ0KG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIik7XG4gIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBfY2xpZW50JDMsIF9odHRwUmVxdWVzdCQ0LCBfY2xpZW50MiQzLCBfaHR0cFJlcXVlc3QyJDQ7XG5jbGFzcyBPYnNlcnZhYmxlQXNzZXRzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQ0KHRoaXMsIF9jbGllbnQkMywgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkNCh0aGlzLCBfaHR0cFJlcXVlc3QkNCwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkNCh0aGlzLCBfY2xpZW50JDMsIGNsaWVudCk7XG4gICAgX19wcml2YXRlU2V0JDQodGhpcywgX2h0dHBSZXF1ZXN0JDQsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICB1cGxvYWQoYXNzZXRUeXBlLCBib2R5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF91cGxvYWQoX19wcml2YXRlR2V0JDQodGhpcywgX2NsaWVudCQzKSwgX19wcml2YXRlR2V0JDQodGhpcywgX2h0dHBSZXF1ZXN0JDQpLCBhc3NldFR5cGUsIGJvZHksIG9wdGlvbnMpO1xuICB9XG59XG5fY2xpZW50JDMgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0JDQgPSBuZXcgV2Vha01hcCgpO1xuY2xhc3MgQXNzZXRzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQ0KHRoaXMsIF9jbGllbnQyJDMsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkJDQodGhpcywgX2h0dHBSZXF1ZXN0MiQ0LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ0KHRoaXMsIF9jbGllbnQyJDMsIGNsaWVudCk7XG4gICAgX19wcml2YXRlU2V0JDQodGhpcywgX2h0dHBSZXF1ZXN0MiQ0LCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgdXBsb2FkKGFzc2V0VHlwZSwgYm9keSwgb3B0aW9ucykge1xuICAgIGNvbnN0IG9ic2VydmFibGUgPSBfdXBsb2FkKF9fcHJpdmF0ZUdldCQ0KHRoaXMsIF9jbGllbnQyJDMpLCBfX3ByaXZhdGVHZXQkNCh0aGlzLCBfaHR0cFJlcXVlc3QyJDQpLCBhc3NldFR5cGUsIGJvZHksIG9wdGlvbnMpO1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKG9ic2VydmFibGUucGlwZShmaWx0ZXIoZXZlbnQgPT4gZXZlbnQudHlwZSA9PT0gXCJyZXNwb25zZVwiKSwgbWFwKGV2ZW50ID0+IGV2ZW50LmJvZHkuZG9jdW1lbnQpKSk7XG4gIH1cbn1cbl9jbGllbnQyJDMgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0MiQ0ID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIF91cGxvYWQoY2xpZW50LCBodHRwUmVxdWVzdCwgYXNzZXRUeXBlLCBib2R5KSB7XG4gIGxldCBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7fTtcbiAgdmFsaWRhdGVBc3NldFR5cGUoYXNzZXRUeXBlKTtcbiAgbGV0IG1ldGEgPSBvcHRzLmV4dHJhY3QgfHwgdm9pZCAwO1xuICBpZiAobWV0YSAmJiAhbWV0YS5sZW5ndGgpIHtcbiAgICBtZXRhID0gW1wibm9uZVwiXTtcbiAgfVxuICBjb25zdCBkYXRhc2V0ID0gaGFzRGF0YXNldChjbGllbnQuY29uZmlnKCkpO1xuICBjb25zdCBhc3NldEVuZHBvaW50ID0gYXNzZXRUeXBlID09PSBcImltYWdlXCIgPyBcImltYWdlc1wiIDogXCJmaWxlc1wiO1xuICBjb25zdCBvcHRpb25zID0gb3B0aW9uc0Zyb21GaWxlKG9wdHMsIGJvZHkpO1xuICBjb25zdCB7XG4gICAgdGFnLFxuICAgIGxhYmVsLFxuICAgIHRpdGxlLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGNyZWRpdExpbmUsXG4gICAgZmlsZW5hbWUsXG4gICAgc291cmNlXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBxdWVyeSA9IHtcbiAgICBsYWJlbCxcbiAgICB0aXRsZSxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBmaWxlbmFtZSxcbiAgICBtZXRhLFxuICAgIGNyZWRpdExpbmVcbiAgfTtcbiAgaWYgKHNvdXJjZSkge1xuICAgIHF1ZXJ5LnNvdXJjZUlkID0gc291cmNlLmlkO1xuICAgIHF1ZXJ5LnNvdXJjZU5hbWUgPSBzb3VyY2UubmFtZTtcbiAgICBxdWVyeS5zb3VyY2VVcmwgPSBzb3VyY2UudXJsO1xuICB9XG4gIHJldHVybiBfcmVxdWVzdE9ic2VydmFibGUoY2xpZW50LCBodHRwUmVxdWVzdCwge1xuICAgIHRhZyxcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCB8fCAwLFxuICAgIHVyaTogXCIvYXNzZXRzL1wiLmNvbmNhdChhc3NldEVuZHBvaW50LCBcIi9cIikuY29uY2F0KGRhdGFzZXQpLFxuICAgIGhlYWRlcnM6IG9wdGlvbnMuY29udGVudFR5cGUgPyB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBvcHRpb25zLmNvbnRlbnRUeXBlXG4gICAgfSA6IHt9LFxuICAgIHF1ZXJ5LFxuICAgIGJvZHlcbiAgfSk7XG59XG5mdW5jdGlvbiBvcHRpb25zRnJvbUZpbGUob3B0cywgZmlsZSkge1xuICBpZiAodHlwZW9mIEZpbGUgPT09IFwidW5kZWZpbmVkXCIgfHwgIShmaWxlIGluc3RhbmNlb2YgRmlsZSkpIHtcbiAgICByZXR1cm4gb3B0cztcbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgZmlsZW5hbWU6IG9wdHMucHJlc2VydmVGaWxlbmFtZSA9PT0gZmFsc2UgPyB2b2lkIDAgOiBmaWxlLm5hbWUsXG4gICAgY29udGVudFR5cGU6IGZpbGUudHlwZVxuICB9LCBvcHRzKTtcbn1cbnZhciBkZWZhdWx0cyA9IChvYmosIGRlZmF1bHRzKSA9PiBPYmplY3Qua2V5cyhkZWZhdWx0cykuY29uY2F0KE9iamVjdC5rZXlzKG9iaikpLnJlZHVjZSgodGFyZ2V0LCBwcm9wKSA9PiB7XG4gIHRhcmdldFtwcm9wXSA9IHR5cGVvZiBvYmpbcHJvcF0gPT09IFwidW5kZWZpbmVkXCIgPyBkZWZhdWx0c1twcm9wXSA6IG9ialtwcm9wXTtcbiAgcmV0dXJuIHRhcmdldDtcbn0sIHt9KTtcbmNvbnN0IHBpY2sgPSAob2JqLCBwcm9wcykgPT4gcHJvcHMucmVkdWNlKChzZWxlY3Rpb24sIHByb3ApID0+IHtcbiAgaWYgKHR5cGVvZiBvYmpbcHJvcF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gc2VsZWN0aW9uO1xuICB9XG4gIHNlbGVjdGlvbltwcm9wXSA9IG9ialtwcm9wXTtcbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn0sIHt9KTtcbmNvbnN0IE1BWF9VUkxfTEVOR1RIID0gMTZlMyAtIDEyMDA7XG5jb25zdCBwb3NzaWJsZU9wdGlvbnMgPSBbXCJpbmNsdWRlUHJldmlvdXNSZXZpc2lvblwiLCBcImluY2x1ZGVSZXN1bHRcIiwgXCJ2aXNpYmlsaXR5XCIsIFwiZWZmZWN0Rm9ybWF0XCIsIFwidGFnXCJdO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIGluY2x1ZGVSZXN1bHQ6IHRydWVcbn07XG5mdW5jdGlvbiBfbGlzdGVuKHF1ZXJ5LCBwYXJhbXMpIHtcbiAgbGV0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICBjb25zdCB7XG4gICAgdXJsLFxuICAgIHRva2VuLFxuICAgIHdpdGhDcmVkZW50aWFscyxcbiAgICByZXF1ZXN0VGFnUHJlZml4XG4gIH0gPSB0aGlzLmNvbmZpZygpO1xuICBjb25zdCB0YWcgPSBvcHRzLnRhZyAmJiByZXF1ZXN0VGFnUHJlZml4ID8gW3JlcXVlc3RUYWdQcmVmaXgsIG9wdHMudGFnXS5qb2luKFwiLlwiKSA6IG9wdHMudGFnO1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIC4uLmRlZmF1bHRzKG9wdHMsIGRlZmF1bHRPcHRpb25zKSxcbiAgICB0YWdcbiAgfTtcbiAgY29uc3QgbGlzdGVuT3B0cyA9IHBpY2sob3B0aW9ucywgcG9zc2libGVPcHRpb25zKTtcbiAgY29uc3QgcXMgPSBlbmNvZGVRdWVyeVN0cmluZyh7XG4gICAgcXVlcnksXG4gICAgcGFyYW1zLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIHRhZyxcbiAgICAgIC4uLmxpc3Rlbk9wdHNcbiAgICB9XG4gIH0pO1xuICBjb25zdCB1cmkgPSBcIlwiLmNvbmNhdCh1cmwpLmNvbmNhdChfZ2V0RGF0YVVybCh0aGlzLCBcImxpc3RlblwiLCBxcykpO1xuICBpZiAodXJpLmxlbmd0aCA+IE1BWF9VUkxfTEVOR1RIKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IG9ic2VydmVyLmVycm9yKG5ldyBFcnJvcihcIlF1ZXJ5IHRvbyBsYXJnZSBmb3IgbGlzdGVuZXJcIikpKTtcbiAgfVxuICBjb25zdCBsaXN0ZW5Gb3IgPSBvcHRpb25zLmV2ZW50cyA/IG9wdGlvbnMuZXZlbnRzIDogW1wibXV0YXRpb25cIl07XG4gIGNvbnN0IHNob3VsZEVtaXRSZWNvbm5lY3QgPSBsaXN0ZW5Gb3IuaW5kZXhPZihcInJlY29ubmVjdFwiKSAhPT0gLTE7XG4gIGNvbnN0IGVzT3B0aW9ucyA9IHt9O1xuICBpZiAodG9rZW4gfHwgd2l0aENyZWRlbnRpYWxzKSB7XG4gICAgZXNPcHRpb25zLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gIH1cbiAgaWYgKHRva2VuKSB7XG4gICAgZXNPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIi5jb25jYXQodG9rZW4pXG4gICAgfTtcbiAgfVxuICByZXR1cm4gbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgIGxldCBlcztcbiAgICBnZXRFdmVudFNvdXJjZSgpLnRoZW4oZXZlbnRTb3VyY2UgPT4ge1xuICAgICAgZXMgPSBldmVudFNvdXJjZTtcbiAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgb2JzZXJ2ZXIuZXJyb3IocmVhc29uKTtcbiAgICAgIHN0b3AoKTtcbiAgICB9KTtcbiAgICBsZXQgcmVjb25uZWN0VGltZXI7XG4gICAgbGV0IHN0b3BwZWQgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBvbkVycm9yKCkge1xuICAgICAgaWYgKHN0b3BwZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZW1pdFJlY29ubmVjdCgpO1xuICAgICAgaWYgKHN0b3BwZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGVzLnJlYWR5U3RhdGUgPT09IGVzLkNMT1NFRCkge1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZXIpO1xuICAgICAgICByZWNvbm5lY3RUaW1lciA9IHNldFRpbWVvdXQob3BlbiwgMTAwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gb25DaGFubmVsRXJyb3IoZXJyKSB7XG4gICAgICBvYnNlcnZlci5lcnJvcihjb29lcmNlRXJyb3IoZXJyKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uTWVzc2FnZShldnQpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gcGFyc2VFdmVudChldnQpO1xuICAgICAgcmV0dXJuIGV2ZW50IGluc3RhbmNlb2YgRXJyb3IgPyBvYnNlcnZlci5lcnJvcihldmVudCkgOiBvYnNlcnZlci5uZXh0KGV2ZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25EaXNjb25uZWN0KCkge1xuICAgICAgc3RvcHBlZCA9IHRydWU7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICBpZiAoIWVzKSByZXR1cm47XG4gICAgICBlcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25FcnJvcik7XG4gICAgICBlcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbm5lbEVycm9yXCIsIG9uQ2hhbm5lbEVycm9yKTtcbiAgICAgIGVzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIG9uRGlzY29ubmVjdCk7XG4gICAgICBsaXN0ZW5Gb3IuZm9yRWFjaCh0eXBlID0+IGVzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgb25NZXNzYWdlKSk7XG4gICAgICBlcy5jbG9zZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbWl0UmVjb25uZWN0KCkge1xuICAgICAgaWYgKHNob3VsZEVtaXRSZWNvbm5lY3QpIHtcbiAgICAgICAgb2JzZXJ2ZXIubmV4dCh7XG4gICAgICAgICAgdHlwZTogXCJyZWNvbm5lY3RcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0RXZlbnRTb3VyY2UoKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRlZmF1bHQ6IEV2ZW50U291cmNlXG4gICAgICB9ID0gYXdhaXQgaW1wb3J0KCdAc2FuaXR5L2V2ZW50c291cmNlJyk7XG4gICAgICBjb25zdCBldnMgPSBuZXcgRXZlbnRTb3VyY2UodXJpLCBlc09wdGlvbnMpO1xuICAgICAgZXZzLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgIGV2cy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbm5lbEVycm9yXCIsIG9uQ2hhbm5lbEVycm9yKTtcbiAgICAgIGV2cy5hZGRFdmVudExpc3RlbmVyKFwiZGlzY29ubmVjdFwiLCBvbkRpc2Nvbm5lY3QpO1xuICAgICAgbGlzdGVuRm9yLmZvckVhY2godHlwZSA9PiBldnMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBvbk1lc3NhZ2UpKTtcbiAgICAgIHJldHVybiBldnM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICBnZXRFdmVudFNvdXJjZSgpLnRoZW4oZXZlbnRTb3VyY2UgPT4ge1xuICAgICAgICBlcyA9IGV2ZW50U291cmNlO1xuICAgICAgfSkuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgb2JzZXJ2ZXIuZXJyb3IocmVhc29uKTtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICBzdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHJldHVybiBzdG9wO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlRXZlbnQoZXZlbnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YSAmJiBKU09OLnBhcnNlKGV2ZW50LmRhdGEpIHx8IHt9O1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICAgIHR5cGU6IGV2ZW50LnR5cGVcbiAgICB9LCBkYXRhKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIGVycjtcbiAgfVxufVxuZnVuY3Rpb24gY29vZXJjZUVycm9yKGVycikge1xuICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXR1cm4gZXJyO1xuICB9XG4gIGNvbnN0IGV2dCA9IHBhcnNlRXZlbnQoZXJyKTtcbiAgcmV0dXJuIGV2dCBpbnN0YW5jZW9mIEVycm9yID8gZXZ0IDogbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UoZXZ0KSk7XG59XG5mdW5jdGlvbiBleHRyYWN0RXJyb3JNZXNzYWdlKGVycikge1xuICBpZiAoIWVyci5lcnJvcikge1xuICAgIHJldHVybiBlcnIubWVzc2FnZSB8fCBcIlVua25vd24gbGlzdGVuZXIgZXJyb3JcIjtcbiAgfVxuICBpZiAoZXJyLmVycm9yLmRlc2NyaXB0aW9uKSB7XG4gICAgcmV0dXJuIGVyci5lcnJvci5kZXNjcmlwdGlvbjtcbiAgfVxuICByZXR1cm4gdHlwZW9mIGVyci5lcnJvciA9PT0gXCJzdHJpbmdcIiA/IGVyci5lcnJvciA6IEpTT04uc3RyaW5naWZ5KGVyci5lcnJvciwgbnVsbCwgMik7XG59XG52YXIgX19hY2Nlc3NDaGVjayQzID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCQzID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQzKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkJDMgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQkMyA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDMob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnQkMiwgX2h0dHBSZXF1ZXN0JDMsIF9jbGllbnQyJDIsIF9odHRwUmVxdWVzdDIkMztcbmNsYXNzIE9ic2VydmFibGVEYXRhc2V0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMyh0aGlzLCBfY2xpZW50JDIsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkJDModGhpcywgX2h0dHBSZXF1ZXN0JDMsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDModGhpcywgX2NsaWVudCQyLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQzKHRoaXMsIF9odHRwUmVxdWVzdCQzLCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGNyZWF0ZVxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBkYXRhc2V0XG4gICAqL1xuICBjcmVhdGUobmFtZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQkMiksIF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9odHRwUmVxdWVzdCQzKSwgXCJQVVRcIiwgbmFtZSwgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEVkaXQgYSBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGVkaXRcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBOZXcgb3B0aW9ucyBmb3IgdGhlIGRhdGFzZXRcbiAgICovXG4gIGVkaXQobmFtZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQkMiksIF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9odHRwUmVxdWVzdCQzKSwgXCJQQVRDSFwiLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgZGF0YXNldCB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBvZiB0aGUgZGF0YXNldCB0byBkZWxldGVcbiAgICovXG4gIGRlbGV0ZShuYW1lKSB7XG4gICAgcmV0dXJuIF9tb2RpZnkoX19wcml2YXRlR2V0JDModGhpcywgX2NsaWVudCQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0JDMpLCBcIkRFTEVURVwiLCBuYW1lKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggYSBsaXN0IG9mIGRhdGFzZXRzIGZvciB0aGUgY29uZmlndXJlZCBwcm9qZWN0XG4gICAqL1xuICBsaXN0KCkge1xuICAgIHJldHVybiBfcmVxdWVzdChfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50JDIpLCBfX3ByaXZhdGVHZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QkMyksIHtcbiAgICAgIHVyaTogXCIvZGF0YXNldHNcIixcbiAgICAgIHRhZzogbnVsbFxuICAgIH0pO1xuICB9XG59XG5fY2xpZW50JDIgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0JDMgPSBuZXcgV2Vha01hcCgpO1xuY2xhc3MgRGF0YXNldHNDbGllbnQge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIGh0dHBSZXF1ZXN0KSB7XG4gICAgX19wcml2YXRlQWRkJDModGhpcywgX2NsaWVudDIkMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDModGhpcywgX2NsaWVudDIkMiwgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGRhdGFzZXQgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIGRhdGFzZXQgdG8gY3JlYXRlXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGRhdGFzZXRcbiAgICovXG4gIGNyZWF0ZShuYW1lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX21vZGlmeShfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50MiQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0MiQzKSwgXCJQVVRcIiwgbmFtZSwgb3B0aW9ucykpO1xuICB9XG4gIC8qKlxuICAgKiBFZGl0IGEgZGF0YXNldCB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBvZiB0aGUgZGF0YXNldCB0byBlZGl0XG4gICAqIEBwYXJhbSBvcHRpb25zIC0gTmV3IG9wdGlvbnMgZm9yIHRoZSBkYXRhc2V0XG4gICAqL1xuICBlZGl0KG5hbWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQyJDIpLCBfX3ByaXZhdGVHZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMpLCBcIlBBVENIXCIsIG5hbWUsIG9wdGlvbnMpKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgZGF0YXNldCB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBvZiB0aGUgZGF0YXNldCB0byBkZWxldGVcbiAgICovXG4gIGRlbGV0ZShuYW1lKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX21vZGlmeShfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50MiQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0MiQzKSwgXCJERUxFVEVcIiwgbmFtZSkpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIGxpc3Qgb2YgZGF0YXNldHMgZm9yIHRoZSBjb25maWd1cmVkIHByb2plY3RcbiAgICovXG4gIGxpc3QoKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX3JlcXVlc3QoX19wcml2YXRlR2V0JDModGhpcywgX2NsaWVudDIkMiksIF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9odHRwUmVxdWVzdDIkMyksIHtcbiAgICAgIHVyaTogXCIvZGF0YXNldHNcIixcbiAgICAgIHRhZzogbnVsbFxuICAgIH0pKTtcbiAgfVxufVxuX2NsaWVudDIkMiA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QyJDMgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gX21vZGlmeShjbGllbnQsIGh0dHBSZXF1ZXN0LCBtZXRob2QsIG5hbWUsIG9wdGlvbnMpIHtcbiAgZGF0YXNldChuYW1lKTtcbiAgcmV0dXJuIF9yZXF1ZXN0KGNsaWVudCwgaHR0cFJlcXVlc3QsIHtcbiAgICBtZXRob2QsXG4gICAgdXJpOiBcIi9kYXRhc2V0cy9cIi5jb25jYXQobmFtZSksXG4gICAgYm9keTogb3B0aW9ucyxcbiAgICB0YWc6IG51bGxcbiAgfSk7XG59XG52YXIgX19hY2Nlc3NDaGVjayQyID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCQyID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQyKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkJDIgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQkMiA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDIob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnQkMSwgX2h0dHBSZXF1ZXN0JDIsIF9jbGllbnQyJDEsIF9odHRwUmVxdWVzdDIkMjtcbmNsYXNzIE9ic2VydmFibGVQcm9qZWN0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMih0aGlzLCBfY2xpZW50JDEsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkJDIodGhpcywgX2h0dHBSZXF1ZXN0JDIsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDIodGhpcywgX2NsaWVudCQxLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQyKHRoaXMsIF9odHRwUmVxdWVzdCQyLCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgbGlzdChvcHRpb25zKSB7XG4gICAgY29uc3QgdXJpID0gKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaW5jbHVkZU1lbWJlcnMpID09PSBmYWxzZSA/IFwiL3Byb2plY3RzP2luY2x1ZGVNZW1iZXJzPWZhbHNlXCIgOiBcIi9wcm9qZWN0c1wiO1xuICAgIHJldHVybiBfcmVxdWVzdChfX3ByaXZhdGVHZXQkMih0aGlzLCBfY2xpZW50JDEpLCBfX3ByaXZhdGVHZXQkMih0aGlzLCBfaHR0cFJlcXVlc3QkMiksIHtcbiAgICAgIHVyaVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHByb2plY3QgYnkgcHJvamVjdCBJRFxuICAgKlxuICAgKiBAcGFyYW0gcHJvamVjdElkIC0gSUQgb2YgdGhlIHByb2plY3QgdG8gZmV0Y2hcbiAgICovXG4gIGdldEJ5SWQocHJvamVjdElkKSB7XG4gICAgcmV0dXJuIF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9jbGllbnQkMSksIF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9odHRwUmVxdWVzdCQyKSwge1xuICAgICAgdXJpOiBcIi9wcm9qZWN0cy9cIi5jb25jYXQocHJvamVjdElkKVxuICAgIH0pO1xuICB9XG59XG5fY2xpZW50JDEgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0JDIgPSBuZXcgV2Vha01hcCgpO1xuY2xhc3MgUHJvamVjdHNDbGllbnQge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIGh0dHBSZXF1ZXN0KSB7XG4gICAgX19wcml2YXRlQWRkJDIodGhpcywgX2NsaWVudDIkMSwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMih0aGlzLCBfaHR0cFJlcXVlc3QyJDIsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDIodGhpcywgX2NsaWVudDIkMSwgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkMih0aGlzLCBfaHR0cFJlcXVlc3QyJDIsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICBsaXN0KG9wdGlvbnMpIHtcbiAgICBjb25zdCB1cmkgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pbmNsdWRlTWVtYmVycykgPT09IGZhbHNlID8gXCIvcHJvamVjdHM/aW5jbHVkZU1lbWJlcnM9ZmFsc2VcIiA6IFwiL3Byb2plY3RzXCI7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX3JlcXVlc3QoX19wcml2YXRlR2V0JDIodGhpcywgX2NsaWVudDIkMSksIF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9odHRwUmVxdWVzdDIkMiksIHtcbiAgICAgIHVyaVxuICAgIH0pKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggYSBwcm9qZWN0IGJ5IHByb2plY3QgSURcbiAgICpcbiAgICogQHBhcmFtIHByb2plY3RJZCAtIElEIG9mIHRoZSBwcm9qZWN0IHRvIGZldGNoXG4gICAqL1xuICBnZXRCeUlkKHByb2plY3RJZCkge1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9jbGllbnQyJDEpLCBfX3ByaXZhdGVHZXQkMih0aGlzLCBfaHR0cFJlcXVlc3QyJDIpLCB7XG4gICAgICB1cmk6IFwiL3Byb2plY3RzL1wiLmNvbmNhdChwcm9qZWN0SWQpXG4gICAgfSkpO1xuICB9XG59XG5fY2xpZW50MiQxID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdDIkMiA9IG5ldyBXZWFrTWFwKCk7XG52YXIgX19hY2Nlc3NDaGVjayQxID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCQxID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQxKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkJDEgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQkMSA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDEob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnQsIF9odHRwUmVxdWVzdCQxLCBfY2xpZW50MiwgX2h0dHBSZXF1ZXN0MiQxO1xuY2xhc3MgT2JzZXJ2YWJsZVVzZXJzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQxKHRoaXMsIF9jbGllbnQsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkJDEodGhpcywgX2h0dHBSZXF1ZXN0JDEsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDEodGhpcywgX2NsaWVudCwgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkMSh0aGlzLCBfaHR0cFJlcXVlc3QkMSwgaHR0cFJlcXVlc3QpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHVzZXIgYnkgdXNlciBJRFxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBVc2VyIElEIG9mIHRoZSB1c2VyIHRvIGZldGNoLiBJZiBgbWVgIGlzIHByb3ZpZGVkLCBhIG1pbmltYWwgcmVzcG9uc2UgaW5jbHVkaW5nIHRoZSB1c2VycyByb2xlIGlzIHJldHVybmVkLlxuICAgKi9cbiAgZ2V0QnlJZChpZCkge1xuICAgIHJldHVybiBfcmVxdWVzdChfX3ByaXZhdGVHZXQkMSh0aGlzLCBfY2xpZW50KSwgX19wcml2YXRlR2V0JDEodGhpcywgX2h0dHBSZXF1ZXN0JDEpLCB7XG4gICAgICB1cmk6IFwiL3VzZXJzL1wiLmNvbmNhdChpZClcbiAgICB9KTtcbiAgfVxufVxuX2NsaWVudCA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QkMSA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBVc2Vyc0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMSh0aGlzLCBfY2xpZW50Miwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMSh0aGlzLCBfaHR0cFJlcXVlc3QyJDEsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDEodGhpcywgX2NsaWVudDIsIGNsaWVudCk7XG4gICAgX19wcml2YXRlU2V0JDEodGhpcywgX2h0dHBSZXF1ZXN0MiQxLCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgdXNlciBieSB1c2VyIElEXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFVzZXIgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2guIElmIGBtZWAgaXMgcHJvdmlkZWQsIGEgbWluaW1hbCByZXNwb25zZSBpbmNsdWRpbmcgdGhlIHVzZXJzIHJvbGUgaXMgcmV0dXJuZWQuXG4gICAqL1xuICBnZXRCeUlkKGlkKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX3JlcXVlc3QoX19wcml2YXRlR2V0JDEodGhpcywgX2NsaWVudDIpLCBfX3ByaXZhdGVHZXQkMSh0aGlzLCBfaHR0cFJlcXVlc3QyJDEpLCB7XG4gICAgICB1cmk6IFwiL3VzZXJzL1wiLmNvbmNhdChpZClcbiAgICB9KSk7XG4gIH1cbn1cbl9jbGllbnQyID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdDIkMSA9IG5ldyBXZWFrTWFwKCk7XG52YXIgX19hY2Nlc3NDaGVjayA9IChvYmosIG1lbWJlciwgbXNnKSA9PiB7XG4gIGlmICghbWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xufTtcbnZhciBfX3ByaXZhdGVHZXQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSkgPT4ge1xuICBpZiAobWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIHRoZSBzYW1lIHByaXZhdGUgbWVtYmVyIG1vcmUgdGhhbiBvbmNlXCIpO1xuICBtZW1iZXIgaW5zdGFuY2VvZiBXZWFrU2V0ID8gbWVtYmVyLmFkZChvYmopIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbn07XG52YXIgX19wcml2YXRlU2V0ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnRDb25maWcsIF9odHRwUmVxdWVzdCwgX2NsaWVudENvbmZpZzIsIF9odHRwUmVxdWVzdDI7XG5jb25zdCBfT2JzZXJ2YWJsZVNhbml0eUNsaWVudCA9IGNsYXNzIF9PYnNlcnZhYmxlU2FuaXR5Q2xpZW50IHtcbiAgY29uc3RydWN0b3IoaHR0cFJlcXVlc3QpIHtcbiAgICBsZXQgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBkZWZhdWx0Q29uZmlnO1xuICAgIC8qKlxuICAgICAqIFByaXZhdGUgcHJvcGVydGllc1xuICAgICAqL1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2xpZW50Q29uZmlnLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfaHR0cFJlcXVlc3QsIHZvaWQgMCk7XG4gICAgLyoqXG4gICAgICogSW5zdGFuY2UgcHJvcGVydGllc1xuICAgICAqL1xuICAgIHRoaXMubGlzdGVuID0gX2xpc3RlbjtcbiAgICB0aGlzLmNvbmZpZyhjb25maWcpO1xuICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfaHR0cFJlcXVlc3QsIGh0dHBSZXF1ZXN0KTtcbiAgICB0aGlzLmFzc2V0cyA9IG5ldyBPYnNlcnZhYmxlQXNzZXRzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpKTtcbiAgICB0aGlzLmRhdGFzZXRzID0gbmV3IE9ic2VydmFibGVEYXRhc2V0c0NsaWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSk7XG4gICAgdGhpcy5wcm9qZWN0cyA9IG5ldyBPYnNlcnZhYmxlUHJvamVjdHNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCkpO1xuICAgIHRoaXMudXNlcnMgPSBuZXcgT2JzZXJ2YWJsZVVzZXJzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpKTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgdGhlIGNsaWVudCAtIHJldHVybnMgYSBuZXcgaW5zdGFuY2VcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX09ic2VydmFibGVTYW5pdHlDbGllbnQoX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIHRoaXMuY29uZmlnKCkpO1xuICB9XG4gIGNvbmZpZyhuZXdDb25maWcpIHtcbiAgICBpZiAobmV3Q29uZmlnID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLl9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnKSAmJiBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudENvbmZpZykuYWxsb3dSZWNvbmZpZ3VyZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4aXN0aW5nIGNsaWVudCBpbnN0YW5jZSBjYW5ub3QgYmUgcmVjb25maWd1cmVkIC0gdXNlIGB3aXRoQ29uZmlnKG5ld0NvbmZpZylgIHRvIHJldHVybiBhIG5ldyBjbGllbnRcIik7XG4gICAgfVxuICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY2xpZW50Q29uZmlnLCBpbml0Q29uZmlnKG5ld0NvbmZpZywgX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcpIHx8IHt9KSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lIHRoZSBjbGllbnQgd2l0aCBhIG5ldyAocGFydGlhbCkgY29uZmlndXJhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIG5ld0NvbmZpZyAtIE5ldyBjbGllbnQgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzLCBzaGFsbG93bHkgbWVyZ2VkIHdpdGggZXhpc3RpbmcgY29uZmlndXJhdGlvblxuICAgKi9cbiAgd2l0aENvbmZpZyhuZXdDb25maWcpIHtcbiAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlU2FuaXR5Q2xpZW50KF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCB7XG4gICAgICAuLi50aGlzLmNvbmZpZygpLFxuICAgICAgLi4ubmV3Q29uZmlnXG4gICAgfSk7XG4gIH1cbiAgZmV0Y2gocXVlcnksIHBhcmFtcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICByZXR1cm4gX2ZldGNoKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBxdWVyeSwgcGFyYW1zLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggYSBzaW5nbGUgZG9jdW1lbnQgd2l0aCB0aGUgZ2l2ZW4gSUQuXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIERvY3VtZW50IElEIHRvIGZldGNoXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gICAqL1xuICBnZXREb2N1bWVudChpZCwgb3B0aW9ucykge1xuICAgIHJldHVybiBfZ2V0RG9jdW1lbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIGlkLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggbXVsdGlwbGUgZG9jdW1lbnRzIGluIG9uZSByZXF1ZXN0LlxuICAgKiBTaG91bGQgYmUgdXNlZCBzcGFyaW5nbHkgLSBwZXJmb3JtaW5nIGEgcXVlcnkgaXMgdXN1YWxseSBhIGJldHRlciBvcHRpb24uXG4gICAqIFRoZSBvcmRlci9wb3NpdGlvbiBvZiBkb2N1bWVudHMgaXMgcHJlc2VydmVkIGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBhcnJheSBvZiBJRHMuXG4gICAqIElmIGFueSBvZiB0aGUgZG9jdW1lbnRzIGFyZSBtaXNzaW5nLCB0aGV5IHdpbGwgYmUgcmVwbGFjZWQgYnkgYSBgbnVsbGAgZW50cnkgaW4gdGhlIHJldHVybmVkIGFycmF5XG4gICAqXG4gICAqIEBwYXJhbSBpZHMgLSBEb2N1bWVudCBJRHMgdG8gZmV0Y2hcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICovXG4gIGdldERvY3VtZW50cyhpZHMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX2dldERvY3VtZW50cyh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgaWRzLCBvcHRpb25zKTtcbiAgfVxuICBjcmVhdGUoZG9jdW1lbnQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX2NyZWF0ZSh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgZG9jdW1lbnQsIFwiY3JlYXRlXCIsIG9wdGlvbnMpO1xuICB9XG4gIGNyZWF0ZUlmTm90RXhpc3RzKGRvY3VtZW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVJZk5vdEV4aXN0cyh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgZG9jdW1lbnQsIG9wdGlvbnMpO1xuICB9XG4gIGNyZWF0ZU9yUmVwbGFjZShkb2N1bWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiBfY3JlYXRlT3JSZXBsYWNlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBkb2N1bWVudCwgb3B0aW9ucyk7XG4gIH1cbiAgZGVsZXRlKHNlbGVjdGlvbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBfZGVsZXRlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBzZWxlY3Rpb24sIG9wdGlvbnMpO1xuICB9XG4gIG11dGF0ZShvcGVyYXRpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9tdXRhdGUodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIG9wZXJhdGlvbnMsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYnVpbGRhYmxlIHBhdGNoIG9mIG9wZXJhdGlvbnMgdG8gcGVyZm9ybVxuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0aW9uIC0gRG9jdW1lbnQgSUQsIGFuIGFycmF5IG9mIGRvY3VtZW50IElEcywgb3IgYW4gb2JqZWN0IHdpdGggYHF1ZXJ5YCBhbmQgb3B0aW9uYWwgYHBhcmFtc2AsIGRlZmluaW5nIHdoaWNoIGRvY3VtZW50KHMpIHRvIHBhdGNoXG4gICAqIEBwYXJhbSBvcGVyYXRpb25zIC0gT3B0aW9uYWwgb2JqZWN0IG9mIHBhdGNoIG9wZXJhdGlvbnMgdG8gaW5pdGlhbGl6ZSB0aGUgcGF0Y2ggaW5zdGFuY2Ugd2l0aFxuICAgKiBAcmV0dXJucyBQYXRjaCBpbnN0YW5jZSAtIGNhbGwgYC5jb21taXQoKWAgdG8gcGVyZm9ybSB0aGUgb3BlcmF0aW9ucyBkZWZpbmVkXG4gICAqL1xuICBwYXRjaChzZWxlY3Rpb24sIG9wZXJhdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGVQYXRjaChzZWxlY3Rpb24sIG9wZXJhdGlvbnMsIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgdHJhbnNhY3Rpb24gb2YgbXV0YXRpb25zXG4gICAqXG4gICAqIEBwYXJhbSBvcGVyYXRpb25zIC0gT3B0aW9uYWwgYXJyYXkgb2YgbXV0YXRpb24gb3BlcmF0aW9ucyB0byBpbml0aWFsaXplIHRoZSB0cmFuc2FjdGlvbiBpbnN0YW5jZSB3aXRoXG4gICAqL1xuICB0cmFuc2FjdGlvbihvcGVyYXRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFBlcmZvcm0gYW4gSFRUUCByZXF1ZXN0IGFnYWluc3QgdGhlIFNhbml0eSBBUElcbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICovXG4gIHJlcXVlc3Qob3B0aW9ucykge1xuICAgIHJldHVybiBfcmVxdWVzdCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIFNhbml0eSBBUEkgVVJMIGZvciB0aGUgVVJJIHByb3ZpZGVkXG4gICAqXG4gICAqIEBwYXJhbSB1cmkgLSBVUkkvcGF0aCB0byBidWlsZCBVUkwgZm9yXG4gICAqIEBwYXJhbSBjYW5Vc2VDZG4gLSBXaGV0aGVyIG9yIG5vdCB0byBhbGxvdyB1c2luZyB0aGUgQVBJIENETiBmb3IgdGhpcyByb3V0ZVxuICAgKi9cbiAgZ2V0VXJsKHVyaSwgY2FuVXNlQ2RuKSB7XG4gICAgcmV0dXJuIF9nZXRVcmwodGhpcywgdXJpLCBjYW5Vc2VDZG4pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBTYW5pdHkgQVBJIFVSTCBmb3IgdGhlIGRhdGEgb3BlcmF0aW9uIGFuZCBwYXRoIHByb3ZpZGVkXG4gICAqXG4gICAqIEBwYXJhbSBvcGVyYXRpb24gLSBEYXRhIG9wZXJhdGlvbiAoZWcgYHF1ZXJ5YCwgYG11dGF0ZWAsIGBsaXN0ZW5gIG9yIHNpbWlsYXIpXG4gICAqIEBwYXJhbSBwYXRoIC0gUGF0aCB0byBhcHBlbmQgYWZ0ZXIgdGhlIG9wZXJhdGlvblxuICAgKi9cbiAgZ2V0RGF0YVVybChvcGVyYXRpb24sIHBhdGgpIHtcbiAgICByZXR1cm4gX2dldERhdGFVcmwodGhpcywgb3BlcmF0aW9uLCBwYXRoKTtcbiAgfVxufTtcbl9jbGllbnRDb25maWcgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBPYnNlcnZhYmxlU2FuaXR5Q2xpZW50ID0gX09ic2VydmFibGVTYW5pdHlDbGllbnQ7XG5jb25zdCBfU2FuaXR5Q2xpZW50ID0gY2xhc3MgX1Nhbml0eUNsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGh0dHBSZXF1ZXN0KSB7XG4gICAgbGV0IGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZGVmYXVsdENvbmZpZztcbiAgICAvKipcbiAgICAgKiBQcml2YXRlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2NsaWVudENvbmZpZzIsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9odHRwUmVxdWVzdDIsIHZvaWQgMCk7XG4gICAgLyoqXG4gICAgICogSW5zdGFuY2UgcHJvcGVydGllc1xuICAgICAqL1xuICAgIHRoaXMubGlzdGVuID0gX2xpc3RlbjtcbiAgICB0aGlzLmNvbmZpZyhjb25maWcpO1xuICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfaHR0cFJlcXVlc3QyLCBodHRwUmVxdWVzdCk7XG4gICAgdGhpcy5hc3NldHMgPSBuZXcgQXNzZXRzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSk7XG4gICAgdGhpcy5kYXRhc2V0cyA9IG5ldyBEYXRhc2V0c0NsaWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MikpO1xuICAgIHRoaXMucHJvamVjdHMgPSBuZXcgUHJvamVjdHNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpKTtcbiAgICB0aGlzLnVzZXJzID0gbmV3IFVzZXJzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSk7XG4gICAgdGhpcy5vYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGVTYW5pdHlDbGllbnQoaHR0cFJlcXVlc3QsIGNvbmZpZyk7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lIHRoZSBjbGllbnQgLSByZXR1cm5zIGEgbmV3IGluc3RhbmNlXG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IF9TYW5pdHlDbGllbnQoX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCB0aGlzLmNvbmZpZygpKTtcbiAgfVxuICBjb25maWcobmV3Q29uZmlnKSB7XG4gICAgaWYgKG5ld0NvbmZpZyA9PT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5fX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudENvbmZpZzIpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcyKSAmJiBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudENvbmZpZzIpLmFsbG93UmVjb25maWd1cmUgPT09IGZhbHNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeGlzdGluZyBjbGllbnQgaW5zdGFuY2UgY2Fubm90IGJlIHJlY29uZmlndXJlZCAtIHVzZSBgd2l0aENvbmZpZyhuZXdDb25maWcpYCB0byByZXR1cm4gYSBuZXcgY2xpZW50XCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5vYnNlcnZhYmxlKSB7XG4gICAgICB0aGlzLm9ic2VydmFibGUuY29uZmlnKG5ld0NvbmZpZyk7XG4gICAgfVxuICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY2xpZW50Q29uZmlnMiwgaW5pdENvbmZpZyhuZXdDb25maWcsIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnMikgfHwge30pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgdGhlIGNsaWVudCB3aXRoIGEgbmV3IChwYXJ0aWFsKSBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gbmV3Q29uZmlnIC0gTmV3IGNsaWVudCBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMsIHNoYWxsb3dseSBtZXJnZWQgd2l0aCBleGlzdGluZyBjb25maWd1cmF0aW9uXG4gICAqL1xuICB3aXRoQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHJldHVybiBuZXcgX1Nhbml0eUNsaWVudChfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIHtcbiAgICAgIC4uLnRoaXMuY29uZmlnKCksXG4gICAgICAuLi5uZXdDb25maWdcbiAgICB9KTtcbiAgfVxuICBmZXRjaChxdWVyeSwgcGFyYW1zKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9mZXRjaCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIHF1ZXJ5LCBwYXJhbXMsIG9wdGlvbnMpKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggYSBzaW5nbGUgZG9jdW1lbnQgd2l0aCB0aGUgZ2l2ZW4gSUQuXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIERvY3VtZW50IElEIHRvIGZldGNoXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gICAqL1xuICBnZXREb2N1bWVudChpZCwgb3B0aW9ucykge1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9nZXREb2N1bWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIGlkLCBvcHRpb25zKSk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIG11bHRpcGxlIGRvY3VtZW50cyBpbiBvbmUgcmVxdWVzdC5cbiAgICogU2hvdWxkIGJlIHVzZWQgc3BhcmluZ2x5IC0gcGVyZm9ybWluZyBhIHF1ZXJ5IGlzIHVzdWFsbHkgYSBiZXR0ZXIgb3B0aW9uLlxuICAgKiBUaGUgb3JkZXIvcG9zaXRpb24gb2YgZG9jdW1lbnRzIGlzIHByZXNlcnZlZCBiYXNlZCBvbiB0aGUgb3JpZ2luYWwgYXJyYXkgb2YgSURzLlxuICAgKiBJZiBhbnkgb2YgdGhlIGRvY3VtZW50cyBhcmUgbWlzc2luZywgdGhleSB3aWxsIGJlIHJlcGxhY2VkIGJ5IGEgYG51bGxgIGVudHJ5IGluIHRoZSByZXR1cm5lZCBhcnJheVxuICAgKlxuICAgKiBAcGFyYW0gaWRzIC0gRG9jdW1lbnQgSURzIHRvIGZldGNoXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gICAqL1xuICBnZXREb2N1bWVudHMoaWRzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX2dldERvY3VtZW50cyh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIGlkcywgb3B0aW9ucykpO1xuICB9XG4gIGNyZWF0ZShkb2N1bWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9jcmVhdGUodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCBkb2N1bWVudCwgXCJjcmVhdGVcIiwgb3B0aW9ucykpO1xuICB9XG4gIGNyZWF0ZUlmTm90RXhpc3RzKGRvY3VtZW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX2NyZWF0ZUlmTm90RXhpc3RzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgZG9jdW1lbnQsIG9wdGlvbnMpKTtcbiAgfVxuICBjcmVhdGVPclJlcGxhY2UoZG9jdW1lbnQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfY3JlYXRlT3JSZXBsYWNlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgZG9jdW1lbnQsIG9wdGlvbnMpKTtcbiAgfVxuICBkZWxldGUoc2VsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX2RlbGV0ZSh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIHNlbGVjdGlvbiwgb3B0aW9ucykpO1xuICB9XG4gIG11dGF0ZShvcGVyYXRpb25zLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX211dGF0ZSh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIG9wZXJhdGlvbnMsIG9wdGlvbnMpKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGJ1aWxkYWJsZSBwYXRjaCBvZiBvcGVyYXRpb25zIHRvIHBlcmZvcm1cbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdGlvbiAtIERvY3VtZW50IElELCBhbiBhcnJheSBvZiBkb2N1bWVudCBJRHMsIG9yIGFuIG9iamVjdCB3aXRoIGBxdWVyeWAgYW5kIG9wdGlvbmFsIGBwYXJhbXNgLCBkZWZpbmluZyB3aGljaCBkb2N1bWVudChzKSB0byBwYXRjaFxuICAgKiBAcGFyYW0gb3BlcmF0aW9ucyAtIE9wdGlvbmFsIG9iamVjdCBvZiBwYXRjaCBvcGVyYXRpb25zIHRvIGluaXRpYWxpemUgdGhlIHBhdGNoIGluc3RhbmNlIHdpdGhcbiAgICogQHJldHVybnMgUGF0Y2ggaW5zdGFuY2UgLSBjYWxsIGAuY29tbWl0KClgIHRvIHBlcmZvcm0gdGhlIG9wZXJhdGlvbnMgZGVmaW5lZFxuICAgKi9cbiAgcGF0Y2goZG9jdW1lbnRJZCwgb3BlcmF0aW9ucykge1xuICAgIHJldHVybiBuZXcgUGF0Y2goZG9jdW1lbnRJZCwgb3BlcmF0aW9ucywgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyB0cmFuc2FjdGlvbiBvZiBtdXRhdGlvbnNcbiAgICpcbiAgICogQHBhcmFtIG9wZXJhdGlvbnMgLSBPcHRpb25hbCBhcnJheSBvZiBtdXRhdGlvbiBvcGVyYXRpb25zIHRvIGluaXRpYWxpemUgdGhlIHRyYW5zYWN0aW9uIGluc3RhbmNlIHdpdGhcbiAgICovXG4gIHRyYW5zYWN0aW9uKG9wZXJhdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKG9wZXJhdGlvbnMsIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgcmVxdWVzdCBhZ2FpbnN0IHRoZSBTYW5pdHkgQVBJXG4gICAqIE5PVEU6IE9ubHkgdXNlIHRoaXMgZm9yIFNhbml0eSBBUEkgZW5kcG9pbnRzLCBub3QgZm9yIHlvdXIgb3duIEFQSXMhXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSByZXNwb25zZSBib2R5XG4gICAqL1xuICByZXF1ZXN0KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfcmVxdWVzdCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIG9wdGlvbnMpKTtcbiAgfVxuICAvKipcbiAgICogUGVyZm9ybSBhbiBIVFRQIHJlcXVlc3QgYSBgL2RhdGFgIHN1Yi1lbmRwb2ludFxuICAgKiBOT1RFOiBDb25zaWRlcmVkIGludGVybmFsLCB0aHVzIG1hcmtlZCBhcyBkZXByZWNhdGVkLiBVc2UgYHJlcXVlc3RgIGluc3RlYWQuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIC0gVXNlIGByZXF1ZXN0KClgIG9yIHlvdXIgb3duIEhUVFAgbGlicmFyeSBpbnN0ZWFkXG4gICAqIEBwYXJhbSBlbmRwb2ludCAtIEVuZHBvaW50IHRvIGhpdCAobXV0YXRlLCBxdWVyeSBldGMpXG4gICAqIEBwYXJhbSBib2R5IC0gUmVxdWVzdCBib2R5XG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGF0YVJlcXVlc3QoZW5kcG9pbnQsIGJvZHksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfZGF0YVJlcXVlc3QodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCBlbmRwb2ludCwgYm9keSwgb3B0aW9ucykpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBTYW5pdHkgQVBJIFVSTCBmb3IgdGhlIFVSSSBwcm92aWRlZFxuICAgKlxuICAgKiBAcGFyYW0gdXJpIC0gVVJJL3BhdGggdG8gYnVpbGQgVVJMIGZvclxuICAgKiBAcGFyYW0gY2FuVXNlQ2RuIC0gV2hldGhlciBvciBub3QgdG8gYWxsb3cgdXNpbmcgdGhlIEFQSSBDRE4gZm9yIHRoaXMgcm91dGVcbiAgICovXG4gIGdldFVybCh1cmksIGNhblVzZUNkbikge1xuICAgIHJldHVybiBfZ2V0VXJsKHRoaXMsIHVyaSwgY2FuVXNlQ2RuKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgU2FuaXR5IEFQSSBVUkwgZm9yIHRoZSBkYXRhIG9wZXJhdGlvbiBhbmQgcGF0aCBwcm92aWRlZFxuICAgKlxuICAgKiBAcGFyYW0gb3BlcmF0aW9uIC0gRGF0YSBvcGVyYXRpb24gKGVnIGBxdWVyeWAsIGBtdXRhdGVgLCBgbGlzdGVuYCBvciBzaW1pbGFyKVxuICAgKiBAcGFyYW0gcGF0aCAtIFBhdGggdG8gYXBwZW5kIGFmdGVyIHRoZSBvcGVyYXRpb25cbiAgICovXG4gIGdldERhdGFVcmwob3BlcmF0aW9uLCBwYXRoKSB7XG4gICAgcmV0dXJuIF9nZXREYXRhVXJsKHRoaXMsIG9wZXJhdGlvbiwgcGF0aCk7XG4gIH1cbn07XG5fY2xpZW50Q29uZmlnMiA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QyID0gbmV3IFdlYWtNYXAoKTtcbmxldCBTYW5pdHlDbGllbnQgPSBfU2FuaXR5Q2xpZW50O1xuZnVuY3Rpb24gZGVmaW5lQ3JlYXRlQ2xpZW50RXhwb3J0cyhlbnZNaWRkbGV3YXJlLCBDbGFzc0NvbnN0cnVjdG9yKSB7XG4gIGNvbnN0IGh0dHBSZXF1ZXN0ID0gZGVmaW5lSHR0cFJlcXVlc3QoZW52TWlkZGxld2FyZSwge30pO1xuICBjb25zdCByZXF1ZXN0ZXIgPSBodHRwUmVxdWVzdC5kZWZhdWx0UmVxdWVzdGVyO1xuICBjb25zdCBjcmVhdGVDbGllbnQgPSBjb25maWcgPT4gbmV3IENsYXNzQ29uc3RydWN0b3IoZGVmaW5lSHR0cFJlcXVlc3QoZW52TWlkZGxld2FyZSwge1xuICAgIG1heFJldHJpZXM6IGNvbmZpZy5tYXhSZXRyaWVzLFxuICAgIHJldHJ5RGVsYXk6IGNvbmZpZy5yZXRyeURlbGF5XG4gIH0pLCBjb25maWcpO1xuICByZXR1cm4ge1xuICAgIHJlcXVlc3RlcixcbiAgICBjcmVhdGVDbGllbnRcbiAgfTtcbn1cbmZ1bmN0aW9uIGRlZmluZURlcHJlY2F0ZWRDcmVhdGVDbGllbnQoY3JlYXRlQ2xpZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbiBkZXByZWNhdGVkQ3JlYXRlQ2xpZW50KGNvbmZpZykge1xuICAgIHByaW50Tm9EZWZhdWx0RXhwb3J0KCk7XG4gICAgcmV0dXJuIGNyZWF0ZUNsaWVudChjb25maWcpO1xuICB9O1xufVxudmFyIGVudk1pZGRsZXdhcmUgPSBbXTtcbmNvbnN0IGV4cCA9IGRlZmluZUNyZWF0ZUNsaWVudEV4cG9ydHMoZW52TWlkZGxld2FyZSwgU2FuaXR5Q2xpZW50KTtcbmNvbnN0IHJlcXVlc3RlciA9IGV4cC5yZXF1ZXN0ZXI7XG5jb25zdCBjcmVhdGVDbGllbnQgPSBleHAuY3JlYXRlQ2xpZW50O1xuY29uc3QgZGVwcmVjYXRlZENyZWF0ZUNsaWVudCA9IGRlZmluZURlcHJlY2F0ZWRDcmVhdGVDbGllbnQoY3JlYXRlQ2xpZW50KTtcbmV4cG9ydCB7IEJhc2VQYXRjaCwgQmFzZVRyYW5zYWN0aW9uLCBDbGllbnRFcnJvciwgT2JzZXJ2YWJsZVBhdGNoLCBPYnNlcnZhYmxlU2FuaXR5Q2xpZW50LCBPYnNlcnZhYmxlVHJhbnNhY3Rpb24sIFBhdGNoLCBTYW5pdHlDbGllbnQsIFNlcnZlckVycm9yLCBUcmFuc2FjdGlvbiwgY3JlYXRlQ2xpZW50LCBkZXByZWNhdGVkQ3JlYXRlQ2xpZW50IGFzIGRlZmF1bHQsIHJlcXVlc3RlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguYnJvd3Nlci5qcy5tYXBcbiJdLCJuYW1lcyI6WyJnZXRJdCIsImFkYXB0ZXIiLCJ1bnN0YWJsZV9fYWRhcHRlciIsImVudmlyb25tZW50IiwidW5zdGFibGVfX2Vudmlyb25tZW50IiwicmV0cnkiLCJqc29uUmVxdWVzdCIsImpzb25SZXNwb25zZSIsInByb2dyZXNzIiwib2JzZXJ2YWJsZSIsIk9ic2VydmFibGUiLCJsYXN0VmFsdWVGcm9tIiwibWFwIiwiZmlsdGVyIiwiTUFYX0lURU1TX0lOX0VSUk9SX01FU1NBR0UiLCJDbGllbnRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJyZXMiLCJwcm9wcyIsImV4dHJhY3RFcnJvclByb3BzIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJPYmplY3QiLCJhc3NpZ24iLCJTZXJ2ZXJFcnJvciIsImJvZHkiLCJyZXNwb25zZSIsInJlc3BvbnNlQm9keSIsInN0cmluZ2lmeUJvZHkiLCJkZXRhaWxzIiwiZXJyb3IiLCJjb25jYXQiLCJpc011dGF0aW9uRXJyb3IiLCJhbGxJdGVtcyIsIml0ZW1zIiwic2xpY2UiLCJpdGVtIiwiX2EiLCJkZXNjcmlwdGlvbiIsIkJvb2xlYW4iLCJpdGVtc1N0ciIsImxlbmd0aCIsImpvaW4iLCJodHRwRXJyb3JNZXNzYWdlIiwiaXNQbGFpbk9iamVjdCIsInR5cGUiLCJvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJzdGF0dXNNZXNzYWdlIiwibWV0aG9kIiwidXJsIiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwidG9Mb3dlckNhc2UiLCJpc0pzb24iLCJpbmRleE9mIiwiSlNPTiIsInN0cmluZ2lmeSIsImh0dHBFcnJvciIsIm9uUmVzcG9uc2UiLCJwcmludFdhcm5pbmdzIiwid2FybiIsIndhcm5pbmdzIiwiZm9yRWFjaCIsIm1zZyIsImNvbnNvbGUiLCJkZWZpbmVIdHRwUmVxdWVzdCIsImVudk1pZGRsZXdhcmUiLCJfcmVmIiwibWF4UmV0cmllcyIsInJldHJ5RGVsYXkiLCJyZXF1ZXN0Iiwic2hvdWxkUmV0cnkiLCJpbXBsZW1lbnRhdGlvbiIsImh0dHBSZXF1ZXN0Iiwib3B0aW9ucyIsInJlcXVlc3RlciIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIm1heFJlZGlyZWN0cyIsImRlZmF1bHRSZXF1ZXN0ZXIiLCJlcnIiLCJhdHRlbXB0IiwiaXNTYWZlIiwidXJpIiwiaXNRdWVyeSIsInN0YXJ0c1dpdGgiLCJpc1JldHJpYWJsZVJlc3BvbnNlIiwiZ2V0U2VsZWN0aW9uIiwic2VsIiwiaWQiLCJxdWVyeSIsInBhcmFtcyIsInNlbGVjdGlvbk9wdHMiLCJWQUxJRF9BU1NFVF9UWVBFUyIsIlZBTElEX0lOU0VSVF9MT0NBVElPTlMiLCJkYXRhc2V0IiwibmFtZSIsInRlc3QiLCJwcm9qZWN0SWQiLCJ2YWxpZGF0ZUFzc2V0VHlwZSIsInZhbGlkYXRlT2JqZWN0Iiwib3AiLCJ2YWwiLCJ2YWxpZGF0ZURvY3VtZW50SWQiLCJpbmNsdWRlcyIsInJlcXVpcmVEb2N1bWVudElkIiwiZG9jIiwiX2lkIiwidmFsaWRhdGVJbnNlcnQiLCJhdCIsInNlbGVjdG9yIiwic2lnbmF0dXJlIiwidmFsaWQiLCJsb2MiLCJoYXNEYXRhc2V0IiwiY29uZmlnIiwicmVxdWVzdFRhZyIsInRhZyIsIl9fYWNjZXNzQ2hlY2skNiIsIm1lbWJlciIsImhhcyIsIlR5cGVFcnJvciIsIl9fcHJpdmF0ZUdldCQ2IiwiZ2V0dGVyIiwiY2FsbCIsImdldCIsIl9fcHJpdmF0ZUFkZCQ2IiwidmFsdWUiLCJXZWFrU2V0IiwiYWRkIiwic2V0IiwiX19wcml2YXRlU2V0JDYiLCJzZXR0ZXIiLCJfY2xpZW50JDUiLCJfY2xpZW50MiQ1IiwiQmFzZVBhdGNoIiwic2VsZWN0aW9uIiwib3BlcmF0aW9ucyIsImF0dHJzIiwiX2Fzc2lnbiIsInNldElmTWlzc2luZyIsImRpZmZNYXRjaFBhdGNoIiwidW5zZXQiLCJpbmMiLCJkZWMiLCJpbnNlcnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwic3BsaWNlIiwic3RhcnQiLCJkZWxldGVDb3VudCIsImRlbEFsbCIsInN0YXJ0SW5kZXgiLCJkZWxDb3VudCIsIk1hdGgiLCJtYXgiLCJkZWxSYW5nZSIsInJhbmdlU2VsZWN0b3IiLCJpZlJldmlzaW9uSWQiLCJyZXYiLCJpZlJldmlzaW9uSUQiLCJzZXJpYWxpemUiLCJ0b0pTT04iLCJyZXNldCIsIm1lcmdlIiwiX3NldCIsIl9PYnNlcnZhYmxlUGF0Y2giLCJjbGllbnQiLCJjbG9uZSIsImNvbW1pdCIsInJldHVybkZpcnN0Iiwib3B0cyIsInJldHVybkRvY3VtZW50cyIsIm11dGF0ZSIsInBhdGNoIiwiV2Vha01hcCIsIk9ic2VydmFibGVQYXRjaCIsIl9QYXRjaCIsIlBhdGNoIiwiX19hY2Nlc3NDaGVjayQ1IiwiX19wcml2YXRlR2V0JDUiLCJfX3ByaXZhdGVBZGQkNSIsIl9fcHJpdmF0ZVNldCQ1IiwiX2NsaWVudCQ0IiwiX2NsaWVudDIkNCIsImRlZmF1bHRNdXRhdGVPcHRpb25zIiwiQmFzZVRyYW5zYWN0aW9uIiwidHJhbnNhY3Rpb25JZCIsInRyeElkIiwiY3JlYXRlIiwiX2FkZCIsImNyZWF0ZUlmTm90RXhpc3RzIiwiY3JlYXRlT3JSZXBsYWNlIiwiZGVsZXRlIiwiZG9jdW1lbnRJZCIsIm11dCIsInB1c2giLCJfVHJhbnNhY3Rpb24iLCJwYXRjaE9yRG9jdW1lbnRJZCIsInBhdGNoT3BzIiwiaXNCdWlsZGVyIiwiaXNQYXRjaCIsIlRyYW5zYWN0aW9uIiwiX09ic2VydmFibGVUcmFuc2FjdGlvbiIsIk9ic2VydmFibGVUcmFuc2FjdGlvbiIsIkJBU0VfVVJMIiwiZ2VuZXJhdGVIZWxwVXJsIiwic2x1ZyIsIm9uY2UiLCJmbiIsImRpZENhbGwiLCJyZXR1cm5WYWx1ZSIsImNyZWF0ZVdhcm5pbmdQcmludGVyIiwiX2xlbiIsImFyZ3MiLCJfa2V5IiwicHJpbnRDZG5XYXJuaW5nIiwicHJpbnRDZG5QcmV2aWV3RHJhZnRzV2FybmluZyIsInByaW50QnJvd3NlclRva2VuV2FybmluZyIsInByaW50Tm9BcGlWZXJzaW9uU3BlY2lmaWVkV2FybmluZyIsInByaW50Tm9EZWZhdWx0RXhwb3J0IiwiZGVmYXVsdENkbkhvc3QiLCJkZWZhdWx0Q29uZmlnIiwiYXBpSG9zdCIsImFwaVZlcnNpb24iLCJ1c2VQcm9qZWN0SG9zdG5hbWUiLCJMT0NBTEhPU1RTIiwiaXNMb2NhbCIsImhvc3QiLCJ2YWxpZGF0ZUFwaVZlcnNpb24iLCJ2YWxpZGF0ZUFwaVZlcnNpb24yIiwiYXBpRGF0ZSIsIkRhdGUiLCJhcGlWZXJzaW9uVmFsaWQiLCJnZXRUaW1lIiwidmFsaWRhdGVBcGlQZXJzcGVjdGl2ZSIsInZhbGlkYXRlQXBpUGVyc3BlY3RpdmUyIiwicGVyc3BlY3RpdmUiLCJpbml0Q29uZmlnIiwicHJldkNvbmZpZyIsInNwZWNpZmllZENvbmZpZyIsIm5ld0NvbmZpZyIsInByb2plY3RCYXNlZCIsIlByb21pc2UiLCJoZWxwVXJsIiwiaXNCcm93c2VyIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsImlzTG9jYWxob3N0IiwidG9rZW4iLCJpZ25vcmVCcm93c2VyVG9rZW5XYXJuaW5nIiwidXNlQ2RuIiwicmVxdWVzdFRhZ1ByZWZpeCIsInJlcGxhY2UiLCJpc0RlZmF1bHRBcGkiLCJ3aXRoQ3JlZGVudGlhbHMiLCJob3N0UGFydHMiLCJzcGxpdCIsInByb3RvY29sIiwiY2RuSG9zdCIsImNkblVybCIsInByb2plY3RIZWFkZXIiLCJyZXF1ZXN0T3B0aW9ucyIsIm92ZXJyaWRlcyIsIkF1dGhvcml6YXRpb24iLCJ1c2VHbG9iYWxBcGkiLCJ0aW1lb3V0IiwicHJveHkiLCJqc29uIiwiZmV0Y2giLCJlbmNvZGVRdWVyeVN0cmluZyIsIl9yZWYyIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwia2V5IiwiZW50cmllcyIsImV4Y2x1ZGVGYWxzZXkiLCJwYXJhbSIsImRlZlZhbHVlIiwiZ2V0TXV0YXRpb25RdWVyeSIsImRyeVJ1biIsInJldHVybklkcyIsInZpc2liaWxpdHkiLCJhdXRvR2VuZXJhdGVBcnJheUtleXMiLCJza2lwQ3Jvc3NEYXRhc2V0UmVmZXJlbmNlVmFsaWRhdGlvbiIsImlzUmVzcG9uc2UiLCJldmVudCIsImdldEJvZHkiLCJpbmRleEJ5IiwiZG9jcyIsImF0dHIiLCJyZWR1Y2UiLCJpbmRleGVkIiwiZ2V0UXVlcnlTaXplTGltaXQiLCJfZmV0Y2giLCJtYXBSZXNwb25zZSIsImZpbHRlclJlc3BvbnNlIiwicmVzdWx0IiwiY2FjaGUiLCJuZXh0IiwidXNlQWJvcnRTaWduYWwiLCJzaWduYWwiLCJyZXFPcHRzIiwiX2RhdGFSZXF1ZXN0IiwicGlwZSIsIl9nZXREb2N1bWVudCIsIl9nZXREYXRhVXJsIiwiX3JlcXVlc3RPYnNlcnZhYmxlIiwiZG9jdW1lbnRzIiwiX2dldERvY3VtZW50cyIsImlkcyIsIl9jcmVhdGVJZk5vdEV4aXN0cyIsIl9jcmVhdGUiLCJfY3JlYXRlT3JSZXBsYWNlIiwiX2RlbGV0ZSIsIm11dGF0aW9ucyIsIl9tdXRhdGUiLCJtdXRzIiwiZW5kcG9pbnQiLCJpc011dGF0aW9uIiwic3RyUXVlcnkiLCJ1c2VHZXQiLCJzdHJpbmdRdWVyeSIsInJlcU9wdGlvbnMiLCJyZXN1bHRTb3VyY2VNYXAiLCJjYW5Vc2VDZG4iLCJyZXN1bHRzIiwiZG9jdW1lbnQiLCJtdXRhdGlvbiIsIl9nZXRVcmwiLCJzdWJzY3JpYmVyIiwic3Vic2NyaWJlIiwiX3dpdGhBYm9ydFNpZ25hbCIsIl9yZXF1ZXN0Iiwib3BlcmF0aW9uIiwicGF0aCIsImNhdGFsb2ciLCJiYXNlVXJpIiwiYmFzZSIsImlucHV0Iiwib2JzZXJ2ZXIiLCJhYm9ydCIsIl9jcmVhdGVBYm9ydEVycm9yIiwiYWJvcnRlZCIsInN1YnNjcmlwdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidW5zdWJzY3JpYmUiLCJpc0RvbUV4Y2VwdGlvblN1cHBvcnRlZCIsImdsb2JhbFRoaXMiLCJET01FeGNlcHRpb24iLCJfYiIsInJlYXNvbiIsIl9fYWNjZXNzQ2hlY2skNCIsIl9fcHJpdmF0ZUdldCQ0IiwiX19wcml2YXRlQWRkJDQiLCJfX3ByaXZhdGVTZXQkNCIsIl9jbGllbnQkMyIsIl9odHRwUmVxdWVzdCQ0IiwiX2NsaWVudDIkMyIsIl9odHRwUmVxdWVzdDIkNCIsIk9ic2VydmFibGVBc3NldHNDbGllbnQiLCJ1cGxvYWQiLCJhc3NldFR5cGUiLCJfdXBsb2FkIiwiQXNzZXRzQ2xpZW50IiwibWV0YSIsImV4dHJhY3QiLCJhc3NldEVuZHBvaW50Iiwib3B0aW9uc0Zyb21GaWxlIiwibGFiZWwiLCJ0aXRsZSIsImNyZWRpdExpbmUiLCJmaWxlbmFtZSIsInNvdXJjZSIsInNvdXJjZUlkIiwic291cmNlTmFtZSIsInNvdXJjZVVybCIsImZpbGUiLCJGaWxlIiwicHJlc2VydmVGaWxlbmFtZSIsImRlZmF1bHRzIiwia2V5cyIsInRhcmdldCIsInByb3AiLCJwaWNrIiwiTUFYX1VSTF9MRU5HVEgiLCJwb3NzaWJsZU9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsImluY2x1ZGVSZXN1bHQiLCJfbGlzdGVuIiwibGlzdGVuT3B0cyIsInFzIiwibGlzdGVuRm9yIiwiZXZlbnRzIiwic2hvdWxkRW1pdFJlY29ubmVjdCIsImVzT3B0aW9ucyIsImVzIiwiZ2V0RXZlbnRTb3VyY2UiLCJ0aGVuIiwiZXZlbnRTb3VyY2UiLCJjYXRjaCIsInN0b3AiLCJyZWNvbm5lY3RUaW1lciIsInN0b3BwZWQiLCJvbkVycm9yIiwiZW1pdFJlY29ubmVjdCIsInJlYWR5U3RhdGUiLCJDTE9TRUQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwib3BlbiIsIm9uQ2hhbm5lbEVycm9yIiwiY29vZXJjZUVycm9yIiwib25NZXNzYWdlIiwiZXZ0IiwicGFyc2VFdmVudCIsIm9uRGlzY29ubmVjdCIsImNvbXBsZXRlIiwiY2xvc2UiLCJkZWZhdWx0IiwiRXZlbnRTb3VyY2UiLCJldnMiLCJkYXRhIiwicGFyc2UiLCJleHRyYWN0RXJyb3JNZXNzYWdlIiwiX19hY2Nlc3NDaGVjayQzIiwiX19wcml2YXRlR2V0JDMiLCJfX3ByaXZhdGVBZGQkMyIsIl9fcHJpdmF0ZVNldCQzIiwiX2NsaWVudCQyIiwiX2h0dHBSZXF1ZXN0JDMiLCJfY2xpZW50MiQyIiwiX2h0dHBSZXF1ZXN0MiQzIiwiT2JzZXJ2YWJsZURhdGFzZXRzQ2xpZW50IiwiX21vZGlmeSIsImVkaXQiLCJsaXN0IiwiRGF0YXNldHNDbGllbnQiLCJfX2FjY2Vzc0NoZWNrJDIiLCJfX3ByaXZhdGVHZXQkMiIsIl9fcHJpdmF0ZUFkZCQyIiwiX19wcml2YXRlU2V0JDIiLCJfY2xpZW50JDEiLCJfaHR0cFJlcXVlc3QkMiIsIl9jbGllbnQyJDEiLCJfaHR0cFJlcXVlc3QyJDIiLCJPYnNlcnZhYmxlUHJvamVjdHNDbGllbnQiLCJpbmNsdWRlTWVtYmVycyIsImdldEJ5SWQiLCJQcm9qZWN0c0NsaWVudCIsIl9fYWNjZXNzQ2hlY2skMSIsIl9fcHJpdmF0ZUdldCQxIiwiX19wcml2YXRlQWRkJDEiLCJfX3ByaXZhdGVTZXQkMSIsIl9jbGllbnQiLCJfaHR0cFJlcXVlc3QkMSIsIl9jbGllbnQyIiwiX2h0dHBSZXF1ZXN0MiQxIiwiT2JzZXJ2YWJsZVVzZXJzQ2xpZW50IiwiVXNlcnNDbGllbnQiLCJfX2FjY2Vzc0NoZWNrIiwiX19wcml2YXRlR2V0IiwiX19wcml2YXRlQWRkIiwiX19wcml2YXRlU2V0IiwiX2NsaWVudENvbmZpZyIsIl9odHRwUmVxdWVzdCIsIl9jbGllbnRDb25maWcyIiwiX2h0dHBSZXF1ZXN0MiIsIl9PYnNlcnZhYmxlU2FuaXR5Q2xpZW50IiwibGlzdGVuIiwiYXNzZXRzIiwiZGF0YXNldHMiLCJwcm9qZWN0cyIsInVzZXJzIiwiYWxsb3dSZWNvbmZpZ3VyZSIsIndpdGhDb25maWciLCJnZXREb2N1bWVudCIsImdldERvY3VtZW50cyIsInRyYW5zYWN0aW9uIiwiZ2V0VXJsIiwiZ2V0RGF0YVVybCIsIk9ic2VydmFibGVTYW5pdHlDbGllbnQiLCJfU2FuaXR5Q2xpZW50IiwiZGF0YVJlcXVlc3QiLCJTYW5pdHlDbGllbnQiLCJkZWZpbmVDcmVhdGVDbGllbnRFeHBvcnRzIiwiQ2xhc3NDb25zdHJ1Y3RvciIsImNyZWF0ZUNsaWVudCIsImRlZmluZURlcHJlY2F0ZWRDcmVhdGVDbGllbnQiLCJkZXByZWNhdGVkQ3JlYXRlQ2xpZW50IiwiZXhwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/client/dist/index.browser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/client/dist/index.browser.js":
/*!***********************************************************!*\
  !*** ./node_modules/@sanity/client/dist/index.browser.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePatch: () => (/* binding */ BasePatch),\n/* harmony export */   BaseTransaction: () => (/* binding */ BaseTransaction),\n/* harmony export */   ClientError: () => (/* binding */ ClientError),\n/* harmony export */   ObservablePatch: () => (/* binding */ ObservablePatch),\n/* harmony export */   ObservableSanityClient: () => (/* binding */ ObservableSanityClient),\n/* harmony export */   ObservableTransaction: () => (/* binding */ ObservableTransaction),\n/* harmony export */   Patch: () => (/* binding */ Patch),\n/* harmony export */   SanityClient: () => (/* binding */ SanityClient),\n/* harmony export */   ServerError: () => (/* binding */ ServerError),\n/* harmony export */   Transaction: () => (/* binding */ Transaction),\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   \"default\": () => (/* binding */ deprecatedCreateClient),\n/* harmony export */   requester: () => (/* binding */ requester),\n/* harmony export */   unstable__adapter: () => (/* reexport safe */ get_it__WEBPACK_IMPORTED_MODULE_0__.adapter),\n/* harmony export */   unstable__environment: () => (/* reexport safe */ get_it__WEBPACK_IMPORTED_MODULE_0__.environment)\n/* harmony export */ });\n/* harmony import */ var get_it__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! get-it */ \"(rsc)/./node_modules/get-it/dist/index.react-server.js\");\n/* harmony import */ var get_it_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! get-it/middleware */ \"(rsc)/./node_modules/get-it/dist/middleware.browser.js\");\n/* harmony import */ var _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=Observable,lastValueFrom!=!rxjs */ \"(rsc)/./node_modules/rxjs/dist/esm5/internal/Observable.js\");\n/* harmony import */ var _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Observable,lastValueFrom!=!rxjs */ \"(rsc)/./node_modules/rxjs/dist/esm5/internal/lastValueFrom.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ \"(rsc)/./node_modules/rxjs/dist/cjs/operators/index.js\");\n\n\n\n\n\nconst MAX_ITEMS_IN_ERROR_MESSAGE = 5;\nclass ClientError extends Error {\n    constructor(res){\n        const props = extractErrorProps(res);\n        super(props.message);\n        this.statusCode = 400;\n        Object.assign(this, props);\n    }\n}\nclass ServerError extends Error {\n    constructor(res){\n        const props = extractErrorProps(res);\n        super(props.message);\n        this.statusCode = 500;\n        Object.assign(this, props);\n    }\n}\nfunction extractErrorProps(res) {\n    const body = res.body;\n    const props = {\n        response: res,\n        statusCode: res.statusCode,\n        responseBody: stringifyBody(body, res),\n        message: \"\",\n        details: void 0\n    };\n    if (body.error && body.message) {\n        props.message = \"\".concat(body.error, \" - \").concat(body.message);\n        return props;\n    }\n    if (isMutationError(body)) {\n        const allItems = body.error.items || [];\n        const items = allItems.slice(0, MAX_ITEMS_IN_ERROR_MESSAGE).map((item)=>{\n            var _a;\n            return (_a = item.error) == null ? void 0 : _a.description;\n        }).filter(Boolean);\n        let itemsStr = items.length ? \":\\n- \".concat(items.join(\"\\n- \")) : \"\";\n        if (allItems.length > MAX_ITEMS_IN_ERROR_MESSAGE) {\n            itemsStr += \"\\n...and \".concat(allItems.length - MAX_ITEMS_IN_ERROR_MESSAGE, \" more\");\n        }\n        props.message = \"\".concat(body.error.description).concat(itemsStr);\n        props.details = body.error;\n        return props;\n    }\n    if (body.error && body.error.description) {\n        props.message = body.error.description;\n        props.details = body.error;\n        return props;\n    }\n    props.message = body.error || body.message || httpErrorMessage(res);\n    return props;\n}\nfunction isMutationError(body) {\n    return isPlainObject(body) && isPlainObject(body.error) && body.error.type === \"mutationError\" && typeof body.error.description === \"string\";\n}\nfunction isPlainObject(obj) {\n    return typeof obj === \"object\" && obj !== null && !Array.isArray(obj);\n}\nfunction httpErrorMessage(res) {\n    const statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : \"\";\n    return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\nfunction stringifyBody(body, res) {\n    const contentType = (res.headers[\"content-type\"] || \"\").toLowerCase();\n    const isJson = contentType.indexOf(\"application/json\") !== -1;\n    return isJson ? JSON.stringify(body, null, 2) : body;\n}\nconst httpError = {\n    onResponse: (res)=>{\n        if (res.statusCode >= 500) {\n            throw new ServerError(res);\n        } else if (res.statusCode >= 400) {\n            throw new ClientError(res);\n        }\n        return res;\n    }\n};\nconst printWarnings = {\n    onResponse: (res)=>{\n        const warn = res.headers[\"x-sanity-warning\"];\n        const warnings = Array.isArray(warn) ? warn : [\n            warn\n        ];\n        warnings.filter(Boolean).forEach((msg)=>console.warn(msg));\n        return res;\n    }\n};\nfunction defineHttpRequest(envMiddleware, _ref) {\n    let { maxRetries = 5, retryDelay } = _ref;\n    const request = (0,get_it__WEBPACK_IMPORTED_MODULE_0__.getIt)([\n        maxRetries > 0 ? (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.retry)({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            retryDelay,\n            // This option is typed incorrectly in get-it.\n            maxRetries,\n            shouldRetry\n        }) : {},\n        ...envMiddleware,\n        printWarnings,\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.jsonRequest)(),\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.jsonResponse)(),\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.progress)(),\n        httpError,\n        (0,get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.observable)({\n            implementation: _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable\n        })\n    ]);\n    function httpRequest(options) {\n        let requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n        return requester({\n            maxRedirects: 0,\n            ...options\n        });\n    }\n    httpRequest.defaultRequester = request;\n    return httpRequest;\n}\nfunction shouldRetry(err, attempt, options) {\n    const isSafe = options.method === \"GET\" || options.method === \"HEAD\";\n    const uri = options.uri || options.url;\n    const isQuery = uri.startsWith(\"/data/query\");\n    const isRetriableResponse = err.response && (err.response.statusCode === 429 || err.response.statusCode === 502 || err.response.statusCode === 503);\n    if ((isSafe || isQuery) && isRetriableResponse) return true;\n    return get_it_middleware__WEBPACK_IMPORTED_MODULE_1__.retry.shouldRetry(err, attempt, options);\n}\nfunction getSelection(sel) {\n    if (typeof sel === \"string\" || Array.isArray(sel)) {\n        return {\n            id: sel\n        };\n    }\n    if (typeof sel === \"object\" && sel !== null && \"query\" in sel && typeof sel.query === \"string\") {\n        return \"params\" in sel && typeof sel.params === \"object\" && sel.params !== null ? {\n            query: sel.query,\n            params: sel.params\n        } : {\n            query: sel.query\n        };\n    }\n    const selectionOpts = [\n        \"* Document ID (<docId>)\",\n        \"* Array of document IDs\",\n        \"* Object containing `query`\"\n    ].join(\"\\n\");\n    throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n}\nconst VALID_ASSET_TYPES = [\n    \"image\",\n    \"file\"\n];\nconst VALID_INSERT_LOCATIONS = [\n    \"before\",\n    \"after\",\n    \"replace\"\n];\nconst dataset = (name)=>{\n    if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n        throw new Error(\"Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters\");\n    }\n};\nconst projectId = (id)=>{\n    if (!/^[-a-z0-9]+$/i.test(id)) {\n        throw new Error(\"`projectId` can only contain only a-z, 0-9 and dashes\");\n    }\n};\nconst validateAssetType = (type)=>{\n    if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n        throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(\", \")));\n    }\n};\nconst validateObject = (op, val)=>{\n    if (val === null || typeof val !== \"object\" || Array.isArray(val)) {\n        throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n    }\n};\nconst validateDocumentId = (op, id)=>{\n    if (typeof id !== \"string\" || !/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(id) || id.includes(\"..\")) {\n        throw new Error(\"\".concat(op, '(): \"').concat(id, '\" is not a valid document ID'));\n    }\n};\nconst requireDocumentId = (op, doc)=>{\n    if (!doc._id) {\n        throw new Error(\"\".concat(op, '() requires that the document contains an ID (\"_id\" property)'));\n    }\n    validateDocumentId(op, doc._id);\n};\nconst validateInsert = (at, selector, items)=>{\n    const signature = \"insert(at, selector, items)\";\n    if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n        const valid = VALID_INSERT_LOCATIONS.map((loc)=>'\"'.concat(loc, '\"')).join(\", \");\n        throw new Error(\"\".concat(signature, ' takes an \"at\"-argument which is one of: ').concat(valid));\n    }\n    if (typeof selector !== \"string\") {\n        throw new Error(\"\".concat(signature, ' takes a \"selector\"-argument which must be a string'));\n    }\n    if (!Array.isArray(items)) {\n        throw new Error(\"\".concat(signature, ' takes an \"items\"-argument which must be an array'));\n    }\n};\nconst hasDataset = (config)=>{\n    if (!config.dataset) {\n        throw new Error(\"`dataset` must be provided to perform queries\");\n    }\n    return config.dataset || \"\";\n};\nconst requestTag = (tag)=>{\n    if (typeof tag !== \"string\" || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n        throw new Error(\"Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.\");\n    }\n    return tag;\n};\nvar __accessCheck$6 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$6 = (obj, member, getter)=>{\n    __accessCheck$6(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$6 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$6 = (obj, member, value, setter)=>{\n    __accessCheck$6(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$5, _client2$5;\nclass BasePatch {\n    constructor(selection){\n        let operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        this.selection = selection;\n        this.operations = operations;\n    }\n    /**\n   * Sets the given attributes to the document. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */ set(attrs) {\n        return this._assign(\"set\", attrs);\n    }\n    /**\n   * Sets the given attributes to the document if they are not currently set. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */ setIfMissing(attrs) {\n        return this._assign(\"setIfMissing\", attrs);\n    }\n    /**\n   * Performs a \"diff-match-patch\" operation on the string attributes provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to perform operation on. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"dmp\"\\}\n   */ diffMatchPatch(attrs) {\n        validateObject(\"diffMatchPatch\", attrs);\n        return this._assign(\"diffMatchPatch\", attrs);\n    }\n    /**\n   * Unsets the attribute paths provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attribute paths to unset.\n   */ unset(attrs) {\n        if (!Array.isArray(attrs)) {\n            throw new Error(\"unset(attrs) takes an array of attributes to unset, non-array given\");\n        }\n        this.operations = Object.assign({}, this.operations, {\n            unset: attrs\n        });\n        return this;\n    }\n    /**\n   * Increment a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to increment, values representing the number to increment by.\n   */ inc(attrs) {\n        return this._assign(\"inc\", attrs);\n    }\n    /**\n   * Decrement a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to decrement, values representing the number to decrement by.\n   */ dec(attrs) {\n        return this._assign(\"dec\", attrs);\n    }\n    /**\n   * Provides methods for modifying arrays, by inserting, appending and replacing elements via a JSONPath expression.\n   *\n   * @param at - Location to insert at, relative to the given selector, or 'replace' the matched path\n   * @param selector - JSONPath expression, eg `comments[-1]` or `blocks[_key==\"abc123\"]`\n   * @param items - Array of items to insert/replace\n   */ insert(at, selector, items) {\n        validateInsert(at, selector, items);\n        return this._assign(\"insert\", {\n            [at]: selector,\n            items\n        });\n    }\n    /**\n   * Append the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to append to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to append to the array\n   */ append(selector, items) {\n        return this.insert(\"after\", \"\".concat(selector, \"[-1]\"), items);\n    }\n    /**\n   * Prepend the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to prepend to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to prepend to the array\n   */ prepend(selector, items) {\n        return this.insert(\"before\", \"\".concat(selector, \"[0]\"), items);\n    }\n    /**\n   * Change the contents of an array by removing existing elements and/or adding new elements.\n   *\n   * @param selector - Attribute or JSONPath expression for array\n   * @param start - Index at which to start changing the array (with origin 0). If greater than the length of the array, actual starting index will be set to the length of the array. If negative, will begin that many elements from the end of the array (with origin -1) and will be set to 0 if absolute value is greater than the length of the array.x\n   * @param deleteCount - An integer indicating the number of old array elements to remove.\n   * @param items - The elements to add to the array, beginning at the start index. If you don't specify any elements, splice() will only remove elements from the array.\n   */ splice(selector, start, deleteCount, items) {\n        const delAll = typeof deleteCount === \"undefined\" || deleteCount === -1;\n        const startIndex = start < 0 ? start - 1 : start;\n        const delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n        const delRange = startIndex < 0 && delCount >= 0 ? \"\" : delCount;\n        const rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n        return this.insert(\"replace\", rangeSelector, items || []);\n    }\n    /**\n   * Adds a revision clause, preventing the document from being patched if the `_rev` property does not match the given value\n   *\n   * @param rev - Revision to lock the patch to\n   */ ifRevisionId(rev) {\n        this.operations.ifRevisionID = rev;\n        return this;\n    }\n    /**\n   * Return a plain JSON representation of the patch\n   */ serialize() {\n        return {\n            ...getSelection(this.selection),\n            ...this.operations\n        };\n    }\n    /**\n   * Return a plain JSON representation of the patch\n   */ toJSON() {\n        return this.serialize();\n    }\n    /**\n   * Clears the patch of all operations\n   */ reset() {\n        this.operations = {};\n        return this;\n    }\n    _assign(op, props) {\n        let merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        validateObject(op, props);\n        this.operations = Object.assign({}, this.operations, {\n            [op]: Object.assign({}, merge && this.operations[op] || {}, props)\n        });\n        return this;\n    }\n    _set(op, props) {\n        return this._assign(op, props, false);\n    }\n}\nconst _ObservablePatch = class _ObservablePatch extends BasePatch {\n    constructor(selection, operations, client){\n        super(selection, operations);\n        __privateAdd$6(this, _client$5, void 0);\n        __privateSet$6(this, _client$5, client);\n    }\n    /**\n   * Clones the patch\n   */ clone() {\n        return new _ObservablePatch(this.selection, {\n            ...this.operations\n        }, __privateGet$6(this, _client$5));\n    }\n    commit(options) {\n        if (!__privateGet$6(this, _client$5)) {\n            throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n        }\n        const returnFirst = typeof this.selection === \"string\";\n        const opts = Object.assign({\n            returnFirst,\n            returnDocuments: true\n        }, options);\n        return __privateGet$6(this, _client$5).mutate({\n            patch: this.serialize()\n        }, opts);\n    }\n};\n_client$5 = new WeakMap();\nlet ObservablePatch = _ObservablePatch;\nconst _Patch = class _Patch extends BasePatch {\n    constructor(selection, operations, client){\n        super(selection, operations);\n        __privateAdd$6(this, _client2$5, void 0);\n        __privateSet$6(this, _client2$5, client);\n    }\n    /**\n   * Clones the patch\n   */ clone() {\n        return new _Patch(this.selection, {\n            ...this.operations\n        }, __privateGet$6(this, _client2$5));\n    }\n    commit(options) {\n        if (!__privateGet$6(this, _client2$5)) {\n            throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n        }\n        const returnFirst = typeof this.selection === \"string\";\n        const opts = Object.assign({\n            returnFirst,\n            returnDocuments: true\n        }, options);\n        return __privateGet$6(this, _client2$5).mutate({\n            patch: this.serialize()\n        }, opts);\n    }\n};\n_client2$5 = new WeakMap();\nlet Patch = _Patch;\nvar __accessCheck$5 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$5 = (obj, member, getter)=>{\n    __accessCheck$5(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$5 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$5 = (obj, member, value, setter)=>{\n    __accessCheck$5(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$4, _client2$4;\nconst defaultMutateOptions = {\n    returnDocuments: false\n};\nclass BaseTransaction {\n    constructor(){\n        let operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        let transactionId = arguments.length > 1 ? arguments[1] : undefined;\n        this.operations = operations;\n        this.trxId = transactionId;\n    }\n    /**\n   * Creates a new Sanity document. If `_id` is provided and already exists, the mutation will fail. If no `_id` is given, one will automatically be generated by the database.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create. Requires a `_type` property.\n   */ create(doc) {\n        validateObject(\"create\", doc);\n        return this._add({\n            create: doc\n        });\n    }\n    /**\n   * Creates a new Sanity document. If a document with the same `_id` already exists, the create operation will be ignored.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create if it does not already exist. Requires `_id` and `_type` properties.\n   */ createIfNotExists(doc) {\n        const op = \"createIfNotExists\";\n        validateObject(op, doc);\n        requireDocumentId(op, doc);\n        return this._add({\n            [op]: doc\n        });\n    }\n    /**\n   * Creates a new Sanity document, or replaces an existing one if the same `_id` is already used.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create or replace. Requires `_id` and `_type` properties.\n   */ createOrReplace(doc) {\n        const op = \"createOrReplace\";\n        validateObject(op, doc);\n        requireDocumentId(op, doc);\n        return this._add({\n            [op]: doc\n        });\n    }\n    /**\n   * Deletes the document with the given document ID\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param documentId - Document ID to delete\n   */ delete(documentId) {\n        validateDocumentId(\"delete\", documentId);\n        return this._add({\n            delete: {\n                id: documentId\n            }\n        });\n    }\n    transactionId(id) {\n        if (!id) {\n            return this.trxId;\n        }\n        this.trxId = id;\n        return this;\n    }\n    /**\n   * Return a plain JSON representation of the transaction\n   */ serialize() {\n        return [\n            ...this.operations\n        ];\n    }\n    /**\n   * Return a plain JSON representation of the transaction\n   */ toJSON() {\n        return this.serialize();\n    }\n    /**\n   * Clears the transaction of all operations\n   */ reset() {\n        this.operations = [];\n        return this;\n    }\n    _add(mut) {\n        this.operations.push(mut);\n        return this;\n    }\n}\nconst _Transaction = class _Transaction extends BaseTransaction {\n    constructor(operations, client, transactionId){\n        super(operations, transactionId);\n        __privateAdd$5(this, _client$4, void 0);\n        __privateSet$5(this, _client$4, client);\n    }\n    /**\n   * Clones the transaction\n   */ clone() {\n        return new _Transaction([\n            ...this.operations\n        ], __privateGet$5(this, _client$4), this.trxId);\n    }\n    commit(options) {\n        if (!__privateGet$5(this, _client$4)) {\n            throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n        }\n        return __privateGet$5(this, _client$4).mutate(this.serialize(), Object.assign({\n            transactionId: this.trxId\n        }, defaultMutateOptions, options || {}));\n    }\n    patch(patchOrDocumentId, patchOps) {\n        const isBuilder = typeof patchOps === \"function\";\n        const isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof Patch;\n        if (isPatch) {\n            return this._add({\n                patch: patchOrDocumentId.serialize()\n            });\n        }\n        if (isBuilder) {\n            const patch = patchOps(new Patch(patchOrDocumentId, {}, __privateGet$5(this, _client$4)));\n            if (!(patch instanceof Patch)) {\n                throw new Error(\"function passed to `patch()` must return the patch\");\n            }\n            return this._add({\n                patch: patch.serialize()\n            });\n        }\n        return this._add({\n            patch: {\n                id: patchOrDocumentId,\n                ...patchOps\n            }\n        });\n    }\n};\n_client$4 = new WeakMap();\nlet Transaction = _Transaction;\nconst _ObservableTransaction = class _ObservableTransaction extends BaseTransaction {\n    constructor(operations, client, transactionId){\n        super(operations, transactionId);\n        __privateAdd$5(this, _client2$4, void 0);\n        __privateSet$5(this, _client2$4, client);\n    }\n    /**\n   * Clones the transaction\n   */ clone() {\n        return new _ObservableTransaction([\n            ...this.operations\n        ], __privateGet$5(this, _client2$4), this.trxId);\n    }\n    commit(options) {\n        if (!__privateGet$5(this, _client2$4)) {\n            throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n        }\n        return __privateGet$5(this, _client2$4).mutate(this.serialize(), Object.assign({\n            transactionId: this.trxId\n        }, defaultMutateOptions, options || {}));\n    }\n    patch(patchOrDocumentId, patchOps) {\n        const isBuilder = typeof patchOps === \"function\";\n        const isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof ObservablePatch;\n        if (isPatch) {\n            return this._add({\n                patch: patchOrDocumentId.serialize()\n            });\n        }\n        if (isBuilder) {\n            const patch = patchOps(new ObservablePatch(patchOrDocumentId, {}, __privateGet$5(this, _client2$4)));\n            if (!(patch instanceof ObservablePatch)) {\n                throw new Error(\"function passed to `patch()` must return the patch\");\n            }\n            return this._add({\n                patch: patch.serialize()\n            });\n        }\n        return this._add({\n            patch: {\n                id: patchOrDocumentId,\n                ...patchOps\n            }\n        });\n    }\n};\n_client2$4 = new WeakMap();\nlet ObservableTransaction = _ObservableTransaction;\nconst BASE_URL = \"https://www.sanity.io/help/\";\nfunction generateHelpUrl(slug) {\n    return BASE_URL + slug;\n}\nfunction once(fn) {\n    let didCall = false;\n    let returnValue;\n    return function() {\n        if (didCall) {\n            return returnValue;\n        }\n        returnValue = fn(...arguments);\n        didCall = true;\n        return returnValue;\n    };\n}\nconst createWarningPrinter = (message)=>// eslint-disable-next-line no-console\n    once(function() {\n        for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){\n            args[_key] = arguments[_key];\n        }\n        return console.warn(message.join(\" \"), ...args);\n    });\nconst printCdnWarning = createWarningPrinter([\n    \"Since you haven't set a value for `useCdn`, we will deliver content using our\",\n    \"global, edge-cached API-CDN. If you wish to have content delivered faster, set\",\n    \"`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API.\"\n]);\nconst printCdnPreviewDraftsWarning = createWarningPrinter([\n    \"The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.\",\n    \"The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning.\"\n]);\nconst printBrowserTokenWarning = createWarningPrinter([\n    \"You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.\",\n    \"See \".concat(generateHelpUrl(\"js-client-browser-token\"), \" for more information and how to hide this warning.\")\n]);\nconst printNoApiVersionSpecifiedWarning = createWarningPrinter([\n    \"Using the Sanity client without specifying an API version is deprecated.\",\n    \"See \".concat(generateHelpUrl(\"js-client-api-version\"))\n]);\nconst printNoDefaultExport = createWarningPrinter([\n    \"The default export of @sanity/client has been deprecated. Use the named export `createClient` instead.\"\n]);\nconst defaultCdnHost = \"apicdn.sanity.io\";\nconst defaultConfig = {\n    apiHost: \"https://api.sanity.io\",\n    apiVersion: \"1\",\n    useProjectHostname: true\n};\nconst LOCALHOSTS = [\n    \"localhost\",\n    \"127.0.0.1\",\n    \"0.0.0.0\"\n];\nconst isLocal = (host)=>LOCALHOSTS.indexOf(host) !== -1;\nconst validateApiVersion = function validateApiVersion2(apiVersion) {\n    if (apiVersion === \"1\" || apiVersion === \"X\") {\n        return;\n    }\n    const apiDate = new Date(apiVersion);\n    const apiVersionValid = /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0;\n    if (!apiVersionValid) {\n        throw new Error(\"Invalid API version string, expected `1` or date in format `YYYY-MM-DD`\");\n    }\n};\nconst validateApiPerspective = function validateApiPerspective2(perspective) {\n    switch(perspective){\n        case \"previewDrafts\":\n        case \"published\":\n        case \"raw\":\n            return;\n        default:\n            throw new TypeError(\"Invalid API perspective string, expected `published`, `previewDrafts` or `raw`\");\n    }\n};\nconst initConfig = (config, prevConfig)=>{\n    const specifiedConfig = Object.assign({}, prevConfig, config);\n    if (!specifiedConfig.apiVersion) {\n        printNoApiVersionSpecifiedWarning();\n    }\n    const newConfig = Object.assign({}, defaultConfig, specifiedConfig);\n    const projectBased = newConfig.useProjectHostname;\n    if (typeof Promise === \"undefined\") {\n        const helpUrl = generateHelpUrl(\"js-client-promise-polyfill\");\n        throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n    }\n    if (projectBased && !newConfig.projectId) {\n        throw new Error(\"Configuration must contain `projectId`\");\n    }\n    if (typeof newConfig.perspective === \"string\") {\n        validateApiPerspective(newConfig.perspective);\n    }\n    if (\"encodeSourceMapAtPath\" in newConfig || \"encodeSourceMap\" in newConfig || \"studioUrl\" in newConfig || \"logger\" in newConfig) {\n        throw new Error(\"It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.\");\n    }\n    const isBrowser =  false && 0;\n    const isLocalhost = isBrowser && isLocal(window.location.hostname);\n    if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n        printBrowserTokenWarning();\n    } else if (typeof newConfig.useCdn === \"undefined\") {\n        printCdnWarning();\n    }\n    if (projectBased) {\n        projectId(newConfig.projectId);\n    }\n    if (newConfig.dataset) {\n        dataset(newConfig.dataset);\n    }\n    if (\"requestTagPrefix\" in newConfig) {\n        newConfig.requestTagPrefix = newConfig.requestTagPrefix ? requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, \"\") : void 0;\n    }\n    newConfig.apiVersion = \"\".concat(newConfig.apiVersion).replace(/^v/, \"\");\n    newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n    newConfig.useCdn = newConfig.useCdn !== false && !newConfig.withCredentials;\n    validateApiVersion(newConfig.apiVersion);\n    const hostParts = newConfig.apiHost.split(\"://\", 2);\n    const protocol = hostParts[0];\n    const host = hostParts[1];\n    const cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n    if (newConfig.useProjectHostname) {\n        newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v\").concat(newConfig.apiVersion);\n        newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v\").concat(newConfig.apiVersion);\n    } else {\n        newConfig.url = \"\".concat(newConfig.apiHost, \"/v\").concat(newConfig.apiVersion);\n        newConfig.cdnUrl = newConfig.url;\n    }\n    return newConfig;\n};\nconst projectHeader = \"X-Sanity-Project-ID\";\nfunction requestOptions(config) {\n    let overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const headers = {};\n    const token = overrides.token || config.token;\n    if (token) {\n        headers.Authorization = \"Bearer \".concat(token);\n    }\n    if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n        headers[projectHeader] = config.projectId;\n    }\n    const withCredentials = Boolean(typeof overrides.withCredentials === \"undefined\" ? config.token || config.withCredentials : overrides.withCredentials);\n    const timeout = typeof overrides.timeout === \"undefined\" ? config.timeout : overrides.timeout;\n    return Object.assign({}, overrides, {\n        headers: Object.assign({}, headers, overrides.headers || {}),\n        timeout: typeof timeout === \"undefined\" ? 5 * 60 * 1e3 : timeout,\n        proxy: overrides.proxy || config.proxy,\n        json: true,\n        withCredentials,\n        fetch: typeof overrides.fetch === \"object\" && typeof config.fetch === \"object\" ? {\n            ...config.fetch,\n            ...overrides.fetch\n        } : overrides.fetch || config.fetch\n    });\n}\nconst encodeQueryString = (_ref2)=>{\n    let { query, params = {}, options = {} } = _ref2;\n    const searchParams = new URLSearchParams();\n    const { tag, ...opts } = options;\n    if (tag) searchParams.append(\"tag\", tag);\n    searchParams.append(\"query\", query);\n    for (const [key, value] of Object.entries(params)){\n        searchParams.append(\"$\".concat(key), JSON.stringify(value));\n    }\n    for (const [key, value] of Object.entries(opts)){\n        if (value) searchParams.append(key, \"\".concat(value));\n    }\n    return \"?\".concat(searchParams);\n};\nconst excludeFalsey = (param, defValue)=>{\n    const value = typeof param === \"undefined\" ? defValue : param;\n    return param === false ? void 0 : value;\n};\nconst getMutationQuery = function() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return {\n        dryRun: options.dryRun,\n        returnIds: true,\n        returnDocuments: excludeFalsey(options.returnDocuments, true),\n        visibility: options.visibility || \"sync\",\n        autoGenerateArrayKeys: options.autoGenerateArrayKeys,\n        skipCrossDatasetReferenceValidation: options.skipCrossDatasetReferenceValidation\n    };\n};\nconst isResponse = (event)=>event.type === \"response\";\nconst getBody = (event)=>event.body;\nconst indexBy = (docs, attr)=>docs.reduce((indexed, doc)=>{\n        indexed[attr(doc)] = doc;\n        return indexed;\n    }, /* @__PURE__ */ Object.create(null));\nconst getQuerySizeLimit = 11264;\nfunction _fetch(client, httpRequest, query, params) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    const mapResponse = options.filterResponse === false ? (res)=>res : (res)=>res.result;\n    const { cache, next, ...opts } = {\n        // Opt out of setting a `signal` on an internal `fetch` if one isn't provided.\n        // This is necessary in React Server Components to avoid opting out of Request Memoization.\n        useAbortSignal: typeof options.signal !== \"undefined\",\n        ...options\n    };\n    const reqOpts = typeof cache !== \"undefined\" || typeof next !== \"undefined\" ? {\n        ...opts,\n        fetch: {\n            cache,\n            next\n        }\n    } : opts;\n    return _dataRequest(client, httpRequest, \"query\", {\n        query,\n        params\n    }, reqOpts).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(mapResponse));\n}\nfunction _getDocument(client, httpRequest, id) {\n    let opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const options = {\n        uri: _getDataUrl(client, \"doc\", id),\n        json: true,\n        tag: opts.tag\n    };\n    return _requestObservable(client, httpRequest, options).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)(isResponse), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>event.body.documents && event.body.documents[0]));\n}\nfunction _getDocuments(client, httpRequest, ids) {\n    let opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const options = {\n        uri: _getDataUrl(client, \"doc\", ids.join(\",\")),\n        json: true,\n        tag: opts.tag\n    };\n    return _requestObservable(client, httpRequest, options).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)(isResponse), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>{\n        const indexed = indexBy(event.body.documents || [], (doc)=>doc._id);\n        return ids.map((id)=>indexed[id] || null);\n    }));\n}\nfunction _createIfNotExists(client, httpRequest, doc, options) {\n    requireDocumentId(\"createIfNotExists\", doc);\n    return _create(client, httpRequest, doc, \"createIfNotExists\", options);\n}\nfunction _createOrReplace(client, httpRequest, doc, options) {\n    requireDocumentId(\"createOrReplace\", doc);\n    return _create(client, httpRequest, doc, \"createOrReplace\", options);\n}\nfunction _delete(client, httpRequest, selection, options) {\n    return _dataRequest(client, httpRequest, \"mutate\", {\n        mutations: [\n            {\n                delete: getSelection(selection)\n            }\n        ]\n    }, options);\n}\nfunction _mutate(client, httpRequest, mutations, options) {\n    let mut;\n    if (mutations instanceof Patch || mutations instanceof ObservablePatch) {\n        mut = {\n            patch: mutations.serialize()\n        };\n    } else if (mutations instanceof Transaction || mutations instanceof ObservableTransaction) {\n        mut = mutations.serialize();\n    } else {\n        mut = mutations;\n    }\n    const muts = Array.isArray(mut) ? mut : [\n        mut\n    ];\n    const transactionId = options && options.transactionId || void 0;\n    return _dataRequest(client, httpRequest, \"mutate\", {\n        mutations: muts,\n        transactionId\n    }, options);\n}\nfunction _dataRequest(client, httpRequest, endpoint, body) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    const isMutation = endpoint === \"mutate\";\n    const isQuery = endpoint === \"query\";\n    const strQuery = isMutation ? \"\" : encodeQueryString(body);\n    const useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n    const stringQuery = useGet ? strQuery : \"\";\n    const returnFirst = options.returnFirst;\n    const { timeout, token, tag, headers } = options;\n    const uri = _getDataUrl(client, endpoint, stringQuery);\n    const reqOptions = {\n        method: useGet ? \"GET\" : \"POST\",\n        uri,\n        json: true,\n        body: useGet ? void 0 : body,\n        query: isMutation && getMutationQuery(options),\n        timeout,\n        headers,\n        token,\n        tag,\n        perspective: options.perspective,\n        resultSourceMap: options.resultSourceMap,\n        canUseCdn: isQuery,\n        signal: options.signal,\n        fetch: options.fetch,\n        useAbortSignal: options.useAbortSignal\n    };\n    return _requestObservable(client, httpRequest, reqOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)(isResponse), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(getBody), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((res)=>{\n        if (!isMutation) {\n            return res;\n        }\n        const results = res.results || [];\n        if (options.returnDocuments) {\n            return returnFirst ? results[0] && results[0].document : results.map((mut)=>mut.document);\n        }\n        const key = returnFirst ? \"documentId\" : \"documentIds\";\n        const ids = returnFirst ? results[0] && results[0].id : results.map((mut)=>mut.id);\n        return {\n            transactionId: res.transactionId,\n            results,\n            [key]: ids\n        };\n    }));\n}\nfunction _create(client, httpRequest, doc, op) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    const mutation = {\n        [op]: doc\n    };\n    const opts = Object.assign({\n        returnFirst: true,\n        returnDocuments: true\n    }, options);\n    return _dataRequest(client, httpRequest, \"mutate\", {\n        mutations: [\n            mutation\n        ]\n    }, opts);\n}\nfunction _requestObservable(client, httpRequest, options) {\n    var _a;\n    const uri = options.url || options.uri;\n    const config = client.config();\n    const canUseCdn = typeof options.canUseCdn === \"undefined\" ? [\n        \"GET\",\n        \"HEAD\"\n    ].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/\") === 0 : options.canUseCdn;\n    let useCdn = config.useCdn && canUseCdn;\n    const tag = options.tag && config.requestTagPrefix ? [\n        config.requestTagPrefix,\n        options.tag\n    ].join(\".\") : options.tag || config.requestTagPrefix;\n    if (tag && options.tag !== null) {\n        options.query = {\n            tag: requestTag(tag),\n            ...options.query\n        };\n    }\n    if ([\n        \"GET\",\n        \"HEAD\",\n        \"POST\"\n    ].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/query/\") === 0) {\n        const resultSourceMap = (_a = options.resultSourceMap) != null ? _a : config.resultSourceMap;\n        if (resultSourceMap !== void 0 && resultSourceMap !== false) {\n            options.query = {\n                resultSourceMap,\n                ...options.query\n            };\n        }\n        const perspective = options.perspective || config.perspective;\n        if (typeof perspective === \"string\" && perspective !== \"raw\") {\n            validateApiPerspective(perspective);\n            options.query = {\n                perspective,\n                ...options.query\n            };\n            if (perspective === \"previewDrafts\" && useCdn) {\n                useCdn = false;\n                printCdnPreviewDraftsWarning();\n            }\n        }\n    }\n    const reqOptions = requestOptions(config, Object.assign({}, options, {\n        url: _getUrl(client, uri, useCdn)\n    }));\n    const request = new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((subscriber)=>httpRequest(reqOptions, config.requester).subscribe(subscriber));\n    return options.signal ? request.pipe(_withAbortSignal(options.signal)) : request;\n}\nfunction _request(client, httpRequest, options) {\n    const observable = _requestObservable(client, httpRequest, options).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)((event)=>event.type === \"response\"), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>event.body));\n    return observable;\n}\nfunction _getDataUrl(client, operation, path) {\n    const config = client.config();\n    const catalog = hasDataset(config);\n    const baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n    const uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n    return \"/data\".concat(uri).replace(/\\/($|\\?)/, \"$1\");\n}\nfunction _getUrl(client, uri) {\n    let canUseCdn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    const { url, cdnUrl } = client.config();\n    const base = canUseCdn ? cdnUrl : url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, \"\"));\n}\nfunction _withAbortSignal(signal) {\n    return (input)=>{\n        return new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((observer)=>{\n            const abort = ()=>observer.error(_createAbortError(signal));\n            if (signal && signal.aborted) {\n                abort();\n                return;\n            }\n            const subscription = input.subscribe(observer);\n            signal.addEventListener(\"abort\", abort);\n            return ()=>{\n                signal.removeEventListener(\"abort\", abort);\n                subscription.unsubscribe();\n            };\n        });\n    };\n}\nconst isDomExceptionSupported = Boolean(globalThis.DOMException);\nfunction _createAbortError(signal) {\n    var _a, _b;\n    if (isDomExceptionSupported) {\n        return new DOMException((_a = signal == null ? void 0 : signal.reason) != null ? _a : \"The operation was aborted.\", \"AbortError\");\n    }\n    const error = new Error((_b = signal == null ? void 0 : signal.reason) != null ? _b : \"The operation was aborted.\");\n    error.name = \"AbortError\";\n    return error;\n}\nvar __accessCheck$4 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$4 = (obj, member, getter)=>{\n    __accessCheck$4(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$4 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$4 = (obj, member, value, setter)=>{\n    __accessCheck$4(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$3, _httpRequest$4, _client2$3, _httpRequest2$4;\nclass ObservableAssetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$4(this, _client$3, void 0);\n        __privateAdd$4(this, _httpRequest$4, void 0);\n        __privateSet$4(this, _client$3, client);\n        __privateSet$4(this, _httpRequest$4, httpRequest);\n    }\n    upload(assetType, body, options) {\n        return _upload(__privateGet$4(this, _client$3), __privateGet$4(this, _httpRequest$4), assetType, body, options);\n    }\n}\n_client$3 = new WeakMap();\n_httpRequest$4 = new WeakMap();\nclass AssetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$4(this, _client2$3, void 0);\n        __privateAdd$4(this, _httpRequest2$4, void 0);\n        __privateSet$4(this, _client2$3, client);\n        __privateSet$4(this, _httpRequest2$4, httpRequest);\n    }\n    upload(assetType, body, options) {\n        const observable = _upload(__privateGet$4(this, _client2$3), __privateGet$4(this, _httpRequest2$4), assetType, body, options);\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(observable.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)((event)=>event.type === \"response\"), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)((event)=>event.body.document)));\n    }\n}\n_client2$3 = new WeakMap();\n_httpRequest2$4 = new WeakMap();\nfunction _upload(client, httpRequest, assetType, body) {\n    let opts = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    validateAssetType(assetType);\n    let meta = opts.extract || void 0;\n    if (meta && !meta.length) {\n        meta = [\n            \"none\"\n        ];\n    }\n    const dataset = hasDataset(client.config());\n    const assetEndpoint = assetType === \"image\" ? \"images\" : \"files\";\n    const options = optionsFromFile(opts, body);\n    const { tag, label, title, description, creditLine, filename, source } = options;\n    const query = {\n        label,\n        title,\n        description,\n        filename,\n        meta,\n        creditLine\n    };\n    if (source) {\n        query.sourceId = source.id;\n        query.sourceName = source.name;\n        query.sourceUrl = source.url;\n    }\n    return _requestObservable(client, httpRequest, {\n        tag,\n        method: \"POST\",\n        timeout: options.timeout || 0,\n        uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n        headers: options.contentType ? {\n            \"Content-Type\": options.contentType\n        } : {},\n        query,\n        body\n    });\n}\nfunction optionsFromFile(opts, file) {\n    if (typeof File === \"undefined\" || !(file instanceof File)) {\n        return opts;\n    }\n    return Object.assign({\n        filename: opts.preserveFilename === false ? void 0 : file.name,\n        contentType: file.type\n    }, opts);\n}\nvar defaults = (obj, defaults)=>Object.keys(defaults).concat(Object.keys(obj)).reduce((target, prop)=>{\n        target[prop] = typeof obj[prop] === \"undefined\" ? defaults[prop] : obj[prop];\n        return target;\n    }, {});\nconst pick = (obj, props)=>props.reduce((selection, prop)=>{\n        if (typeof obj[prop] === \"undefined\") {\n            return selection;\n        }\n        selection[prop] = obj[prop];\n        return selection;\n    }, {});\nconst MAX_URL_LENGTH = 16e3 - 1200;\nconst possibleOptions = [\n    \"includePreviousRevision\",\n    \"includeResult\",\n    \"visibility\",\n    \"effectFormat\",\n    \"tag\"\n];\nconst defaultOptions = {\n    includeResult: true\n};\nfunction _listen(query, params) {\n    let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const { url, token, withCredentials, requestTagPrefix } = this.config();\n    const tag = opts.tag && requestTagPrefix ? [\n        requestTagPrefix,\n        opts.tag\n    ].join(\".\") : opts.tag;\n    const options = {\n        ...defaults(opts, defaultOptions),\n        tag\n    };\n    const listenOpts = pick(options, possibleOptions);\n    const qs = encodeQueryString({\n        query,\n        params,\n        options: {\n            tag,\n            ...listenOpts\n        }\n    });\n    const uri = \"\".concat(url).concat(_getDataUrl(this, \"listen\", qs));\n    if (uri.length > MAX_URL_LENGTH) {\n        return new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((observer)=>observer.error(new Error(\"Query too large for listener\")));\n    }\n    const listenFor = options.events ? options.events : [\n        \"mutation\"\n    ];\n    const shouldEmitReconnect = listenFor.indexOf(\"reconnect\") !== -1;\n    const esOptions = {};\n    if (token || withCredentials) {\n        esOptions.withCredentials = true;\n    }\n    if (token) {\n        esOptions.headers = {\n            Authorization: \"Bearer \".concat(token)\n        };\n    }\n    return new _barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable((observer)=>{\n        let es;\n        getEventSource().then((eventSource)=>{\n            es = eventSource;\n        }).catch((reason)=>{\n            observer.error(reason);\n            stop();\n        });\n        let reconnectTimer;\n        let stopped = false;\n        function onError() {\n            if (stopped) {\n                return;\n            }\n            emitReconnect();\n            if (stopped) {\n                return;\n            }\n            if (es.readyState === es.CLOSED) {\n                unsubscribe();\n                clearTimeout(reconnectTimer);\n                reconnectTimer = setTimeout(open, 100);\n            }\n        }\n        function onChannelError(err) {\n            observer.error(cooerceError(err));\n        }\n        function onMessage(evt) {\n            const event = parseEvent(evt);\n            return event instanceof Error ? observer.error(event) : observer.next(event);\n        }\n        function onDisconnect() {\n            stopped = true;\n            unsubscribe();\n            observer.complete();\n        }\n        function unsubscribe() {\n            if (!es) return;\n            es.removeEventListener(\"error\", onError);\n            es.removeEventListener(\"channelError\", onChannelError);\n            es.removeEventListener(\"disconnect\", onDisconnect);\n            listenFor.forEach((type)=>es.removeEventListener(type, onMessage));\n            es.close();\n        }\n        function emitReconnect() {\n            if (shouldEmitReconnect) {\n                observer.next({\n                    type: \"reconnect\"\n                });\n            }\n        }\n        async function getEventSource() {\n            const { default: EventSource } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@sanity\"), __webpack_require__.e(\"vendor-chunks/eventsource\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @sanity/eventsource */ \"(rsc)/./node_modules/@sanity/eventsource/node.js\", 19));\n            const evs = new EventSource(uri, esOptions);\n            evs.addEventListener(\"error\", onError);\n            evs.addEventListener(\"channelError\", onChannelError);\n            evs.addEventListener(\"disconnect\", onDisconnect);\n            listenFor.forEach((type)=>evs.addEventListener(type, onMessage));\n            return evs;\n        }\n        function open() {\n            getEventSource().then((eventSource)=>{\n                es = eventSource;\n            }).catch((reason)=>{\n                observer.error(reason);\n                stop();\n            });\n        }\n        function stop() {\n            stopped = true;\n            unsubscribe();\n        }\n        return stop;\n    });\n}\nfunction parseEvent(event) {\n    try {\n        const data = event.data && JSON.parse(event.data) || {};\n        return Object.assign({\n            type: event.type\n        }, data);\n    } catch (err) {\n        return err;\n    }\n}\nfunction cooerceError(err) {\n    if (err instanceof Error) {\n        return err;\n    }\n    const evt = parseEvent(err);\n    return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\nfunction extractErrorMessage(err) {\n    if (!err.error) {\n        return err.message || \"Unknown listener error\";\n    }\n    if (err.error.description) {\n        return err.error.description;\n    }\n    return typeof err.error === \"string\" ? err.error : JSON.stringify(err.error, null, 2);\n}\nvar __accessCheck$3 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$3 = (obj, member, getter)=>{\n    __accessCheck$3(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$3 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$3 = (obj, member, value, setter)=>{\n    __accessCheck$3(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$2, _httpRequest$3, _client2$2, _httpRequest2$3;\nclass ObservableDatasetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$3(this, _client$2, void 0);\n        __privateAdd$3(this, _httpRequest$3, void 0);\n        __privateSet$3(this, _client$2, client);\n        __privateSet$3(this, _httpRequest$3, httpRequest);\n    }\n    /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */ create(name, options) {\n        return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PUT\", name, options);\n    }\n    /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */ edit(name, options) {\n        return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PATCH\", name, options);\n    }\n    /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */ delete(name) {\n        return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"DELETE\", name);\n    }\n    /**\n   * Fetch a list of datasets for the configured project\n   */ list() {\n        return _request(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), {\n            uri: \"/datasets\",\n            tag: null\n        });\n    }\n}\n_client$2 = new WeakMap();\n_httpRequest$3 = new WeakMap();\nclass DatasetsClient {\n    constructor(client, httpRequest){\n        __privateAdd$3(this, _client2$2, void 0);\n        __privateAdd$3(this, _httpRequest2$3, void 0);\n        __privateSet$3(this, _client2$2, client);\n        __privateSet$3(this, _httpRequest2$3, httpRequest);\n    }\n    /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */ create(name, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PUT\", name, options));\n    }\n    /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */ edit(name, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PATCH\", name, options));\n    }\n    /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */ delete(name) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"DELETE\", name));\n    }\n    /**\n   * Fetch a list of datasets for the configured project\n   */ list() {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_request(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), {\n            uri: \"/datasets\",\n            tag: null\n        }));\n    }\n}\n_client2$2 = new WeakMap();\n_httpRequest2$3 = new WeakMap();\nfunction _modify(client, httpRequest, method, name, options) {\n    dataset(name);\n    return _request(client, httpRequest, {\n        method,\n        uri: \"/datasets/\".concat(name),\n        body: options,\n        tag: null\n    });\n}\nvar __accessCheck$2 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = (obj, member, getter)=>{\n    __accessCheck$2(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = (obj, member, value, setter)=>{\n    __accessCheck$2(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client$1, _httpRequest$2, _client2$1, _httpRequest2$2;\nclass ObservableProjectsClient {\n    constructor(client, httpRequest){\n        __privateAdd$2(this, _client$1, void 0);\n        __privateAdd$2(this, _httpRequest$2, void 0);\n        __privateSet$2(this, _client$1, client);\n        __privateSet$2(this, _httpRequest$2, httpRequest);\n    }\n    list(options) {\n        const uri = (options == null ? void 0 : options.includeMembers) === false ? \"/projects?includeMembers=false\" : \"/projects\";\n        return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n            uri\n        });\n    }\n    /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */ getById(projectId) {\n        return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n            uri: \"/projects/\".concat(projectId)\n        });\n    }\n}\n_client$1 = new WeakMap();\n_httpRequest$2 = new WeakMap();\nclass ProjectsClient {\n    constructor(client, httpRequest){\n        __privateAdd$2(this, _client2$1, void 0);\n        __privateAdd$2(this, _httpRequest2$2, void 0);\n        __privateSet$2(this, _client2$1, client);\n        __privateSet$2(this, _httpRequest2$2, httpRequest);\n    }\n    list(options) {\n        const uri = (options == null ? void 0 : options.includeMembers) === false ? \"/projects?includeMembers=false\" : \"/projects\";\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n            uri\n        }));\n    }\n    /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */ getById(projectId) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n            uri: \"/projects/\".concat(projectId)\n        }));\n    }\n}\n_client2$1 = new WeakMap();\n_httpRequest2$2 = new WeakMap();\nvar __accessCheck$1 = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter)=>{\n    __accessCheck$1(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter)=>{\n    __accessCheck$1(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _client, _httpRequest$1, _client2, _httpRequest2$1;\nclass ObservableUsersClient {\n    constructor(client, httpRequest){\n        __privateAdd$1(this, _client, void 0);\n        __privateAdd$1(this, _httpRequest$1, void 0);\n        __privateSet$1(this, _client, client);\n        __privateSet$1(this, _httpRequest$1, httpRequest);\n    }\n    /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */ getById(id) {\n        return _request(__privateGet$1(this, _client), __privateGet$1(this, _httpRequest$1), {\n            uri: \"/users/\".concat(id)\n        });\n    }\n}\n_client = new WeakMap();\n_httpRequest$1 = new WeakMap();\nclass UsersClient {\n    constructor(client, httpRequest){\n        __privateAdd$1(this, _client2, void 0);\n        __privateAdd$1(this, _httpRequest2$1, void 0);\n        __privateSet$1(this, _client2, client);\n        __privateSet$1(this, _httpRequest2$1, httpRequest);\n    }\n    /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */ getById(id) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_request(__privateGet$1(this, _client2), __privateGet$1(this, _httpRequest2$1), {\n            uri: \"/users/\".concat(id)\n        }));\n    }\n}\n_client2 = new WeakMap();\n_httpRequest2$1 = new WeakMap();\nvar __accessCheck = (obj, member, msg)=>{\n    if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter)=>{\n    __accessCheck(obj, member, \"read from private field\");\n    return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value)=>{\n    if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter)=>{\n    __accessCheck(obj, member, \"write to private field\");\n    setter ? setter.call(obj, value) : member.set(obj, value);\n    return value;\n};\nvar _clientConfig, _httpRequest, _clientConfig2, _httpRequest2;\nconst _ObservableSanityClient = class _ObservableSanityClient {\n    constructor(httpRequest){\n        let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n        /**\n     * Private properties\n     */ __privateAdd(this, _clientConfig, void 0);\n        __privateAdd(this, _httpRequest, void 0);\n        /**\n     * Instance properties\n     */ this.listen = _listen;\n        this.config(config);\n        __privateSet(this, _httpRequest, httpRequest);\n        this.assets = new ObservableAssetsClient(this, __privateGet(this, _httpRequest));\n        this.datasets = new ObservableDatasetsClient(this, __privateGet(this, _httpRequest));\n        this.projects = new ObservableProjectsClient(this, __privateGet(this, _httpRequest));\n        this.users = new ObservableUsersClient(this, __privateGet(this, _httpRequest));\n    }\n    /**\n   * Clone the client - returns a new instance\n   */ clone() {\n        return new _ObservableSanityClient(__privateGet(this, _httpRequest), this.config());\n    }\n    config(newConfig) {\n        if (newConfig === void 0) {\n            return {\n                ...__privateGet(this, _clientConfig)\n            };\n        }\n        if (__privateGet(this, _clientConfig) && __privateGet(this, _clientConfig).allowReconfigure === false) {\n            throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n        }\n        __privateSet(this, _clientConfig, initConfig(newConfig, __privateGet(this, _clientConfig) || {}));\n        return this;\n    }\n    /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */ withConfig(newConfig) {\n        return new _ObservableSanityClient(__privateGet(this, _httpRequest), {\n            ...this.config(),\n            ...newConfig\n        });\n    }\n    fetch(query, params) {\n        let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return _fetch(this, __privateGet(this, _httpRequest), query, params, options);\n    }\n    /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */ getDocument(id, options) {\n        return _getDocument(this, __privateGet(this, _httpRequest), id, options);\n    }\n    /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */ getDocuments(ids, options) {\n        return _getDocuments(this, __privateGet(this, _httpRequest), ids, options);\n    }\n    create(document, options) {\n        return _create(this, __privateGet(this, _httpRequest), document, \"create\", options);\n    }\n    createIfNotExists(document, options) {\n        return _createIfNotExists(this, __privateGet(this, _httpRequest), document, options);\n    }\n    createOrReplace(document, options) {\n        return _createOrReplace(this, __privateGet(this, _httpRequest), document, options);\n    }\n    delete(selection, options) {\n        return _delete(this, __privateGet(this, _httpRequest), selection, options);\n    }\n    mutate(operations, options) {\n        return _mutate(this, __privateGet(this, _httpRequest), operations, options);\n    }\n    /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param selection - Document ID, an array of document IDs, or an object with `query` and optional `params`, defining which document(s) to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   * @returns Patch instance - call `.commit()` to perform the operations defined\n   */ patch(selection, operations) {\n        return new ObservablePatch(selection, operations, this);\n    }\n    /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */ transaction(operations) {\n        return new ObservableTransaction(operations, this);\n    }\n    /**\n   * Perform an HTTP request against the Sanity API\n   *\n   * @param options - Request options\n   */ request(options) {\n        return _request(this, __privateGet(this, _httpRequest), options);\n    }\n    /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */ getUrl(uri, canUseCdn) {\n        return _getUrl(this, uri, canUseCdn);\n    }\n    /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */ getDataUrl(operation, path) {\n        return _getDataUrl(this, operation, path);\n    }\n};\n_clientConfig = new WeakMap();\n_httpRequest = new WeakMap();\nlet ObservableSanityClient = _ObservableSanityClient;\nconst _SanityClient = class _SanityClient {\n    constructor(httpRequest){\n        let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n        /**\n     * Private properties\n     */ __privateAdd(this, _clientConfig2, void 0);\n        __privateAdd(this, _httpRequest2, void 0);\n        /**\n     * Instance properties\n     */ this.listen = _listen;\n        this.config(config);\n        __privateSet(this, _httpRequest2, httpRequest);\n        this.assets = new AssetsClient(this, __privateGet(this, _httpRequest2));\n        this.datasets = new DatasetsClient(this, __privateGet(this, _httpRequest2));\n        this.projects = new ProjectsClient(this, __privateGet(this, _httpRequest2));\n        this.users = new UsersClient(this, __privateGet(this, _httpRequest2));\n        this.observable = new ObservableSanityClient(httpRequest, config);\n    }\n    /**\n   * Clone the client - returns a new instance\n   */ clone() {\n        return new _SanityClient(__privateGet(this, _httpRequest2), this.config());\n    }\n    config(newConfig) {\n        if (newConfig === void 0) {\n            return {\n                ...__privateGet(this, _clientConfig2)\n            };\n        }\n        if (__privateGet(this, _clientConfig2) && __privateGet(this, _clientConfig2).allowReconfigure === false) {\n            throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n        }\n        if (this.observable) {\n            this.observable.config(newConfig);\n        }\n        __privateSet(this, _clientConfig2, initConfig(newConfig, __privateGet(this, _clientConfig2) || {}));\n        return this;\n    }\n    /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */ withConfig(newConfig) {\n        return new _SanityClient(__privateGet(this, _httpRequest2), {\n            ...this.config(),\n            ...newConfig\n        });\n    }\n    fetch(query, params) {\n        let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_fetch(this, __privateGet(this, _httpRequest2), query, params, options));\n    }\n    /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */ getDocument(id, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_getDocument(this, __privateGet(this, _httpRequest2), id, options));\n    }\n    /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */ getDocuments(ids, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_getDocuments(this, __privateGet(this, _httpRequest2), ids, options));\n    }\n    create(document, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_create(this, __privateGet(this, _httpRequest2), document, \"create\", options));\n    }\n    createIfNotExists(document, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_createIfNotExists(this, __privateGet(this, _httpRequest2), document, options));\n    }\n    createOrReplace(document, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_createOrReplace(this, __privateGet(this, _httpRequest2), document, options));\n    }\n    delete(selection, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_delete(this, __privateGet(this, _httpRequest2), selection, options));\n    }\n    mutate(operations, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_mutate(this, __privateGet(this, _httpRequest2), operations, options));\n    }\n    /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param selection - Document ID, an array of document IDs, or an object with `query` and optional `params`, defining which document(s) to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   * @returns Patch instance - call `.commit()` to perform the operations defined\n   */ patch(documentId, operations) {\n        return new Patch(documentId, operations, this);\n    }\n    /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */ transaction(operations) {\n        return new Transaction(operations, this);\n    }\n    /**\n   * Perform a request against the Sanity API\n   * NOTE: Only use this for Sanity API endpoints, not for your own APIs!\n   *\n   * @param options - Request options\n   * @returns Promise resolving to the response body\n   */ request(options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_request(this, __privateGet(this, _httpRequest2), options));\n    }\n    /**\n   * Perform an HTTP request a `/data` sub-endpoint\n   * NOTE: Considered internal, thus marked as deprecated. Use `request` instead.\n   *\n   * @deprecated - Use `request()` or your own HTTP library instead\n   * @param endpoint - Endpoint to hit (mutate, query etc)\n   * @param body - Request body\n   * @param options - Request options\n   * @internal\n   */ dataRequest(endpoint, body, options) {\n        return (0,_barrel_optimize_names_Observable_lastValueFrom_rxjs__WEBPACK_IMPORTED_MODULE_4__.lastValueFrom)(_dataRequest(this, __privateGet(this, _httpRequest2), endpoint, body, options));\n    }\n    /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */ getUrl(uri, canUseCdn) {\n        return _getUrl(this, uri, canUseCdn);\n    }\n    /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */ getDataUrl(operation, path) {\n        return _getDataUrl(this, operation, path);\n    }\n};\n_clientConfig2 = new WeakMap();\n_httpRequest2 = new WeakMap();\nlet SanityClient = _SanityClient;\nfunction defineCreateClientExports(envMiddleware, ClassConstructor) {\n    const httpRequest = defineHttpRequest(envMiddleware, {});\n    const requester = httpRequest.defaultRequester;\n    const createClient = (config)=>new ClassConstructor(defineHttpRequest(envMiddleware, {\n            maxRetries: config.maxRetries,\n            retryDelay: config.retryDelay\n        }), config);\n    return {\n        requester,\n        createClient\n    };\n}\nfunction defineDeprecatedCreateClient(createClient) {\n    return function deprecatedCreateClient(config) {\n        printNoDefaultExport();\n        return createClient(config);\n    };\n}\nvar envMiddleware = [];\nconst exp = defineCreateClientExports(envMiddleware, SanityClient);\nconst requester = exp.requester;\nconst createClient = exp.createClient;\nconst deprecatedCreateClient = defineDeprecatedCreateClient(createClient);\n //# sourceMappingURL=index.browser.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9jbGllbnQvZGlzdC9pbmRleC5icm93c2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStCO0FBQzZEO0FBQ0Q7QUFDMUM7QUFDSjtBQUM3QyxNQUFNYyw2QkFBNkI7QUFDbkMsTUFBTUMsb0JBQW9CQztJQUN4QkMsWUFBWUMsR0FBRyxDQUFFO1FBQ2YsTUFBTUMsUUFBUUMsa0JBQWtCRjtRQUNoQyxLQUFLLENBQUNDLE1BQU1FLE9BQU87UUFDbkIsSUFBSSxDQUFDQyxVQUFVLEdBQUc7UUFDbEJDLE9BQU9DLE1BQU0sQ0FBQyxJQUFJLEVBQUVMO0lBQ3RCO0FBQ0Y7QUFDQSxNQUFNTSxvQkFBb0JUO0lBQ3hCQyxZQUFZQyxHQUFHLENBQUU7UUFDZixNQUFNQyxRQUFRQyxrQkFBa0JGO1FBQ2hDLEtBQUssQ0FBQ0MsTUFBTUUsT0FBTztRQUNuQixJQUFJLENBQUNDLFVBQVUsR0FBRztRQUNsQkMsT0FBT0MsTUFBTSxDQUFDLElBQUksRUFBRUw7SUFDdEI7QUFDRjtBQUNBLFNBQVNDLGtCQUFrQkYsR0FBRztJQUM1QixNQUFNUSxPQUFPUixJQUFJUSxJQUFJO0lBQ3JCLE1BQU1QLFFBQVE7UUFDWlEsVUFBVVQ7UUFDVkksWUFBWUosSUFBSUksVUFBVTtRQUMxQk0sY0FBY0MsY0FBY0gsTUFBTVI7UUFDbENHLFNBQVM7UUFDVFMsU0FBUyxLQUFLO0lBQ2hCO0lBQ0EsSUFBSUosS0FBS0ssS0FBSyxJQUFJTCxLQUFLTCxPQUFPLEVBQUU7UUFDOUJGLE1BQU1FLE9BQU8sR0FBRyxHQUFHVyxNQUFNLENBQUNOLEtBQUtLLEtBQUssRUFBRSxPQUFPQyxNQUFNLENBQUNOLEtBQUtMLE9BQU87UUFDaEUsT0FBT0Y7SUFDVDtJQUNBLElBQUljLGdCQUFnQlAsT0FBTztRQUN6QixNQUFNUSxXQUFXUixLQUFLSyxLQUFLLENBQUNJLEtBQUssSUFBSSxFQUFFO1FBQ3ZDLE1BQU1BLFFBQVFELFNB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bGllbnQvZGlzdC9pbmRleC5icm93c2VyLmpzPzk5OGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SXQgfSBmcm9tICdnZXQtaXQnO1xuZXhwb3J0IHsgYWRhcHRlciBhcyB1bnN0YWJsZV9fYWRhcHRlciwgZW52aXJvbm1lbnQgYXMgdW5zdGFibGVfX2Vudmlyb25tZW50IH0gZnJvbSAnZ2V0LWl0JztcbmltcG9ydCB7IHJldHJ5LCBqc29uUmVxdWVzdCwganNvblJlc3BvbnNlLCBwcm9ncmVzcywgb2JzZXJ2YWJsZSB9IGZyb20gJ2dldC1pdC9taWRkbGV3YXJlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGxhc3RWYWx1ZUZyb20gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCwgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuY29uc3QgTUFYX0lURU1TX0lOX0VSUk9SX01FU1NBR0UgPSA1O1xuY2xhc3MgQ2xpZW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlcykge1xuICAgIGNvbnN0IHByb3BzID0gZXh0cmFjdEVycm9yUHJvcHMocmVzKTtcbiAgICBzdXBlcihwcm9wcy5tZXNzYWdlKTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBwcm9wcyk7XG4gIH1cbn1cbmNsYXNzIFNlcnZlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyZXMpIHtcbiAgICBjb25zdCBwcm9wcyA9IGV4dHJhY3RFcnJvclByb3BzKHJlcyk7XG4gICAgc3VwZXIocHJvcHMubWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gNTAwO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcHMpO1xuICB9XG59XG5mdW5jdGlvbiBleHRyYWN0RXJyb3JQcm9wcyhyZXMpIHtcbiAgY29uc3QgYm9keSA9IHJlcy5ib2R5O1xuICBjb25zdCBwcm9wcyA9IHtcbiAgICByZXNwb25zZTogcmVzLFxuICAgIHN0YXR1c0NvZGU6IHJlcy5zdGF0dXNDb2RlLFxuICAgIHJlc3BvbnNlQm9keTogc3RyaW5naWZ5Qm9keShib2R5LCByZXMpLFxuICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgZGV0YWlsczogdm9pZCAwXG4gIH07XG4gIGlmIChib2R5LmVycm9yICYmIGJvZHkubWVzc2FnZSkge1xuICAgIHByb3BzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChib2R5LmVycm9yLCBcIiAtIFwiKS5jb25jYXQoYm9keS5tZXNzYWdlKTtcbiAgICByZXR1cm4gcHJvcHM7XG4gIH1cbiAgaWYgKGlzTXV0YXRpb25FcnJvcihib2R5KSkge1xuICAgIGNvbnN0IGFsbEl0ZW1zID0gYm9keS5lcnJvci5pdGVtcyB8fCBbXTtcbiAgICBjb25zdCBpdGVtcyA9IGFsbEl0ZW1zLnNsaWNlKDAsIE1BWF9JVEVNU19JTl9FUlJPUl9NRVNTQUdFKS5tYXAoaXRlbSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICByZXR1cm4gKF9hID0gaXRlbS5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRlc2NyaXB0aW9uO1xuICAgIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgICBsZXQgaXRlbXNTdHIgPSBpdGVtcy5sZW5ndGggPyBcIjpcXG4tIFwiLmNvbmNhdChpdGVtcy5qb2luKFwiXFxuLSBcIikpIDogXCJcIjtcbiAgICBpZiAoYWxsSXRlbXMubGVuZ3RoID4gTUFYX0lURU1TX0lOX0VSUk9SX01FU1NBR0UpIHtcbiAgICAgIGl0ZW1zU3RyICs9IFwiXFxuLi4uYW5kIFwiLmNvbmNhdChhbGxJdGVtcy5sZW5ndGggLSBNQVhfSVRFTVNfSU5fRVJST1JfTUVTU0FHRSwgXCIgbW9yZVwiKTtcbiAgICB9XG4gICAgcHJvcHMubWVzc2FnZSA9IFwiXCIuY29uY2F0KGJvZHkuZXJyb3IuZGVzY3JpcHRpb24pLmNvbmNhdChpdGVtc1N0cik7XG4gICAgcHJvcHMuZGV0YWlscyA9IGJvZHkuZXJyb3I7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG4gIGlmIChib2R5LmVycm9yICYmIGJvZHkuZXJyb3IuZGVzY3JpcHRpb24pIHtcbiAgICBwcm9wcy5tZXNzYWdlID0gYm9keS5lcnJvci5kZXNjcmlwdGlvbjtcbiAgICBwcm9wcy5kZXRhaWxzID0gYm9keS5lcnJvcjtcbiAgICByZXR1cm4gcHJvcHM7XG4gIH1cbiAgcHJvcHMubWVzc2FnZSA9IGJvZHkuZXJyb3IgfHwgYm9keS5tZXNzYWdlIHx8IGh0dHBFcnJvck1lc3NhZ2UocmVzKTtcbiAgcmV0dXJuIHByb3BzO1xufVxuZnVuY3Rpb24gaXNNdXRhdGlvbkVycm9yKGJvZHkpIHtcbiAgcmV0dXJuIGlzUGxhaW5PYmplY3QoYm9keSkgJiYgaXNQbGFpbk9iamVjdChib2R5LmVycm9yKSAmJiBib2R5LmVycm9yLnR5cGUgPT09IFwibXV0YXRpb25FcnJvclwiICYmIHR5cGVvZiBib2R5LmVycm9yLmRlc2NyaXB0aW9uID09PSBcInN0cmluZ1wiO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9iaik7XG59XG5mdW5jdGlvbiBodHRwRXJyb3JNZXNzYWdlKHJlcykge1xuICBjb25zdCBzdGF0dXNNZXNzYWdlID0gcmVzLnN0YXR1c01lc3NhZ2UgPyBcIiBcIi5jb25jYXQocmVzLnN0YXR1c01lc3NhZ2UpIDogXCJcIjtcbiAgcmV0dXJuIFwiXCIuY29uY2F0KHJlcy5tZXRob2QsIFwiLXJlcXVlc3QgdG8gXCIpLmNvbmNhdChyZXMudXJsLCBcIiByZXN1bHRlZCBpbiBIVFRQIFwiKS5jb25jYXQocmVzLnN0YXR1c0NvZGUpLmNvbmNhdChzdGF0dXNNZXNzYWdlKTtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeUJvZHkoYm9keSwgcmVzKSB7XG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gKHJlcy5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGlzSnNvbiA9IGNvbnRlbnRUeXBlLmluZGV4T2YoXCJhcHBsaWNhdGlvbi9qc29uXCIpICE9PSAtMTtcbiAgcmV0dXJuIGlzSnNvbiA/IEpTT04uc3RyaW5naWZ5KGJvZHksIG51bGwsIDIpIDogYm9keTtcbn1cbmNvbnN0IGh0dHBFcnJvciA9IHtcbiAgb25SZXNwb25zZTogcmVzID0+IHtcbiAgICBpZiAocmVzLnN0YXR1c0NvZGUgPj0gNTAwKSB7XG4gICAgICB0aHJvdyBuZXcgU2VydmVyRXJyb3IocmVzKTtcbiAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXNDb2RlID49IDQwMCkge1xuICAgICAgdGhyb3cgbmV3IENsaWVudEVycm9yKHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbn07XG5jb25zdCBwcmludFdhcm5pbmdzID0ge1xuICBvblJlc3BvbnNlOiByZXMgPT4ge1xuICAgIGNvbnN0IHdhcm4gPSByZXMuaGVhZGVyc1tcIngtc2FuaXR5LXdhcm5pbmdcIl07XG4gICAgY29uc3Qgd2FybmluZ3MgPSBBcnJheS5pc0FycmF5KHdhcm4pID8gd2FybiA6IFt3YXJuXTtcbiAgICB3YXJuaW5ncy5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaChtc2cgPT4gY29uc29sZS53YXJuKG1zZykpO1xuICAgIHJldHVybiByZXM7XG4gIH1cbn07XG5mdW5jdGlvbiBkZWZpbmVIdHRwUmVxdWVzdChlbnZNaWRkbGV3YXJlLCBfcmVmKSB7XG4gIGxldCB7XG4gICAgbWF4UmV0cmllcyA9IDUsXG4gICAgcmV0cnlEZWxheVxuICB9ID0gX3JlZjtcbiAgY29uc3QgcmVxdWVzdCA9IGdldEl0KFttYXhSZXRyaWVzID4gMCA/IHJldHJ5KHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHJ5RGVsYXksXG4gICAgLy8gVGhpcyBvcHRpb24gaXMgdHlwZWQgaW5jb3JyZWN0bHkgaW4gZ2V0LWl0LlxuICAgIG1heFJldHJpZXMsXG4gICAgc2hvdWxkUmV0cnlcbiAgfSkgOiB7fSwgLi4uZW52TWlkZGxld2FyZSwgcHJpbnRXYXJuaW5ncywganNvblJlcXVlc3QoKSwganNvblJlc3BvbnNlKCksIHByb2dyZXNzKCksIGh0dHBFcnJvciwgb2JzZXJ2YWJsZSh7XG4gICAgaW1wbGVtZW50YXRpb246IE9ic2VydmFibGVcbiAgfSldKTtcbiAgZnVuY3Rpb24gaHR0cFJlcXVlc3Qob3B0aW9ucykge1xuICAgIGxldCByZXF1ZXN0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHJlcXVlc3Q7XG4gICAgcmV0dXJuIHJlcXVlc3Rlcih7XG4gICAgICBtYXhSZWRpcmVjdHM6IDAsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgaHR0cFJlcXVlc3QuZGVmYXVsdFJlcXVlc3RlciA9IHJlcXVlc3Q7XG4gIHJldHVybiBodHRwUmVxdWVzdDtcbn1cbmZ1bmN0aW9uIHNob3VsZFJldHJ5KGVyciwgYXR0ZW1wdCwgb3B0aW9ucykge1xuICBjb25zdCBpc1NhZmUgPSBvcHRpb25zLm1ldGhvZCA9PT0gXCJHRVRcIiB8fCBvcHRpb25zLm1ldGhvZCA9PT0gXCJIRUFEXCI7XG4gIGNvbnN0IHVyaSA9IG9wdGlvbnMudXJpIHx8IG9wdGlvbnMudXJsO1xuICBjb25zdCBpc1F1ZXJ5ID0gdXJpLnN0YXJ0c1dpdGgoXCIvZGF0YS9xdWVyeVwiKTtcbiAgY29uc3QgaXNSZXRyaWFibGVSZXNwb25zZSA9IGVyci5yZXNwb25zZSAmJiAoZXJyLnJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQyOSB8fCBlcnIucmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNTAyIHx8IGVyci5yZXNwb25zZS5zdGF0dXNDb2RlID09PSA1MDMpO1xuICBpZiAoKGlzU2FmZSB8fCBpc1F1ZXJ5KSAmJiBpc1JldHJpYWJsZVJlc3BvbnNlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIHJldHJ5LnNob3VsZFJldHJ5KGVyciwgYXR0ZW1wdCwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24oc2VsKSB7XG4gIGlmICh0eXBlb2Ygc2VsID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoc2VsKSkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogc2VsXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIHNlbCA9PT0gXCJvYmplY3RcIiAmJiBzZWwgIT09IG51bGwgJiYgXCJxdWVyeVwiIGluIHNlbCAmJiB0eXBlb2Ygc2VsLnF1ZXJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIFwicGFyYW1zXCIgaW4gc2VsICYmIHR5cGVvZiBzZWwucGFyYW1zID09PSBcIm9iamVjdFwiICYmIHNlbC5wYXJhbXMgIT09IG51bGwgPyB7XG4gICAgICBxdWVyeTogc2VsLnF1ZXJ5LFxuICAgICAgcGFyYW1zOiBzZWwucGFyYW1zXG4gICAgfSA6IHtcbiAgICAgIHF1ZXJ5OiBzZWwucXVlcnlcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNlbGVjdGlvbk9wdHMgPSBbXCIqIERvY3VtZW50IElEICg8ZG9jSWQ+KVwiLCBcIiogQXJyYXkgb2YgZG9jdW1lbnQgSURzXCIsIFwiKiBPYmplY3QgY29udGFpbmluZyBgcXVlcnlgXCJdLmpvaW4oXCJcXG5cIik7XG4gIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gc2VsZWN0aW9uIC0gbXVzdCBiZSBvbmUgb2Y6XFxuXFxuXCIuY29uY2F0KHNlbGVjdGlvbk9wdHMpKTtcbn1cbmNvbnN0IFZBTElEX0FTU0VUX1RZUEVTID0gW1wiaW1hZ2VcIiwgXCJmaWxlXCJdO1xuY29uc3QgVkFMSURfSU5TRVJUX0xPQ0FUSU9OUyA9IFtcImJlZm9yZVwiLCBcImFmdGVyXCIsIFwicmVwbGFjZVwiXTtcbmNvbnN0IGRhdGFzZXQgPSBuYW1lID0+IHtcbiAgaWYgKCEvXih+W2EtejAtOV17MX1bLVxcd117MCw2M318W2EtejAtOV17MX1bLVxcd117MCw2M30pJC8udGVzdChuYW1lKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFzZXRzIGNhbiBvbmx5IGNvbnRhaW4gbG93ZXJjYXNlIGNoYXJhY3RlcnMsIG51bWJlcnMsIHVuZGVyc2NvcmVzIGFuZCBkYXNoZXMsIGFuZCBzdGFydCB3aXRoIHRpbGRlLCBhbmQgYmUgbWF4aW11bSA2NCBjaGFyYWN0ZXJzXCIpO1xuICB9XG59O1xuY29uc3QgcHJvamVjdElkID0gaWQgPT4ge1xuICBpZiAoIS9eWy1hLXowLTldKyQvaS50ZXN0KGlkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImBwcm9qZWN0SWRgIGNhbiBvbmx5IGNvbnRhaW4gb25seSBhLXosIDAtOSBhbmQgZGFzaGVzXCIpO1xuICB9XG59O1xuY29uc3QgdmFsaWRhdGVBc3NldFR5cGUgPSB0eXBlID0+IHtcbiAgaWYgKFZBTElEX0FTU0VUX1RZUEVTLmluZGV4T2YodHlwZSkgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhc3NldCB0eXBlOiBcIi5jb25jYXQodHlwZSwgXCIuIE11c3QgYmUgb25lIG9mIFwiKS5jb25jYXQoVkFMSURfQVNTRVRfVFlQRVMuam9pbihcIiwgXCIpKSk7XG4gIH1cbn07XG5jb25zdCB2YWxpZGF0ZU9iamVjdCA9IChvcCwgdmFsKSA9PiB7XG4gIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQob3AsIFwiKCkgdGFrZXMgYW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcIikpO1xuICB9XG59O1xuY29uc3QgdmFsaWRhdGVEb2N1bWVudElkID0gKG9wLCBpZCkgPT4ge1xuICBpZiAodHlwZW9mIGlkICE9PSBcInN0cmluZ1wiIHx8ICEvXlthLXowLTlfXVthLXowLTlfLi1dezAsMTI3fSQvaS50ZXN0KGlkKSB8fCBpZC5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KG9wLCAnKCk6IFwiJykuY29uY2F0KGlkLCAnXCIgaXMgbm90IGEgdmFsaWQgZG9jdW1lbnQgSUQnKSk7XG4gIH1cbn07XG5jb25zdCByZXF1aXJlRG9jdW1lbnRJZCA9IChvcCwgZG9jKSA9PiB7XG4gIGlmICghZG9jLl9pZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChvcCwgJygpIHJlcXVpcmVzIHRoYXQgdGhlIGRvY3VtZW50IGNvbnRhaW5zIGFuIElEIChcIl9pZFwiIHByb3BlcnR5KScpKTtcbiAgfVxuICB2YWxpZGF0ZURvY3VtZW50SWQob3AsIGRvYy5faWQpO1xufTtcbmNvbnN0IHZhbGlkYXRlSW5zZXJ0ID0gKGF0LCBzZWxlY3RvciwgaXRlbXMpID0+IHtcbiAgY29uc3Qgc2lnbmF0dXJlID0gXCJpbnNlcnQoYXQsIHNlbGVjdG9yLCBpdGVtcylcIjtcbiAgaWYgKFZBTElEX0lOU0VSVF9MT0NBVElPTlMuaW5kZXhPZihhdCkgPT09IC0xKSB7XG4gICAgY29uc3QgdmFsaWQgPSBWQUxJRF9JTlNFUlRfTE9DQVRJT05TLm1hcChsb2MgPT4gJ1wiJy5jb25jYXQobG9jLCAnXCInKSkuam9pbihcIiwgXCIpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChzaWduYXR1cmUsICcgdGFrZXMgYW4gXCJhdFwiLWFyZ3VtZW50IHdoaWNoIGlzIG9uZSBvZjogJykuY29uY2F0KHZhbGlkKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChzaWduYXR1cmUsICcgdGFrZXMgYSBcInNlbGVjdG9yXCItYXJndW1lbnQgd2hpY2ggbXVzdCBiZSBhIHN0cmluZycpKTtcbiAgfVxuICBpZiAoIUFycmF5LmlzQXJyYXkoaXRlbXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHNpZ25hdHVyZSwgJyB0YWtlcyBhbiBcIml0ZW1zXCItYXJndW1lbnQgd2hpY2ggbXVzdCBiZSBhbiBhcnJheScpKTtcbiAgfVxufTtcbmNvbnN0IGhhc0RhdGFzZXQgPSBjb25maWcgPT4ge1xuICBpZiAoIWNvbmZpZy5kYXRhc2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYGRhdGFzZXRgIG11c3QgYmUgcHJvdmlkZWQgdG8gcGVyZm9ybSBxdWVyaWVzXCIpO1xuICB9XG4gIHJldHVybiBjb25maWcuZGF0YXNldCB8fCBcIlwiO1xufTtcbmNvbnN0IHJlcXVlc3RUYWcgPSB0YWcgPT4ge1xuICBpZiAodHlwZW9mIHRhZyAhPT0gXCJzdHJpbmdcIiB8fCAhL15bYS16MC05Ll8tXXsxLDc1fSQvaS50ZXN0KHRhZykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUYWcgY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycywgdW5kZXJzY29yZXMsIGRhc2hlcyBhbmQgZG90cywgYW5kIGJlIGJldHdlZW4gb25lIGFuZCA3NSBjaGFyYWN0ZXJzIGxvbmcuXCIpO1xuICB9XG4gIHJldHVybiB0YWc7XG59O1xudmFyIF9fYWNjZXNzQ2hlY2skNiA9IChvYmosIG1lbWJlciwgbXNnKSA9PiB7XG4gIGlmICghbWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xufTtcbnZhciBfX3ByaXZhdGVHZXQkNiA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skNihvYmosIG1lbWJlciwgXCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgcmV0dXJuIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaik7XG59O1xudmFyIF9fcHJpdmF0ZUFkZCQ2ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSkgPT4ge1xuICBpZiAobWVtYmVyLmhhcyhvYmopKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIHRoZSBzYW1lIHByaXZhdGUgbWVtYmVyIG1vcmUgdGhhbiBvbmNlXCIpO1xuICBtZW1iZXIgaW5zdGFuY2VvZiBXZWFrU2V0ID8gbWVtYmVyLmFkZChvYmopIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbn07XG52YXIgX19wcml2YXRlU2V0JDYgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQ2KG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIik7XG4gIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBfY2xpZW50JDUsIF9jbGllbnQyJDU7XG5jbGFzcyBCYXNlUGF0Y2gge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rpb24pIHtcbiAgICBsZXQgb3BlcmF0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5zZWxlY3Rpb24gPSBzZWxlY3Rpb247XG4gICAgdGhpcy5vcGVyYXRpb25zID0gb3BlcmF0aW9ucztcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgZ2l2ZW4gYXR0cmlidXRlcyB0byB0aGUgZG9jdW1lbnQuIERvZXMgTk9UIG1lcmdlIG9iamVjdHMuXG4gICAqIFRoZSBvcGVyYXRpb24gaXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgcGF0Y2gsIHJlYWR5IHRvIGJlIGNvbW1pdGVkIGJ5IGBjb21taXQoKWBcbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gQXR0cmlidXRlcyB0byBzZXQuIFRvIHNldCBhIGRlZXAgYXR0cmlidXRlLCB1c2UgSlNPTk1hdGNoLCBlZzogXFx7XCJuZXN0ZWQucHJvcFwiOiBcInZhbHVlXCJcXH1cbiAgICovXG4gIHNldChhdHRycykge1xuICAgIHJldHVybiB0aGlzLl9hc3NpZ24oXCJzZXRcIiwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBnaXZlbiBhdHRyaWJ1dGVzIHRvIHRoZSBkb2N1bWVudCBpZiB0aGV5IGFyZSBub3QgY3VycmVudGx5IHNldC4gRG9lcyBOT1QgbWVyZ2Ugb2JqZWN0cy5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCBwYXRjaCwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBBdHRyaWJ1dGVzIHRvIHNldC4gVG8gc2V0IGEgZGVlcCBhdHRyaWJ1dGUsIHVzZSBKU09OTWF0Y2gsIGVnOiBcXHtcIm5lc3RlZC5wcm9wXCI6IFwidmFsdWVcIlxcfVxuICAgKi9cbiAgc2V0SWZNaXNzaW5nKGF0dHJzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbihcInNldElmTWlzc2luZ1wiLCBhdHRycyk7XG4gIH1cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgXCJkaWZmLW1hdGNoLXBhdGNoXCIgb3BlcmF0aW9uIG9uIHRoZSBzdHJpbmcgYXR0cmlidXRlcyBwcm92aWRlZC5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCBwYXRjaCwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBBdHRyaWJ1dGVzIHRvIHBlcmZvcm0gb3BlcmF0aW9uIG9uLiBUbyBzZXQgYSBkZWVwIGF0dHJpYnV0ZSwgdXNlIEpTT05NYXRjaCwgZWc6IFxce1wibmVzdGVkLnByb3BcIjogXCJkbXBcIlxcfVxuICAgKi9cbiAgZGlmZk1hdGNoUGF0Y2goYXR0cnMpIHtcbiAgICB2YWxpZGF0ZU9iamVjdChcImRpZmZNYXRjaFBhdGNoXCIsIGF0dHJzKTtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwiZGlmZk1hdGNoUGF0Y2hcIiwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBVbnNldHMgdGhlIGF0dHJpYnV0ZSBwYXRocyBwcm92aWRlZC5cbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCBwYXRjaCwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBBdHRyaWJ1dGUgcGF0aHMgdG8gdW5zZXQuXG4gICAqL1xuICB1bnNldChhdHRycykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhdHRycykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc2V0KGF0dHJzKSB0YWtlcyBhbiBhcnJheSBvZiBhdHRyaWJ1dGVzIHRvIHVuc2V0LCBub24tYXJyYXkgZ2l2ZW5cIik7XG4gICAgfVxuICAgIHRoaXMub3BlcmF0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3BlcmF0aW9ucywge1xuICAgICAgdW5zZXQ6IGF0dHJzXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEluY3JlbWVudCBhIG51bWVyaWMgdmFsdWUuIEVhY2ggZW50cnkgaW4gdGhlIGFyZ3VtZW50IGlzIGVpdGhlciBhbiBhdHRyaWJ1dGUgb3IgYSBKU09OIHBhdGguIFRoZSB2YWx1ZSBtYXkgYmUgYSBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBpbnRlZ2VyIG9yIGZsb2F0aW5nLXBvaW50IHZhbHVlLiBUaGUgb3BlcmF0aW9uIHdpbGwgZmFpbCBpZiB0YXJnZXQgdmFsdWUgaXMgbm90IGEgbnVtZXJpYyB2YWx1ZSwgb3IgZG9lc24ndCBleGlzdC5cbiAgICpcbiAgICogQHBhcmFtIGF0dHJzIC0gT2JqZWN0IG9mIGF0dHJpYnV0ZSBwYXRocyB0byBpbmNyZW1lbnQsIHZhbHVlcyByZXByZXNlbnRpbmcgdGhlIG51bWJlciB0byBpbmNyZW1lbnQgYnkuXG4gICAqL1xuICBpbmMoYXR0cnMpIHtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwiaW5jXCIsIGF0dHJzKTtcbiAgfVxuICAvKipcbiAgICogRGVjcmVtZW50IGEgbnVtZXJpYyB2YWx1ZS4gRWFjaCBlbnRyeSBpbiB0aGUgYXJndW1lbnQgaXMgZWl0aGVyIGFuIGF0dHJpYnV0ZSBvciBhIEpTT04gcGF0aC4gVGhlIHZhbHVlIG1heSBiZSBhIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIGludGVnZXIgb3IgZmxvYXRpbmctcG9pbnQgdmFsdWUuIFRoZSBvcGVyYXRpb24gd2lsbCBmYWlsIGlmIHRhcmdldCB2YWx1ZSBpcyBub3QgYSBudW1lcmljIHZhbHVlLCBvciBkb2Vzbid0IGV4aXN0LlxuICAgKlxuICAgKiBAcGFyYW0gYXR0cnMgLSBPYmplY3Qgb2YgYXR0cmlidXRlIHBhdGhzIHRvIGRlY3JlbWVudCwgdmFsdWVzIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIHRvIGRlY3JlbWVudCBieS5cbiAgICovXG4gIGRlYyhhdHRycykge1xuICAgIHJldHVybiB0aGlzLl9hc3NpZ24oXCJkZWNcIiwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBQcm92aWRlcyBtZXRob2RzIGZvciBtb2RpZnlpbmcgYXJyYXlzLCBieSBpbnNlcnRpbmcsIGFwcGVuZGluZyBhbmQgcmVwbGFjaW5nIGVsZW1lbnRzIHZpYSBhIEpTT05QYXRoIGV4cHJlc3Npb24uXG4gICAqXG4gICAqIEBwYXJhbSBhdCAtIExvY2F0aW9uIHRvIGluc2VydCBhdCwgcmVsYXRpdmUgdG8gdGhlIGdpdmVuIHNlbGVjdG9yLCBvciAncmVwbGFjZScgdGhlIG1hdGNoZWQgcGF0aFxuICAgKiBAcGFyYW0gc2VsZWN0b3IgLSBKU09OUGF0aCBleHByZXNzaW9uLCBlZyBgY29tbWVudHNbLTFdYCBvciBgYmxvY2tzW19rZXk9PVwiYWJjMTIzXCJdYFxuICAgKiBAcGFyYW0gaXRlbXMgLSBBcnJheSBvZiBpdGVtcyB0byBpbnNlcnQvcmVwbGFjZVxuICAgKi9cbiAgaW5zZXJ0KGF0LCBzZWxlY3RvciwgaXRlbXMpIHtcbiAgICB2YWxpZGF0ZUluc2VydChhdCwgc2VsZWN0b3IsIGl0ZW1zKTtcbiAgICByZXR1cm4gdGhpcy5fYXNzaWduKFwiaW5zZXJ0XCIsIHtcbiAgICAgIFthdF06IHNlbGVjdG9yLFxuICAgICAgaXRlbXNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQXBwZW5kIHRoZSBnaXZlbiBpdGVtcyB0byB0aGUgYXJyYXkgYXQgdGhlIGdpdmVuIEpTT05QYXRoXG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvciAtIEF0dHJpYnV0ZS9wYXRoIHRvIGFwcGVuZCB0bywgZWcgYGNvbW1lbnRzYCBvciBgcGVyc29uLmhvYmJpZXNgXG4gICAqIEBwYXJhbSBpdGVtcyAtIEFycmF5IG9mIGl0ZW1zIHRvIGFwcGVuZCB0byB0aGUgYXJyYXlcbiAgICovXG4gIGFwcGVuZChzZWxlY3RvciwgaXRlbXMpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnQoXCJhZnRlclwiLCBcIlwiLmNvbmNhdChzZWxlY3RvciwgXCJbLTFdXCIpLCBpdGVtcyk7XG4gIH1cbiAgLyoqXG4gICAqIFByZXBlbmQgdGhlIGdpdmVuIGl0ZW1zIHRvIHRoZSBhcnJheSBhdCB0aGUgZ2l2ZW4gSlNPTlBhdGhcbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdG9yIC0gQXR0cmlidXRlL3BhdGggdG8gcHJlcGVuZCB0bywgZWcgYGNvbW1lbnRzYCBvciBgcGVyc29uLmhvYmJpZXNgXG4gICAqIEBwYXJhbSBpdGVtcyAtIEFycmF5IG9mIGl0ZW1zIHRvIHByZXBlbmQgdG8gdGhlIGFycmF5XG4gICAqL1xuICBwcmVwZW5kKHNlbGVjdG9yLCBpdGVtcykge1xuICAgIHJldHVybiB0aGlzLmluc2VydChcImJlZm9yZVwiLCBcIlwiLmNvbmNhdChzZWxlY3RvciwgXCJbMF1cIiksIGl0ZW1zKTtcbiAgfVxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBjb250ZW50cyBvZiBhbiBhcnJheSBieSByZW1vdmluZyBleGlzdGluZyBlbGVtZW50cyBhbmQvb3IgYWRkaW5nIG5ldyBlbGVtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdG9yIC0gQXR0cmlidXRlIG9yIEpTT05QYXRoIGV4cHJlc3Npb24gZm9yIGFycmF5XG4gICAqIEBwYXJhbSBzdGFydCAtIEluZGV4IGF0IHdoaWNoIHRvIHN0YXJ0IGNoYW5naW5nIHRoZSBhcnJheSAod2l0aCBvcmlnaW4gMCkuIElmIGdyZWF0ZXIgdGhhbiB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheSwgYWN0dWFsIHN0YXJ0aW5nIGluZGV4IHdpbGwgYmUgc2V0IHRvIHRoZSBsZW5ndGggb2YgdGhlIGFycmF5LiBJZiBuZWdhdGl2ZSwgd2lsbCBiZWdpbiB0aGF0IG1hbnkgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBhcnJheSAod2l0aCBvcmlnaW4gLTEpIGFuZCB3aWxsIGJlIHNldCB0byAwIGlmIGFic29sdXRlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheS54XG4gICAqIEBwYXJhbSBkZWxldGVDb3VudCAtIEFuIGludGVnZXIgaW5kaWNhdGluZyB0aGUgbnVtYmVyIG9mIG9sZCBhcnJheSBlbGVtZW50cyB0byByZW1vdmUuXG4gICAqIEBwYXJhbSBpdGVtcyAtIFRoZSBlbGVtZW50cyB0byBhZGQgdG8gdGhlIGFycmF5LCBiZWdpbm5pbmcgYXQgdGhlIHN0YXJ0IGluZGV4LiBJZiB5b3UgZG9uJ3Qgc3BlY2lmeSBhbnkgZWxlbWVudHMsIHNwbGljZSgpIHdpbGwgb25seSByZW1vdmUgZWxlbWVudHMgZnJvbSB0aGUgYXJyYXkuXG4gICAqL1xuICBzcGxpY2Uoc2VsZWN0b3IsIHN0YXJ0LCBkZWxldGVDb3VudCwgaXRlbXMpIHtcbiAgICBjb25zdCBkZWxBbGwgPSB0eXBlb2YgZGVsZXRlQ291bnQgPT09IFwidW5kZWZpbmVkXCIgfHwgZGVsZXRlQ291bnQgPT09IC0xO1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBzdGFydCA8IDAgPyBzdGFydCAtIDEgOiBzdGFydDtcbiAgICBjb25zdCBkZWxDb3VudCA9IGRlbEFsbCA/IC0xIDogTWF0aC5tYXgoMCwgc3RhcnQgKyBkZWxldGVDb3VudCk7XG4gICAgY29uc3QgZGVsUmFuZ2UgPSBzdGFydEluZGV4IDwgMCAmJiBkZWxDb3VudCA+PSAwID8gXCJcIiA6IGRlbENvdW50O1xuICAgIGNvbnN0IHJhbmdlU2VsZWN0b3IgPSBcIlwiLmNvbmNhdChzZWxlY3RvciwgXCJbXCIpLmNvbmNhdChzdGFydEluZGV4LCBcIjpcIikuY29uY2F0KGRlbFJhbmdlLCBcIl1cIik7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0KFwicmVwbGFjZVwiLCByYW5nZVNlbGVjdG9yLCBpdGVtcyB8fCBbXSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSByZXZpc2lvbiBjbGF1c2UsIHByZXZlbnRpbmcgdGhlIGRvY3VtZW50IGZyb20gYmVpbmcgcGF0Y2hlZCBpZiB0aGUgYF9yZXZgIHByb3BlcnR5IGRvZXMgbm90IG1hdGNoIHRoZSBnaXZlbiB2YWx1ZVxuICAgKlxuICAgKiBAcGFyYW0gcmV2IC0gUmV2aXNpb24gdG8gbG9jayB0aGUgcGF0Y2ggdG9cbiAgICovXG4gIGlmUmV2aXNpb25JZChyZXYpIHtcbiAgICB0aGlzLm9wZXJhdGlvbnMuaWZSZXZpc2lvbklEID0gcmV2O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYSBwbGFpbiBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwYXRjaFxuICAgKi9cbiAgc2VyaWFsaXplKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5nZXRTZWxlY3Rpb24odGhpcy5zZWxlY3Rpb24pLFxuICAgICAgLi4udGhpcy5vcGVyYXRpb25zXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGEgcGxhaW4gSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGF0Y2hcbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5zZXJpYWxpemUoKTtcbiAgfVxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBwYXRjaCBvZiBhbGwgb3BlcmF0aW9uc1xuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5vcGVyYXRpb25zID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgX2Fzc2lnbihvcCwgcHJvcHMpIHtcbiAgICBsZXQgbWVyZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHRydWU7XG4gICAgdmFsaWRhdGVPYmplY3Qob3AsIHByb3BzKTtcbiAgICB0aGlzLm9wZXJhdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wZXJhdGlvbnMsIHtcbiAgICAgIFtvcF06IE9iamVjdC5hc3NpZ24oe30sIG1lcmdlICYmIHRoaXMub3BlcmF0aW9uc1tvcF0gfHwge30sIHByb3BzKVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIF9zZXQob3AsIHByb3BzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fzc2lnbihvcCwgcHJvcHMsIGZhbHNlKTtcbiAgfVxufVxuY29uc3QgX09ic2VydmFibGVQYXRjaCA9IGNsYXNzIF9PYnNlcnZhYmxlUGF0Y2ggZXh0ZW5kcyBCYXNlUGF0Y2gge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rpb24sIG9wZXJhdGlvbnMsIGNsaWVudCkge1xuICAgIHN1cGVyKHNlbGVjdGlvbiwgb3BlcmF0aW9ucyk7XG4gICAgX19wcml2YXRlQWRkJDYodGhpcywgX2NsaWVudCQ1LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ2KHRoaXMsIF9jbGllbnQkNSwgY2xpZW50KTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoZSBwYXRjaFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZVBhdGNoKHRoaXMuc2VsZWN0aW9uLCB7XG4gICAgICAuLi50aGlzLm9wZXJhdGlvbnNcbiAgICB9LCBfX3ByaXZhdGVHZXQkNih0aGlzLCBfY2xpZW50JDUpKTtcbiAgfVxuICBjb21taXQob3B0aW9ucykge1xuICAgIGlmICghX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudCQ1KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYGNsaWVudGAgcGFzc2VkIHRvIHBhdGNoLCBlaXRoZXIgcHJvdmlkZSBvbmUgb3IgcGFzcyB0aGUgcGF0Y2ggdG8gYSBjbGllbnRzIGBtdXRhdGUoKWAgbWV0aG9kXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXR1cm5GaXJzdCA9IHR5cGVvZiB0aGlzLnNlbGVjdGlvbiA9PT0gXCJzdHJpbmdcIjtcbiAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICByZXR1cm5GaXJzdCxcbiAgICAgIHJldHVybkRvY3VtZW50czogdHJ1ZVxuICAgIH0sIG9wdGlvbnMpO1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQkNih0aGlzLCBfY2xpZW50JDUpLm11dGF0ZSh7XG4gICAgICBwYXRjaDogdGhpcy5zZXJpYWxpemUoKVxuICAgIH0sIG9wdHMpO1xuICB9XG59O1xuX2NsaWVudCQ1ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBPYnNlcnZhYmxlUGF0Y2ggPSBfT2JzZXJ2YWJsZVBhdGNoO1xuY29uc3QgX1BhdGNoID0gY2xhc3MgX1BhdGNoIGV4dGVuZHMgQmFzZVBhdGNoIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0aW9uLCBvcGVyYXRpb25zLCBjbGllbnQpIHtcbiAgICBzdXBlcihzZWxlY3Rpb24sIG9wZXJhdGlvbnMpO1xuICAgIF9fcHJpdmF0ZUFkZCQ2KHRoaXMsIF9jbGllbnQyJDUsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDYodGhpcywgX2NsaWVudDIkNSwgY2xpZW50KTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoZSBwYXRjaFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfUGF0Y2godGhpcy5zZWxlY3Rpb24sIHtcbiAgICAgIC4uLnRoaXMub3BlcmF0aW9uc1xuICAgIH0sIF9fcHJpdmF0ZUdldCQ2KHRoaXMsIF9jbGllbnQyJDUpKTtcbiAgfVxuICBjb21taXQob3B0aW9ucykge1xuICAgIGlmICghX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudDIkNSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGBjbGllbnRgIHBhc3NlZCB0byBwYXRjaCwgZWl0aGVyIHByb3ZpZGUgb25lIG9yIHBhc3MgdGhlIHBhdGNoIHRvIGEgY2xpZW50cyBgbXV0YXRlKClgIG1ldGhvZFwiKTtcbiAgICB9XG4gICAgY29uc3QgcmV0dXJuRmlyc3QgPSB0eXBlb2YgdGhpcy5zZWxlY3Rpb24gPT09IFwic3RyaW5nXCI7XG4gICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgcmV0dXJuRmlyc3QsXG4gICAgICByZXR1cm5Eb2N1bWVudHM6IHRydWVcbiAgICB9LCBvcHRpb25zKTtcbiAgICByZXR1cm4gX19wcml2YXRlR2V0JDYodGhpcywgX2NsaWVudDIkNSkubXV0YXRlKHtcbiAgICAgIHBhdGNoOiB0aGlzLnNlcmlhbGl6ZSgpXG4gICAgfSwgb3B0cyk7XG4gIH1cbn07XG5fY2xpZW50MiQ1ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBQYXRjaCA9IF9QYXRjaDtcbnZhciBfX2FjY2Vzc0NoZWNrJDUgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDUgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDUob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkNSA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQ1ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skNShvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCQ0LCBfY2xpZW50MiQ0O1xuY29uc3QgZGVmYXVsdE11dGF0ZU9wdGlvbnMgPSB7XG4gIHJldHVybkRvY3VtZW50czogZmFsc2Vcbn07XG5jbGFzcyBCYXNlVHJhbnNhY3Rpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3BlcmF0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgbGV0IHRyYW5zYWN0aW9uSWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9wZXJhdGlvbnMgPSBvcGVyYXRpb25zO1xuICAgIHRoaXMudHJ4SWQgPSB0cmFuc2FjdGlvbklkO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFNhbml0eSBkb2N1bWVudC4gSWYgYF9pZGAgaXMgcHJvdmlkZWQgYW5kIGFscmVhZHkgZXhpc3RzLCB0aGUgbXV0YXRpb24gd2lsbCBmYWlsLiBJZiBubyBgX2lkYCBpcyBnaXZlbiwgb25lIHdpbGwgYXV0b21hdGljYWxseSBiZSBnZW5lcmF0ZWQgYnkgdGhlIGRhdGFiYXNlLlxuICAgKiBUaGUgb3BlcmF0aW9uIGlzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLCByZWFkeSB0byBiZSBjb21taXRlZCBieSBgY29tbWl0KClgXG4gICAqXG4gICAqIEBwYXJhbSBkb2MgLSBEb2N1bWVudCB0byBjcmVhdGUuIFJlcXVpcmVzIGEgYF90eXBlYCBwcm9wZXJ0eS5cbiAgICovXG4gIGNyZWF0ZShkb2MpIHtcbiAgICB2YWxpZGF0ZU9iamVjdChcImNyZWF0ZVwiLCBkb2MpO1xuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgY3JlYXRlOiBkb2NcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBTYW5pdHkgZG9jdW1lbnQuIElmIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBgX2lkYCBhbHJlYWR5IGV4aXN0cywgdGhlIGNyZWF0ZSBvcGVyYXRpb24gd2lsbCBiZSBpZ25vcmVkLlxuICAgKiBUaGUgb3BlcmF0aW9uIGlzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLCByZWFkeSB0byBiZSBjb21taXRlZCBieSBgY29tbWl0KClgXG4gICAqXG4gICAqIEBwYXJhbSBkb2MgLSBEb2N1bWVudCB0byBjcmVhdGUgaWYgaXQgZG9lcyBub3QgYWxyZWFkeSBleGlzdC4gUmVxdWlyZXMgYF9pZGAgYW5kIGBfdHlwZWAgcHJvcGVydGllcy5cbiAgICovXG4gIGNyZWF0ZUlmTm90RXhpc3RzKGRvYykge1xuICAgIGNvbnN0IG9wID0gXCJjcmVhdGVJZk5vdEV4aXN0c1wiO1xuICAgIHZhbGlkYXRlT2JqZWN0KG9wLCBkb2MpO1xuICAgIHJlcXVpcmVEb2N1bWVudElkKG9wLCBkb2MpO1xuICAgIHJldHVybiB0aGlzLl9hZGQoe1xuICAgICAgW29wXTogZG9jXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgU2FuaXR5IGRvY3VtZW50LCBvciByZXBsYWNlcyBhbiBleGlzdGluZyBvbmUgaWYgdGhlIHNhbWUgYF9pZGAgaXMgYWxyZWFkeSB1c2VkLlxuICAgKiBUaGUgb3BlcmF0aW9uIGlzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLCByZWFkeSB0byBiZSBjb21taXRlZCBieSBgY29tbWl0KClgXG4gICAqXG4gICAqIEBwYXJhbSBkb2MgLSBEb2N1bWVudCB0byBjcmVhdGUgb3IgcmVwbGFjZS4gUmVxdWlyZXMgYF9pZGAgYW5kIGBfdHlwZWAgcHJvcGVydGllcy5cbiAgICovXG4gIGNyZWF0ZU9yUmVwbGFjZShkb2MpIHtcbiAgICBjb25zdCBvcCA9IFwiY3JlYXRlT3JSZXBsYWNlXCI7XG4gICAgdmFsaWRhdGVPYmplY3Qob3AsIGRvYyk7XG4gICAgcmVxdWlyZURvY3VtZW50SWQob3AsIGRvYyk7XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBbb3BdOiBkb2NcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgd2l0aCB0aGUgZ2l2ZW4gZG9jdW1lbnQgSURcbiAgICogVGhlIG9wZXJhdGlvbiBpcyBhZGRlZCB0byB0aGUgY3VycmVudCB0cmFuc2FjdGlvbiwgcmVhZHkgdG8gYmUgY29tbWl0ZWQgYnkgYGNvbW1pdCgpYFxuICAgKlxuICAgKiBAcGFyYW0gZG9jdW1lbnRJZCAtIERvY3VtZW50IElEIHRvIGRlbGV0ZVxuICAgKi9cbiAgZGVsZXRlKGRvY3VtZW50SWQpIHtcbiAgICB2YWxpZGF0ZURvY3VtZW50SWQoXCJkZWxldGVcIiwgZG9jdW1lbnRJZCk7XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBkZWxldGU6IHtcbiAgICAgICAgaWQ6IGRvY3VtZW50SWRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICB0cmFuc2FjdGlvbklkKGlkKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIHRoaXMudHJ4SWQ7XG4gICAgfVxuICAgIHRoaXMudHJ4SWQgPSBpZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGEgcGxhaW4gSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgdHJhbnNhY3Rpb25cbiAgICovXG4gIHNlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4gWy4uLnRoaXMub3BlcmF0aW9uc107XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBhIHBsYWluIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHRyYW5zYWN0aW9uXG4gICAqL1xuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgdHJhbnNhY3Rpb24gb2YgYWxsIG9wZXJhdGlvbnNcbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMub3BlcmF0aW9ucyA9IFtdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIF9hZGQobXV0KSB7XG4gICAgdGhpcy5vcGVyYXRpb25zLnB1c2gobXV0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuY29uc3QgX1RyYW5zYWN0aW9uID0gY2xhc3MgX1RyYW5zYWN0aW9uIGV4dGVuZHMgQmFzZVRyYW5zYWN0aW9uIHtcbiAgY29uc3RydWN0b3Iob3BlcmF0aW9ucywgY2xpZW50LCB0cmFuc2FjdGlvbklkKSB7XG4gICAgc3VwZXIob3BlcmF0aW9ucywgdHJhbnNhY3Rpb25JZCk7XG4gICAgX19wcml2YXRlQWRkJDUodGhpcywgX2NsaWVudCQ0LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ1KHRoaXMsIF9jbGllbnQkNCwgY2xpZW50KTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoZSB0cmFuc2FjdGlvblxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfVHJhbnNhY3Rpb24oWy4uLnRoaXMub3BlcmF0aW9uc10sIF9fcHJpdmF0ZUdldCQ1KHRoaXMsIF9jbGllbnQkNCksIHRoaXMudHJ4SWQpO1xuICB9XG4gIGNvbW1pdChvcHRpb25zKSB7XG4gICAgaWYgKCFfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50JDQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBgY2xpZW50YCBwYXNzZWQgdG8gdHJhbnNhY3Rpb24sIGVpdGhlciBwcm92aWRlIG9uZSBvciBwYXNzIHRoZSB0cmFuc2FjdGlvbiB0byBhIGNsaWVudHMgYG11dGF0ZSgpYCBtZXRob2RcIik7XG4gICAgfVxuICAgIHJldHVybiBfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50JDQpLm11dGF0ZSh0aGlzLnNlcmlhbGl6ZSgpLCBPYmplY3QuYXNzaWduKHtcbiAgICAgIHRyYW5zYWN0aW9uSWQ6IHRoaXMudHJ4SWRcbiAgICB9LCBkZWZhdWx0TXV0YXRlT3B0aW9ucywgb3B0aW9ucyB8fCB7fSkpO1xuICB9XG4gIHBhdGNoKHBhdGNoT3JEb2N1bWVudElkLCBwYXRjaE9wcykge1xuICAgIGNvbnN0IGlzQnVpbGRlciA9IHR5cGVvZiBwYXRjaE9wcyA9PT0gXCJmdW5jdGlvblwiO1xuICAgIGNvbnN0IGlzUGF0Y2ggPSB0eXBlb2YgcGF0Y2hPckRvY3VtZW50SWQgIT09IFwic3RyaW5nXCIgJiYgcGF0Y2hPckRvY3VtZW50SWQgaW5zdGFuY2VvZiBQYXRjaDtcbiAgICBpZiAoaXNQYXRjaCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICAgIHBhdGNoOiBwYXRjaE9yRG9jdW1lbnRJZC5zZXJpYWxpemUoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc0J1aWxkZXIpIHtcbiAgICAgIGNvbnN0IHBhdGNoID0gcGF0Y2hPcHMobmV3IFBhdGNoKHBhdGNoT3JEb2N1bWVudElkLCB7fSwgX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudCQ0KSkpO1xuICAgICAgaWYgKCEocGF0Y2ggaW5zdGFuY2VvZiBQYXRjaCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZnVuY3Rpb24gcGFzc2VkIHRvIGBwYXRjaCgpYCBtdXN0IHJldHVybiB0aGUgcGF0Y2hcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fYWRkKHtcbiAgICAgICAgcGF0Y2g6IHBhdGNoLnNlcmlhbGl6ZSgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBwYXRjaDoge1xuICAgICAgICBpZDogcGF0Y2hPckRvY3VtZW50SWQsXG4gICAgICAgIC4uLnBhdGNoT3BzXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5fY2xpZW50JDQgPSBuZXcgV2Vha01hcCgpO1xubGV0IFRyYW5zYWN0aW9uID0gX1RyYW5zYWN0aW9uO1xuY29uc3QgX09ic2VydmFibGVUcmFuc2FjdGlvbiA9IGNsYXNzIF9PYnNlcnZhYmxlVHJhbnNhY3Rpb24gZXh0ZW5kcyBCYXNlVHJhbnNhY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihvcGVyYXRpb25zLCBjbGllbnQsIHRyYW5zYWN0aW9uSWQpIHtcbiAgICBzdXBlcihvcGVyYXRpb25zLCB0cmFuc2FjdGlvbklkKTtcbiAgICBfX3ByaXZhdGVBZGQkNSh0aGlzLCBfY2xpZW50MiQ0LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ1KHRoaXMsIF9jbGllbnQyJDQsIGNsaWVudCk7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lcyB0aGUgdHJhbnNhY3Rpb25cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX09ic2VydmFibGVUcmFuc2FjdGlvbihbLi4udGhpcy5vcGVyYXRpb25zXSwgX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudDIkNCksIHRoaXMudHJ4SWQpO1xuICB9XG4gIGNvbW1pdChvcHRpb25zKSB7XG4gICAgaWYgKCFfX3ByaXZhdGVHZXQkNSh0aGlzLCBfY2xpZW50MiQ0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYGNsaWVudGAgcGFzc2VkIHRvIHRyYW5zYWN0aW9uLCBlaXRoZXIgcHJvdmlkZSBvbmUgb3IgcGFzcyB0aGUgdHJhbnNhY3Rpb24gdG8gYSBjbGllbnRzIGBtdXRhdGUoKWAgbWV0aG9kXCIpO1xuICAgIH1cbiAgICByZXR1cm4gX19wcml2YXRlR2V0JDUodGhpcywgX2NsaWVudDIkNCkubXV0YXRlKHRoaXMuc2VyaWFsaXplKCksIE9iamVjdC5hc3NpZ24oe1xuICAgICAgdHJhbnNhY3Rpb25JZDogdGhpcy50cnhJZFxuICAgIH0sIGRlZmF1bHRNdXRhdGVPcHRpb25zLCBvcHRpb25zIHx8IHt9KSk7XG4gIH1cbiAgcGF0Y2gocGF0Y2hPckRvY3VtZW50SWQsIHBhdGNoT3BzKSB7XG4gICAgY29uc3QgaXNCdWlsZGVyID0gdHlwZW9mIHBhdGNoT3BzID09PSBcImZ1bmN0aW9uXCI7XG4gICAgY29uc3QgaXNQYXRjaCA9IHR5cGVvZiBwYXRjaE9yRG9jdW1lbnRJZCAhPT0gXCJzdHJpbmdcIiAmJiBwYXRjaE9yRG9jdW1lbnRJZCBpbnN0YW5jZW9mIE9ic2VydmFibGVQYXRjaDtcbiAgICBpZiAoaXNQYXRjaCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICAgIHBhdGNoOiBwYXRjaE9yRG9jdW1lbnRJZC5zZXJpYWxpemUoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc0J1aWxkZXIpIHtcbiAgICAgIGNvbnN0IHBhdGNoID0gcGF0Y2hPcHMobmV3IE9ic2VydmFibGVQYXRjaChwYXRjaE9yRG9jdW1lbnRJZCwge30sIF9fcHJpdmF0ZUdldCQ1KHRoaXMsIF9jbGllbnQyJDQpKSk7XG4gICAgICBpZiAoIShwYXRjaCBpbnN0YW5jZW9mIE9ic2VydmFibGVQYXRjaCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZnVuY3Rpb24gcGFzc2VkIHRvIGBwYXRjaCgpYCBtdXN0IHJldHVybiB0aGUgcGF0Y2hcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fYWRkKHtcbiAgICAgICAgcGF0Y2g6IHBhdGNoLnNlcmlhbGl6ZSgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FkZCh7XG4gICAgICBwYXRjaDoge1xuICAgICAgICBpZDogcGF0Y2hPckRvY3VtZW50SWQsXG4gICAgICAgIC4uLnBhdGNoT3BzXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5fY2xpZW50MiQ0ID0gbmV3IFdlYWtNYXAoKTtcbmxldCBPYnNlcnZhYmxlVHJhbnNhY3Rpb24gPSBfT2JzZXJ2YWJsZVRyYW5zYWN0aW9uO1xuY29uc3QgQkFTRV9VUkwgPSBcImh0dHBzOi8vd3d3LnNhbml0eS5pby9oZWxwL1wiO1xuZnVuY3Rpb24gZ2VuZXJhdGVIZWxwVXJsKHNsdWcpIHtcbiAgcmV0dXJuIEJBU0VfVVJMICsgc2x1Zztcbn1cbmZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgbGV0IGRpZENhbGwgPSBmYWxzZTtcbiAgbGV0IHJldHVyblZhbHVlO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChkaWRDYWxsKSB7XG4gICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgfVxuICAgIHJldHVyblZhbHVlID0gZm4oLi4uYXJndW1lbnRzKTtcbiAgICBkaWRDYWxsID0gdHJ1ZTtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gIH07XG59XG5jb25zdCBjcmVhdGVXYXJuaW5nUHJpbnRlciA9IG1lc3NhZ2UgPT5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5vbmNlKGZ1bmN0aW9uICgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuICByZXR1cm4gY29uc29sZS53YXJuKG1lc3NhZ2Uuam9pbihcIiBcIiksIC4uLmFyZ3MpO1xufSk7XG5jb25zdCBwcmludENkbldhcm5pbmcgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJTaW5jZSB5b3UgaGF2ZW4ndCBzZXQgYSB2YWx1ZSBmb3IgYHVzZUNkbmAsIHdlIHdpbGwgZGVsaXZlciBjb250ZW50IHVzaW5nIG91clwiLCBcImdsb2JhbCwgZWRnZS1jYWNoZWQgQVBJLUNETi4gSWYgeW91IHdpc2ggdG8gaGF2ZSBjb250ZW50IGRlbGl2ZXJlZCBmYXN0ZXIsIHNldFwiLCBcImB1c2VDZG46IGZhbHNlYCB0byB1c2UgdGhlIExpdmUgQVBJLiBOb3RlOiBZb3UgbWF5IGluY3VyIGhpZ2hlciBjb3N0cyB1c2luZyB0aGUgbGl2ZSBBUEkuXCJdKTtcbmNvbnN0IHByaW50Q2RuUHJldmlld0RyYWZ0c1dhcm5pbmcgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJUaGUgU2FuaXR5IGNsaWVudCBpcyBjb25maWd1cmVkIHdpdGggdGhlIGBwZXJzcGVjdGl2ZWAgc2V0IHRvIGBwcmV2aWV3RHJhZnRzYCwgd2hpY2ggZG9lc24ndCBzdXBwb3J0IHRoZSBBUEktQ0ROLlwiLCBcIlRoZSBMaXZlIEFQSSB3aWxsIGJlIHVzZWQgaW5zdGVhZC4gU2V0IGB1c2VDZG46IGZhbHNlYCBpbiB5b3VyIGNvbmZpZ3VyYXRpb24gdG8gaGlkZSB0aGlzIHdhcm5pbmcuXCJdKTtcbmNvbnN0IHByaW50QnJvd3NlclRva2VuV2FybmluZyA9IGNyZWF0ZVdhcm5pbmdQcmludGVyKFtcIllvdSBoYXZlIGNvbmZpZ3VyZWQgU2FuaXR5IGNsaWVudCB0byB1c2UgYSB0b2tlbiBpbiB0aGUgYnJvd3Nlci4gVGhpcyBtYXkgY2F1c2UgdW5pbnRlbnRpb25hbCBzZWN1cml0eSBpc3N1ZXMuXCIsIFwiU2VlIFwiLmNvbmNhdChnZW5lcmF0ZUhlbHBVcmwoXCJqcy1jbGllbnQtYnJvd3Nlci10b2tlblwiKSwgXCIgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5kIGhvdyB0byBoaWRlIHRoaXMgd2FybmluZy5cIildKTtcbmNvbnN0IHByaW50Tm9BcGlWZXJzaW9uU3BlY2lmaWVkV2FybmluZyA9IGNyZWF0ZVdhcm5pbmdQcmludGVyKFtcIlVzaW5nIHRoZSBTYW5pdHkgY2xpZW50IHdpdGhvdXQgc3BlY2lmeWluZyBhbiBBUEkgdmVyc2lvbiBpcyBkZXByZWNhdGVkLlwiLCBcIlNlZSBcIi5jb25jYXQoZ2VuZXJhdGVIZWxwVXJsKFwianMtY2xpZW50LWFwaS12ZXJzaW9uXCIpKV0pO1xuY29uc3QgcHJpbnROb0RlZmF1bHRFeHBvcnQgPSBjcmVhdGVXYXJuaW5nUHJpbnRlcihbXCJUaGUgZGVmYXVsdCBleHBvcnQgb2YgQHNhbml0eS9jbGllbnQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIHRoZSBuYW1lZCBleHBvcnQgYGNyZWF0ZUNsaWVudGAgaW5zdGVhZC5cIl0pO1xuY29uc3QgZGVmYXVsdENkbkhvc3QgPSBcImFwaWNkbi5zYW5pdHkuaW9cIjtcbmNvbnN0IGRlZmF1bHRDb25maWcgPSB7XG4gIGFwaUhvc3Q6IFwiaHR0cHM6Ly9hcGkuc2FuaXR5LmlvXCIsXG4gIGFwaVZlcnNpb246IFwiMVwiLFxuICB1c2VQcm9qZWN0SG9zdG5hbWU6IHRydWVcbn07XG5jb25zdCBMT0NBTEhPU1RTID0gW1wibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCIsIFwiMC4wLjAuMFwiXTtcbmNvbnN0IGlzTG9jYWwgPSBob3N0ID0+IExPQ0FMSE9TVFMuaW5kZXhPZihob3N0KSAhPT0gLTE7XG5jb25zdCB2YWxpZGF0ZUFwaVZlcnNpb24gPSBmdW5jdGlvbiB2YWxpZGF0ZUFwaVZlcnNpb24yKGFwaVZlcnNpb24pIHtcbiAgaWYgKGFwaVZlcnNpb24gPT09IFwiMVwiIHx8IGFwaVZlcnNpb24gPT09IFwiWFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGFwaURhdGUgPSBuZXcgRGF0ZShhcGlWZXJzaW9uKTtcbiAgY29uc3QgYXBpVmVyc2lvblZhbGlkID0gL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvLnRlc3QoYXBpVmVyc2lvbikgJiYgYXBpRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgYXBpRGF0ZS5nZXRUaW1lKCkgPiAwO1xuICBpZiAoIWFwaVZlcnNpb25WYWxpZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQVBJIHZlcnNpb24gc3RyaW5nLCBleHBlY3RlZCBgMWAgb3IgZGF0ZSBpbiBmb3JtYXQgYFlZWVktTU0tRERgXCIpO1xuICB9XG59O1xuY29uc3QgdmFsaWRhdGVBcGlQZXJzcGVjdGl2ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlQXBpUGVyc3BlY3RpdmUyKHBlcnNwZWN0aXZlKSB7XG4gIHN3aXRjaCAocGVyc3BlY3RpdmUpIHtcbiAgICBjYXNlIFwicHJldmlld0RyYWZ0c1wiOlxuICAgIGNhc2UgXCJwdWJsaXNoZWRcIjpcbiAgICBjYXNlIFwicmF3XCI6XG4gICAgICByZXR1cm47XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIEFQSSBwZXJzcGVjdGl2ZSBzdHJpbmcsIGV4cGVjdGVkIGBwdWJsaXNoZWRgLCBgcHJldmlld0RyYWZ0c2Agb3IgYHJhd2BcIik7XG4gIH1cbn07XG5jb25zdCBpbml0Q29uZmlnID0gKGNvbmZpZywgcHJldkNvbmZpZykgPT4ge1xuICBjb25zdCBzcGVjaWZpZWRDb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBwcmV2Q29uZmlnLCBjb25maWcpO1xuICBpZiAoIXNwZWNpZmllZENvbmZpZy5hcGlWZXJzaW9uKSB7XG4gICAgcHJpbnROb0FwaVZlcnNpb25TcGVjaWZpZWRXYXJuaW5nKCk7XG4gIH1cbiAgY29uc3QgbmV3Q29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdENvbmZpZywgc3BlY2lmaWVkQ29uZmlnKTtcbiAgY29uc3QgcHJvamVjdEJhc2VkID0gbmV3Q29uZmlnLnVzZVByb2plY3RIb3N0bmFtZTtcbiAgaWYgKHR5cGVvZiBQcm9taXNlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY29uc3QgaGVscFVybCA9IGdlbmVyYXRlSGVscFVybChcImpzLWNsaWVudC1wcm9taXNlLXBvbHlmaWxsXCIpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIG5hdGl2ZSBQcm9taXNlLWltcGxlbWVudGF0aW9uIGZvdW5kLCBwb2x5ZmlsbCBuZWVkZWQgLSBzZWUgXCIuY29uY2F0KGhlbHBVcmwpKTtcbiAgfVxuICBpZiAocHJvamVjdEJhc2VkICYmICFuZXdDb25maWcucHJvamVjdElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBtdXN0IGNvbnRhaW4gYHByb2plY3RJZGBcIik7XG4gIH1cbiAgaWYgKHR5cGVvZiBuZXdDb25maWcucGVyc3BlY3RpdmUgPT09IFwic3RyaW5nXCIpIHtcbiAgICB2YWxpZGF0ZUFwaVBlcnNwZWN0aXZlKG5ld0NvbmZpZy5wZXJzcGVjdGl2ZSk7XG4gIH1cbiAgaWYgKFwiZW5jb2RlU291cmNlTWFwQXRQYXRoXCIgaW4gbmV3Q29uZmlnIHx8IFwiZW5jb2RlU291cmNlTWFwXCIgaW4gbmV3Q29uZmlnIHx8IFwic3R1ZGlvVXJsXCIgaW4gbmV3Q29uZmlnIHx8IFwibG9nZ2VyXCIgaW4gbmV3Q29uZmlnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSXQgbG9va3MgbGlrZSB5b3UncmUgdXNpbmcgb3B0aW9ucyBtZWFudCBmb3IgJ0BzYW5pdHkvcHJldmlldy1raXQvY2xpZW50Jywgc3VjaCBhcyAnZW5jb2RlU291cmNlTWFwQXRQYXRoJywgJ2VuY29kZVNvdXJjZU1hcCcsICdzdHVkaW9VcmwnIGFuZCAnbG9nZ2VyJy4gTWFrZSBzdXJlIHlvdSdyZSB1c2luZyB0aGUgcmlnaHQgaW1wb3J0LlwiKTtcbiAgfVxuICBjb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG4gIGNvbnN0IGlzTG9jYWxob3N0ID0gaXNCcm93c2VyICYmIGlzTG9jYWwod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKTtcbiAgaWYgKGlzQnJvd3NlciAmJiBpc0xvY2FsaG9zdCAmJiBuZXdDb25maWcudG9rZW4gJiYgbmV3Q29uZmlnLmlnbm9yZUJyb3dzZXJUb2tlbldhcm5pbmcgIT09IHRydWUpIHtcbiAgICBwcmludEJyb3dzZXJUb2tlbldhcm5pbmcoKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbmV3Q29uZmlnLnVzZUNkbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHByaW50Q2RuV2FybmluZygpO1xuICB9XG4gIGlmIChwcm9qZWN0QmFzZWQpIHtcbiAgICBwcm9qZWN0SWQobmV3Q29uZmlnLnByb2plY3RJZCk7XG4gIH1cbiAgaWYgKG5ld0NvbmZpZy5kYXRhc2V0KSB7XG4gICAgZGF0YXNldChuZXdDb25maWcuZGF0YXNldCk7XG4gIH1cbiAgaWYgKFwicmVxdWVzdFRhZ1ByZWZpeFwiIGluIG5ld0NvbmZpZykge1xuICAgIG5ld0NvbmZpZy5yZXF1ZXN0VGFnUHJlZml4ID0gbmV3Q29uZmlnLnJlcXVlc3RUYWdQcmVmaXggPyByZXF1ZXN0VGFnKG5ld0NvbmZpZy5yZXF1ZXN0VGFnUHJlZml4KS5yZXBsYWNlKC9cXC4rJC8sIFwiXCIpIDogdm9pZCAwO1xuICB9XG4gIG5ld0NvbmZpZy5hcGlWZXJzaW9uID0gXCJcIi5jb25jYXQobmV3Q29uZmlnLmFwaVZlcnNpb24pLnJlcGxhY2UoL152LywgXCJcIik7XG4gIG5ld0NvbmZpZy5pc0RlZmF1bHRBcGkgPSBuZXdDb25maWcuYXBpSG9zdCA9PT0gZGVmYXVsdENvbmZpZy5hcGlIb3N0O1xuICBuZXdDb25maWcudXNlQ2RuID0gbmV3Q29uZmlnLnVzZUNkbiAhPT0gZmFsc2UgJiYgIW5ld0NvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gIHZhbGlkYXRlQXBpVmVyc2lvbihuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gIGNvbnN0IGhvc3RQYXJ0cyA9IG5ld0NvbmZpZy5hcGlIb3N0LnNwbGl0KFwiOi8vXCIsIDIpO1xuICBjb25zdCBwcm90b2NvbCA9IGhvc3RQYXJ0c1swXTtcbiAgY29uc3QgaG9zdCA9IGhvc3RQYXJ0c1sxXTtcbiAgY29uc3QgY2RuSG9zdCA9IG5ld0NvbmZpZy5pc0RlZmF1bHRBcGkgPyBkZWZhdWx0Q2RuSG9zdCA6IGhvc3Q7XG4gIGlmIChuZXdDb25maWcudXNlUHJvamVjdEhvc3RuYW1lKSB7XG4gICAgbmV3Q29uZmlnLnVybCA9IFwiXCIuY29uY2F0KHByb3RvY29sLCBcIjovL1wiKS5jb25jYXQobmV3Q29uZmlnLnByb2plY3RJZCwgXCIuXCIpLmNvbmNhdChob3N0LCBcIi92XCIpLmNvbmNhdChuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gICAgbmV3Q29uZmlnLmNkblVybCA9IFwiXCIuY29uY2F0KHByb3RvY29sLCBcIjovL1wiKS5jb25jYXQobmV3Q29uZmlnLnByb2plY3RJZCwgXCIuXCIpLmNvbmNhdChjZG5Ib3N0LCBcIi92XCIpLmNvbmNhdChuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gIH0gZWxzZSB7XG4gICAgbmV3Q29uZmlnLnVybCA9IFwiXCIuY29uY2F0KG5ld0NvbmZpZy5hcGlIb3N0LCBcIi92XCIpLmNvbmNhdChuZXdDb25maWcuYXBpVmVyc2lvbik7XG4gICAgbmV3Q29uZmlnLmNkblVybCA9IG5ld0NvbmZpZy51cmw7XG4gIH1cbiAgcmV0dXJuIG5ld0NvbmZpZztcbn07XG5jb25zdCBwcm9qZWN0SGVhZGVyID0gXCJYLVNhbml0eS1Qcm9qZWN0LUlEXCI7XG5mdW5jdGlvbiByZXF1ZXN0T3B0aW9ucyhjb25maWcpIHtcbiAgbGV0IG92ZXJyaWRlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgY29uc3QgdG9rZW4gPSBvdmVycmlkZXMudG9rZW4gfHwgY29uZmlnLnRva2VuO1xuICBpZiAodG9rZW4pIHtcbiAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBcIkJlYXJlciBcIi5jb25jYXQodG9rZW4pO1xuICB9XG4gIGlmICghb3ZlcnJpZGVzLnVzZUdsb2JhbEFwaSAmJiAhY29uZmlnLnVzZVByb2plY3RIb3N0bmFtZSAmJiBjb25maWcucHJvamVjdElkKSB7XG4gICAgaGVhZGVyc1twcm9qZWN0SGVhZGVyXSA9IGNvbmZpZy5wcm9qZWN0SWQ7XG4gIH1cbiAgY29uc3Qgd2l0aENyZWRlbnRpYWxzID0gQm9vbGVhbih0eXBlb2Ygb3ZlcnJpZGVzLndpdGhDcmVkZW50aWFscyA9PT0gXCJ1bmRlZmluZWRcIiA/IGNvbmZpZy50b2tlbiB8fCBjb25maWcud2l0aENyZWRlbnRpYWxzIDogb3ZlcnJpZGVzLndpdGhDcmVkZW50aWFscyk7XG4gIGNvbnN0IHRpbWVvdXQgPSB0eXBlb2Ygb3ZlcnJpZGVzLnRpbWVvdXQgPT09IFwidW5kZWZpbmVkXCIgPyBjb25maWcudGltZW91dCA6IG92ZXJyaWRlcy50aW1lb3V0O1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgb3ZlcnJpZGVzLCB7XG4gICAgaGVhZGVyczogT2JqZWN0LmFzc2lnbih7fSwgaGVhZGVycywgb3ZlcnJpZGVzLmhlYWRlcnMgfHwge30pLFxuICAgIHRpbWVvdXQ6IHR5cGVvZiB0aW1lb3V0ID09PSBcInVuZGVmaW5lZFwiID8gNSAqIDYwICogMWUzIDogdGltZW91dCxcbiAgICBwcm94eTogb3ZlcnJpZGVzLnByb3h5IHx8IGNvbmZpZy5wcm94eSxcbiAgICBqc29uOiB0cnVlLFxuICAgIHdpdGhDcmVkZW50aWFscyxcbiAgICBmZXRjaDogdHlwZW9mIG92ZXJyaWRlcy5mZXRjaCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgY29uZmlnLmZldGNoID09PSBcIm9iamVjdFwiID8ge1xuICAgICAgLi4uY29uZmlnLmZldGNoLFxuICAgICAgLi4ub3ZlcnJpZGVzLmZldGNoXG4gICAgfSA6IG92ZXJyaWRlcy5mZXRjaCB8fCBjb25maWcuZmV0Y2hcbiAgfSk7XG59XG5jb25zdCBlbmNvZGVRdWVyeVN0cmluZyA9IF9yZWYyID0+IHtcbiAgbGV0IHtcbiAgICBxdWVyeSxcbiAgICBwYXJhbXMgPSB7fSxcbiAgICBvcHRpb25zID0ge31cbiAgfSA9IF9yZWYyO1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGNvbnN0IHtcbiAgICB0YWcsXG4gICAgLi4ub3B0c1xuICB9ID0gb3B0aW9ucztcbiAgaWYgKHRhZykgc2VhcmNoUGFyYW1zLmFwcGVuZChcInRhZ1wiLCB0YWcpO1xuICBzZWFyY2hQYXJhbXMuYXBwZW5kKFwicXVlcnlcIiwgcXVlcnkpO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwYXJhbXMpKSB7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZChcIiRcIi5jb25jYXQoa2V5KSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgfVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvcHRzKSkge1xuICAgIGlmICh2YWx1ZSkgc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIFwiXCIuY29uY2F0KHZhbHVlKSk7XG4gIH1cbiAgcmV0dXJuIFwiP1wiLmNvbmNhdChzZWFyY2hQYXJhbXMpO1xufTtcbmNvbnN0IGV4Y2x1ZGVGYWxzZXkgPSAocGFyYW0sIGRlZlZhbHVlKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gdHlwZW9mIHBhcmFtID09PSBcInVuZGVmaW5lZFwiID8gZGVmVmFsdWUgOiBwYXJhbTtcbiAgcmV0dXJuIHBhcmFtID09PSBmYWxzZSA/IHZvaWQgMCA6IHZhbHVlO1xufTtcbmNvbnN0IGdldE11dGF0aW9uUXVlcnkgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgcmV0dXJuIHtcbiAgICBkcnlSdW46IG9wdGlvbnMuZHJ5UnVuLFxuICAgIHJldHVybklkczogdHJ1ZSxcbiAgICByZXR1cm5Eb2N1bWVudHM6IGV4Y2x1ZGVGYWxzZXkob3B0aW9ucy5yZXR1cm5Eb2N1bWVudHMsIHRydWUpLFxuICAgIHZpc2liaWxpdHk6IG9wdGlvbnMudmlzaWJpbGl0eSB8fCBcInN5bmNcIixcbiAgICBhdXRvR2VuZXJhdGVBcnJheUtleXM6IG9wdGlvbnMuYXV0b0dlbmVyYXRlQXJyYXlLZXlzLFxuICAgIHNraXBDcm9zc0RhdGFzZXRSZWZlcmVuY2VWYWxpZGF0aW9uOiBvcHRpb25zLnNraXBDcm9zc0RhdGFzZXRSZWZlcmVuY2VWYWxpZGF0aW9uXG4gIH07XG59O1xuY29uc3QgaXNSZXNwb25zZSA9IGV2ZW50ID0+IGV2ZW50LnR5cGUgPT09IFwicmVzcG9uc2VcIjtcbmNvbnN0IGdldEJvZHkgPSBldmVudCA9PiBldmVudC5ib2R5O1xuY29uc3QgaW5kZXhCeSA9IChkb2NzLCBhdHRyKSA9PiBkb2NzLnJlZHVjZSgoaW5kZXhlZCwgZG9jKSA9PiB7XG4gIGluZGV4ZWRbYXR0cihkb2MpXSA9IGRvYztcbiAgcmV0dXJuIGluZGV4ZWQ7XG59LCAvKiBAX19QVVJFX18gKi9PYmplY3QuY3JlYXRlKG51bGwpKTtcbmNvbnN0IGdldFF1ZXJ5U2l6ZUxpbWl0ID0gMTEyNjQ7XG5mdW5jdGlvbiBfZmV0Y2goY2xpZW50LCBodHRwUmVxdWVzdCwgcXVlcnksIHBhcmFtcykge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge307XG4gIGNvbnN0IG1hcFJlc3BvbnNlID0gb3B0aW9ucy5maWx0ZXJSZXNwb25zZSA9PT0gZmFsc2UgPyByZXMgPT4gcmVzIDogcmVzID0+IHJlcy5yZXN1bHQ7XG4gIGNvbnN0IHtcbiAgICBjYWNoZSxcbiAgICBuZXh0LFxuICAgIC4uLm9wdHNcbiAgfSA9IHtcbiAgICAvLyBPcHQgb3V0IG9mIHNldHRpbmcgYSBgc2lnbmFsYCBvbiBhbiBpbnRlcm5hbCBgZmV0Y2hgIGlmIG9uZSBpc24ndCBwcm92aWRlZC5cbiAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBpbiBSZWFjdCBTZXJ2ZXIgQ29tcG9uZW50cyB0byBhdm9pZCBvcHRpbmcgb3V0IG9mIFJlcXVlc3QgTWVtb2l6YXRpb24uXG4gICAgdXNlQWJvcnRTaWduYWw6IHR5cGVvZiBvcHRpb25zLnNpZ25hbCAhPT0gXCJ1bmRlZmluZWRcIixcbiAgICAuLi5vcHRpb25zXG4gIH07XG4gIGNvbnN0IHJlcU9wdHMgPSB0eXBlb2YgY2FjaGUgIT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIG5leHQgIT09IFwidW5kZWZpbmVkXCIgPyB7XG4gICAgLi4ub3B0cyxcbiAgICBmZXRjaDoge1xuICAgICAgY2FjaGUsXG4gICAgICBuZXh0XG4gICAgfVxuICB9IDogb3B0cztcbiAgcmV0dXJuIF9kYXRhUmVxdWVzdChjbGllbnQsIGh0dHBSZXF1ZXN0LCBcInF1ZXJ5XCIsIHtcbiAgICBxdWVyeSxcbiAgICBwYXJhbXNcbiAgfSwgcmVxT3B0cykucGlwZShtYXAobWFwUmVzcG9uc2UpKTtcbn1cbmZ1bmN0aW9uIF9nZXREb2N1bWVudChjbGllbnQsIGh0dHBSZXF1ZXN0LCBpZCkge1xuICBsZXQgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgdXJpOiBfZ2V0RGF0YVVybChjbGllbnQsIFwiZG9jXCIsIGlkKSxcbiAgICBqc29uOiB0cnVlLFxuICAgIHRhZzogb3B0cy50YWdcbiAgfTtcbiAgcmV0dXJuIF9yZXF1ZXN0T2JzZXJ2YWJsZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBvcHRpb25zKS5waXBlKGZpbHRlcihpc1Jlc3BvbnNlKSwgbWFwKGV2ZW50ID0+IGV2ZW50LmJvZHkuZG9jdW1lbnRzICYmIGV2ZW50LmJvZHkuZG9jdW1lbnRzWzBdKSk7XG59XG5mdW5jdGlvbiBfZ2V0RG9jdW1lbnRzKGNsaWVudCwgaHR0cFJlcXVlc3QsIGlkcykge1xuICBsZXQgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgdXJpOiBfZ2V0RGF0YVVybChjbGllbnQsIFwiZG9jXCIsIGlkcy5qb2luKFwiLFwiKSksXG4gICAganNvbjogdHJ1ZSxcbiAgICB0YWc6IG9wdHMudGFnXG4gIH07XG4gIHJldHVybiBfcmVxdWVzdE9ic2VydmFibGUoY2xpZW50LCBodHRwUmVxdWVzdCwgb3B0aW9ucykucGlwZShmaWx0ZXIoaXNSZXNwb25zZSksIG1hcChldmVudCA9PiB7XG4gICAgY29uc3QgaW5kZXhlZCA9IGluZGV4QnkoZXZlbnQuYm9keS5kb2N1bWVudHMgfHwgW10sIGRvYyA9PiBkb2MuX2lkKTtcbiAgICByZXR1cm4gaWRzLm1hcChpZCA9PiBpbmRleGVkW2lkXSB8fCBudWxsKTtcbiAgfSkpO1xufVxuZnVuY3Rpb24gX2NyZWF0ZUlmTm90RXhpc3RzKGNsaWVudCwgaHR0cFJlcXVlc3QsIGRvYywgb3B0aW9ucykge1xuICByZXF1aXJlRG9jdW1lbnRJZChcImNyZWF0ZUlmTm90RXhpc3RzXCIsIGRvYyk7XG4gIHJldHVybiBfY3JlYXRlKGNsaWVudCwgaHR0cFJlcXVlc3QsIGRvYywgXCJjcmVhdGVJZk5vdEV4aXN0c1wiLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIF9jcmVhdGVPclJlcGxhY2UoY2xpZW50LCBodHRwUmVxdWVzdCwgZG9jLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVEb2N1bWVudElkKFwiY3JlYXRlT3JSZXBsYWNlXCIsIGRvYyk7XG4gIHJldHVybiBfY3JlYXRlKGNsaWVudCwgaHR0cFJlcXVlc3QsIGRvYywgXCJjcmVhdGVPclJlcGxhY2VcIiwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBfZGVsZXRlKGNsaWVudCwgaHR0cFJlcXVlc3QsIHNlbGVjdGlvbiwgb3B0aW9ucykge1xuICByZXR1cm4gX2RhdGFSZXF1ZXN0KGNsaWVudCwgaHR0cFJlcXVlc3QsIFwibXV0YXRlXCIsIHtcbiAgICBtdXRhdGlvbnM6IFt7XG4gICAgICBkZWxldGU6IGdldFNlbGVjdGlvbihzZWxlY3Rpb24pXG4gICAgfV1cbiAgfSwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBfbXV0YXRlKGNsaWVudCwgaHR0cFJlcXVlc3QsIG11dGF0aW9ucywgb3B0aW9ucykge1xuICBsZXQgbXV0O1xuICBpZiAobXV0YXRpb25zIGluc3RhbmNlb2YgUGF0Y2ggfHwgbXV0YXRpb25zIGluc3RhbmNlb2YgT2JzZXJ2YWJsZVBhdGNoKSB7XG4gICAgbXV0ID0ge1xuICAgICAgcGF0Y2g6IG11dGF0aW9ucy5zZXJpYWxpemUoKVxuICAgIH07XG4gIH0gZWxzZSBpZiAobXV0YXRpb25zIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24gfHwgbXV0YXRpb25zIGluc3RhbmNlb2YgT2JzZXJ2YWJsZVRyYW5zYWN0aW9uKSB7XG4gICAgbXV0ID0gbXV0YXRpb25zLnNlcmlhbGl6ZSgpO1xuICB9IGVsc2Uge1xuICAgIG11dCA9IG11dGF0aW9ucztcbiAgfVxuICBjb25zdCBtdXRzID0gQXJyYXkuaXNBcnJheShtdXQpID8gbXV0IDogW211dF07XG4gIGNvbnN0IHRyYW5zYWN0aW9uSWQgPSBvcHRpb25zICYmIG9wdGlvbnMudHJhbnNhY3Rpb25JZCB8fCB2b2lkIDA7XG4gIHJldHVybiBfZGF0YVJlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwgXCJtdXRhdGVcIiwge1xuICAgIG11dGF0aW9uczogbXV0cyxcbiAgICB0cmFuc2FjdGlvbklkXG4gIH0sIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gX2RhdGFSZXF1ZXN0KGNsaWVudCwgaHR0cFJlcXVlc3QsIGVuZHBvaW50LCBib2R5KSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7fTtcbiAgY29uc3QgaXNNdXRhdGlvbiA9IGVuZHBvaW50ID09PSBcIm11dGF0ZVwiO1xuICBjb25zdCBpc1F1ZXJ5ID0gZW5kcG9pbnQgPT09IFwicXVlcnlcIjtcbiAgY29uc3Qgc3RyUXVlcnkgPSBpc011dGF0aW9uID8gXCJcIiA6IGVuY29kZVF1ZXJ5U3RyaW5nKGJvZHkpO1xuICBjb25zdCB1c2VHZXQgPSAhaXNNdXRhdGlvbiAmJiBzdHJRdWVyeS5sZW5ndGggPCBnZXRRdWVyeVNpemVMaW1pdDtcbiAgY29uc3Qgc3RyaW5nUXVlcnkgPSB1c2VHZXQgPyBzdHJRdWVyeSA6IFwiXCI7XG4gIGNvbnN0IHJldHVybkZpcnN0ID0gb3B0aW9ucy5yZXR1cm5GaXJzdDtcbiAgY29uc3Qge1xuICAgIHRpbWVvdXQsXG4gICAgdG9rZW4sXG4gICAgdGFnLFxuICAgIGhlYWRlcnNcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHVyaSA9IF9nZXREYXRhVXJsKGNsaWVudCwgZW5kcG9pbnQsIHN0cmluZ1F1ZXJ5KTtcbiAgY29uc3QgcmVxT3B0aW9ucyA9IHtcbiAgICBtZXRob2Q6IHVzZUdldCA/IFwiR0VUXCIgOiBcIlBPU1RcIixcbiAgICB1cmksXG4gICAganNvbjogdHJ1ZSxcbiAgICBib2R5OiB1c2VHZXQgPyB2b2lkIDAgOiBib2R5LFxuICAgIHF1ZXJ5OiBpc011dGF0aW9uICYmIGdldE11dGF0aW9uUXVlcnkob3B0aW9ucyksXG4gICAgdGltZW91dCxcbiAgICBoZWFkZXJzLFxuICAgIHRva2VuLFxuICAgIHRhZyxcbiAgICBwZXJzcGVjdGl2ZTogb3B0aW9ucy5wZXJzcGVjdGl2ZSxcbiAgICByZXN1bHRTb3VyY2VNYXA6IG9wdGlvbnMucmVzdWx0U291cmNlTWFwLFxuICAgIGNhblVzZUNkbjogaXNRdWVyeSxcbiAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgIHVzZUFib3J0U2lnbmFsOiBvcHRpb25zLnVzZUFib3J0U2lnbmFsXG4gIH07XG4gIHJldHVybiBfcmVxdWVzdE9ic2VydmFibGUoY2xpZW50LCBodHRwUmVxdWVzdCwgcmVxT3B0aW9ucykucGlwZShmaWx0ZXIoaXNSZXNwb25zZSksIG1hcChnZXRCb2R5KSwgbWFwKHJlcyA9PiB7XG4gICAgaWYgKCFpc011dGF0aW9uKSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHRzID0gcmVzLnJlc3VsdHMgfHwgW107XG4gICAgaWYgKG9wdGlvbnMucmV0dXJuRG9jdW1lbnRzKSB7XG4gICAgICByZXR1cm4gcmV0dXJuRmlyc3QgPyByZXN1bHRzWzBdICYmIHJlc3VsdHNbMF0uZG9jdW1lbnQgOiByZXN1bHRzLm1hcChtdXQgPT4gbXV0LmRvY3VtZW50KTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gcmV0dXJuRmlyc3QgPyBcImRvY3VtZW50SWRcIiA6IFwiZG9jdW1lbnRJZHNcIjtcbiAgICBjb25zdCBpZHMgPSByZXR1cm5GaXJzdCA/IHJlc3VsdHNbMF0gJiYgcmVzdWx0c1swXS5pZCA6IHJlc3VsdHMubWFwKG11dCA9PiBtdXQuaWQpO1xuICAgIHJldHVybiB7XG4gICAgICB0cmFuc2FjdGlvbklkOiByZXMudHJhbnNhY3Rpb25JZCxcbiAgICAgIHJlc3VsdHMsXG4gICAgICBba2V5XTogaWRzXG4gICAgfTtcbiAgfSkpO1xufVxuZnVuY3Rpb24gX2NyZWF0ZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBkb2MsIG9wKSB7XG4gIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7fTtcbiAgY29uc3QgbXV0YXRpb24gPSB7XG4gICAgW29wXTogZG9jXG4gIH07XG4gIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICByZXR1cm5GaXJzdDogdHJ1ZSxcbiAgICByZXR1cm5Eb2N1bWVudHM6IHRydWVcbiAgfSwgb3B0aW9ucyk7XG4gIHJldHVybiBfZGF0YVJlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwgXCJtdXRhdGVcIiwge1xuICAgIG11dGF0aW9uczogW211dGF0aW9uXVxuICB9LCBvcHRzKTtcbn1cbmZ1bmN0aW9uIF9yZXF1ZXN0T2JzZXJ2YWJsZShjbGllbnQsIGh0dHBSZXF1ZXN0LCBvcHRpb25zKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgdXJpID0gb3B0aW9ucy51cmwgfHwgb3B0aW9ucy51cmk7XG4gIGNvbnN0IGNvbmZpZyA9IGNsaWVudC5jb25maWcoKTtcbiAgY29uc3QgY2FuVXNlQ2RuID0gdHlwZW9mIG9wdGlvbnMuY2FuVXNlQ2RuID09PSBcInVuZGVmaW5lZFwiID8gW1wiR0VUXCIsIFwiSEVBRFwiXS5pbmRleE9mKG9wdGlvbnMubWV0aG9kIHx8IFwiR0VUXCIpID49IDAgJiYgdXJpLmluZGV4T2YoXCIvZGF0YS9cIikgPT09IDAgOiBvcHRpb25zLmNhblVzZUNkbjtcbiAgbGV0IHVzZUNkbiA9IGNvbmZpZy51c2VDZG4gJiYgY2FuVXNlQ2RuO1xuICBjb25zdCB0YWcgPSBvcHRpb25zLnRhZyAmJiBjb25maWcucmVxdWVzdFRhZ1ByZWZpeCA/IFtjb25maWcucmVxdWVzdFRhZ1ByZWZpeCwgb3B0aW9ucy50YWddLmpvaW4oXCIuXCIpIDogb3B0aW9ucy50YWcgfHwgY29uZmlnLnJlcXVlc3RUYWdQcmVmaXg7XG4gIGlmICh0YWcgJiYgb3B0aW9ucy50YWcgIT09IG51bGwpIHtcbiAgICBvcHRpb25zLnF1ZXJ5ID0ge1xuICAgICAgdGFnOiByZXF1ZXN0VGFnKHRhZyksXG4gICAgICAuLi5vcHRpb25zLnF1ZXJ5XG4gICAgfTtcbiAgfVxuICBpZiAoW1wiR0VUXCIsIFwiSEVBRFwiLCBcIlBPU1RcIl0uaW5kZXhPZihvcHRpb25zLm1ldGhvZCB8fCBcIkdFVFwiKSA+PSAwICYmIHVyaS5pbmRleE9mKFwiL2RhdGEvcXVlcnkvXCIpID09PSAwKSB7XG4gICAgY29uc3QgcmVzdWx0U291cmNlTWFwID0gKF9hID0gb3B0aW9ucy5yZXN1bHRTb3VyY2VNYXApICE9IG51bGwgPyBfYSA6IGNvbmZpZy5yZXN1bHRTb3VyY2VNYXA7XG4gICAgaWYgKHJlc3VsdFNvdXJjZU1hcCAhPT0gdm9pZCAwICYmIHJlc3VsdFNvdXJjZU1hcCAhPT0gZmFsc2UpIHtcbiAgICAgIG9wdGlvbnMucXVlcnkgPSB7XG4gICAgICAgIHJlc3VsdFNvdXJjZU1hcCxcbiAgICAgICAgLi4ub3B0aW9ucy5xdWVyeVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgcGVyc3BlY3RpdmUgPSBvcHRpb25zLnBlcnNwZWN0aXZlIHx8IGNvbmZpZy5wZXJzcGVjdGl2ZTtcbiAgICBpZiAodHlwZW9mIHBlcnNwZWN0aXZlID09PSBcInN0cmluZ1wiICYmIHBlcnNwZWN0aXZlICE9PSBcInJhd1wiKSB7XG4gICAgICB2YWxpZGF0ZUFwaVBlcnNwZWN0aXZlKHBlcnNwZWN0aXZlKTtcbiAgICAgIG9wdGlvbnMucXVlcnkgPSB7XG4gICAgICAgIHBlcnNwZWN0aXZlLFxuICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5XG4gICAgICB9O1xuICAgICAgaWYgKHBlcnNwZWN0aXZlID09PSBcInByZXZpZXdEcmFmdHNcIiAmJiB1c2VDZG4pIHtcbiAgICAgICAgdXNlQ2RuID0gZmFsc2U7XG4gICAgICAgIHByaW50Q2RuUHJldmlld0RyYWZ0c1dhcm5pbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgcmVxT3B0aW9ucyA9IHJlcXVlc3RPcHRpb25zKGNvbmZpZywgT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucywge1xuICAgIHVybDogX2dldFVybChjbGllbnQsIHVyaSwgdXNlQ2RuKVxuICB9KSk7XG4gIGNvbnN0IHJlcXVlc3QgPSBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmVyID0+IGh0dHBSZXF1ZXN0KHJlcU9wdGlvbnMsIGNvbmZpZy5yZXF1ZXN0ZXIpLnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG4gIHJldHVybiBvcHRpb25zLnNpZ25hbCA/IHJlcXVlc3QucGlwZShfd2l0aEFib3J0U2lnbmFsKG9wdGlvbnMuc2lnbmFsKSkgOiByZXF1ZXN0O1xufVxuZnVuY3Rpb24gX3JlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwgb3B0aW9ucykge1xuICBjb25zdCBvYnNlcnZhYmxlID0gX3JlcXVlc3RPYnNlcnZhYmxlKGNsaWVudCwgaHR0cFJlcXVlc3QsIG9wdGlvbnMpLnBpcGUoZmlsdGVyKGV2ZW50ID0+IGV2ZW50LnR5cGUgPT09IFwicmVzcG9uc2VcIiksIG1hcChldmVudCA9PiBldmVudC5ib2R5KSk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuZnVuY3Rpb24gX2dldERhdGFVcmwoY2xpZW50LCBvcGVyYXRpb24sIHBhdGgpIHtcbiAgY29uc3QgY29uZmlnID0gY2xpZW50LmNvbmZpZygpO1xuICBjb25zdCBjYXRhbG9nID0gaGFzRGF0YXNldChjb25maWcpO1xuICBjb25zdCBiYXNlVXJpID0gXCIvXCIuY29uY2F0KG9wZXJhdGlvbiwgXCIvXCIpLmNvbmNhdChjYXRhbG9nKTtcbiAgY29uc3QgdXJpID0gcGF0aCA/IFwiXCIuY29uY2F0KGJhc2VVcmksIFwiL1wiKS5jb25jYXQocGF0aCkgOiBiYXNlVXJpO1xuICByZXR1cm4gXCIvZGF0YVwiLmNvbmNhdCh1cmkpLnJlcGxhY2UoL1xcLygkfFxcPykvLCBcIiQxXCIpO1xufVxuZnVuY3Rpb24gX2dldFVybChjbGllbnQsIHVyaSkge1xuICBsZXQgY2FuVXNlQ2RuID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcbiAgY29uc3Qge1xuICAgIHVybCxcbiAgICBjZG5VcmxcbiAgfSA9IGNsaWVudC5jb25maWcoKTtcbiAgY29uc3QgYmFzZSA9IGNhblVzZUNkbiA/IGNkblVybCA6IHVybDtcbiAgcmV0dXJuIFwiXCIuY29uY2F0KGJhc2UsIFwiL1wiKS5jb25jYXQodXJpLnJlcGxhY2UoL15cXC8vLCBcIlwiKSk7XG59XG5mdW5jdGlvbiBfd2l0aEFib3J0U2lnbmFsKHNpZ25hbCkge1xuICByZXR1cm4gaW5wdXQgPT4ge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShvYnNlcnZlciA9PiB7XG4gICAgICBjb25zdCBhYm9ydCA9ICgpID0+IG9ic2VydmVyLmVycm9yKF9jcmVhdGVBYm9ydEVycm9yKHNpZ25hbCkpO1xuICAgICAgaWYgKHNpZ25hbCAmJiBzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICBhYm9ydCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBpbnB1dC5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBhYm9ydCk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGFib3J0KTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xufVxuY29uc3QgaXNEb21FeGNlcHRpb25TdXBwb3J0ZWQgPSBCb29sZWFuKGdsb2JhbFRoaXMuRE9NRXhjZXB0aW9uKTtcbmZ1bmN0aW9uIF9jcmVhdGVBYm9ydEVycm9yKHNpZ25hbCkge1xuICB2YXIgX2EsIF9iO1xuICBpZiAoaXNEb21FeGNlcHRpb25TdXBwb3J0ZWQpIHtcbiAgICByZXR1cm4gbmV3IERPTUV4Y2VwdGlvbigoX2EgPSBzaWduYWwgPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25hbC5yZWFzb24pICE9IG51bGwgPyBfYSA6IFwiVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZC5cIiwgXCJBYm9ydEVycm9yXCIpO1xuICB9XG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKChfYiA9IHNpZ25hbCA9PSBudWxsID8gdm9pZCAwIDogc2lnbmFsLnJlYXNvbikgIT0gbnVsbCA/IF9iIDogXCJUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLlwiKTtcbiAgZXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICByZXR1cm4gZXJyb3I7XG59XG52YXIgX19hY2Nlc3NDaGVjayQ0ID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCQ0ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayQ0KG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkJDQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQkNCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDQob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKTtcbiAgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9jbGllbnQkMywgX2h0dHBSZXF1ZXN0JDQsIF9jbGllbnQyJDMsIF9odHRwUmVxdWVzdDIkNDtcbmNsYXNzIE9ic2VydmFibGVBc3NldHNDbGllbnQge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIGh0dHBSZXF1ZXN0KSB7XG4gICAgX19wcml2YXRlQWRkJDQodGhpcywgX2NsaWVudCQzLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCQ0KHRoaXMsIF9odHRwUmVxdWVzdCQ0LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCQ0KHRoaXMsIF9jbGllbnQkMywgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkNCh0aGlzLCBfaHR0cFJlcXVlc3QkNCwgaHR0cFJlcXVlc3QpO1xuICB9XG4gIHVwbG9hZChhc3NldFR5cGUsIGJvZHksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX3VwbG9hZChfX3ByaXZhdGVHZXQkNCh0aGlzLCBfY2xpZW50JDMpLCBfX3ByaXZhdGVHZXQkNCh0aGlzLCBfaHR0cFJlcXVlc3QkNCksIGFzc2V0VHlwZSwgYm9keSwgb3B0aW9ucyk7XG4gIH1cbn1cbl9jbGllbnQkMyA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QkNCA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBBc3NldHNDbGllbnQge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIGh0dHBSZXF1ZXN0KSB7XG4gICAgX19wcml2YXRlQWRkJDQodGhpcywgX2NsaWVudDIkMywgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkNCh0aGlzLCBfaHR0cFJlcXVlc3QyJDQsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlU2V0JDQodGhpcywgX2NsaWVudDIkMywgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkNCh0aGlzLCBfaHR0cFJlcXVlc3QyJDQsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICB1cGxvYWQoYXNzZXRUeXBlLCBib2R5LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgb2JzZXJ2YWJsZSA9IF91cGxvYWQoX19wcml2YXRlR2V0JDQodGhpcywgX2NsaWVudDIkMyksIF9fcHJpdmF0ZUdldCQ0KHRoaXMsIF9odHRwUmVxdWVzdDIkNCksIGFzc2V0VHlwZSwgYm9keSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20ob2JzZXJ2YWJsZS5waXBlKGZpbHRlcihldmVudCA9PiBldmVudC50eXBlID09PSBcInJlc3BvbnNlXCIpLCBtYXAoZXZlbnQgPT4gZXZlbnQuYm9keS5kb2N1bWVudCkpKTtcbiAgfVxufVxuX2NsaWVudDIkMyA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QyJDQgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gX3VwbG9hZChjbGllbnQsIGh0dHBSZXF1ZXN0LCBhc3NldFR5cGUsIGJvZHkpIHtcbiAgbGV0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuICB2YWxpZGF0ZUFzc2V0VHlwZShhc3NldFR5cGUpO1xuICBsZXQgbWV0YSA9IG9wdHMuZXh0cmFjdCB8fCB2b2lkIDA7XG4gIGlmIChtZXRhICYmICFtZXRhLmxlbmd0aCkge1xuICAgIG1ldGEgPSBbXCJub25lXCJdO1xuICB9XG4gIGNvbnN0IGRhdGFzZXQgPSBoYXNEYXRhc2V0KGNsaWVudC5jb25maWcoKSk7XG4gIGNvbnN0IGFzc2V0RW5kcG9pbnQgPSBhc3NldFR5cGUgPT09IFwiaW1hZ2VcIiA/IFwiaW1hZ2VzXCIgOiBcImZpbGVzXCI7XG4gIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25zRnJvbUZpbGUob3B0cywgYm9keSk7XG4gIGNvbnN0IHtcbiAgICB0YWcsXG4gICAgbGFiZWwsXG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgY3JlZGl0TGluZSxcbiAgICBmaWxlbmFtZSxcbiAgICBzb3VyY2VcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHF1ZXJ5ID0ge1xuICAgIGxhYmVsLFxuICAgIHRpdGxlLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGZpbGVuYW1lLFxuICAgIG1ldGEsXG4gICAgY3JlZGl0TGluZVxuICB9O1xuICBpZiAoc291cmNlKSB7XG4gICAgcXVlcnkuc291cmNlSWQgPSBzb3VyY2UuaWQ7XG4gICAgcXVlcnkuc291cmNlTmFtZSA9IHNvdXJjZS5uYW1lO1xuICAgIHF1ZXJ5LnNvdXJjZVVybCA9IHNvdXJjZS51cmw7XG4gIH1cbiAgcmV0dXJuIF9yZXF1ZXN0T2JzZXJ2YWJsZShjbGllbnQsIGh0dHBSZXF1ZXN0LCB7XG4gICAgdGFnLFxuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0IHx8IDAsXG4gICAgdXJpOiBcIi9hc3NldHMvXCIuY29uY2F0KGFzc2V0RW5kcG9pbnQsIFwiL1wiKS5jb25jYXQoZGF0YXNldCksXG4gICAgaGVhZGVyczogb3B0aW9ucy5jb250ZW50VHlwZSA/IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IG9wdGlvbnMuY29udGVudFR5cGVcbiAgICB9IDoge30sXG4gICAgcXVlcnksXG4gICAgYm9keVxuICB9KTtcbn1cbmZ1bmN0aW9uIG9wdGlvbnNGcm9tRmlsZShvcHRzLCBmaWxlKSB7XG4gIGlmICh0eXBlb2YgRmlsZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKGZpbGUgaW5zdGFuY2VvZiBGaWxlKSkge1xuICAgIHJldHVybiBvcHRzO1xuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICBmaWxlbmFtZTogb3B0cy5wcmVzZXJ2ZUZpbGVuYW1lID09PSBmYWxzZSA/IHZvaWQgMCA6IGZpbGUubmFtZSxcbiAgICBjb250ZW50VHlwZTogZmlsZS50eXBlXG4gIH0sIG9wdHMpO1xufVxudmFyIGRlZmF1bHRzID0gKG9iaiwgZGVmYXVsdHMpID0+IE9iamVjdC5rZXlzKGRlZmF1bHRzKS5jb25jYXQoT2JqZWN0LmtleXMob2JqKSkucmVkdWNlKCh0YXJnZXQsIHByb3ApID0+IHtcbiAgdGFyZ2V0W3Byb3BdID0gdHlwZW9mIG9ialtwcm9wXSA9PT0gXCJ1bmRlZmluZWRcIiA/IGRlZmF1bHRzW3Byb3BdIDogb2JqW3Byb3BdO1xuICByZXR1cm4gdGFyZ2V0O1xufSwge30pO1xuY29uc3QgcGljayA9IChvYmosIHByb3BzKSA9PiBwcm9wcy5yZWR1Y2UoKHNlbGVjdGlvbiwgcHJvcCkgPT4ge1xuICBpZiAodHlwZW9mIG9ialtwcm9wXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cbiAgc2VsZWN0aW9uW3Byb3BdID0gb2JqW3Byb3BdO1xuICByZXR1cm4gc2VsZWN0aW9uO1xufSwge30pO1xuY29uc3QgTUFYX1VSTF9MRU5HVEggPSAxNmUzIC0gMTIwMDtcbmNvbnN0IHBvc3NpYmxlT3B0aW9ucyA9IFtcImluY2x1ZGVQcmV2aW91c1JldmlzaW9uXCIsIFwiaW5jbHVkZVJlc3VsdFwiLCBcInZpc2liaWxpdHlcIiwgXCJlZmZlY3RGb3JtYXRcIiwgXCJ0YWdcIl07XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgaW5jbHVkZVJlc3VsdDogdHJ1ZVxufTtcbmZ1bmN0aW9uIF9saXN0ZW4ocXVlcnksIHBhcmFtcykge1xuICBsZXQgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gIGNvbnN0IHtcbiAgICB1cmwsXG4gICAgdG9rZW4sXG4gICAgd2l0aENyZWRlbnRpYWxzLFxuICAgIHJlcXVlc3RUYWdQcmVmaXhcbiAgfSA9IHRoaXMuY29uZmlnKCk7XG4gIGNvbnN0IHRhZyA9IG9wdHMudGFnICYmIHJlcXVlc3RUYWdQcmVmaXggPyBbcmVxdWVzdFRhZ1ByZWZpeCwgb3B0cy50YWddLmpvaW4oXCIuXCIpIDogb3B0cy50YWc7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgLi4uZGVmYXVsdHMob3B0cywgZGVmYXVsdE9wdGlvbnMpLFxuICAgIHRhZ1xuICB9O1xuICBjb25zdCBsaXN0ZW5PcHRzID0gcGljayhvcHRpb25zLCBwb3NzaWJsZU9wdGlvbnMpO1xuICBjb25zdCBxcyA9IGVuY29kZVF1ZXJ5U3RyaW5nKHtcbiAgICBxdWVyeSxcbiAgICBwYXJhbXMsXG4gICAgb3B0aW9uczoge1xuICAgICAgdGFnLFxuICAgICAgLi4ubGlzdGVuT3B0c1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHVyaSA9IFwiXCIuY29uY2F0KHVybCkuY29uY2F0KF9nZXREYXRhVXJsKHRoaXMsIFwibGlzdGVuXCIsIHFzKSk7XG4gIGlmICh1cmkubGVuZ3RoID4gTUFYX1VSTF9MRU5HVEgpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4gb2JzZXJ2ZXIuZXJyb3IobmV3IEVycm9yKFwiUXVlcnkgdG9vIGxhcmdlIGZvciBsaXN0ZW5lclwiKSkpO1xuICB9XG4gIGNvbnN0IGxpc3RlbkZvciA9IG9wdGlvbnMuZXZlbnRzID8gb3B0aW9ucy5ldmVudHMgOiBbXCJtdXRhdGlvblwiXTtcbiAgY29uc3Qgc2hvdWxkRW1pdFJlY29ubmVjdCA9IGxpc3RlbkZvci5pbmRleE9mKFwicmVjb25uZWN0XCIpICE9PSAtMTtcbiAgY29uc3QgZXNPcHRpb25zID0ge307XG4gIGlmICh0b2tlbiB8fCB3aXRoQ3JlZGVudGlhbHMpIHtcbiAgICBlc09wdGlvbnMud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgfVxuICBpZiAodG9rZW4pIHtcbiAgICBlc09wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgIEF1dGhvcml6YXRpb246IFwiQmVhcmVyIFwiLmNvbmNhdCh0b2tlbilcbiAgICB9O1xuICB9XG4gIHJldHVybiBuZXcgT2JzZXJ2YWJsZShvYnNlcnZlciA9PiB7XG4gICAgbGV0IGVzO1xuICAgIGdldEV2ZW50U291cmNlKCkudGhlbihldmVudFNvdXJjZSA9PiB7XG4gICAgICBlcyA9IGV2ZW50U291cmNlO1xuICAgIH0pLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICBvYnNlcnZlci5lcnJvcihyZWFzb24pO1xuICAgICAgc3RvcCgpO1xuICAgIH0pO1xuICAgIGxldCByZWNvbm5lY3RUaW1lcjtcbiAgICBsZXQgc3RvcHBlZCA9IGZhbHNlO1xuICAgIGZ1bmN0aW9uIG9uRXJyb3IoKSB7XG4gICAgICBpZiAoc3RvcHBlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbWl0UmVjb25uZWN0KCk7XG4gICAgICBpZiAoc3RvcHBlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoZXMucmVhZHlTdGF0ZSA9PT0gZXMuQ0xPU0VEKSB7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lcik7XG4gICAgICAgIHJlY29ubmVjdFRpbWVyID0gc2V0VGltZW91dChvcGVuLCAxMDApO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbkNoYW5uZWxFcnJvcihlcnIpIHtcbiAgICAgIG9ic2VydmVyLmVycm9yKGNvb2VyY2VFcnJvcihlcnIpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25NZXNzYWdlKGV2dCkge1xuICAgICAgY29uc3QgZXZlbnQgPSBwYXJzZUV2ZW50KGV2dCk7XG4gICAgICByZXR1cm4gZXZlbnQgaW5zdGFuY2VvZiBFcnJvciA/IG9ic2VydmVyLmVycm9yKGV2ZW50KSA6IG9ic2VydmVyLm5leHQoZXZlbnQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkRpc2Nvbm5lY3QoKSB7XG4gICAgICBzdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgIGlmICghZXMpIHJldHVybjtcbiAgICAgIGVzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgIGVzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFubmVsRXJyb3JcIiwgb25DaGFubmVsRXJyb3IpO1xuICAgICAgZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc2Nvbm5lY3RcIiwgb25EaXNjb25uZWN0KTtcbiAgICAgIGxpc3RlbkZvci5mb3JFYWNoKHR5cGUgPT4gZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBvbk1lc3NhZ2UpKTtcbiAgICAgIGVzLmNsb3NlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVtaXRSZWNvbm5lY3QoKSB7XG4gICAgICBpZiAoc2hvdWxkRW1pdFJlY29ubmVjdCkge1xuICAgICAgICBvYnNlcnZlci5uZXh0KHtcbiAgICAgICAgICB0eXBlOiBcInJlY29ubmVjdFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBnZXRFdmVudFNvdXJjZSgpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGVmYXVsdDogRXZlbnRTb3VyY2VcbiAgICAgIH0gPSBhd2FpdCBpbXBvcnQoJ0BzYW5pdHkvZXZlbnRzb3VyY2UnKTtcbiAgICAgIGNvbnN0IGV2cyA9IG5ldyBFdmVudFNvdXJjZSh1cmksIGVzT3B0aW9ucyk7XG4gICAgICBldnMuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIG9uRXJyb3IpO1xuICAgICAgZXZzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFubmVsRXJyb3JcIiwgb25DaGFubmVsRXJyb3IpO1xuICAgICAgZXZzLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNjb25uZWN0XCIsIG9uRGlzY29ubmVjdCk7XG4gICAgICBsaXN0ZW5Gb3IuZm9yRWFjaCh0eXBlID0+IGV2cy5hZGRFdmVudExpc3RlbmVyKHR5cGUsIG9uTWVzc2FnZSkpO1xuICAgICAgcmV0dXJuIGV2cztcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgIGdldEV2ZW50U291cmNlKCkudGhlbihldmVudFNvdXJjZSA9PiB7XG4gICAgICAgIGVzID0gZXZlbnRTb3VyY2U7XG4gICAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICBvYnNlcnZlci5lcnJvcihyZWFzb24pO1xuICAgICAgICBzdG9wKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0b3A7XG4gIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VFdmVudChldmVudCkge1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhICYmIEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgfHwge307XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgdHlwZTogZXZlbnQudHlwZVxuICAgIH0sIGRhdGEpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gZXJyO1xuICB9XG59XG5mdW5jdGlvbiBjb29lcmNlRXJyb3IoZXJyKSB7XG4gIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBlcnI7XG4gIH1cbiAgY29uc3QgZXZ0ID0gcGFyc2VFdmVudChlcnIpO1xuICByZXR1cm4gZXZ0IGluc3RhbmNlb2YgRXJyb3IgPyBldnQgOiBuZXcgRXJyb3IoZXh0cmFjdEVycm9yTWVzc2FnZShldnQpKTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RFcnJvck1lc3NhZ2UoZXJyKSB7XG4gIGlmICghZXJyLmVycm9yKSB7XG4gICAgcmV0dXJuIGVyci5tZXNzYWdlIHx8IFwiVW5rbm93biBsaXN0ZW5lciBlcnJvclwiO1xuICB9XG4gIGlmIChlcnIuZXJyb3IuZGVzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gZXJyLmVycm9yLmRlc2NyaXB0aW9uO1xuICB9XG4gIHJldHVybiB0eXBlb2YgZXJyLmVycm9yID09PSBcInN0cmluZ1wiID8gZXJyLmVycm9yIDogSlNPTi5zdHJpbmdpZnkoZXJyLmVycm9yLCBudWxsLCAyKTtcbn1cbnZhciBfX2FjY2Vzc0NoZWNrJDMgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDMgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDMob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkMyA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQzID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skMyhvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCQyLCBfaHR0cFJlcXVlc3QkMywgX2NsaWVudDIkMiwgX2h0dHBSZXF1ZXN0MiQzO1xuY2xhc3MgT2JzZXJ2YWJsZURhdGFzZXRzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQzKHRoaXMsIF9jbGllbnQkMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMyh0aGlzLCBfaHR0cFJlcXVlc3QkMywgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMyh0aGlzLCBfY2xpZW50JDIsIGNsaWVudCk7XG4gICAgX19wcml2YXRlU2V0JDModGhpcywgX2h0dHBSZXF1ZXN0JDMsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGRhdGFzZXQgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIGRhdGFzZXQgdG8gY3JlYXRlXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGRhdGFzZXRcbiAgICovXG4gIGNyZWF0ZShuYW1lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9tb2RpZnkoX19wcml2YXRlR2V0JDModGhpcywgX2NsaWVudCQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0JDMpLCBcIlBVVFwiLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRWRpdCBhIGRhdGFzZXQgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIGRhdGFzZXQgdG8gZWRpdFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIE5ldyBvcHRpb25zIGZvciB0aGUgZGF0YXNldFxuICAgKi9cbiAgZWRpdChuYW1lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9tb2RpZnkoX19wcml2YXRlR2V0JDModGhpcywgX2NsaWVudCQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0JDMpLCBcIlBBVENIXCIsIG5hbWUsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgYSBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGRlbGV0ZVxuICAgKi9cbiAgZGVsZXRlKG5hbWUpIHtcbiAgICByZXR1cm4gX21vZGlmeShfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50JDIpLCBfX3ByaXZhdGVHZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QkMyksIFwiREVMRVRFXCIsIG5hbWUpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIGxpc3Qgb2YgZGF0YXNldHMgZm9yIHRoZSBjb25maWd1cmVkIHByb2plY3RcbiAgICovXG4gIGxpc3QoKSB7XG4gICAgcmV0dXJuIF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQkMiksIF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9odHRwUmVxdWVzdCQzKSwge1xuICAgICAgdXJpOiBcIi9kYXRhc2V0c1wiLFxuICAgICAgdGFnOiBudWxsXG4gICAgfSk7XG4gIH1cbn1cbl9jbGllbnQkMiA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QkMyA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBEYXRhc2V0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMyh0aGlzLCBfY2xpZW50MiQyLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCQzKHRoaXMsIF9odHRwUmVxdWVzdDIkMywgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMyh0aGlzLCBfY2xpZW50MiQyLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQzKHRoaXMsIF9odHRwUmVxdWVzdDIkMywgaHR0cFJlcXVlc3QpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgZGF0YXNldCB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBvZiB0aGUgZGF0YXNldCB0byBjcmVhdGVcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgZGF0YXNldFxuICAgKi9cbiAgY3JlYXRlKG5hbWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQyJDIpLCBfX3ByaXZhdGVHZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMpLCBcIlBVVFwiLCBuYW1lLCBvcHRpb25zKSk7XG4gIH1cbiAgLyoqXG4gICAqIEVkaXQgYSBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGVkaXRcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBOZXcgb3B0aW9ucyBmb3IgdGhlIGRhdGFzZXRcbiAgICovXG4gIGVkaXQobmFtZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9tb2RpZnkoX19wcml2YXRlR2V0JDModGhpcywgX2NsaWVudDIkMiksIF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9odHRwUmVxdWVzdDIkMyksIFwiUEFUQ0hcIiwgbmFtZSwgb3B0aW9ucykpO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgYSBkYXRhc2V0IHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBOYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGRlbGV0ZVxuICAgKi9cbiAgZGVsZXRlKG5hbWUpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfbW9kaWZ5KF9fcHJpdmF0ZUdldCQzKHRoaXMsIF9jbGllbnQyJDIpLCBfX3ByaXZhdGVHZXQkMyh0aGlzLCBfaHR0cFJlcXVlc3QyJDMpLCBcIkRFTEVURVwiLCBuYW1lKSk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgbGlzdCBvZiBkYXRhc2V0cyBmb3IgdGhlIGNvbmZpZ3VyZWQgcHJvamVjdFxuICAgKi9cbiAgbGlzdCgpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfcmVxdWVzdChfX3ByaXZhdGVHZXQkMyh0aGlzLCBfY2xpZW50MiQyKSwgX19wcml2YXRlR2V0JDModGhpcywgX2h0dHBSZXF1ZXN0MiQzKSwge1xuICAgICAgdXJpOiBcIi9kYXRhc2V0c1wiLFxuICAgICAgdGFnOiBudWxsXG4gICAgfSkpO1xuICB9XG59XG5fY2xpZW50MiQyID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdDIkMyA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBfbW9kaWZ5KGNsaWVudCwgaHR0cFJlcXVlc3QsIG1ldGhvZCwgbmFtZSwgb3B0aW9ucykge1xuICBkYXRhc2V0KG5hbWUpO1xuICByZXR1cm4gX3JlcXVlc3QoY2xpZW50LCBodHRwUmVxdWVzdCwge1xuICAgIG1ldGhvZCxcbiAgICB1cmk6IFwiL2RhdGFzZXRzL1wiLmNvbmNhdChuYW1lKSxcbiAgICBib2R5OiBvcHRpb25zLFxuICAgIHRhZzogbnVsbFxuICB9KTtcbn1cbnZhciBfX2FjY2Vzc0NoZWNrJDIgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDIgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDIob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkMiA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQyID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skMihvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCQxLCBfaHR0cFJlcXVlc3QkMiwgX2NsaWVudDIkMSwgX2h0dHBSZXF1ZXN0MiQyO1xuY2xhc3MgT2JzZXJ2YWJsZVByb2plY3RzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQyKHRoaXMsIF9jbGllbnQkMSwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMih0aGlzLCBfaHR0cFJlcXVlc3QkMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMih0aGlzLCBfY2xpZW50JDEsIGNsaWVudCk7XG4gICAgX19wcml2YXRlU2V0JDIodGhpcywgX2h0dHBSZXF1ZXN0JDIsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICBsaXN0KG9wdGlvbnMpIHtcbiAgICBjb25zdCB1cmkgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pbmNsdWRlTWVtYmVycykgPT09IGZhbHNlID8gXCIvcHJvamVjdHM/aW5jbHVkZU1lbWJlcnM9ZmFsc2VcIiA6IFwiL3Byb2plY3RzXCI7XG4gICAgcmV0dXJuIF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9jbGllbnQkMSksIF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9odHRwUmVxdWVzdCQyKSwge1xuICAgICAgdXJpXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgcHJvamVjdCBieSBwcm9qZWN0IElEXG4gICAqXG4gICAqIEBwYXJhbSBwcm9qZWN0SWQgLSBJRCBvZiB0aGUgcHJvamVjdCB0byBmZXRjaFxuICAgKi9cbiAgZ2V0QnlJZChwcm9qZWN0SWQpIHtcbiAgICByZXR1cm4gX3JlcXVlc3QoX19wcml2YXRlR2V0JDIodGhpcywgX2NsaWVudCQxKSwgX19wcml2YXRlR2V0JDIodGhpcywgX2h0dHBSZXF1ZXN0JDIpLCB7XG4gICAgICB1cmk6IFwiL3Byb2plY3RzL1wiLmNvbmNhdChwcm9qZWN0SWQpXG4gICAgfSk7XG4gIH1cbn1cbl9jbGllbnQkMSA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QkMiA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBQcm9qZWN0c0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgaHR0cFJlcXVlc3QpIHtcbiAgICBfX3ByaXZhdGVBZGQkMih0aGlzLCBfY2xpZW50MiQxLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCQyKHRoaXMsIF9odHRwUmVxdWVzdDIkMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMih0aGlzLCBfY2xpZW50MiQxLCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQyKHRoaXMsIF9odHRwUmVxdWVzdDIkMiwgaHR0cFJlcXVlc3QpO1xuICB9XG4gIGxpc3Qob3B0aW9ucykge1xuICAgIGNvbnN0IHVyaSA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmluY2x1ZGVNZW1iZXJzKSA9PT0gZmFsc2UgPyBcIi9wcm9qZWN0cz9pbmNsdWRlTWVtYmVycz1mYWxzZVwiIDogXCIvcHJvamVjdHNcIjtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfcmVxdWVzdChfX3ByaXZhdGVHZXQkMih0aGlzLCBfY2xpZW50MiQxKSwgX19wcml2YXRlR2V0JDIodGhpcywgX2h0dHBSZXF1ZXN0MiQyKSwge1xuICAgICAgdXJpXG4gICAgfSkpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHByb2plY3QgYnkgcHJvamVjdCBJRFxuICAgKlxuICAgKiBAcGFyYW0gcHJvamVjdElkIC0gSUQgb2YgdGhlIHByb2plY3QgdG8gZmV0Y2hcbiAgICovXG4gIGdldEJ5SWQocHJvamVjdElkKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX3JlcXVlc3QoX19wcml2YXRlR2V0JDIodGhpcywgX2NsaWVudDIkMSksIF9fcHJpdmF0ZUdldCQyKHRoaXMsIF9odHRwUmVxdWVzdDIkMiksIHtcbiAgICAgIHVyaTogXCIvcHJvamVjdHMvXCIuY29uY2F0KHByb2plY3RJZClcbiAgICB9KSk7XG4gIH1cbn1cbl9jbGllbnQyJDEgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0MiQyID0gbmV3IFdlYWtNYXAoKTtcbnZhciBfX2FjY2Vzc0NoZWNrJDEgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbn07XG52YXIgX19wcml2YXRlR2V0JDEgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrJDEob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQkMSA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IHtcbiAgaWYgKG1lbWJlci5oYXMob2JqKSkgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCQxID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2skMShvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudCwgX2h0dHBSZXF1ZXN0JDEsIF9jbGllbnQyLCBfaHR0cFJlcXVlc3QyJDE7XG5jbGFzcyBPYnNlcnZhYmxlVXNlcnNDbGllbnQge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIGh0dHBSZXF1ZXN0KSB7XG4gICAgX19wcml2YXRlQWRkJDEodGhpcywgX2NsaWVudCwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQkMSh0aGlzLCBfaHR0cFJlcXVlc3QkMSwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMSh0aGlzLCBfY2xpZW50LCBjbGllbnQpO1xuICAgIF9fcHJpdmF0ZVNldCQxKHRoaXMsIF9odHRwUmVxdWVzdCQxLCBodHRwUmVxdWVzdCk7XG4gIH1cbiAgLyoqXG4gICAqIEZldGNoIGEgdXNlciBieSB1c2VyIElEXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFVzZXIgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2guIElmIGBtZWAgaXMgcHJvdmlkZWQsIGEgbWluaW1hbCByZXNwb25zZSBpbmNsdWRpbmcgdGhlIHVzZXJzIHJvbGUgaXMgcmV0dXJuZWQuXG4gICAqL1xuICBnZXRCeUlkKGlkKSB7XG4gICAgcmV0dXJuIF9yZXF1ZXN0KF9fcHJpdmF0ZUdldCQxKHRoaXMsIF9jbGllbnQpLCBfX3ByaXZhdGVHZXQkMSh0aGlzLCBfaHR0cFJlcXVlc3QkMSksIHtcbiAgICAgIHVyaTogXCIvdXNlcnMvXCIuY29uY2F0KGlkKVxuICAgIH0pO1xuICB9XG59XG5fY2xpZW50ID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdCQxID0gbmV3IFdlYWtNYXAoKTtcbmNsYXNzIFVzZXJzQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCBodHRwUmVxdWVzdCkge1xuICAgIF9fcHJpdmF0ZUFkZCQxKHRoaXMsIF9jbGllbnQyLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCQxKHRoaXMsIF9odHRwUmVxdWVzdDIkMSwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQkMSh0aGlzLCBfY2xpZW50MiwgY2xpZW50KTtcbiAgICBfX3ByaXZhdGVTZXQkMSh0aGlzLCBfaHR0cFJlcXVlc3QyJDEsIGh0dHBSZXF1ZXN0KTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggYSB1c2VyIGJ5IHVzZXIgSURcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVXNlciBJRCBvZiB0aGUgdXNlciB0byBmZXRjaC4gSWYgYG1lYCBpcyBwcm92aWRlZCwgYSBtaW5pbWFsIHJlc3BvbnNlIGluY2x1ZGluZyB0aGUgdXNlcnMgcm9sZSBpcyByZXR1cm5lZC5cbiAgICovXG4gIGdldEJ5SWQoaWQpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfcmVxdWVzdChfX3ByaXZhdGVHZXQkMSh0aGlzLCBfY2xpZW50MiksIF9fcHJpdmF0ZUdldCQxKHRoaXMsIF9odHRwUmVxdWVzdDIkMSksIHtcbiAgICAgIHVyaTogXCIvdXNlcnMvXCIuY29uY2F0KGlkKVxuICAgIH0pKTtcbiAgfVxufVxuX2NsaWVudDIgPSBuZXcgV2Vha01hcCgpO1xuX2h0dHBSZXF1ZXN0MiQxID0gbmV3IFdlYWtNYXAoKTtcbnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IHtcbiAgaWYgKCFtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX2NsaWVudENvbmZpZywgX2h0dHBSZXF1ZXN0LCBfY2xpZW50Q29uZmlnMiwgX2h0dHBSZXF1ZXN0MjtcbmNvbnN0IF9PYnNlcnZhYmxlU2FuaXR5Q2xpZW50ID0gY2xhc3MgX09ic2VydmFibGVTYW5pdHlDbGllbnQge1xuICBjb25zdHJ1Y3RvcihodHRwUmVxdWVzdCkge1xuICAgIGxldCBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGRlZmF1bHRDb25maWc7XG4gICAgLyoqXG4gICAgICogUHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9jbGllbnRDb25maWcsIHZvaWQgMCk7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9odHRwUmVxdWVzdCwgdm9pZCAwKTtcbiAgICAvKipcbiAgICAgKiBJbnN0YW5jZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgdGhpcy5saXN0ZW4gPSBfbGlzdGVuO1xuICAgIHRoaXMuY29uZmlnKGNvbmZpZyk7XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9odHRwUmVxdWVzdCwgaHR0cFJlcXVlc3QpO1xuICAgIHRoaXMuYXNzZXRzID0gbmV3IE9ic2VydmFibGVBc3NldHNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCkpO1xuICAgIHRoaXMuZGF0YXNldHMgPSBuZXcgT2JzZXJ2YWJsZURhdGFzZXRzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpKTtcbiAgICB0aGlzLnByb2plY3RzID0gbmV3IE9ic2VydmFibGVQcm9qZWN0c0NsaWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSk7XG4gICAgdGhpcy51c2VycyA9IG5ldyBPYnNlcnZhYmxlVXNlcnNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCkpO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgY2xpZW50IC0gcmV0dXJucyBhIG5ldyBpbnN0YW5jZVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZVNhbml0eUNsaWVudChfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgdGhpcy5jb25maWcoKSk7XG4gIH1cbiAgY29uZmlnKG5ld0NvbmZpZykge1xuICAgIGlmIChuZXdDb25maWcgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcpICYmIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnKS5hbGxvd1JlY29uZmlndXJlID09PSBmYWxzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhpc3RpbmcgY2xpZW50IGluc3RhbmNlIGNhbm5vdCBiZSByZWNvbmZpZ3VyZWQgLSB1c2UgYHdpdGhDb25maWcobmV3Q29uZmlnKWAgdG8gcmV0dXJuIGEgbmV3IGNsaWVudFwiKTtcbiAgICB9XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9jbGllbnRDb25maWcsIGluaXRDb25maWcobmV3Q29uZmlnLCBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudENvbmZpZykgfHwge30pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgdGhlIGNsaWVudCB3aXRoIGEgbmV3IChwYXJ0aWFsKSBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gbmV3Q29uZmlnIC0gTmV3IGNsaWVudCBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMsIHNoYWxsb3dseSBtZXJnZWQgd2l0aCBleGlzdGluZyBjb25maWd1cmF0aW9uXG4gICAqL1xuICB3aXRoQ29uZmlnKG5ld0NvbmZpZykge1xuICAgIHJldHVybiBuZXcgX09ic2VydmFibGVTYW5pdHlDbGllbnQoX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIHtcbiAgICAgIC4uLnRoaXMuY29uZmlnKCksXG4gICAgICAuLi5uZXdDb25maWdcbiAgICB9KTtcbiAgfVxuICBmZXRjaChxdWVyeSwgcGFyYW1zKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIHJldHVybiBfZmV0Y2godGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIHF1ZXJ5LCBwYXJhbXMsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHNpbmdsZSBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiBJRC5cbiAgICpcbiAgICogQHBhcmFtIGlkIC0gRG9jdW1lbnQgSUQgdG8gZmV0Y2hcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICovXG4gIGdldERvY3VtZW50KGlkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9nZXREb2N1bWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgaWQsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBtdWx0aXBsZSBkb2N1bWVudHMgaW4gb25lIHJlcXVlc3QuXG4gICAqIFNob3VsZCBiZSB1c2VkIHNwYXJpbmdseSAtIHBlcmZvcm1pbmcgYSBxdWVyeSBpcyB1c3VhbGx5IGEgYmV0dGVyIG9wdGlvbi5cbiAgICogVGhlIG9yZGVyL3Bvc2l0aW9uIG9mIGRvY3VtZW50cyBpcyBwcmVzZXJ2ZWQgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGFycmF5IG9mIElEcy5cbiAgICogSWYgYW55IG9mIHRoZSBkb2N1bWVudHMgYXJlIG1pc3NpbmcsIHRoZXkgd2lsbCBiZSByZXBsYWNlZCBieSBhIGBudWxsYCBlbnRyeSBpbiB0aGUgcmV0dXJuZWQgYXJyYXlcbiAgICpcbiAgICogQHBhcmFtIGlkcyAtIERvY3VtZW50IElEcyB0byBmZXRjaFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlcXVlc3Qgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RG9jdW1lbnRzKGlkcywgb3B0aW9ucykge1xuICAgIHJldHVybiBfZ2V0RG9jdW1lbnRzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBpZHMsIG9wdGlvbnMpO1xuICB9XG4gIGNyZWF0ZShkb2N1bWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiBfY3JlYXRlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBkb2N1bWVudCwgXCJjcmVhdGVcIiwgb3B0aW9ucyk7XG4gIH1cbiAgY3JlYXRlSWZOb3RFeGlzdHMoZG9jdW1lbnQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX2NyZWF0ZUlmTm90RXhpc3RzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBkb2N1bWVudCwgb3B0aW9ucyk7XG4gIH1cbiAgY3JlYXRlT3JSZXBsYWNlKGRvY3VtZW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVPclJlcGxhY2UodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIGRvY3VtZW50LCBvcHRpb25zKTtcbiAgfVxuICBkZWxldGUoc2VsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9kZWxldGUodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdCksIHNlbGVjdGlvbiwgb3B0aW9ucyk7XG4gIH1cbiAgbXV0YXRlKG9wZXJhdGlvbnMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX211dGF0ZSh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0KSwgb3BlcmF0aW9ucywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBidWlsZGFibGUgcGF0Y2ggb2Ygb3BlcmF0aW9ucyB0byBwZXJmb3JtXG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3Rpb24gLSBEb2N1bWVudCBJRCwgYW4gYXJyYXkgb2YgZG9jdW1lbnQgSURzLCBvciBhbiBvYmplY3Qgd2l0aCBgcXVlcnlgIGFuZCBvcHRpb25hbCBgcGFyYW1zYCwgZGVmaW5pbmcgd2hpY2ggZG9jdW1lbnQocykgdG8gcGF0Y2hcbiAgICogQHBhcmFtIG9wZXJhdGlvbnMgLSBPcHRpb25hbCBvYmplY3Qgb2YgcGF0Y2ggb3BlcmF0aW9ucyB0byBpbml0aWFsaXplIHRoZSBwYXRjaCBpbnN0YW5jZSB3aXRoXG4gICAqIEByZXR1cm5zIFBhdGNoIGluc3RhbmNlIC0gY2FsbCBgLmNvbW1pdCgpYCB0byBwZXJmb3JtIHRoZSBvcGVyYXRpb25zIGRlZmluZWRcbiAgICovXG4gIHBhdGNoKHNlbGVjdGlvbiwgb3BlcmF0aW9ucykge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZVBhdGNoKHNlbGVjdGlvbiwgb3BlcmF0aW9ucywgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyB0cmFuc2FjdGlvbiBvZiBtdXRhdGlvbnNcbiAgICpcbiAgICogQHBhcmFtIG9wZXJhdGlvbnMgLSBPcHRpb25hbCBhcnJheSBvZiBtdXRhdGlvbiBvcGVyYXRpb25zIHRvIGluaXRpYWxpemUgdGhlIHRyYW5zYWN0aW9uIGluc3RhbmNlIHdpdGhcbiAgICovXG4gIHRyYW5zYWN0aW9uKG9wZXJhdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGVUcmFuc2FjdGlvbihvcGVyYXRpb25zLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogUGVyZm9ybSBhbiBIVFRQIHJlcXVlc3QgYWdhaW5zdCB0aGUgU2FuaXR5IEFQSVxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJlcXVlc3Qgb3B0aW9uc1xuICAgKi9cbiAgcmVxdWVzdChvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9yZXF1ZXN0KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QpLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgU2FuaXR5IEFQSSBVUkwgZm9yIHRoZSBVUkkgcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIHVyaSAtIFVSSS9wYXRoIHRvIGJ1aWxkIFVSTCBmb3JcbiAgICogQHBhcmFtIGNhblVzZUNkbiAtIFdoZXRoZXIgb3Igbm90IHRvIGFsbG93IHVzaW5nIHRoZSBBUEkgQ0ROIGZvciB0aGlzIHJvdXRlXG4gICAqL1xuICBnZXRVcmwodXJpLCBjYW5Vc2VDZG4pIHtcbiAgICByZXR1cm4gX2dldFVybCh0aGlzLCB1cmksIGNhblVzZUNkbik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIFNhbml0eSBBUEkgVVJMIGZvciB0aGUgZGF0YSBvcGVyYXRpb24gYW5kIHBhdGggcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIG9wZXJhdGlvbiAtIERhdGEgb3BlcmF0aW9uIChlZyBgcXVlcnlgLCBgbXV0YXRlYCwgYGxpc3RlbmAgb3Igc2ltaWxhcilcbiAgICogQHBhcmFtIHBhdGggLSBQYXRoIHRvIGFwcGVuZCBhZnRlciB0aGUgb3BlcmF0aW9uXG4gICAqL1xuICBnZXREYXRhVXJsKG9wZXJhdGlvbiwgcGF0aCkge1xuICAgIHJldHVybiBfZ2V0RGF0YVVybCh0aGlzLCBvcGVyYXRpb24sIHBhdGgpO1xuICB9XG59O1xuX2NsaWVudENvbmZpZyA9IG5ldyBXZWFrTWFwKCk7XG5faHR0cFJlcXVlc3QgPSBuZXcgV2Vha01hcCgpO1xubGV0IE9ic2VydmFibGVTYW5pdHlDbGllbnQgPSBfT2JzZXJ2YWJsZVNhbml0eUNsaWVudDtcbmNvbnN0IF9TYW5pdHlDbGllbnQgPSBjbGFzcyBfU2FuaXR5Q2xpZW50IHtcbiAgY29uc3RydWN0b3IoaHR0cFJlcXVlc3QpIHtcbiAgICBsZXQgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBkZWZhdWx0Q29uZmlnO1xuICAgIC8qKlxuICAgICAqIFByaXZhdGUgcHJvcGVydGllc1xuICAgICAqL1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2xpZW50Q29uZmlnMiwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2h0dHBSZXF1ZXN0Miwgdm9pZCAwKTtcbiAgICAvKipcbiAgICAgKiBJbnN0YW5jZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgdGhpcy5saXN0ZW4gPSBfbGlzdGVuO1xuICAgIHRoaXMuY29uZmlnKGNvbmZpZyk7XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9odHRwUmVxdWVzdDIsIGh0dHBSZXF1ZXN0KTtcbiAgICB0aGlzLmFzc2V0cyA9IG5ldyBBc3NldHNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpKTtcbiAgICB0aGlzLmRhdGFzZXRzID0gbmV3IERhdGFzZXRzQ2xpZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSk7XG4gICAgdGhpcy5wcm9qZWN0cyA9IG5ldyBQcm9qZWN0c0NsaWVudCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MikpO1xuICAgIHRoaXMudXNlcnMgPSBuZXcgVXNlcnNDbGllbnQodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpKTtcbiAgICB0aGlzLm9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZVNhbml0eUNsaWVudChodHRwUmVxdWVzdCwgY29uZmlnKTtcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgdGhlIGNsaWVudCAtIHJldHVybnMgYSBuZXcgaW5zdGFuY2VcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgX1Nhbml0eUNsaWVudChfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIHRoaXMuY29uZmlnKCkpO1xuICB9XG4gIGNvbmZpZyhuZXdDb25maWcpIHtcbiAgICBpZiAobmV3Q29uZmlnID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLl9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnMilcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudENvbmZpZzIpICYmIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50Q29uZmlnMikuYWxsb3dSZWNvbmZpZ3VyZSA9PT0gZmFsc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4aXN0aW5nIGNsaWVudCBpbnN0YW5jZSBjYW5ub3QgYmUgcmVjb25maWd1cmVkIC0gdXNlIGB3aXRoQ29uZmlnKG5ld0NvbmZpZylgIHRvIHJldHVybiBhIG5ldyBjbGllbnRcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLm9ic2VydmFibGUpIHtcbiAgICAgIHRoaXMub2JzZXJ2YWJsZS5jb25maWcobmV3Q29uZmlnKTtcbiAgICB9XG4gICAgX19wcml2YXRlU2V0KHRoaXMsIF9jbGllbnRDb25maWcyLCBpbml0Q29uZmlnKG5ld0NvbmZpZywgX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnRDb25maWcyKSB8fCB7fSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgY2xpZW50IHdpdGggYSBuZXcgKHBhcnRpYWwpIGNvbmZpZ3VyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuZXdDb25maWcgLSBOZXcgY2xpZW50IGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcywgc2hhbGxvd2x5IG1lcmdlZCB3aXRoIGV4aXN0aW5nIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHdpdGhDb25maWcobmV3Q29uZmlnKSB7XG4gICAgcmV0dXJuIG5ldyBfU2FuaXR5Q2xpZW50KF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwge1xuICAgICAgLi4udGhpcy5jb25maWcoKSxcbiAgICAgIC4uLm5ld0NvbmZpZ1xuICAgIH0pO1xuICB9XG4gIGZldGNoKHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX2ZldGNoKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgcXVlcnksIHBhcmFtcywgb3B0aW9ucykpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHNpbmdsZSBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiBJRC5cbiAgICpcbiAgICogQHBhcmFtIGlkIC0gRG9jdW1lbnQgSUQgdG8gZmV0Y2hcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICovXG4gIGdldERvY3VtZW50KGlkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX2dldERvY3VtZW50KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgaWQsIG9wdGlvbnMpKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggbXVsdGlwbGUgZG9jdW1lbnRzIGluIG9uZSByZXF1ZXN0LlxuICAgKiBTaG91bGQgYmUgdXNlZCBzcGFyaW5nbHkgLSBwZXJmb3JtaW5nIGEgcXVlcnkgaXMgdXN1YWxseSBhIGJldHRlciBvcHRpb24uXG4gICAqIFRoZSBvcmRlci9wb3NpdGlvbiBvZiBkb2N1bWVudHMgaXMgcHJlc2VydmVkIGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBhcnJheSBvZiBJRHMuXG4gICAqIElmIGFueSBvZiB0aGUgZG9jdW1lbnRzIGFyZSBtaXNzaW5nLCB0aGV5IHdpbGwgYmUgcmVwbGFjZWQgYnkgYSBgbnVsbGAgZW50cnkgaW4gdGhlIHJldHVybmVkIGFycmF5XG4gICAqXG4gICAqIEBwYXJhbSBpZHMgLSBEb2N1bWVudCBJRHMgdG8gZmV0Y2hcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICovXG4gIGdldERvY3VtZW50cyhpZHMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfZ2V0RG9jdW1lbnRzKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgaWRzLCBvcHRpb25zKSk7XG4gIH1cbiAgY3JlYXRlKGRvY3VtZW50LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGxhc3RWYWx1ZUZyb20oX2NyZWF0ZSh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIGRvY3VtZW50LCBcImNyZWF0ZVwiLCBvcHRpb25zKSk7XG4gIH1cbiAgY3JlYXRlSWZOb3RFeGlzdHMoZG9jdW1lbnQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfY3JlYXRlSWZOb3RFeGlzdHModGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCBkb2N1bWVudCwgb3B0aW9ucykpO1xuICB9XG4gIGNyZWF0ZU9yUmVwbGFjZShkb2N1bWVudCwgb3B0aW9ucykge1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9jcmVhdGVPclJlcGxhY2UodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9odHRwUmVxdWVzdDIpLCBkb2N1bWVudCwgb3B0aW9ucykpO1xuICB9XG4gIGRlbGV0ZShzZWxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfZGVsZXRlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgc2VsZWN0aW9uLCBvcHRpb25zKSk7XG4gIH1cbiAgbXV0YXRlKG9wZXJhdGlvbnMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbGFzdFZhbHVlRnJvbShfbXV0YXRlKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgb3BlcmF0aW9ucywgb3B0aW9ucykpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYnVpbGRhYmxlIHBhdGNoIG9mIG9wZXJhdGlvbnMgdG8gcGVyZm9ybVxuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0aW9uIC0gRG9jdW1lbnQgSUQsIGFuIGFycmF5IG9mIGRvY3VtZW50IElEcywgb3IgYW4gb2JqZWN0IHdpdGggYHF1ZXJ5YCBhbmQgb3B0aW9uYWwgYHBhcmFtc2AsIGRlZmluaW5nIHdoaWNoIGRvY3VtZW50KHMpIHRvIHBhdGNoXG4gICAqIEBwYXJhbSBvcGVyYXRpb25zIC0gT3B0aW9uYWwgb2JqZWN0IG9mIHBhdGNoIG9wZXJhdGlvbnMgdG8gaW5pdGlhbGl6ZSB0aGUgcGF0Y2ggaW5zdGFuY2Ugd2l0aFxuICAgKiBAcmV0dXJucyBQYXRjaCBpbnN0YW5jZSAtIGNhbGwgYC5jb21taXQoKWAgdG8gcGVyZm9ybSB0aGUgb3BlcmF0aW9ucyBkZWZpbmVkXG4gICAqL1xuICBwYXRjaChkb2N1bWVudElkLCBvcGVyYXRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBQYXRjaChkb2N1bWVudElkLCBvcGVyYXRpb25zLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHRyYW5zYWN0aW9uIG9mIG11dGF0aW9uc1xuICAgKlxuICAgKiBAcGFyYW0gb3BlcmF0aW9ucyAtIE9wdGlvbmFsIGFycmF5IG9mIG11dGF0aW9uIG9wZXJhdGlvbnMgdG8gaW5pdGlhbGl6ZSB0aGUgdHJhbnNhY3Rpb24gaW5zdGFuY2Ugd2l0aFxuICAgKi9cbiAgdHJhbnNhY3Rpb24ob3BlcmF0aW9ucykge1xuICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24ob3BlcmF0aW9ucywgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSByZXF1ZXN0IGFnYWluc3QgdGhlIFNhbml0eSBBUElcbiAgICogTk9URTogT25seSB1c2UgdGhpcyBmb3IgU2FuaXR5IEFQSSBlbmRwb2ludHMsIG5vdCBmb3IgeW91ciBvd24gQVBJcyFcbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIHJlc3BvbnNlIGJvZHlcbiAgICovXG4gIHJlcXVlc3Qob3B0aW9ucykge1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9yZXF1ZXN0KHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfaHR0cFJlcXVlc3QyKSwgb3B0aW9ucykpO1xuICB9XG4gIC8qKlxuICAgKiBQZXJmb3JtIGFuIEhUVFAgcmVxdWVzdCBhIGAvZGF0YWAgc3ViLWVuZHBvaW50XG4gICAqIE5PVEU6IENvbnNpZGVyZWQgaW50ZXJuYWwsIHRodXMgbWFya2VkIGFzIGRlcHJlY2F0ZWQuIFVzZSBgcmVxdWVzdGAgaW5zdGVhZC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgLSBVc2UgYHJlcXVlc3QoKWAgb3IgeW91ciBvd24gSFRUUCBsaWJyYXJ5IGluc3RlYWRcbiAgICogQHBhcmFtIGVuZHBvaW50IC0gRW5kcG9pbnQgdG8gaGl0IChtdXRhdGUsIHF1ZXJ5IGV0YylcbiAgICogQHBhcmFtIGJvZHkgLSBSZXF1ZXN0IGJvZHlcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYXRhUmVxdWVzdChlbmRwb2ludCwgYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiBsYXN0VmFsdWVGcm9tKF9kYXRhUmVxdWVzdCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX2h0dHBSZXF1ZXN0MiksIGVuZHBvaW50LCBib2R5LCBvcHRpb25zKSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIFNhbml0eSBBUEkgVVJMIGZvciB0aGUgVVJJIHByb3ZpZGVkXG4gICAqXG4gICAqIEBwYXJhbSB1cmkgLSBVUkkvcGF0aCB0byBidWlsZCBVUkwgZm9yXG4gICAqIEBwYXJhbSBjYW5Vc2VDZG4gLSBXaGV0aGVyIG9yIG5vdCB0byBhbGxvdyB1c2luZyB0aGUgQVBJIENETiBmb3IgdGhpcyByb3V0ZVxuICAgKi9cbiAgZ2V0VXJsKHVyaSwgY2FuVXNlQ2RuKSB7XG4gICAgcmV0dXJuIF9nZXRVcmwodGhpcywgdXJpLCBjYW5Vc2VDZG4pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBTYW5pdHkgQVBJIFVSTCBmb3IgdGhlIGRhdGEgb3BlcmF0aW9uIGFuZCBwYXRoIHByb3ZpZGVkXG4gICAqXG4gICAqIEBwYXJhbSBvcGVyYXRpb24gLSBEYXRhIG9wZXJhdGlvbiAoZWcgYHF1ZXJ5YCwgYG11dGF0ZWAsIGBsaXN0ZW5gIG9yIHNpbWlsYXIpXG4gICAqIEBwYXJhbSBwYXRoIC0gUGF0aCB0byBhcHBlbmQgYWZ0ZXIgdGhlIG9wZXJhdGlvblxuICAgKi9cbiAgZ2V0RGF0YVVybChvcGVyYXRpb24sIHBhdGgpIHtcbiAgICByZXR1cm4gX2dldERhdGFVcmwodGhpcywgb3BlcmF0aW9uLCBwYXRoKTtcbiAgfVxufTtcbl9jbGllbnRDb25maWcyID0gbmV3IFdlYWtNYXAoKTtcbl9odHRwUmVxdWVzdDIgPSBuZXcgV2Vha01hcCgpO1xubGV0IFNhbml0eUNsaWVudCA9IF9TYW5pdHlDbGllbnQ7XG5mdW5jdGlvbiBkZWZpbmVDcmVhdGVDbGllbnRFeHBvcnRzKGVudk1pZGRsZXdhcmUsIENsYXNzQ29uc3RydWN0b3IpIHtcbiAgY29uc3QgaHR0cFJlcXVlc3QgPSBkZWZpbmVIdHRwUmVxdWVzdChlbnZNaWRkbGV3YXJlLCB7fSk7XG4gIGNvbnN0IHJlcXVlc3RlciA9IGh0dHBSZXF1ZXN0LmRlZmF1bHRSZXF1ZXN0ZXI7XG4gIGNvbnN0IGNyZWF0ZUNsaWVudCA9IGNvbmZpZyA9PiBuZXcgQ2xhc3NDb25zdHJ1Y3RvcihkZWZpbmVIdHRwUmVxdWVzdChlbnZNaWRkbGV3YXJlLCB7XG4gICAgbWF4UmV0cmllczogY29uZmlnLm1heFJldHJpZXMsXG4gICAgcmV0cnlEZWxheTogY29uZmlnLnJldHJ5RGVsYXlcbiAgfSksIGNvbmZpZyk7XG4gIHJldHVybiB7XG4gICAgcmVxdWVzdGVyLFxuICAgIGNyZWF0ZUNsaWVudFxuICB9O1xufVxuZnVuY3Rpb24gZGVmaW5lRGVwcmVjYXRlZENyZWF0ZUNsaWVudChjcmVhdGVDbGllbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGRlcHJlY2F0ZWRDcmVhdGVDbGllbnQoY29uZmlnKSB7XG4gICAgcHJpbnROb0RlZmF1bHRFeHBvcnQoKTtcbiAgICByZXR1cm4gY3JlYXRlQ2xpZW50KGNvbmZpZyk7XG4gIH07XG59XG52YXIgZW52TWlkZGxld2FyZSA9IFtdO1xuY29uc3QgZXhwID0gZGVmaW5lQ3JlYXRlQ2xpZW50RXhwb3J0cyhlbnZNaWRkbGV3YXJlLCBTYW5pdHlDbGllbnQpO1xuY29uc3QgcmVxdWVzdGVyID0gZXhwLnJlcXVlc3RlcjtcbmNvbnN0IGNyZWF0ZUNsaWVudCA9IGV4cC5jcmVhdGVDbGllbnQ7XG5jb25zdCBkZXByZWNhdGVkQ3JlYXRlQ2xpZW50ID0gZGVmaW5lRGVwcmVjYXRlZENyZWF0ZUNsaWVudChjcmVhdGVDbGllbnQpO1xuZXhwb3J0IHsgQmFzZVBhdGNoLCBCYXNlVHJhbnNhY3Rpb24sIENsaWVudEVycm9yLCBPYnNlcnZhYmxlUGF0Y2gsIE9ic2VydmFibGVTYW5pdHlDbGllbnQsIE9ic2VydmFibGVUcmFuc2FjdGlvbiwgUGF0Y2gsIFNhbml0eUNsaWVudCwgU2VydmVyRXJyb3IsIFRyYW5zYWN0aW9uLCBjcmVhdGVDbGllbnQsIGRlcHJlY2F0ZWRDcmVhdGVDbGllbnQgYXMgZGVmYXVsdCwgcmVxdWVzdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5icm93c2VyLmpzLm1hcFxuIl0sIm5hbWVzIjpbImdldEl0IiwiYWRhcHRlciIsInVuc3RhYmxlX19hZGFwdGVyIiwiZW52aXJvbm1lbnQiLCJ1bnN0YWJsZV9fZW52aXJvbm1lbnQiLCJyZXRyeSIsImpzb25SZXF1ZXN0IiwianNvblJlc3BvbnNlIiwicHJvZ3Jlc3MiLCJvYnNlcnZhYmxlIiwiT2JzZXJ2YWJsZSIsImxhc3RWYWx1ZUZyb20iLCJtYXAiLCJmaWx0ZXIiLCJNQVhfSVRFTVNfSU5fRVJST1JfTUVTU0FHRSIsIkNsaWVudEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsInJlcyIsInByb3BzIiwiZXh0cmFjdEVycm9yUHJvcHMiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsIk9iamVjdCIsImFzc2lnbiIsIlNlcnZlckVycm9yIiwiYm9keSIsInJlc3BvbnNlIiwicmVzcG9uc2VCb2R5Iiwic3RyaW5naWZ5Qm9keSIsImRldGFpbHMiLCJlcnJvciIsImNvbmNhdCIsImlzTXV0YXRpb25FcnJvciIsImFsbEl0ZW1zIiwiaXRlbXMiLCJzbGljZSIsIml0ZW0iLCJfYSIsImRlc2NyaXB0aW9uIiwiQm9vbGVhbiIsIml0ZW1zU3RyIiwibGVuZ3RoIiwiam9pbiIsImh0dHBFcnJvck1lc3NhZ2UiLCJpc1BsYWluT2JqZWN0IiwidHlwZSIsIm9iaiIsIkFycmF5IiwiaXNBcnJheSIsInN0YXR1c01lc3NhZ2UiLCJtZXRob2QiLCJ1cmwiLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJ0b0xvd2VyQ2FzZSIsImlzSnNvbiIsImluZGV4T2YiLCJKU09OIiwic3RyaW5naWZ5IiwiaHR0cEVycm9yIiwib25SZXNwb25zZSIsInByaW50V2FybmluZ3MiLCJ3YXJuIiwid2FybmluZ3MiLCJmb3JFYWNoIiwibXNnIiwiY29uc29sZSIsImRlZmluZUh0dHBSZXF1ZXN0IiwiZW52TWlkZGxld2FyZSIsIl9yZWYiLCJtYXhSZXRyaWVzIiwicmV0cnlEZWxheSIsInJlcXVlc3QiLCJzaG91bGRSZXRyeSIsImltcGxlbWVudGF0aW9uIiwiaHR0cFJlcXVlc3QiLCJvcHRpb25zIiwicmVxdWVzdGVyIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwibWF4UmVkaXJlY3RzIiwiZGVmYXVsdFJlcXVlc3RlciIsImVyciIsImF0dGVtcHQiLCJpc1NhZmUiLCJ1cmkiLCJpc1F1ZXJ5Iiwic3RhcnRzV2l0aCIsImlzUmV0cmlhYmxlUmVzcG9uc2UiLCJnZXRTZWxlY3Rpb24iLCJzZWwiLCJpZCIsInF1ZXJ5IiwicGFyYW1zIiwic2VsZWN0aW9uT3B0cyIsIlZBTElEX0FTU0VUX1RZUEVTIiwiVkFMSURfSU5TRVJUX0xPQ0FUSU9OUyIsImRhdGFzZXQiLCJuYW1lIiwidGVzdCIsInByb2plY3RJZCIsInZhbGlkYXRlQXNzZXRUeXBlIiwidmFsaWRhdGVPYmplY3QiLCJvcCIsInZhbCIsInZhbGlkYXRlRG9jdW1lbnRJZCIsImluY2x1ZGVzIiwicmVxdWlyZURvY3VtZW50SWQiLCJkb2MiLCJfaWQiLCJ2YWxpZGF0ZUluc2VydCIsImF0Iiwic2VsZWN0b3IiLCJzaWduYXR1cmUiLCJ2YWxpZCIsImxvYyIsImhhc0RhdGFzZXQiLCJjb25maWciLCJyZXF1ZXN0VGFnIiwidGFnIiwiX19hY2Nlc3NDaGVjayQ2IiwibWVtYmVyIiwiaGFzIiwiVHlwZUVycm9yIiwiX19wcml2YXRlR2V0JDYiLCJnZXR0ZXIiLCJjYWxsIiwiZ2V0IiwiX19wcml2YXRlQWRkJDYiLCJ2YWx1ZSIsIldlYWtTZXQiLCJhZGQiLCJzZXQiLCJfX3ByaXZhdGVTZXQkNiIsInNldHRlciIsIl9jbGllbnQkNSIsIl9jbGllbnQyJDUiLCJCYXNlUGF0Y2giLCJzZWxlY3Rpb24iLCJvcGVyYXRpb25zIiwiYXR0cnMiLCJfYXNzaWduIiwic2V0SWZNaXNzaW5nIiwiZGlmZk1hdGNoUGF0Y2giLCJ1bnNldCIsImluYyIsImRlYyIsImluc2VydCIsImFwcGVuZCIsInByZXBlbmQiLCJzcGxpY2UiLCJzdGFydCIsImRlbGV0ZUNvdW50IiwiZGVsQWxsIiwic3RhcnRJbmRleCIsImRlbENvdW50IiwiTWF0aCIsIm1heCIsImRlbFJhbmdlIiwicmFuZ2VTZWxlY3RvciIsImlmUmV2aXNpb25JZCIsInJldiIsImlmUmV2aXNpb25JRCIsInNlcmlhbGl6ZSIsInRvSlNPTiIsInJlc2V0IiwibWVyZ2UiLCJfc2V0IiwiX09ic2VydmFibGVQYXRjaCIsImNsaWVudCIsImNsb25lIiwiY29tbWl0IiwicmV0dXJuRmlyc3QiLCJvcHRzIiwicmV0dXJuRG9jdW1lbnRzIiwibXV0YXRlIiwicGF0Y2giLCJXZWFrTWFwIiwiT2JzZXJ2YWJsZVBhdGNoIiwiX1BhdGNoIiwiUGF0Y2giLCJfX2FjY2Vzc0NoZWNrJDUiLCJfX3ByaXZhdGVHZXQkNSIsIl9fcHJpdmF0ZUFkZCQ1IiwiX19wcml2YXRlU2V0JDUiLCJfY2xpZW50JDQiLCJfY2xpZW50MiQ0IiwiZGVmYXVsdE11dGF0ZU9wdGlvbnMiLCJCYXNlVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbklkIiwidHJ4SWQiLCJjcmVhdGUiLCJfYWRkIiwiY3JlYXRlSWZOb3RFeGlzdHMiLCJjcmVhdGVPclJlcGxhY2UiLCJkZWxldGUiLCJkb2N1bWVudElkIiwibXV0IiwicHVzaCIsIl9UcmFuc2FjdGlvbiIsInBhdGNoT3JEb2N1bWVudElkIiwicGF0Y2hPcHMiLCJpc0J1aWxkZXIiLCJpc1BhdGNoIiwiVHJhbnNhY3Rpb24iLCJfT2JzZXJ2YWJsZVRyYW5zYWN0aW9uIiwiT2JzZXJ2YWJsZVRyYW5zYWN0aW9uIiwiQkFTRV9VUkwiLCJnZW5lcmF0ZUhlbHBVcmwiLCJzbHVnIiwib25jZSIsImZuIiwiZGlkQ2FsbCIsInJldHVyblZhbHVlIiwiY3JlYXRlV2FybmluZ1ByaW50ZXIiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJwcmludENkbldhcm5pbmciLCJwcmludENkblByZXZpZXdEcmFmdHNXYXJuaW5nIiwicHJpbnRCcm93c2VyVG9rZW5XYXJuaW5nIiwicHJpbnROb0FwaVZlcnNpb25TcGVjaWZpZWRXYXJuaW5nIiwicHJpbnROb0RlZmF1bHRFeHBvcnQiLCJkZWZhdWx0Q2RuSG9zdCIsImRlZmF1bHRDb25maWciLCJhcGlIb3N0IiwiYXBpVmVyc2lvbiIsInVzZVByb2plY3RIb3N0bmFtZSIsIkxPQ0FMSE9TVFMiLCJpc0xvY2FsIiwiaG9zdCIsInZhbGlkYXRlQXBpVmVyc2lvbiIsInZhbGlkYXRlQXBpVmVyc2lvbjIiLCJhcGlEYXRlIiwiRGF0ZSIsImFwaVZlcnNpb25WYWxpZCIsImdldFRpbWUiLCJ2YWxpZGF0ZUFwaVBlcnNwZWN0aXZlIiwidmFsaWRhdGVBcGlQZXJzcGVjdGl2ZTIiLCJwZXJzcGVjdGl2ZSIsImluaXRDb25maWciLCJwcmV2Q29uZmlnIiwic3BlY2lmaWVkQ29uZmlnIiwibmV3Q29uZmlnIiwicHJvamVjdEJhc2VkIiwiUHJvbWlzZSIsImhlbHBVcmwiLCJpc0Jyb3dzZXIiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwiaXNMb2NhbGhvc3QiLCJ0b2tlbiIsImlnbm9yZUJyb3dzZXJUb2tlbldhcm5pbmciLCJ1c2VDZG4iLCJyZXF1ZXN0VGFnUHJlZml4IiwicmVwbGFjZSIsImlzRGVmYXVsdEFwaSIsIndpdGhDcmVkZW50aWFscyIsImhvc3RQYXJ0cyIsInNwbGl0IiwicHJvdG9jb2wiLCJjZG5Ib3N0IiwiY2RuVXJsIiwicHJvamVjdEhlYWRlciIsInJlcXVlc3RPcHRpb25zIiwib3ZlcnJpZGVzIiwiQXV0aG9yaXphdGlvbiIsInVzZUdsb2JhbEFwaSIsInRpbWVvdXQiLCJwcm94eSIsImpzb24iLCJmZXRjaCIsImVuY29kZVF1ZXJ5U3RyaW5nIiwiX3JlZjIiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJrZXkiLCJlbnRyaWVzIiwiZXhjbHVkZUZhbHNleSIsInBhcmFtIiwiZGVmVmFsdWUiLCJnZXRNdXRhdGlvblF1ZXJ5IiwiZHJ5UnVuIiwicmV0dXJuSWRzIiwidmlzaWJpbGl0eSIsImF1dG9HZW5lcmF0ZUFycmF5S2V5cyIsInNraXBDcm9zc0RhdGFzZXRSZWZlcmVuY2VWYWxpZGF0aW9uIiwiaXNSZXNwb25zZSIsImV2ZW50IiwiZ2V0Qm9keSIsImluZGV4QnkiLCJkb2NzIiwiYXR0ciIsInJlZHVjZSIsImluZGV4ZWQiLCJnZXRRdWVyeVNpemVMaW1pdCIsIl9mZXRjaCIsIm1hcFJlc3BvbnNlIiwiZmlsdGVyUmVzcG9uc2UiLCJyZXN1bHQiLCJjYWNoZSIsIm5leHQiLCJ1c2VBYm9ydFNpZ25hbCIsInNpZ25hbCIsInJlcU9wdHMiLCJfZGF0YVJlcXVlc3QiLCJwaXBlIiwiX2dldERvY3VtZW50IiwiX2dldERhdGFVcmwiLCJfcmVxdWVzdE9ic2VydmFibGUiLCJkb2N1bWVudHMiLCJfZ2V0RG9jdW1lbnRzIiwiaWRzIiwiX2NyZWF0ZUlmTm90RXhpc3RzIiwiX2NyZWF0ZSIsIl9jcmVhdGVPclJlcGxhY2UiLCJfZGVsZXRlIiwibXV0YXRpb25zIiwiX211dGF0ZSIsIm11dHMiLCJlbmRwb2ludCIsImlzTXV0YXRpb24iLCJzdHJRdWVyeSIsInVzZUdldCIsInN0cmluZ1F1ZXJ5IiwicmVxT3B0aW9ucyIsInJlc3VsdFNvdXJjZU1hcCIsImNhblVzZUNkbiIsInJlc3VsdHMiLCJkb2N1bWVudCIsIm11dGF0aW9uIiwiX2dldFVybCIsInN1YnNjcmliZXIiLCJzdWJzY3JpYmUiLCJfd2l0aEFib3J0U2lnbmFsIiwiX3JlcXVlc3QiLCJvcGVyYXRpb24iLCJwYXRoIiwiY2F0YWxvZyIsImJhc2VVcmkiLCJiYXNlIiwiaW5wdXQiLCJvYnNlcnZlciIsImFib3J0IiwiX2NyZWF0ZUFib3J0RXJyb3IiLCJhYm9ydGVkIiwic3Vic2NyaXB0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1bnN1YnNjcmliZSIsImlzRG9tRXhjZXB0aW9uU3VwcG9ydGVkIiwiZ2xvYmFsVGhpcyIsIkRPTUV4Y2VwdGlvbiIsIl9iIiwicmVhc29uIiwiX19hY2Nlc3NDaGVjayQ0IiwiX19wcml2YXRlR2V0JDQiLCJfX3ByaXZhdGVBZGQkNCIsIl9fcHJpdmF0ZVNldCQ0IiwiX2NsaWVudCQzIiwiX2h0dHBSZXF1ZXN0JDQiLCJfY2xpZW50MiQzIiwiX2h0dHBSZXF1ZXN0MiQ0IiwiT2JzZXJ2YWJsZUFzc2V0c0NsaWVudCIsInVwbG9hZCIsImFzc2V0VHlwZSIsIl91cGxvYWQiLCJBc3NldHNDbGllbnQiLCJtZXRhIiwiZXh0cmFjdCIsImFzc2V0RW5kcG9pbnQiLCJvcHRpb25zRnJvbUZpbGUiLCJsYWJlbCIsInRpdGxlIiwiY3JlZGl0TGluZSIsImZpbGVuYW1lIiwic291cmNlIiwic291cmNlSWQiLCJzb3VyY2VOYW1lIiwic291cmNlVXJsIiwiZmlsZSIsIkZpbGUiLCJwcmVzZXJ2ZUZpbGVuYW1lIiwiZGVmYXVsdHMiLCJrZXlzIiwidGFyZ2V0IiwicHJvcCIsInBpY2siLCJNQVhfVVJMX0xFTkdUSCIsInBvc3NpYmxlT3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiaW5jbHVkZVJlc3VsdCIsIl9saXN0ZW4iLCJsaXN0ZW5PcHRzIiwicXMiLCJsaXN0ZW5Gb3IiLCJldmVudHMiLCJzaG91bGRFbWl0UmVjb25uZWN0IiwiZXNPcHRpb25zIiwiZXMiLCJnZXRFdmVudFNvdXJjZSIsInRoZW4iLCJldmVudFNvdXJjZSIsImNhdGNoIiwic3RvcCIsInJlY29ubmVjdFRpbWVyIiwic3RvcHBlZCIsIm9uRXJyb3IiLCJlbWl0UmVjb25uZWN0IiwicmVhZHlTdGF0ZSIsIkNMT1NFRCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJvcGVuIiwib25DaGFubmVsRXJyb3IiLCJjb29lcmNlRXJyb3IiLCJvbk1lc3NhZ2UiLCJldnQiLCJwYXJzZUV2ZW50Iiwib25EaXNjb25uZWN0IiwiY29tcGxldGUiLCJjbG9zZSIsImRlZmF1bHQiLCJFdmVudFNvdXJjZSIsImV2cyIsImRhdGEiLCJwYXJzZSIsImV4dHJhY3RFcnJvck1lc3NhZ2UiLCJfX2FjY2Vzc0NoZWNrJDMiLCJfX3ByaXZhdGVHZXQkMyIsIl9fcHJpdmF0ZUFkZCQzIiwiX19wcml2YXRlU2V0JDMiLCJfY2xpZW50JDIiLCJfaHR0cFJlcXVlc3QkMyIsIl9jbGllbnQyJDIiLCJfaHR0cFJlcXVlc3QyJDMiLCJPYnNlcnZhYmxlRGF0YXNldHNDbGllbnQiLCJfbW9kaWZ5IiwiZWRpdCIsImxpc3QiLCJEYXRhc2V0c0NsaWVudCIsIl9fYWNjZXNzQ2hlY2skMiIsIl9fcHJpdmF0ZUdldCQyIiwiX19wcml2YXRlQWRkJDIiLCJfX3ByaXZhdGVTZXQkMiIsIl9jbGllbnQkMSIsIl9odHRwUmVxdWVzdCQyIiwiX2NsaWVudDIkMSIsIl9odHRwUmVxdWVzdDIkMiIsIk9ic2VydmFibGVQcm9qZWN0c0NsaWVudCIsImluY2x1ZGVNZW1iZXJzIiwiZ2V0QnlJZCIsIlByb2plY3RzQ2xpZW50IiwiX19hY2Nlc3NDaGVjayQxIiwiX19wcml2YXRlR2V0JDEiLCJfX3ByaXZhdGVBZGQkMSIsIl9fcHJpdmF0ZVNldCQxIiwiX2NsaWVudCIsIl9odHRwUmVxdWVzdCQxIiwiX2NsaWVudDIiLCJfaHR0cFJlcXVlc3QyJDEiLCJPYnNlcnZhYmxlVXNlcnNDbGllbnQiLCJVc2Vyc0NsaWVudCIsIl9fYWNjZXNzQ2hlY2siLCJfX3ByaXZhdGVHZXQiLCJfX3ByaXZhdGVBZGQiLCJfX3ByaXZhdGVTZXQiLCJfY2xpZW50Q29uZmlnIiwiX2h0dHBSZXF1ZXN0IiwiX2NsaWVudENvbmZpZzIiLCJfaHR0cFJlcXVlc3QyIiwiX09ic2VydmFibGVTYW5pdHlDbGllbnQiLCJsaXN0ZW4iLCJhc3NldHMiLCJkYXRhc2V0cyIsInByb2plY3RzIiwidXNlcnMiLCJhbGxvd1JlY29uZmlndXJlIiwid2l0aENvbmZpZyIsImdldERvY3VtZW50IiwiZ2V0RG9jdW1lbnRzIiwidHJhbnNhY3Rpb24iLCJnZXRVcmwiLCJnZXREYXRhVXJsIiwiT2JzZXJ2YWJsZVNhbml0eUNsaWVudCIsIl9TYW5pdHlDbGllbnQiLCJkYXRhUmVxdWVzdCIsIlNhbml0eUNsaWVudCIsImRlZmluZUNyZWF0ZUNsaWVudEV4cG9ydHMiLCJDbGFzc0NvbnN0cnVjdG9yIiwiY3JlYXRlQ2xpZW50IiwiZGVmaW5lRGVwcmVjYXRlZENyZWF0ZUNsaWVudCIsImRlcHJlY2F0ZWRDcmVhdGVDbGllbnQiLCJleHAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/client/dist/index.browser.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodeIntoResult: () => (/* binding */ encodeIntoResult),\n/* harmony export */   parseNormalisedJsonPath: () => (/* binding */ parseNormalisedJsonPath),\n/* harmony export */   resolveMapping: () => (/* binding */ resolveMapping),\n/* harmony export */   walkMap: () => (/* binding */ walkMap)\n/* harmony export */ });\nconst ESCAPE = {\n    \"\\f\": \"\\\\f\",\n    \"\\n\": \"\\\\n\",\n    \"\\r\": \"\\\\r\",\n    \"\t\": \"\\\\t\",\n    \"'\": \"\\\\'\",\n    \"\\\\\": \"\\\\\\\\\"\n};\nconst UNESCAPE = {\n    \"\\\\f\": \"\\f\",\n    \"\\\\n\": \"\\n\",\n    \"\\\\r\": \"\\r\",\n    \"\\\\t\": \"\t\",\n    \"\\\\'\": \"'\",\n    \"\\\\\\\\\": \"\\\\\"\n};\nfunction normalisedJsonPath(path) {\n    return \"$\".concat(path.map((key)=>{\n        if (typeof key === \"string\") {\n            const escapedKey = key.replace(/[\\f\\n\\r\\t'\\\\]/g, (match)=>{\n                return ESCAPE[match];\n            });\n            return \"['\".concat(escapedKey, \"']\");\n        }\n        return \"[\".concat(key, \"]\");\n    }).join(\"\"));\n}\nfunction parseNormalisedJsonPath(path) {\n    const parsed = [];\n    const parseRe = /\\['(.*?)'\\]|\\[(\\d+)\\]/g;\n    let match;\n    while((match = parseRe.exec(path)) !== null){\n        if (match[1] !== void 0) {\n            const key = match[1].replace(/\\\\(\\\\|f|n|r|t|')/g, (m)=>{\n                return UNESCAPE[m];\n            });\n            parsed.push(key);\n            continue;\n        }\n        if (match[2] !== void 0) {\n            parsed.push(parseInt(match[2], 10));\n            continue;\n        }\n    }\n    return parsed;\n}\nfunction isRecord(value) {\n    return typeof value === \"object\" && value !== null;\n}\nfunction isArray(value) {\n    return value !== null && Array.isArray(value);\n}\nfunction encode(result, csm, encoder) {\n    return encodeIntoResult(result, csm, encoder);\n}\nfunction encodeIntoResult(result, csm, encoder) {\n    return walkMap(result, (value, path)=>{\n        if (typeof value !== \"string\") {\n            return value;\n        }\n        const resolveMappingResult = resolveMapping(path, csm);\n        if (!resolveMappingResult) {\n            return value;\n        }\n        const [mapping, , pathSuffix] = resolveMappingResult;\n        if (mapping.type !== \"value\") {\n            return value;\n        }\n        if (mapping.source.type !== \"documentValue\") {\n            return value;\n        }\n        const sourceDocument = // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        csm.documents[mapping.source.document];\n        const sourcePath = csm.paths[mapping.source.path];\n        return encoder(value, sourceDocument, parseNormalisedJsonPath(sourcePath + pathSuffix));\n    });\n}\nfunction walkMap(value, mappingFn) {\n    let path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    if (isArray(value)) {\n        return value.map((v, idx)=>walkMap(v, mappingFn, path.concat(idx)));\n    }\n    if (isRecord(value)) {\n        return Object.fromEntries(Object.entries(value).map((_ref)=>{\n            let [k, v] = _ref;\n            return [\n                k,\n                walkMap(v, mappingFn, path.concat(k))\n            ];\n        }));\n    }\n    return mappingFn(value, path);\n}\nfunction resolveMapping(resultPath, csm, logger) {\n    var _a;\n    const resultJsonPath = normalisedJsonPath(resultPath);\n    if (!csm.mappings) {\n        (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"Missing mappings\", {\n            resultSourceMap: csm\n        });\n        return void 0;\n    }\n    if (csm.mappings[resultJsonPath] !== void 0) {\n        return [\n            csm.mappings[resultJsonPath],\n            resultJsonPath,\n            \"\"\n        ];\n    }\n    const mappings = Object.entries(csm.mappings).filter((_ref2)=>{\n        let [key] = _ref2;\n        return resultJsonPath.startsWith(key);\n    }).sort((_ref3, _ref4)=>{\n        let [key1] = _ref3;\n        let [key2] = _ref4;\n        return key2.length - key1.length;\n    });\n    if (mappings.length == 0) {\n        return void 0;\n    }\n    const [matchedPath, mapping] = mappings[0];\n    const pathSuffix = resultJsonPath.substring(matchedPath.length);\n    return [\n        mapping,\n        matchedPath,\n        pathSuffix\n    ];\n}\n //# sourceMappingURL=sourcemap-r-TuProy.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L3ByZXZpZXcta2l0L2Rpc3QvX2NodW5rcy9zb3VyY2VtYXAtci1UdVByb3kuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxNQUFNQSxTQUFTO0lBQ2IsTUFBTTtJQUNOLE1BQU07SUFDTixNQUFNO0lBQ04sS0FBSztJQUNMLEtBQUs7SUFDTCxNQUFNO0FBQ1I7QUFDQSxNQUFNQyxXQUFXO0lBQ2YsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsT0FBTztJQUNQLE9BQU87SUFDUCxRQUFRO0FBQ1Y7QUFDQSxTQUFTQyxtQkFBbUJDLElBQUk7SUFDOUIsT0FBTyxJQUFJQyxNQUFNLENBQUNELEtBQUtFLEdBQUcsQ0FBQ0MsQ0FBQUE7UUFDekIsSUFBSSxPQUFPQSxRQUFRLFVBQVU7WUFDM0IsTUFBTUMsYUFBYUQsSUFBSUUsT0FBTyxDQUFDLGtCQUFrQkMsQ0FBQUE7Z0JBQy9DLE9BQU9ULE1BQU0sQ0FBQ1MsTUFBTTtZQUN0QjtZQUNBLE9BQU8sS0FBS0wsTUFBTSxDQUFDRyxZQUFZO1FBQ2pDO1FBQ0EsT0FBTyxJQUFJSCxNQUFNLENBQUNFLEtBQUs7SUFDekIsR0FBR0ksSUFBSSxDQUFDO0FBQ1Y7QUFDQSxTQUFTQyx3QkFBd0JSLElBQUk7SUFDbkMsTUFBTVMsU0FBUyxFQUFFO0lBQ2pCLE1BQU1DLFVBQVU7SUFDaEIsSUFBSUo7SUFDSixNQUFPLENBQUNBLFFBQVFJLFFBQVFDLElBQUksQ0FBQ1gsS0FBSSxNQUFPLEtBQU07UUFDNUMsSUFBSU0sS0FBSyxDQUFDLEVBQUUsS0FBSyxLQUFLLEdBQUc7WUFDdkIsTUFBTUgsTUFBTUcsS0FBSyxDQUFDLEVBQUUsQ0FBQ0QsT0FBTyxDQUFDLHFCQUFxQk8sQ0FBQUE7Z0JBQ2hELE9BQU9kLFFBQVEsQ0FBQ2MsRUFBRTtZQUNwQjtZQUNBSCxPQUFPSSxJQUFJLENBQUNWO1lBQ1o7UUFDRjtRQUNBLElBQUlHLEtBQUssQ0FBQyxFQUFF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Q3JELElBQUksR0FBR3FEO1FBQ1osT0FBT04sZUFBZU8sVUFBVSxDQUFDdEQ7SUFDbkMsR0FBR3VELElBQUksQ0FBQyxDQUFDQyxPQUFPQztRQUNkLElBQUksQ0FBQ0MsS0FBSyxHQUFHRjtRQUNiLElBQUksQ0FBQ0csS0FBSyxHQUFHRjtRQUNiLE9BQU9FLEtBQUt4QixNQUFNLEdBQUd1QixLQUFLdkIsTUFBTTtJQUNsQztJQUNBLElBQUlhLFNBQVNiLE1BQU0sSUFBSSxHQUFHO1FBQ3hCLE9BQU8sS0FBSztJQUNkO0lBQ0EsTUFBTSxDQUFDeUIsYUFBYXBDLFFBQVEsR0FBR3dCLFFBQVEsQ0FBQyxFQUFFO0lBQzFDLE1BQU12QixhQUFhc0IsZUFBZWMsU0FBUyxDQUFDRCxZQUFZekIsTUFBTTtJQUM5RCxPQUFPO1FBQUNYO1FBQVNvQztRQUFhbkM7S0FBVztBQUMzQztBQUNzRixDQUN0Riw4Q0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L3ByZXZpZXcta2l0L2Rpc3QvX2NodW5rcy9zb3VyY2VtYXAtci1UdVByb3kuanM/YjYxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFU0NBUEUgPSB7XG4gIFwiXFxmXCI6IFwiXFxcXGZcIixcbiAgXCJcXG5cIjogXCJcXFxcblwiLFxuICBcIlxcclwiOiBcIlxcXFxyXCIsXG4gIFwiXHRcIjogXCJcXFxcdFwiLFxuICBcIidcIjogXCJcXFxcJ1wiLFxuICBcIlxcXFxcIjogXCJcXFxcXFxcXFwiXG59O1xuY29uc3QgVU5FU0NBUEUgPSB7XG4gIFwiXFxcXGZcIjogXCJcXGZcIixcbiAgXCJcXFxcblwiOiBcIlxcblwiLFxuICBcIlxcXFxyXCI6IFwiXFxyXCIsXG4gIFwiXFxcXHRcIjogXCJcdFwiLFxuICBcIlxcXFwnXCI6IFwiJ1wiLFxuICBcIlxcXFxcXFxcXCI6IFwiXFxcXFwiXG59O1xuZnVuY3Rpb24gbm9ybWFsaXNlZEpzb25QYXRoKHBhdGgpIHtcbiAgcmV0dXJuIFwiJFwiLmNvbmNhdChwYXRoLm1hcChrZXkgPT4ge1xuICAgIGlmICh0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBlc2NhcGVkS2V5ID0ga2V5LnJlcGxhY2UoL1tcXGZcXG5cXHJcXHQnXFxcXF0vZywgbWF0Y2ggPT4ge1xuICAgICAgICByZXR1cm4gRVNDQVBFW21hdGNoXTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIFwiWydcIi5jb25jYXQoZXNjYXBlZEtleSwgXCInXVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIFwiW1wiLmNvbmNhdChrZXksIFwiXVwiKTtcbiAgfSkuam9pbihcIlwiKSk7XG59XG5mdW5jdGlvbiBwYXJzZU5vcm1hbGlzZWRKc29uUGF0aChwYXRoKSB7XG4gIGNvbnN0IHBhcnNlZCA9IFtdO1xuICBjb25zdCBwYXJzZVJlID0gL1xcWycoLio/KSdcXF18XFxbKFxcZCspXFxdL2c7XG4gIGxldCBtYXRjaDtcbiAgd2hpbGUgKChtYXRjaCA9IHBhcnNlUmUuZXhlYyhwYXRoKSkgIT09IG51bGwpIHtcbiAgICBpZiAobWF0Y2hbMV0gIT09IHZvaWQgMCkge1xuICAgICAgY29uc3Qga2V5ID0gbWF0Y2hbMV0ucmVwbGFjZSgvXFxcXChcXFxcfGZ8bnxyfHR8JykvZywgbSA9PiB7XG4gICAgICAgIHJldHVybiBVTkVTQ0FQRVttXTtcbiAgICAgIH0pO1xuICAgICAgcGFyc2VkLnB1c2goa2V5KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAobWF0Y2hbMl0gIT09IHZvaWQgMCkge1xuICAgICAgcGFyc2VkLnB1c2gocGFyc2VJbnQobWF0Y2hbMl0sIDEwKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcnNlZDtcbn1cbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGVuY29kZShyZXN1bHQsIGNzbSwgZW5jb2Rlcikge1xuICByZXR1cm4gZW5jb2RlSW50b1Jlc3VsdChyZXN1bHQsIGNzbSwgZW5jb2Rlcik7XG59XG5mdW5jdGlvbiBlbmNvZGVJbnRvUmVzdWx0KHJlc3VsdCwgY3NtLCBlbmNvZGVyKSB7XG4gIHJldHVybiB3YWxrTWFwKHJlc3VsdCwgKHZhbHVlLCBwYXRoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCByZXNvbHZlTWFwcGluZ1Jlc3VsdCA9IHJlc29sdmVNYXBwaW5nKHBhdGgsIGNzbSk7XG4gICAgaWYgKCFyZXNvbHZlTWFwcGluZ1Jlc3VsdCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBbbWFwcGluZywsIHBhdGhTdWZmaXhdID0gcmVzb2x2ZU1hcHBpbmdSZXN1bHQ7XG4gICAgaWYgKG1hcHBpbmcudHlwZSAhPT0gXCJ2YWx1ZVwiKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmIChtYXBwaW5nLnNvdXJjZS50eXBlICE9PSBcImRvY3VtZW50VmFsdWVcIikge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBzb3VyY2VEb2N1bWVudCA9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICBjc20uZG9jdW1lbnRzW21hcHBpbmcuc291cmNlLmRvY3VtZW50XTtcbiAgICBjb25zdCBzb3VyY2VQYXRoID0gY3NtLnBhdGhzW21hcHBpbmcuc291cmNlLnBhdGhdO1xuICAgIHJldHVybiBlbmNvZGVyKHZhbHVlLCBzb3VyY2VEb2N1bWVudCwgcGFyc2VOb3JtYWxpc2VkSnNvblBhdGgoc291cmNlUGF0aCArIHBhdGhTdWZmaXgpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiB3YWxrTWFwKHZhbHVlLCBtYXBwaW5nRm4pIHtcbiAgbGV0IHBhdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IFtdO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUubWFwKCh2LCBpZHgpID0+IHdhbGtNYXAodiwgbWFwcGluZ0ZuLCBwYXRoLmNvbmNhdChpZHgpKSk7XG4gIH1cbiAgaWYgKGlzUmVjb3JkKHZhbHVlKSkge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModmFsdWUpLm1hcChfcmVmID0+IHtcbiAgICAgIGxldCBbaywgdl0gPSBfcmVmO1xuICAgICAgcmV0dXJuIFtrLCB3YWxrTWFwKHYsIG1hcHBpbmdGbiwgcGF0aC5jb25jYXQoaykpXTtcbiAgICB9KSk7XG4gIH1cbiAgcmV0dXJuIG1hcHBpbmdGbih2YWx1ZSwgcGF0aCk7XG59XG5mdW5jdGlvbiByZXNvbHZlTWFwcGluZyhyZXN1bHRQYXRoLCBjc20sIGxvZ2dlcikge1xuICB2YXIgX2E7XG4gIGNvbnN0IHJlc3VsdEpzb25QYXRoID0gbm9ybWFsaXNlZEpzb25QYXRoKHJlc3VsdFBhdGgpO1xuICBpZiAoIWNzbS5tYXBwaW5ncykge1xuICAgIChfYSA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChsb2dnZXIsIFwiTWlzc2luZyBtYXBwaW5nc1wiLCB7XG4gICAgICByZXN1bHRTb3VyY2VNYXA6IGNzbVxuICAgIH0pO1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgaWYgKGNzbS5tYXBwaW5nc1tyZXN1bHRKc29uUGF0aF0gIT09IHZvaWQgMCkge1xuICAgIHJldHVybiBbY3NtLm1hcHBpbmdzW3Jlc3VsdEpzb25QYXRoXSwgcmVzdWx0SnNvblBhdGgsIFwiXCJdO1xuICB9XG4gIGNvbnN0IG1hcHBpbmdzID0gT2JqZWN0LmVudHJpZXMoY3NtLm1hcHBpbmdzKS5maWx0ZXIoX3JlZjIgPT4ge1xuICAgIGxldCBba2V5XSA9IF9yZWYyO1xuICAgIHJldHVybiByZXN1bHRKc29uUGF0aC5zdGFydHNXaXRoKGtleSk7XG4gIH0pLnNvcnQoKF9yZWYzLCBfcmVmNCkgPT4ge1xuICAgIGxldCBba2V5MV0gPSBfcmVmMztcbiAgICBsZXQgW2tleTJdID0gX3JlZjQ7XG4gICAgcmV0dXJuIGtleTIubGVuZ3RoIC0ga2V5MS5sZW5ndGg7XG4gIH0pO1xuICBpZiAobWFwcGluZ3MubGVuZ3RoID09IDApIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIGNvbnN0IFttYXRjaGVkUGF0aCwgbWFwcGluZ10gPSBtYXBwaW5nc1swXTtcbiAgY29uc3QgcGF0aFN1ZmZpeCA9IHJlc3VsdEpzb25QYXRoLnN1YnN0cmluZyhtYXRjaGVkUGF0aC5sZW5ndGgpO1xuICByZXR1cm4gW21hcHBpbmcsIG1hdGNoZWRQYXRoLCBwYXRoU3VmZml4XTtcbn1cbmV4cG9ydCB7IGVuY29kZSwgZW5jb2RlSW50b1Jlc3VsdCwgcGFyc2VOb3JtYWxpc2VkSnNvblBhdGgsIHJlc29sdmVNYXBwaW5nLCB3YWxrTWFwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zb3VyY2VtYXAtci1UdVByb3kuanMubWFwXG4iXSwibmFtZXMiOlsiRVNDQVBFIiwiVU5FU0NBUEUiLCJub3JtYWxpc2VkSnNvblBhdGgiLCJwYXRoIiwiY29uY2F0IiwibWFwIiwia2V5IiwiZXNjYXBlZEtleSIsInJlcGxhY2UiLCJtYXRjaCIsImpvaW4iLCJwYXJzZU5vcm1hbGlzZWRKc29uUGF0aCIsInBhcnNlZCIsInBhcnNlUmUiLCJleGVjIiwibSIsInB1c2giLCJwYXJzZUludCIsImlzUmVjb3JkIiwidmFsdWUiLCJpc0FycmF5IiwiQXJyYXkiLCJlbmNvZGUiLCJyZXN1bHQiLCJjc20iLCJlbmNvZGVyIiwiZW5jb2RlSW50b1Jlc3VsdCIsIndhbGtNYXAiLCJyZXNvbHZlTWFwcGluZ1Jlc3VsdCIsInJlc29sdmVNYXBwaW5nIiwibWFwcGluZyIsInBhdGhTdWZmaXgiLCJ0eXBlIiwic291cmNlIiwic291cmNlRG9jdW1lbnQiLCJkb2N1bWVudHMiLCJkb2N1bWVudCIsInNvdXJjZVBhdGgiLCJwYXRocyIsIm1hcHBpbmdGbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInYiLCJpZHgiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJfcmVmIiwiayIsInJlc3VsdFBhdGgiLCJsb2dnZXIiLCJfYSIsInJlc3VsdEpzb25QYXRoIiwibWFwcGluZ3MiLCJlcnJvciIsImNhbGwiLCJyZXN1bHRTb3VyY2VNYXAiLCJmaWx0ZXIiLCJfcmVmMiIsInN0YXJ0c1dpdGgiLCJzb3J0IiwiX3JlZjMiLCJfcmVmNCIsImtleTEiLCJrZXkyIiwibWF0Y2hlZFBhdGgiLCJzdWJzdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodeIntoResult: () => (/* binding */ encodeIntoResult),\n/* harmony export */   parseNormalisedJsonPath: () => (/* binding */ parseNormalisedJsonPath),\n/* harmony export */   resolveMapping: () => (/* binding */ resolveMapping),\n/* harmony export */   walkMap: () => (/* binding */ walkMap)\n/* harmony export */ });\nconst ESCAPE = {\n    \"\\f\": \"\\\\f\",\n    \"\\n\": \"\\\\n\",\n    \"\\r\": \"\\\\r\",\n    \"\t\": \"\\\\t\",\n    \"'\": \"\\\\'\",\n    \"\\\\\": \"\\\\\\\\\"\n};\nconst UNESCAPE = {\n    \"\\\\f\": \"\\f\",\n    \"\\\\n\": \"\\n\",\n    \"\\\\r\": \"\\r\",\n    \"\\\\t\": \"\t\",\n    \"\\\\'\": \"'\",\n    \"\\\\\\\\\": \"\\\\\"\n};\nfunction normalisedJsonPath(path) {\n    return \"$\".concat(path.map((key)=>{\n        if (typeof key === \"string\") {\n            const escapedKey = key.replace(/[\\f\\n\\r\\t'\\\\]/g, (match)=>{\n                return ESCAPE[match];\n            });\n            return \"['\".concat(escapedKey, \"']\");\n        }\n        return \"[\".concat(key, \"]\");\n    }).join(\"\"));\n}\nfunction parseNormalisedJsonPath(path) {\n    const parsed = [];\n    const parseRe = /\\['(.*?)'\\]|\\[(\\d+)\\]/g;\n    let match;\n    while((match = parseRe.exec(path)) !== null){\n        if (match[1] !== void 0) {\n            const key = match[1].replace(/\\\\(\\\\|f|n|r|t|')/g, (m)=>{\n                return UNESCAPE[m];\n            });\n            parsed.push(key);\n            continue;\n        }\n        if (match[2] !== void 0) {\n            parsed.push(parseInt(match[2], 10));\n            continue;\n        }\n    }\n    return parsed;\n}\nfunction isRecord(value) {\n    return typeof value === \"object\" && value !== null;\n}\nfunction isArray(value) {\n    return value !== null && Array.isArray(value);\n}\nfunction encode(result, csm, encoder) {\n    return encodeIntoResult(result, csm, encoder);\n}\nfunction encodeIntoResult(result, csm, encoder) {\n    return walkMap(result, (value, path)=>{\n        if (typeof value !== \"string\") {\n            return value;\n        }\n        const resolveMappingResult = resolveMapping(path, csm);\n        if (!resolveMappingResult) {\n            return value;\n        }\n        const [mapping, , pathSuffix] = resolveMappingResult;\n        if (mapping.type !== \"value\") {\n            return value;\n        }\n        if (mapping.source.type !== \"documentValue\") {\n            return value;\n        }\n        const sourceDocument = // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        csm.documents[mapping.source.document];\n        const sourcePath = csm.paths[mapping.source.path];\n        return encoder(value, sourceDocument, parseNormalisedJsonPath(sourcePath + pathSuffix));\n    });\n}\nfunction walkMap(value, mappingFn) {\n    let path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    if (isArray(value)) {\n        return value.map((v, idx)=>walkMap(v, mappingFn, path.concat(idx)));\n    }\n    if (isRecord(value)) {\n        return Object.fromEntries(Object.entries(value).map((_ref)=>{\n            let [k, v] = _ref;\n            return [\n                k,\n                walkMap(v, mappingFn, path.concat(k))\n            ];\n        }));\n    }\n    return mappingFn(value, path);\n}\nfunction resolveMapping(resultPath, csm, logger) {\n    var _a;\n    const resultJsonPath = normalisedJsonPath(resultPath);\n    if (!csm.mappings) {\n        (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"Missing mappings\", {\n            resultSourceMap: csm\n        });\n        return void 0;\n    }\n    if (csm.mappings[resultJsonPath] !== void 0) {\n        return [\n            csm.mappings[resultJsonPath],\n            resultJsonPath,\n            \"\"\n        ];\n    }\n    const mappings = Object.entries(csm.mappings).filter((_ref2)=>{\n        let [key] = _ref2;\n        return resultJsonPath.startsWith(key);\n    }).sort((_ref3, _ref4)=>{\n        let [key1] = _ref3;\n        let [key2] = _ref4;\n        return key2.length - key1.length;\n    });\n    if (mappings.length == 0) {\n        return void 0;\n    }\n    const [matchedPath, mapping] = mappings[0];\n    const pathSuffix = resultJsonPath.substring(matchedPath.length);\n    return [\n        mapping,\n        matchedPath,\n        pathSuffix\n    ];\n}\n //# sourceMappingURL=sourcemap-r-TuProy.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L19jaHVua3Mvc291cmNlbWFwLXItVHVQcm95LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsTUFBTUEsU0FBUztJQUNiLE1BQU07SUFDTixNQUFNO0lBQ04sTUFBTTtJQUNOLEtBQUs7SUFDTCxLQUFLO0lBQ0wsTUFBTTtBQUNSO0FBQ0EsTUFBTUMsV0FBVztJQUNmLE9BQU87SUFDUCxPQUFPO0lBQ1AsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtBQUNWO0FBQ0EsU0FBU0MsbUJBQW1CQyxJQUFJO0lBQzlCLE9BQU8sSUFBSUMsTUFBTSxDQUFDRCxLQUFLRSxHQUFHLENBQUNDLENBQUFBO1FBQ3pCLElBQUksT0FBT0EsUUFBUSxVQUFVO1lBQzNCLE1BQU1DLGFBQWFELElBQUlFLE9BQU8sQ0FBQyxrQkFBa0JDLENBQUFBO2dCQUMvQyxPQUFPVCxNQUFNLENBQUNTLE1BQU07WUFDdEI7WUFDQSxPQUFPLEtBQUtMLE1BQU0sQ0FBQ0csWUFBWTtRQUNqQztRQUNBLE9BQU8sSUFBSUgsTUFBTSxDQUFDRSxLQUFLO0lBQ3pCLEdBQUdJLElBQUksQ0FBQztBQUNWO0FBQ0EsU0FBU0Msd0JBQXdCUixJQUFJO0lBQ25DLE1BQU1TLFNBQVMsRUFBRTtJQUNqQixNQUFNQyxVQUFVO0lBQ2hCLElBQUlKO0lBQ0osTUFBTyxDQUFDQSxRQUFRSSxRQUFRQyxJQUFJLENBQUNYLEtBQUksTUFBTyxLQUFNO1FBQzVDLElBQUlNLEtBQUssQ0FBQyxFQUFFLEtBQUssS0FBSyxHQUFHO1lBQ3ZCLE1BQU1ILE1BQU1HLEtBQUssQ0FBQyxFQUFFLENBQUNELE9BQU8sQ0FBQyxxQkFBcUJPLENBQUFBO2dCQUNoRCxPQUFPZCxRQUFRLENBQUNjLEVBQUU7WUFDcEI7WUFDQUgsT0FBT0ksSUFBSSxDQUFDVjtZQUNaO1FBQ0Y7UUFDQSxJQUFJRyxLQUFLLENBQUMsRUFBRSxLQUFLLEtBQUss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QUdxRDtRQUNaLE9BQU9OLGVBQWVPLFVBQVUsQ0FBQ3REO0lBQ25DLEdBQUd1RCxJQUFJLENBQUMsQ0FBQ0MsT0FBT0M7UUFDZCxJQUFJLENBQUNDLEtBQUssR0FBR0Y7UUFDYixJQUFJLENBQUNHLEtBQUssR0FBR0Y7UUFDYixPQUFPRSxLQUFLeEIsTUFBTSxHQUFHdUIsS0FBS3ZCLE1BQU07SUFDbEM7SUFDQSxJQUFJYSxTQUFTYixNQUFNLElBQUksR0FBRztRQUN4QixPQUFPLEtBQUs7SUFDZDtJQUNBLE1BQU0sQ0FBQ3lCLGFBQWFwQyxRQUFRLEdBQUd3QixRQUFRLENBQUMsRUFBRTtJQUMxQyxNQUFNdkIsYUFBYXNCLGVBQWVjLFNBQVMsQ0FBQ0QsWUFBWXpCLE1BQU07SUFDOUQsT0FBTztRQUFDWDtRQUFTb0M7UUFBYW5DO0tBQVc7QUFDM0M7QUFDc0YsQ0FDdEYsOENBQThDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2liYmFyb3NhLXByb2QvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L19jaHVua3Mvc291cmNlbWFwLXItVHVQcm95LmpzP2I2MTAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRVNDQVBFID0ge1xuICBcIlxcZlwiOiBcIlxcXFxmXCIsXG4gIFwiXFxuXCI6IFwiXFxcXG5cIixcbiAgXCJcXHJcIjogXCJcXFxcclwiLFxuICBcIlx0XCI6IFwiXFxcXHRcIixcbiAgXCInXCI6IFwiXFxcXCdcIixcbiAgXCJcXFxcXCI6IFwiXFxcXFxcXFxcIlxufTtcbmNvbnN0IFVORVNDQVBFID0ge1xuICBcIlxcXFxmXCI6IFwiXFxmXCIsXG4gIFwiXFxcXG5cIjogXCJcXG5cIixcbiAgXCJcXFxcclwiOiBcIlxcclwiLFxuICBcIlxcXFx0XCI6IFwiXHRcIixcbiAgXCJcXFxcJ1wiOiBcIidcIixcbiAgXCJcXFxcXFxcXFwiOiBcIlxcXFxcIlxufTtcbmZ1bmN0aW9uIG5vcm1hbGlzZWRKc29uUGF0aChwYXRoKSB7XG4gIHJldHVybiBcIiRcIi5jb25jYXQocGF0aC5tYXAoa2V5ID0+IHtcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgZXNjYXBlZEtleSA9IGtleS5yZXBsYWNlKC9bXFxmXFxuXFxyXFx0J1xcXFxdL2csIG1hdGNoID0+IHtcbiAgICAgICAgcmV0dXJuIEVTQ0FQRVttYXRjaF07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBcIlsnXCIuY29uY2F0KGVzY2FwZWRLZXksIFwiJ11cIik7XG4gICAgfVxuICAgIHJldHVybiBcIltcIi5jb25jYXQoa2V5LCBcIl1cIik7XG4gIH0pLmpvaW4oXCJcIikpO1xufVxuZnVuY3Rpb24gcGFyc2VOb3JtYWxpc2VkSnNvblBhdGgocGF0aCkge1xuICBjb25zdCBwYXJzZWQgPSBbXTtcbiAgY29uc3QgcGFyc2VSZSA9IC9cXFsnKC4qPyknXFxdfFxcWyhcXGQrKVxcXS9nO1xuICBsZXQgbWF0Y2g7XG4gIHdoaWxlICgobWF0Y2ggPSBwYXJzZVJlLmV4ZWMocGF0aCkpICE9PSBudWxsKSB7XG4gICAgaWYgKG1hdGNoWzFdICE9PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdLnJlcGxhY2UoL1xcXFwoXFxcXHxmfG58cnx0fCcpL2csIG0gPT4ge1xuICAgICAgICByZXR1cm4gVU5FU0NBUEVbbV07XG4gICAgICB9KTtcbiAgICAgIHBhcnNlZC5wdXNoKGtleSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG1hdGNoWzJdICE9PSB2b2lkIDApIHtcbiAgICAgIHBhcnNlZC5wdXNoKHBhcnNlSW50KG1hdGNoWzJdLCAxMCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBpc1JlY29yZCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5mdW5jdGlvbiBlbmNvZGUocmVzdWx0LCBjc20sIGVuY29kZXIpIHtcbiAgcmV0dXJuIGVuY29kZUludG9SZXN1bHQocmVzdWx0LCBjc20sIGVuY29kZXIpO1xufVxuZnVuY3Rpb24gZW5jb2RlSW50b1Jlc3VsdChyZXN1bHQsIGNzbSwgZW5jb2Rlcikge1xuICByZXR1cm4gd2Fsa01hcChyZXN1bHQsICh2YWx1ZSwgcGF0aCkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgcmVzb2x2ZU1hcHBpbmdSZXN1bHQgPSByZXNvbHZlTWFwcGluZyhwYXRoLCBjc20pO1xuICAgIGlmICghcmVzb2x2ZU1hcHBpbmdSZXN1bHQpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgW21hcHBpbmcsLCBwYXRoU3VmZml4XSA9IHJlc29sdmVNYXBwaW5nUmVzdWx0O1xuICAgIGlmIChtYXBwaW5nLnR5cGUgIT09IFwidmFsdWVcIikge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAobWFwcGluZy5zb3VyY2UudHlwZSAhPT0gXCJkb2N1bWVudFZhbHVlXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3Qgc291cmNlRG9jdW1lbnQgPVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgY3NtLmRvY3VtZW50c1ttYXBwaW5nLnNvdXJjZS5kb2N1bWVudF07XG4gICAgY29uc3Qgc291cmNlUGF0aCA9IGNzbS5wYXRoc1ttYXBwaW5nLnNvdXJjZS5wYXRoXTtcbiAgICByZXR1cm4gZW5jb2Rlcih2YWx1ZSwgc291cmNlRG9jdW1lbnQsIHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoKHNvdXJjZVBhdGggKyBwYXRoU3VmZml4KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gd2Fsa01hcCh2YWx1ZSwgbWFwcGluZ0ZuKSB7XG4gIGxldCBwYXRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBbXTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcCgodiwgaWR4KSA9PiB3YWxrTWFwKHYsIG1hcHBpbmdGbiwgcGF0aC5jb25jYXQoaWR4KSkpO1xuICB9XG4gIGlmIChpc1JlY29yZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHZhbHVlKS5tYXAoX3JlZiA9PiB7XG4gICAgICBsZXQgW2ssIHZdID0gX3JlZjtcbiAgICAgIHJldHVybiBbaywgd2Fsa01hcCh2LCBtYXBwaW5nRm4sIHBhdGguY29uY2F0KGspKV07XG4gICAgfSkpO1xuICB9XG4gIHJldHVybiBtYXBwaW5nRm4odmFsdWUsIHBhdGgpO1xufVxuZnVuY3Rpb24gcmVzb2x2ZU1hcHBpbmcocmVzdWx0UGF0aCwgY3NtLCBsb2dnZXIpIHtcbiAgdmFyIF9hO1xuICBjb25zdCByZXN1bHRKc29uUGF0aCA9IG5vcm1hbGlzZWRKc29uUGF0aChyZXN1bHRQYXRoKTtcbiAgaWYgKCFjc20ubWFwcGluZ3MpIHtcbiAgICAoX2EgPSBsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwobG9nZ2VyLCBcIk1pc3NpbmcgbWFwcGluZ3NcIiwge1xuICAgICAgcmVzdWx0U291cmNlTWFwOiBjc21cbiAgICB9KTtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIGlmIChjc20ubWFwcGluZ3NbcmVzdWx0SnNvblBhdGhdICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gW2NzbS5tYXBwaW5nc1tyZXN1bHRKc29uUGF0aF0sIHJlc3VsdEpzb25QYXRoLCBcIlwiXTtcbiAgfVxuICBjb25zdCBtYXBwaW5ncyA9IE9iamVjdC5lbnRyaWVzKGNzbS5tYXBwaW5ncykuZmlsdGVyKF9yZWYyID0+IHtcbiAgICBsZXQgW2tleV0gPSBfcmVmMjtcbiAgICByZXR1cm4gcmVzdWx0SnNvblBhdGguc3RhcnRzV2l0aChrZXkpO1xuICB9KS5zb3J0KChfcmVmMywgX3JlZjQpID0+IHtcbiAgICBsZXQgW2tleTFdID0gX3JlZjM7XG4gICAgbGV0IFtrZXkyXSA9IF9yZWY0O1xuICAgIHJldHVybiBrZXkyLmxlbmd0aCAtIGtleTEubGVuZ3RoO1xuICB9KTtcbiAgaWYgKG1hcHBpbmdzLmxlbmd0aCA9PSAwKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBjb25zdCBbbWF0Y2hlZFBhdGgsIG1hcHBpbmddID0gbWFwcGluZ3NbMF07XG4gIGNvbnN0IHBhdGhTdWZmaXggPSByZXN1bHRKc29uUGF0aC5zdWJzdHJpbmcobWF0Y2hlZFBhdGgubGVuZ3RoKTtcbiAgcmV0dXJuIFttYXBwaW5nLCBtYXRjaGVkUGF0aCwgcGF0aFN1ZmZpeF07XG59XG5leHBvcnQgeyBlbmNvZGUsIGVuY29kZUludG9SZXN1bHQsIHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoLCByZXNvbHZlTWFwcGluZywgd2Fsa01hcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c291cmNlbWFwLXItVHVQcm95LmpzLm1hcFxuIl0sIm5hbWVzIjpbIkVTQ0FQRSIsIlVORVNDQVBFIiwibm9ybWFsaXNlZEpzb25QYXRoIiwicGF0aCIsImNvbmNhdCIsIm1hcCIsImtleSIsImVzY2FwZWRLZXkiLCJyZXBsYWNlIiwibWF0Y2giLCJqb2luIiwicGFyc2VOb3JtYWxpc2VkSnNvblBhdGgiLCJwYXJzZWQiLCJwYXJzZVJlIiwiZXhlYyIsIm0iLCJwdXNoIiwicGFyc2VJbnQiLCJpc1JlY29yZCIsInZhbHVlIiwiaXNBcnJheSIsIkFycmF5IiwiZW5jb2RlIiwicmVzdWx0IiwiY3NtIiwiZW5jb2RlciIsImVuY29kZUludG9SZXN1bHQiLCJ3YWxrTWFwIiwicmVzb2x2ZU1hcHBpbmdSZXN1bHQiLCJyZXNvbHZlTWFwcGluZyIsIm1hcHBpbmciLCJwYXRoU3VmZml4IiwidHlwZSIsInNvdXJjZSIsInNvdXJjZURvY3VtZW50IiwiZG9jdW1lbnRzIiwiZG9jdW1lbnQiLCJzb3VyY2VQYXRoIiwicGF0aHMiLCJtYXBwaW5nRm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJ2IiwiaWR4IiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiX3JlZiIsImsiLCJyZXN1bHRQYXRoIiwibG9nZ2VyIiwiX2EiLCJyZXN1bHRKc29uUGF0aCIsIm1hcHBpbmdzIiwiZXJyb3IiLCJjYWxsIiwicmVzdWx0U291cmNlTWFwIiwiZmlsdGVyIiwiX3JlZjIiLCJzdGFydHNXaXRoIiwic29ydCIsIl9yZWYzIiwiX3JlZjQiLCJrZXkxIiwia2V5MiIsIm1hdGNoZWRQYXRoIiwic3Vic3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/preview-kit/dist/client.js":
/*!*********************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/client.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   mapToEditLinks: () => (/* binding */ mapToEditLinks)\n/* harmony export */ });\n/* harmony import */ var _sanity_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sanity/client */ \"(action-browser)/./node_modules/@sanity/client/dist/index.browser.js\");\n/* harmony import */ var lodash_isplainobject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.isplainobject */ \"(action-browser)/./node_modules/lodash.isplainobject/index.js\");\n/* harmony import */ var _csm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./csm.js */ \"(action-browser)/./node_modules/@sanity/preview-kit/dist/csm.js\");\n\n\n\nfunction transcodeResponse(_ref) {\n    let { studioUrl, encodeSourceMapAtPath, logger } = _ref;\n    const transcoder = (0,_csm_js__WEBPACK_IMPORTED_MODULE_1__.createTranscoder)({\n        studioUrl,\n        encodeSourceMapAtPath,\n        logger\n    });\n    return {\n        onResponse: (response)=>{\n            var _a, _b, _c, _d, _e, _f, _g;\n            if (!isBodyResponse(response)) {\n                return response;\n            }\n            if (Array.isArray(response.body) || typeof response.body === \"string\" || lodash_isplainobject__WEBPACK_IMPORTED_MODULE_0__(response.body)) {\n                if (!isContentSourceMapBody(response.body)) {\n                    if (logger && isResultBody(response.body)) {\n                        (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"[@sanity/preview-kit]: Missing Content Source Map from response body\", response.body);\n                    }\n                    return response;\n                }\n                const transcoderResult = transcoder(response.body.result, response.body.resultSourceMap);\n                if (logger) {\n                    const isSkipping = transcoderResult.report.skipped.length;\n                    const isEncoding = transcoderResult.report.encoded.length;\n                    if (isSkipping || isEncoding) {\n                        (_b = (logger == null ? void 0 : logger.groupCollapsed) || logger.log) == null ? void 0 : _b(\"[@sanity/preview-kit]: Stega encoding source map into result\");\n                        (_c = logger.log) == null ? void 0 : _c.call(logger, \"[@sanity/preview-kit]: Paths encoded: \".concat(transcoderResult.report.encoded.length, \", skipped: \").concat(transcoderResult.report.skipped.length));\n                    }\n                    if (transcoderResult.report.encoded.length > 0) {\n                        (_d = logger == null ? void 0 : logger.log) == null ? void 0 : _d.call(logger, \"[@sanity/preview-kit]: Table of encoded paths\");\n                        (_e = (logger == null ? void 0 : logger.table) || logger.log) == null ? void 0 : _e(transcoderResult.report.encoded);\n                    }\n                    if (transcoderResult.report.skipped.length > 0) {\n                        const skipped = /* @__PURE__ */ new Set();\n                        for (const { path } of transcoderResult.report.skipped){\n                            skipped.add(path.replace(/\\[\\d+\\]/g, \"[]\"));\n                        }\n                        (_f = logger == null ? void 0 : logger.log) == null ? void 0 : _f.call(logger, \"[@sanity/preview-kit]: List of skipped paths\", [\n                            ...skipped.values()\n                        ]);\n                    }\n                    if (isSkipping || isEncoding) {\n                        (_g = logger == null ? void 0 : logger.groupEnd) == null ? void 0 : _g.call(logger);\n                    }\n                }\n                const body = {\n                    ...response.body,\n                    result: transcoderResult.result\n                };\n                return {\n                    ...response,\n                    body\n                };\n            }\n            return response;\n        }\n    };\n}\nfunction createHttpRequest(_ref2) {\n    let { studioUrl, encodeSourceMapAtPath, logger } = _ref2;\n    const superRequester = _sanity_client__WEBPACK_IMPORTED_MODULE_2__.requester.clone();\n    superRequester.use(// eslint-disable-next-line @typescript-eslint/no-explicit-any -- support the improved get-it typings\n    transcodeResponse({\n        studioUrl,\n        encodeSourceMapAtPath,\n        logger\n    }));\n    function httpRequest(options) {\n        let requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : superRequester;\n        return requester({\n            maxRedirects: 0,\n            ...options\n        });\n    }\n    httpRequest.defaultRequester = superRequester;\n    return httpRequest;\n}\nfunction isBodyResponse(response) {\n    return typeof response === \"object\" && response !== null;\n}\nfunction isResultBody(body) {\n    return typeof body === \"object\" && body !== null && \"result\" in body;\n}\nfunction isContentSourceMapBody(body) {\n    return typeof body === \"object\" && body !== null && \"resultSourceMap\" in body;\n}\nconst createClient = (config)=>{\n    var _a, _b;\n    const { encodeSourceMap = detectEnableSourceMap(), encodeSourceMapAtPath, studioUrl = detectStudioUrl(), logger, ...options } = config;\n    let shouldEncodeSourceMap = encodeSourceMap === true;\n    if (encodeSourceMap === \"auto\") {\n        shouldEncodeSourceMap = isVercelPreviewEnvironment();\n    }\n    if (typeof encodeSourceMap === \"string\" && encodeSourceMap !== \"auto\") {\n        throw new Error(\"Invalid value for encodeSourceMap: \".concat(encodeSourceMap, \". Did you mean 'auto'?\"));\n    }\n    try {\n        if (shouldEncodeSourceMap && config.resultSourceMap !== false) {\n            if (!studioUrl) {\n                (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"[@sanity/preview-kit]: Content source map enabled client is enabled, but no studioUrl is provided. Falling back to @sanity/client\");\n                return (0,_sanity_client__WEBPACK_IMPORTED_MODULE_2__.createClient)(options);\n            }\n            (_b = logger == null ? void 0 : logger.debug) == null ? void 0 : _b.call(logger, \"[@sanity/preview-kit]: Creating source map enabled client\");\n            const httpRequest = createHttpRequest({\n                encodeSourceMapAtPath,\n                studioUrl,\n                logger\n            });\n            return new _sanity_client__WEBPACK_IMPORTED_MODULE_2__.SanityClient(httpRequest, {\n                ...options,\n                // Source maps by Content Lake are required in order to know where to insert the encoded source maps into strings\n                resultSourceMap: true\n            });\n        }\n    } catch (err) {\n        console.error(\"[@sanity/preview-kit]: Error creating client\", err, \"falling back to non-embedded sourcemap mode\");\n    }\n    return (0,_sanity_client__WEBPACK_IMPORTED_MODULE_2__.createClient)(options);\n};\nfunction isVercelPreviewEnvironment() {\n    try {\n        return /* unsupported import.meta.env.VERCEL_ENV */ undefined.VERCEL_ENV === \"preview\";\n    } catch  {}\n    try {\n        return process.env.VERCEL_ENV === \"preview\";\n    } catch  {}\n    return false;\n}\nfunction detectEnableSourceMap() {\n    try {\n        return /* unsupported import.meta.env.SANITY_SOURCE_MAP */ undefined.SANITY_SOURCE_MAP === \"true\" || \"auto\";\n    } catch  {}\n    try {\n        return process.env.SANITY_SOURCE_MAP === \"true\" || \"auto\";\n    } catch  {}\n    return \"auto\";\n}\nfunction detectStudioUrl() {\n    try {\n        return /* unsupported import.meta.env.SANITY_STUDIO_URL */ undefined.SANITY_STUDIO_URL;\n    } catch  {}\n    try {\n        return process.env.SANITY_STUDIO_URL;\n    } catch  {}\n}\nfunction mapToEditLinks(response, studioUrl) {\n    return (0,_csm_js__WEBPACK_IMPORTED_MODULE_1__.mapToEditLinks)(response.result, response.resultSourceMap, studioUrl);\n}\n //# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L3ByZXZpZXcta2l0L2Rpc3QvY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlGO0FBQ3hDO0FBQytCO0FBQ2hGLFNBQVNRLGtCQUFrQkMsSUFBSTtJQUM3QixJQUFJLEVBQ0ZDLFNBQVMsRUFDVEMscUJBQXFCLEVBQ3JCQyxNQUFNLEVBQ1AsR0FBR0g7SUFDSixNQUFNSSxhQUFhUix5REFBZ0JBLENBQUM7UUFDbENLO1FBQ0FDO1FBQ0FDO0lBQ0Y7SUFDQSxPQUFPO1FBQ0xFLFlBQVlDLENBQUFBO1lBQ1YsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUM7WUFDNUIsSUFBSSxDQUFDQyxlQUFlUixXQUFXO2dCQUM3QixPQUFPQTtZQUNUO1lBQ0EsSUFBSVMsTUFBTUMsT0FBTyxDQUFDVixTQUFTVyxJQUFJLEtBQUssT0FBT1gsU0FBU1csSUFBSSxLQUFLLFlBQVl0QixpREFBYUEsQ0FBQ1csU0FBU1csSUFBSSxHQUFHO2dCQUNyRyxJQUFJLENBQUNDLHVCQUF1QlosU0FBU1csSUFBSSxHQUFHO29CQUMxQyxJQUFJZCxVQUFVZ0IsYUFBYWIsU0FBU1csSUFBSSxHQUFHO3dCQUN4Q1YsQ0FBQUEsS0FBS0osVUFBVSxPQUFPLEtBQUssSUFBSUEsT0FBT2lCLEtBQUssS0FBSyxPQUFPLEtBQUssSUFBSWIsR0FBR2MsSUFBSSxDQUFDbEIsUUFBUSx3RUFBd0VHLFNBQVNXLElBQUk7b0JBQ3hLO29CQUNBLE9BQU9YO2dCQUNUO2dCQUNBLE1BQU1nQixtQkFBbUJsQixXQUFXRSxTQUFTVyxJQUFJLENBQUNNLE1BQU0sRUFBRWpCLFNBQVNXLElBQUksQ0FBQ08sZUFBZTtnQkFDdkYsSUFBSXJCLFFBQVE7b0JBQ1YsTUFBTXNCLGFBQWFILGlCQUFpQkksTUFBTSxDQUFDQyxPQUFPLENBQUNDLE1BQU07b0JBQ3pELE1BQU1DLGFBQWFQLGlCQUFpQkksTUFBTSxDQUFD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SUFDckU7SUFDQSxPQUFPbkUsNERBQWNBLENBQUNzRDtBQUN4QjtBQUNBLFNBQVNVO0lBQ1AsSUFBSTtRQUNGLE9BQU8saUVBQTBCLEtBQUs7SUFDeEMsRUFBRSxPQUFNLENBQUM7SUFDVCxJQUFJO1FBQ0YsT0FBT08sUUFBUUYsR0FBRyxDQUFDQyxVQUFVLEtBQUs7SUFDcEMsRUFBRSxPQUFNLENBQUM7SUFDVCxPQUFPO0FBQ1Q7QUFDQSxTQUFTVDtJQUNQLElBQUk7UUFDRixPQUFPLCtFQUFpQyxLQUFLLFVBQVU7SUFDekQsRUFBRSxPQUFNLENBQUM7SUFDVCxJQUFJO1FBQ0YsT0FBT1UsUUFBUUYsR0FBRyxDQUFDRyxpQkFBaUIsS0FBSyxVQUFVO0lBQ3JELEVBQUUsT0FBTSxDQUFDO0lBQ1QsT0FBTztBQUNUO0FBQ0EsU0FBU1Y7SUFDUCxJQUFJO1FBQ0YsT0FBTywrRUFBaUM7SUFDMUMsRUFBRSxPQUFNLENBQUM7SUFDVCxJQUFJO1FBQ0YsT0FBT1MsUUFBUUYsR0FBRyxDQUFDSSxpQkFBaUI7SUFDdEMsRUFBRSxPQUFNLENBQUM7QUFDWDtBQUNBLFNBQVNyRSxlQUFlUyxRQUFRLEVBQUVMLFNBQVM7SUFDekMsT0FBT0gsdURBQWdCQSxDQUFDUSxTQUFTaUIsTUFBTSxFQUFFakIsU0FBU2tCLGVBQWUsRUFBRXZCO0FBQ3JFO0FBQ3dDLENBQ3hDLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvcHJldmlldy1raXQvZGlzdC9jbGllbnQuanM/ZGVjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZXF1ZXN0ZXIsIGNyZWF0ZUNsaWVudCBhcyBjcmVhdGVDbGllbnQkMSwgU2FuaXR5Q2xpZW50IH0gZnJvbSAnQHNhbml0eS9jbGllbnQnO1xuaW1wb3J0IGlzUGxhaW5PYmplY3QgZnJvbSAnbG9kYXNoLmlzcGxhaW5vYmplY3QnO1xuaW1wb3J0IHsgY3JlYXRlVHJhbnNjb2RlciwgbWFwVG9FZGl0TGlua3MgYXMgbWFwVG9FZGl0TGlua3MkMSB9IGZyb20gJy4vY3NtLmpzJztcbmZ1bmN0aW9uIHRyYW5zY29kZVJlc3BvbnNlKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzdHVkaW9VcmwsXG4gICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgIGxvZ2dlclxuICB9ID0gX3JlZjtcbiAgY29uc3QgdHJhbnNjb2RlciA9IGNyZWF0ZVRyYW5zY29kZXIoe1xuICAgIHN0dWRpb1VybCxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgbG9nZ2VyXG4gIH0pO1xuICByZXR1cm4ge1xuICAgIG9uUmVzcG9uc2U6IHJlc3BvbnNlID0+IHtcbiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgIGlmICghaXNCb2R5UmVzcG9uc2UocmVzcG9uc2UpKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkpIHx8IHR5cGVvZiByZXNwb25zZS5ib2R5ID09PSBcInN0cmluZ1wiIHx8IGlzUGxhaW5PYmplY3QocmVzcG9uc2UuYm9keSkpIHtcbiAgICAgICAgaWYgKCFpc0NvbnRlbnRTb3VyY2VNYXBCb2R5KHJlc3BvbnNlLmJvZHkpKSB7XG4gICAgICAgICAgaWYgKGxvZ2dlciAmJiBpc1Jlc3VsdEJvZHkocmVzcG9uc2UuYm9keSkpIHtcbiAgICAgICAgICAgIChfYSA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChsb2dnZXIsIFwiW0BzYW5pdHkvcHJldmlldy1raXRdOiBNaXNzaW5nIENvbnRlbnQgU291cmNlIE1hcCBmcm9tIHJlc3BvbnNlIGJvZHlcIiwgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NvZGVyUmVzdWx0ID0gdHJhbnNjb2RlcihyZXNwb25zZS5ib2R5LnJlc3VsdCwgcmVzcG9uc2UuYm9keS5yZXN1bHRTb3VyY2VNYXApO1xuICAgICAgICBpZiAobG9nZ2VyKSB7XG4gICAgICAgICAgY29uc3QgaXNTa2lwcGluZyA9IHRyYW5zY29kZXJSZXN1bHQucmVwb3J0LnNraXBwZWQubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IGlzRW5jb2RpbmcgPSB0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5lbmNvZGVkLmxlbmd0aDtcbiAgICAgICAgICBpZiAoaXNTa2lwcGluZyB8fCBpc0VuY29kaW5nKSB7XG4gICAgICAgICAgICAoX2IgPSAobG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIuZ3JvdXBDb2xsYXBzZWQpIHx8IGxvZ2dlci5sb2cpID09IG51bGwgPyB2b2lkIDAgOiBfYihcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogU3RlZ2EgZW5jb2Rpbmcgc291cmNlIG1hcCBpbnRvIHJlc3VsdFwiKTtcbiAgICAgICAgICAgIChfYyA9IGxvZ2dlci5sb2cpID09IG51bGwgPyB2b2lkIDAgOiBfYy5jYWxsKGxvZ2dlciwgXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IFBhdGhzIGVuY29kZWQ6IFwiLmNvbmNhdCh0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5lbmNvZGVkLmxlbmd0aCwgXCIsIHNraXBwZWQ6IFwiKS5jb25jYXQodHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuc2tpcHBlZC5sZW5ndGgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRyYW5zY29kZXJSZXN1bHQucmVwb3J0LmVuY29kZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgKF9kID0gbG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIubG9nKSA9PSBudWxsID8gdm9pZCAwIDogX2QuY2FsbChsb2dnZXIsIFwiW0BzYW5pdHkvcHJldmlldy1raXRdOiBUYWJsZSBvZiBlbmNvZGVkIHBhdGhzXCIpO1xuICAgICAgICAgICAgKF9lID0gKGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLnRhYmxlKSB8fCBsb2dnZXIubG9nKSA9PSBudWxsID8gdm9pZCAwIDogX2UodHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuZW5jb2RlZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5za2lwcGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNraXBwZWQgPSAvKiBAX19QVVJFX18gKi9uZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHtcbiAgICAgICAgICAgICAgcGF0aFxuICAgICAgICAgICAgfSBvZiB0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5za2lwcGVkKSB7XG4gICAgICAgICAgICAgIHNraXBwZWQuYWRkKHBhdGgucmVwbGFjZSgvXFxbXFxkK1xcXS9nLCBcIltdXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChfZiA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmxvZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNhbGwobG9nZ2VyLCBcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogTGlzdCBvZiBza2lwcGVkIHBhdGhzXCIsIFsuLi5za2lwcGVkLnZhbHVlcygpXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1NraXBwaW5nIHx8IGlzRW5jb2RpbmcpIHtcbiAgICAgICAgICAgIChfZyA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmdyb3VwRW5kKSA9PSBudWxsID8gdm9pZCAwIDogX2cuY2FsbChsb2dnZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgIC4uLnJlc3BvbnNlLmJvZHksXG4gICAgICAgICAgcmVzdWx0OiB0cmFuc2NvZGVyUmVzdWx0LnJlc3VsdFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgIGJvZHlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVIdHRwUmVxdWVzdChfcmVmMikge1xuICBsZXQge1xuICAgIHN0dWRpb1VybCxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgbG9nZ2VyXG4gIH0gPSBfcmVmMjtcbiAgY29uc3Qgc3VwZXJSZXF1ZXN0ZXIgPSByZXF1ZXN0ZXIuY2xvbmUoKTtcbiAgc3VwZXJSZXF1ZXN0ZXIudXNlKFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAtLSBzdXBwb3J0IHRoZSBpbXByb3ZlZCBnZXQtaXQgdHlwaW5nc1xuICB0cmFuc2NvZGVSZXNwb25zZSh7XG4gICAgc3R1ZGlvVXJsLFxuICAgIGVuY29kZVNvdXJjZU1hcEF0UGF0aCxcbiAgICBsb2dnZXJcbiAgfSkpO1xuICBmdW5jdGlvbiBodHRwUmVxdWVzdChvcHRpb25zKSB7XG4gICAgbGV0IHJlcXVlc3RlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogc3VwZXJSZXF1ZXN0ZXI7XG4gICAgcmV0dXJuIHJlcXVlc3Rlcih7XG4gICAgICBtYXhSZWRpcmVjdHM6IDAsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgaHR0cFJlcXVlc3QuZGVmYXVsdFJlcXVlc3RlciA9IHN1cGVyUmVxdWVzdGVyO1xuICByZXR1cm4gaHR0cFJlcXVlc3Q7XG59XG5mdW5jdGlvbiBpc0JvZHlSZXNwb25zZShyZXNwb25zZSkge1xuICByZXR1cm4gdHlwZW9mIHJlc3BvbnNlID09PSBcIm9iamVjdFwiICYmIHJlc3BvbnNlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNSZXN1bHRCb2R5KGJvZHkpIHtcbiAgcmV0dXJuIHR5cGVvZiBib2R5ID09PSBcIm9iamVjdFwiICYmIGJvZHkgIT09IG51bGwgJiYgXCJyZXN1bHRcIiBpbiBib2R5O1xufVxuZnVuY3Rpb24gaXNDb250ZW50U291cmNlTWFwQm9keShib2R5KSB7XG4gIHJldHVybiB0eXBlb2YgYm9keSA9PT0gXCJvYmplY3RcIiAmJiBib2R5ICE9PSBudWxsICYmIFwicmVzdWx0U291cmNlTWFwXCIgaW4gYm9keTtcbn1cbmNvbnN0IGNyZWF0ZUNsaWVudCA9IGNvbmZpZyA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHtcbiAgICBlbmNvZGVTb3VyY2VNYXAgPSBkZXRlY3RFbmFibGVTb3VyY2VNYXAoKSxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgc3R1ZGlvVXJsID0gZGV0ZWN0U3R1ZGlvVXJsKCksXG4gICAgbG9nZ2VyLFxuICAgIC4uLm9wdGlvbnNcbiAgfSA9IGNvbmZpZztcbiAgbGV0IHNob3VsZEVuY29kZVNvdXJjZU1hcCA9IGVuY29kZVNvdXJjZU1hcCA9PT0gdHJ1ZTtcbiAgaWYgKGVuY29kZVNvdXJjZU1hcCA9PT0gXCJhdXRvXCIpIHtcbiAgICBzaG91bGRFbmNvZGVTb3VyY2VNYXAgPSBpc1ZlcmNlbFByZXZpZXdFbnZpcm9ubWVudCgpO1xuICB9XG4gIGlmICh0eXBlb2YgZW5jb2RlU291cmNlTWFwID09PSBcInN0cmluZ1wiICYmIGVuY29kZVNvdXJjZU1hcCAhPT0gXCJhdXRvXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBlbmNvZGVTb3VyY2VNYXA6IFwiLmNvbmNhdChlbmNvZGVTb3VyY2VNYXAsIFwiLiBEaWQgeW91IG1lYW4gJ2F1dG8nP1wiKSk7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAoc2hvdWxkRW5jb2RlU291cmNlTWFwICYmIGNvbmZpZy5yZXN1bHRTb3VyY2VNYXAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoIXN0dWRpb1VybCkge1xuICAgICAgICAoX2EgPSBsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwobG9nZ2VyLCBcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogQ29udGVudCBzb3VyY2UgbWFwIGVuYWJsZWQgY2xpZW50IGlzIGVuYWJsZWQsIGJ1dCBubyBzdHVkaW9VcmwgaXMgcHJvdmlkZWQuIEZhbGxpbmcgYmFjayB0byBAc2FuaXR5L2NsaWVudFwiKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNsaWVudCQxKG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgKF9iID0gbG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIuZGVidWcpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKGxvZ2dlciwgXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IENyZWF0aW5nIHNvdXJjZSBtYXAgZW5hYmxlZCBjbGllbnRcIik7XG4gICAgICBjb25zdCBodHRwUmVxdWVzdCA9IGNyZWF0ZUh0dHBSZXF1ZXN0KHtcbiAgICAgICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgICAgICBzdHVkaW9VcmwsXG4gICAgICAgIGxvZ2dlclxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IFNhbml0eUNsaWVudChodHRwUmVxdWVzdCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAvLyBTb3VyY2UgbWFwcyBieSBDb250ZW50IExha2UgYXJlIHJlcXVpcmVkIGluIG9yZGVyIHRvIGtub3cgd2hlcmUgdG8gaW5zZXJ0IHRoZSBlbmNvZGVkIHNvdXJjZSBtYXBzIGludG8gc3RyaW5nc1xuICAgICAgICByZXN1bHRTb3VyY2VNYXA6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogRXJyb3IgY3JlYXRpbmcgY2xpZW50XCIsIGVyciwgXCJmYWxsaW5nIGJhY2sgdG8gbm9uLWVtYmVkZGVkIHNvdXJjZW1hcCBtb2RlXCIpO1xuICB9XG4gIHJldHVybiBjcmVhdGVDbGllbnQkMShvcHRpb25zKTtcbn07XG5mdW5jdGlvbiBpc1ZlcmNlbFByZXZpZXdFbnZpcm9ubWVudCgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaW1wb3J0Lm1ldGEuZW52LlZFUkNFTF9FTlYgPT09IFwicHJldmlld1wiO1xuICB9IGNhdGNoIHt9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52LlZFUkNFTF9FTlYgPT09IFwicHJldmlld1wiO1xuICB9IGNhdGNoIHt9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGRldGVjdEVuYWJsZVNvdXJjZU1hcCgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaW1wb3J0Lm1ldGEuZW52LlNBTklUWV9TT1VSQ0VfTUFQID09PSBcInRydWVcIiB8fCBcImF1dG9cIjtcbiAgfSBjYXRjaCB7fVxuICB0cnkge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5TQU5JVFlfU09VUkNFX01BUCA9PT0gXCJ0cnVlXCIgfHwgXCJhdXRvXCI7XG4gIH0gY2F0Y2gge31cbiAgcmV0dXJuIFwiYXV0b1wiO1xufVxuZnVuY3Rpb24gZGV0ZWN0U3R1ZGlvVXJsKCkge1xuICB0cnkge1xuICAgIHJldHVybiBpbXBvcnQubWV0YS5lbnYuU0FOSVRZX1NUVURJT19VUkw7XG4gIH0gY2F0Y2gge31cbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuU0FOSVRZX1NUVURJT19VUkw7XG4gIH0gY2F0Y2gge31cbn1cbmZ1bmN0aW9uIG1hcFRvRWRpdExpbmtzKHJlc3BvbnNlLCBzdHVkaW9VcmwpIHtcbiAgcmV0dXJuIG1hcFRvRWRpdExpbmtzJDEocmVzcG9uc2UucmVzdWx0LCByZXNwb25zZS5yZXN1bHRTb3VyY2VNYXAsIHN0dWRpb1VybCk7XG59XG5leHBvcnQgeyBjcmVhdGVDbGllbnQsIG1hcFRvRWRpdExpbmtzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQuanMubWFwXG4iXSwibmFtZXMiOlsicmVxdWVzdGVyIiwiY3JlYXRlQ2xpZW50IiwiY3JlYXRlQ2xpZW50JDEiLCJTYW5pdHlDbGllbnQiLCJpc1BsYWluT2JqZWN0IiwiY3JlYXRlVHJhbnNjb2RlciIsIm1hcFRvRWRpdExpbmtzIiwibWFwVG9FZGl0TGlua3MkMSIsInRyYW5zY29kZVJlc3BvbnNlIiwiX3JlZiIsInN0dWRpb1VybCIsImVuY29kZVNvdXJjZU1hcEF0UGF0aCIsImxvZ2dlciIsInRyYW5zY29kZXIiLCJvblJlc3BvbnNlIiwicmVzcG9uc2UiLCJfYSIsIl9iIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJfZyIsImlzQm9keVJlc3BvbnNlIiwiQXJyYXkiLCJpc0FycmF5IiwiYm9keSIsImlzQ29udGVudFNvdXJjZU1hcEJvZHkiLCJpc1Jlc3VsdEJvZHkiLCJlcnJvciIsImNhbGwiLCJ0cmFuc2NvZGVyUmVzdWx0IiwicmVzdWx0IiwicmVzdWx0U291cmNlTWFwIiwiaXNTa2lwcGluZyIsInJlcG9ydCIsInNraXBwZWQiLCJsZW5ndGgiLCJpc0VuY29kaW5nIiwiZW5jb2RlZCIsImdyb3VwQ29sbGFwc2VkIiwibG9nIiwiY29uY2F0IiwidGFibGUiLCJTZXQiLCJwYXRoIiwiYWRkIiwicmVwbGFjZSIsInZhbHVlcyIsImdyb3VwRW5kIiwiY3JlYXRlSHR0cFJlcXVlc3QiLCJfcmVmMiIsInN1cGVyUmVxdWVzdGVyIiwiY2xvbmUiLCJ1c2UiLCJodHRwUmVxdWVzdCIsIm9wdGlvbnMiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJtYXhSZWRpcmVjdHMiLCJkZWZhdWx0UmVxdWVzdGVyIiwiY29uZmlnIiwiZW5jb2RlU291cmNlTWFwIiwiZGV0ZWN0RW5hYmxlU291cmNlTWFwIiwiZGV0ZWN0U3R1ZGlvVXJsIiwic2hvdWxkRW5jb2RlU291cmNlTWFwIiwiaXNWZXJjZWxQcmV2aWV3RW52aXJvbm1lbnQiLCJFcnJvciIsImRlYnVnIiwiZXJyIiwiY29uc29sZSIsImVudiIsIlZFUkNFTF9FTlYiLCJwcm9jZXNzIiwiU0FOSVRZX1NPVVJDRV9NQVAiLCJTQU5JVFlfU1RVRElPX1VSTCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/preview-kit/dist/client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/preview-kit/dist/client.js":
/*!*********************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/client.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   mapToEditLinks: () => (/* binding */ mapToEditLinks)\n/* harmony export */ });\n/* harmony import */ var _sanity_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sanity/client */ \"(rsc)/./node_modules/@sanity/client/dist/index.browser.js\");\n/* harmony import */ var lodash_isplainobject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.isplainobject */ \"(rsc)/./node_modules/lodash.isplainobject/index.js\");\n/* harmony import */ var _csm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./csm.js */ \"(rsc)/./node_modules/@sanity/preview-kit/dist/csm.js\");\n\n\n\nfunction transcodeResponse(_ref) {\n    let { studioUrl, encodeSourceMapAtPath, logger } = _ref;\n    const transcoder = (0,_csm_js__WEBPACK_IMPORTED_MODULE_1__.createTranscoder)({\n        studioUrl,\n        encodeSourceMapAtPath,\n        logger\n    });\n    return {\n        onResponse: (response)=>{\n            var _a, _b, _c, _d, _e, _f, _g;\n            if (!isBodyResponse(response)) {\n                return response;\n            }\n            if (Array.isArray(response.body) || typeof response.body === \"string\" || lodash_isplainobject__WEBPACK_IMPORTED_MODULE_0__(response.body)) {\n                if (!isContentSourceMapBody(response.body)) {\n                    if (logger && isResultBody(response.body)) {\n                        (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"[@sanity/preview-kit]: Missing Content Source Map from response body\", response.body);\n                    }\n                    return response;\n                }\n                const transcoderResult = transcoder(response.body.result, response.body.resultSourceMap);\n                if (logger) {\n                    const isSkipping = transcoderResult.report.skipped.length;\n                    const isEncoding = transcoderResult.report.encoded.length;\n                    if (isSkipping || isEncoding) {\n                        (_b = (logger == null ? void 0 : logger.groupCollapsed) || logger.log) == null ? void 0 : _b(\"[@sanity/preview-kit]: Stega encoding source map into result\");\n                        (_c = logger.log) == null ? void 0 : _c.call(logger, \"[@sanity/preview-kit]: Paths encoded: \".concat(transcoderResult.report.encoded.length, \", skipped: \").concat(transcoderResult.report.skipped.length));\n                    }\n                    if (transcoderResult.report.encoded.length > 0) {\n                        (_d = logger == null ? void 0 : logger.log) == null ? void 0 : _d.call(logger, \"[@sanity/preview-kit]: Table of encoded paths\");\n                        (_e = (logger == null ? void 0 : logger.table) || logger.log) == null ? void 0 : _e(transcoderResult.report.encoded);\n                    }\n                    if (transcoderResult.report.skipped.length > 0) {\n                        const skipped = /* @__PURE__ */ new Set();\n                        for (const { path } of transcoderResult.report.skipped){\n                            skipped.add(path.replace(/\\[\\d+\\]/g, \"[]\"));\n                        }\n                        (_f = logger == null ? void 0 : logger.log) == null ? void 0 : _f.call(logger, \"[@sanity/preview-kit]: List of skipped paths\", [\n                            ...skipped.values()\n                        ]);\n                    }\n                    if (isSkipping || isEncoding) {\n                        (_g = logger == null ? void 0 : logger.groupEnd) == null ? void 0 : _g.call(logger);\n                    }\n                }\n                const body = {\n                    ...response.body,\n                    result: transcoderResult.result\n                };\n                return {\n                    ...response,\n                    body\n                };\n            }\n            return response;\n        }\n    };\n}\nfunction createHttpRequest(_ref2) {\n    let { studioUrl, encodeSourceMapAtPath, logger } = _ref2;\n    const superRequester = _sanity_client__WEBPACK_IMPORTED_MODULE_2__.requester.clone();\n    superRequester.use(// eslint-disable-next-line @typescript-eslint/no-explicit-any -- support the improved get-it typings\n    transcodeResponse({\n        studioUrl,\n        encodeSourceMapAtPath,\n        logger\n    }));\n    function httpRequest(options) {\n        let requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : superRequester;\n        return requester({\n            maxRedirects: 0,\n            ...options\n        });\n    }\n    httpRequest.defaultRequester = superRequester;\n    return httpRequest;\n}\nfunction isBodyResponse(response) {\n    return typeof response === \"object\" && response !== null;\n}\nfunction isResultBody(body) {\n    return typeof body === \"object\" && body !== null && \"result\" in body;\n}\nfunction isContentSourceMapBody(body) {\n    return typeof body === \"object\" && body !== null && \"resultSourceMap\" in body;\n}\nconst createClient = (config)=>{\n    var _a, _b;\n    const { encodeSourceMap = detectEnableSourceMap(), encodeSourceMapAtPath, studioUrl = detectStudioUrl(), logger, ...options } = config;\n    let shouldEncodeSourceMap = encodeSourceMap === true;\n    if (encodeSourceMap === \"auto\") {\n        shouldEncodeSourceMap = isVercelPreviewEnvironment();\n    }\n    if (typeof encodeSourceMap === \"string\" && encodeSourceMap !== \"auto\") {\n        throw new Error(\"Invalid value for encodeSourceMap: \".concat(encodeSourceMap, \". Did you mean 'auto'?\"));\n    }\n    try {\n        if (shouldEncodeSourceMap && config.resultSourceMap !== false) {\n            if (!studioUrl) {\n                (_a = logger == null ? void 0 : logger.error) == null ? void 0 : _a.call(logger, \"[@sanity/preview-kit]: Content source map enabled client is enabled, but no studioUrl is provided. Falling back to @sanity/client\");\n                return (0,_sanity_client__WEBPACK_IMPORTED_MODULE_2__.createClient)(options);\n            }\n            (_b = logger == null ? void 0 : logger.debug) == null ? void 0 : _b.call(logger, \"[@sanity/preview-kit]: Creating source map enabled client\");\n            const httpRequest = createHttpRequest({\n                encodeSourceMapAtPath,\n                studioUrl,\n                logger\n            });\n            return new _sanity_client__WEBPACK_IMPORTED_MODULE_2__.SanityClient(httpRequest, {\n                ...options,\n                // Source maps by Content Lake are required in order to know where to insert the encoded source maps into strings\n                resultSourceMap: true\n            });\n        }\n    } catch (err) {\n        console.error(\"[@sanity/preview-kit]: Error creating client\", err, \"falling back to non-embedded sourcemap mode\");\n    }\n    return (0,_sanity_client__WEBPACK_IMPORTED_MODULE_2__.createClient)(options);\n};\nfunction isVercelPreviewEnvironment() {\n    try {\n        return /* unsupported import.meta.env.VERCEL_ENV */ undefined.VERCEL_ENV === \"preview\";\n    } catch  {}\n    try {\n        return process.env.VERCEL_ENV === \"preview\";\n    } catch  {}\n    return false;\n}\nfunction detectEnableSourceMap() {\n    try {\n        return /* unsupported import.meta.env.SANITY_SOURCE_MAP */ undefined.SANITY_SOURCE_MAP === \"true\" || \"auto\";\n    } catch  {}\n    try {\n        return process.env.SANITY_SOURCE_MAP === \"true\" || \"auto\";\n    } catch  {}\n    return \"auto\";\n}\nfunction detectStudioUrl() {\n    try {\n        return /* unsupported import.meta.env.SANITY_STUDIO_URL */ undefined.SANITY_STUDIO_URL;\n    } catch  {}\n    try {\n        return process.env.SANITY_STUDIO_URL;\n    } catch  {}\n}\nfunction mapToEditLinks(response, studioUrl) {\n    return (0,_csm_js__WEBPACK_IMPORTED_MODULE_1__.mapToEditLinks)(response.result, response.resultSourceMap, studioUrl);\n}\n //# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5RjtBQUN4QztBQUMrQjtBQUNoRixTQUFTUSxrQkFBa0JDLElBQUk7SUFDN0IsSUFBSSxFQUNGQyxTQUFTLEVBQ1RDLHFCQUFxQixFQUNyQkMsTUFBTSxFQUNQLEdBQUdIO0lBQ0osTUFBTUksYUFBYVIseURBQWdCQSxDQUFDO1FBQ2xDSztRQUNBQztRQUNBQztJQUNGO0lBQ0EsT0FBTztRQUNMRSxZQUFZQyxDQUFBQTtZQUNWLElBQUlDLElBQUlDLElBQUlDLElBQUlDLElBQUlDLElBQUlDLElBQUlDO1lBQzVCLElBQUksQ0FBQ0MsZUFBZVIsV0FBVztnQkFDN0IsT0FBT0E7WUFDVDtZQUNBLElBQUlTLE1BQU1DLE9BQU8sQ0FBQ1YsU0FBU1csSUFBSSxLQUFLLE9BQU9YLFNBQVNXLElBQUksS0FBSyxZQUFZdEIsaURBQWFBLENBQUNXLFNBQVNXLElBQUksR0FBRztnQkFDckcsSUFBSSxDQUFDQyx1QkFBdUJaLFNBQVNXLElBQUksR0FBRztvQkFDMUMsSUFBSWQsVUFBVWdCLGFBQWFiLFNBQVNXLElBQUksR0FBRzt3QkFDeENWLENBQUFBLEtBQUtKLFVBQVUsT0FBTyxLQUFLLElBQUlBLE9BQU9pQixLQUFLLEtBQUssT0FBTyxLQUFLLElBQUliLEdBQUdjLElBQUksQ0FBQ2xCLFFBQVEsd0VBQXdFRyxTQUFTVyxJQUFJO29CQUN4SztvQkFDQSxPQUFPWDtnQkFDVDtnQkFDQSxNQUFNZ0IsbUJBQW1CbEIsV0FBV0UsU0FBU1csSUFBSSxDQUFDTSxNQUFNLEVBQUVqQixTQUFTVyxJQUFJLENBQUNPLGVBQWU7Z0JBQ3ZGLElBQUlyQixRQUFRO29CQUNWLE1BQU1zQixhQUFhSCxpQkFBaUJJLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNO29CQUN6RCxNQUFNQyxhQUFhUCxpQkFBaUJJLE1BQU0sQ0FBQ0ksT0FBTyxDQUFD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T0FBT25FLDREQUFjQSxDQUFDc0Q7QUFDeEI7QUFDQSxTQUFTVTtJQUNQLElBQUk7UUFDRixPQUFPLGlFQUEwQixLQUFLO0lBQ3hDLEVBQUUsT0FBTSxDQUFDO0lBQ1QsSUFBSTtRQUNGLE9BQU9PLFFBQVFGLEdBQUcsQ0FBQ0MsVUFBVSxLQUFLO0lBQ3BDLEVBQUUsT0FBTSxDQUFDO0lBQ1QsT0FBTztBQUNUO0FBQ0EsU0FBU1Q7SUFDUCxJQUFJO1FBQ0YsT0FBTywrRUFBaUMsS0FBSyxVQUFVO0lBQ3pELEVBQUUsT0FBTSxDQUFDO0lBQ1QsSUFBSTtRQUNGLE9BQU9VLFFBQVFGLEdBQUcsQ0FBQ0csaUJBQWlCLEtBQUssVUFBVTtJQUNyRCxFQUFFLE9BQU0sQ0FBQztJQUNULE9BQU87QUFDVDtBQUNBLFNBQVNWO0lBQ1AsSUFBSTtRQUNGLE9BQU8sK0VBQWlDO0lBQzFDLEVBQUUsT0FBTSxDQUFDO0lBQ1QsSUFBSTtRQUNGLE9BQU9TLFFBQVFGLEdBQUcsQ0FBQ0ksaUJBQWlCO0lBQ3RDLEVBQUUsT0FBTSxDQUFDO0FBQ1g7QUFDQSxTQUFTckUsZUFBZVMsUUFBUSxFQUFFTCxTQUFTO0lBQ3pDLE9BQU9ILHVEQUFnQkEsQ0FBQ1EsU0FBU2lCLE1BQU0sRUFBRWpCLFNBQVNrQixlQUFlLEVBQUV2QjtBQUNyRTtBQUN3QyxDQUN4QyxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L3ByZXZpZXcta2l0L2Rpc3QvY2xpZW50LmpzP2RlYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVxdWVzdGVyLCBjcmVhdGVDbGllbnQgYXMgY3JlYXRlQ2xpZW50JDEsIFNhbml0eUNsaWVudCB9IGZyb20gJ0BzYW5pdHkvY2xpZW50JztcbmltcG9ydCBpc1BsYWluT2JqZWN0IGZyb20gJ2xvZGFzaC5pc3BsYWlub2JqZWN0JztcbmltcG9ydCB7IGNyZWF0ZVRyYW5zY29kZXIsIG1hcFRvRWRpdExpbmtzIGFzIG1hcFRvRWRpdExpbmtzJDEgfSBmcm9tICcuL2NzbS5qcyc7XG5mdW5jdGlvbiB0cmFuc2NvZGVSZXNwb25zZShfcmVmKSB7XG4gIGxldCB7XG4gICAgc3R1ZGlvVXJsLFxuICAgIGVuY29kZVNvdXJjZU1hcEF0UGF0aCxcbiAgICBsb2dnZXJcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHRyYW5zY29kZXIgPSBjcmVhdGVUcmFuc2NvZGVyKHtcbiAgICBzdHVkaW9VcmwsXG4gICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgIGxvZ2dlclxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBvblJlc3BvbnNlOiByZXNwb25zZSA9PiB7XG4gICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gICAgICBpZiAoIWlzQm9keVJlc3BvbnNlKHJlc3BvbnNlKSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5KSB8fCB0eXBlb2YgcmVzcG9uc2UuYm9keSA9PT0gXCJzdHJpbmdcIiB8fCBpc1BsYWluT2JqZWN0KHJlc3BvbnNlLmJvZHkpKSB7XG4gICAgICAgIGlmICghaXNDb250ZW50U291cmNlTWFwQm9keShyZXNwb25zZS5ib2R5KSkge1xuICAgICAgICAgIGlmIChsb2dnZXIgJiYgaXNSZXN1bHRCb2R5KHJlc3BvbnNlLmJvZHkpKSB7XG4gICAgICAgICAgICAoX2EgPSBsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwobG9nZ2VyLCBcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogTWlzc2luZyBDb250ZW50IFNvdXJjZSBNYXAgZnJvbSByZXNwb25zZSBib2R5XCIsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNjb2RlclJlc3VsdCA9IHRyYW5zY29kZXIocmVzcG9uc2UuYm9keS5yZXN1bHQsIHJlc3BvbnNlLmJvZHkucmVzdWx0U291cmNlTWFwKTtcbiAgICAgICAgaWYgKGxvZ2dlcikge1xuICAgICAgICAgIGNvbnN0IGlzU2tpcHBpbmcgPSB0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5za2lwcGVkLmxlbmd0aDtcbiAgICAgICAgICBjb25zdCBpc0VuY29kaW5nID0gdHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuZW5jb2RlZC5sZW5ndGg7XG4gICAgICAgICAgaWYgKGlzU2tpcHBpbmcgfHwgaXNFbmNvZGluZykge1xuICAgICAgICAgICAgKF9iID0gKGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmdyb3VwQ29sbGFwc2VkKSB8fCBsb2dnZXIubG9nKSA9PSBudWxsID8gdm9pZCAwIDogX2IoXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IFN0ZWdhIGVuY29kaW5nIHNvdXJjZSBtYXAgaW50byByZXN1bHRcIik7XG4gICAgICAgICAgICAoX2MgPSBsb2dnZXIubG9nKSA9PSBudWxsID8gdm9pZCAwIDogX2MuY2FsbChsb2dnZXIsIFwiW0BzYW5pdHkvcHJldmlldy1raXRdOiBQYXRocyBlbmNvZGVkOiBcIi5jb25jYXQodHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuZW5jb2RlZC5sZW5ndGgsIFwiLCBza2lwcGVkOiBcIikuY29uY2F0KHRyYW5zY29kZXJSZXN1bHQucmVwb3J0LnNraXBwZWQubGVuZ3RoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0cmFuc2NvZGVyUmVzdWx0LnJlcG9ydC5lbmNvZGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIChfZCA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmxvZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmNhbGwobG9nZ2VyLCBcIltAc2FuaXR5L3ByZXZpZXcta2l0XTogVGFibGUgb2YgZW5jb2RlZCBwYXRoc1wiKTtcbiAgICAgICAgICAgIChfZSA9IChsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci50YWJsZSkgfHwgbG9nZ2VyLmxvZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lKHRyYW5zY29kZXJSZXN1bHQucmVwb3J0LmVuY29kZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuc2tpcHBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBza2lwcGVkID0gLyogQF9fUFVSRV9fICovbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB7XG4gICAgICAgICAgICAgIHBhdGhcbiAgICAgICAgICAgIH0gb2YgdHJhbnNjb2RlclJlc3VsdC5yZXBvcnQuc2tpcHBlZCkge1xuICAgICAgICAgICAgICBza2lwcGVkLmFkZChwYXRoLnJlcGxhY2UoL1xcW1xcZCtcXF0vZywgXCJbXVwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoX2YgPSBsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci5sb2cpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jYWxsKGxvZ2dlciwgXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IExpc3Qgb2Ygc2tpcHBlZCBwYXRoc1wiLCBbLi4uc2tpcHBlZC52YWx1ZXMoKV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNTa2lwcGluZyB8fCBpc0VuY29kaW5nKSB7XG4gICAgICAgICAgICAoX2cgPSBsb2dnZXIgPT0gbnVsbCA/IHZvaWQgMCA6IGxvZ2dlci5ncm91cEVuZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLmNhbGwobG9nZ2VyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAuLi5yZXNwb25zZS5ib2R5LFxuICAgICAgICAgIHJlc3VsdDogdHJhbnNjb2RlclJlc3VsdC5yZXN1bHRcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZXNwb25zZSxcbiAgICAgICAgICBib2R5XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSHR0cFJlcXVlc3QoX3JlZjIpIHtcbiAgbGV0IHtcbiAgICBzdHVkaW9VcmwsXG4gICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgIGxvZ2dlclxuICB9ID0gX3JlZjI7XG4gIGNvbnN0IHN1cGVyUmVxdWVzdGVyID0gcmVxdWVzdGVyLmNsb25lKCk7XG4gIHN1cGVyUmVxdWVzdGVyLnVzZShcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgLS0gc3VwcG9ydCB0aGUgaW1wcm92ZWQgZ2V0LWl0IHR5cGluZ3NcbiAgdHJhbnNjb2RlUmVzcG9uc2Uoe1xuICAgIHN0dWRpb1VybCxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgbG9nZ2VyXG4gIH0pKTtcbiAgZnVuY3Rpb24gaHR0cFJlcXVlc3Qob3B0aW9ucykge1xuICAgIGxldCByZXF1ZXN0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHN1cGVyUmVxdWVzdGVyO1xuICAgIHJldHVybiByZXF1ZXN0ZXIoe1xuICAgICAgbWF4UmVkaXJlY3RzOiAwLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICB9XG4gIGh0dHBSZXF1ZXN0LmRlZmF1bHRSZXF1ZXN0ZXIgPSBzdXBlclJlcXVlc3RlcjtcbiAgcmV0dXJuIGh0dHBSZXF1ZXN0O1xufVxuZnVuY3Rpb24gaXNCb2R5UmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgcmV0dXJuIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiByZXNwb25zZSAhPT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzUmVzdWx0Qm9keShib2R5KSB7XG4gIHJldHVybiB0eXBlb2YgYm9keSA9PT0gXCJvYmplY3RcIiAmJiBib2R5ICE9PSBudWxsICYmIFwicmVzdWx0XCIgaW4gYm9keTtcbn1cbmZ1bmN0aW9uIGlzQ29udGVudFNvdXJjZU1hcEJvZHkoYm9keSkge1xuICByZXR1cm4gdHlwZW9mIGJvZHkgPT09IFwib2JqZWN0XCIgJiYgYm9keSAhPT0gbnVsbCAmJiBcInJlc3VsdFNvdXJjZU1hcFwiIGluIGJvZHk7XG59XG5jb25zdCBjcmVhdGVDbGllbnQgPSBjb25maWcgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCB7XG4gICAgZW5jb2RlU291cmNlTWFwID0gZGV0ZWN0RW5hYmxlU291cmNlTWFwKCksXG4gICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgIHN0dWRpb1VybCA9IGRldGVjdFN0dWRpb1VybCgpLFxuICAgIGxvZ2dlcixcbiAgICAuLi5vcHRpb25zXG4gIH0gPSBjb25maWc7XG4gIGxldCBzaG91bGRFbmNvZGVTb3VyY2VNYXAgPSBlbmNvZGVTb3VyY2VNYXAgPT09IHRydWU7XG4gIGlmIChlbmNvZGVTb3VyY2VNYXAgPT09IFwiYXV0b1wiKSB7XG4gICAgc2hvdWxkRW5jb2RlU291cmNlTWFwID0gaXNWZXJjZWxQcmV2aWV3RW52aXJvbm1lbnQoKTtcbiAgfVxuICBpZiAodHlwZW9mIGVuY29kZVNvdXJjZU1hcCA9PT0gXCJzdHJpbmdcIiAmJiBlbmNvZGVTb3VyY2VNYXAgIT09IFwiYXV0b1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgZW5jb2RlU291cmNlTWFwOiBcIi5jb25jYXQoZW5jb2RlU291cmNlTWFwLCBcIi4gRGlkIHlvdSBtZWFuICdhdXRvJz9cIikpO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHNob3VsZEVuY29kZVNvdXJjZU1hcCAmJiBjb25maWcucmVzdWx0U291cmNlTWFwICE9PSBmYWxzZSkge1xuICAgICAgaWYgKCFzdHVkaW9VcmwpIHtcbiAgICAgICAgKF9hID0gbG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIuZXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKGxvZ2dlciwgXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IENvbnRlbnQgc291cmNlIG1hcCBlbmFibGVkIGNsaWVudCBpcyBlbmFibGVkLCBidXQgbm8gc3R1ZGlvVXJsIGlzIHByb3ZpZGVkLiBGYWxsaW5nIGJhY2sgdG8gQHNhbml0eS9jbGllbnRcIik7XG4gICAgICAgIHJldHVybiBjcmVhdGVDbGllbnQkMShvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIChfYiA9IGxvZ2dlciA9PSBudWxsID8gdm9pZCAwIDogbG9nZ2VyLmRlYnVnKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChsb2dnZXIsIFwiW0BzYW5pdHkvcHJldmlldy1raXRdOiBDcmVhdGluZyBzb3VyY2UgbWFwIGVuYWJsZWQgY2xpZW50XCIpO1xuICAgICAgY29uc3QgaHR0cFJlcXVlc3QgPSBjcmVhdGVIdHRwUmVxdWVzdCh7XG4gICAgICAgIGVuY29kZVNvdXJjZU1hcEF0UGF0aCxcbiAgICAgICAgc3R1ZGlvVXJsLFxuICAgICAgICBsb2dnZXJcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ldyBTYW5pdHlDbGllbnQoaHR0cFJlcXVlc3QsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLy8gU291cmNlIG1hcHMgYnkgQ29udGVudCBMYWtlIGFyZSByZXF1aXJlZCBpbiBvcmRlciB0byBrbm93IHdoZXJlIHRvIGluc2VydCB0aGUgZW5jb2RlZCBzb3VyY2UgbWFwcyBpbnRvIHN0cmluZ3NcbiAgICAgICAgcmVzdWx0U291cmNlTWFwOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbQHNhbml0eS9wcmV2aWV3LWtpdF06IEVycm9yIGNyZWF0aW5nIGNsaWVudFwiLCBlcnIsIFwiZmFsbGluZyBiYWNrIHRvIG5vbi1lbWJlZGRlZCBzb3VyY2VtYXAgbW9kZVwiKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2xpZW50JDEob3B0aW9ucyk7XG59O1xuZnVuY3Rpb24gaXNWZXJjZWxQcmV2aWV3RW52aXJvbm1lbnQoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGltcG9ydC5tZXRhLmVudi5WRVJDRUxfRU5WID09PSBcInByZXZpZXdcIjtcbiAgfSBjYXRjaCB7fVxuICB0cnkge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5WRVJDRUxfRU5WID09PSBcInByZXZpZXdcIjtcbiAgfSBjYXRjaCB7fVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBkZXRlY3RFbmFibGVTb3VyY2VNYXAoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGltcG9ydC5tZXRhLmVudi5TQU5JVFlfU09VUkNFX01BUCA9PT0gXCJ0cnVlXCIgfHwgXCJhdXRvXCI7XG4gIH0gY2F0Y2gge31cbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuU0FOSVRZX1NPVVJDRV9NQVAgPT09IFwidHJ1ZVwiIHx8IFwiYXV0b1wiO1xuICB9IGNhdGNoIHt9XG4gIHJldHVybiBcImF1dG9cIjtcbn1cbmZ1bmN0aW9uIGRldGVjdFN0dWRpb1VybCgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaW1wb3J0Lm1ldGEuZW52LlNBTklUWV9TVFVESU9fVVJMO1xuICB9IGNhdGNoIHt9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52LlNBTklUWV9TVFVESU9fVVJMO1xuICB9IGNhdGNoIHt9XG59XG5mdW5jdGlvbiBtYXBUb0VkaXRMaW5rcyhyZXNwb25zZSwgc3R1ZGlvVXJsKSB7XG4gIHJldHVybiBtYXBUb0VkaXRMaW5rcyQxKHJlc3BvbnNlLnJlc3VsdCwgcmVzcG9uc2UucmVzdWx0U291cmNlTWFwLCBzdHVkaW9VcmwpO1xufVxuZXhwb3J0IHsgY3JlYXRlQ2xpZW50LCBtYXBUb0VkaXRMaW5rcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50LmpzLm1hcFxuIl0sIm5hbWVzIjpbInJlcXVlc3RlciIsImNyZWF0ZUNsaWVudCIsImNyZWF0ZUNsaWVudCQxIiwiU2FuaXR5Q2xpZW50IiwiaXNQbGFpbk9iamVjdCIsImNyZWF0ZVRyYW5zY29kZXIiLCJtYXBUb0VkaXRMaW5rcyIsIm1hcFRvRWRpdExpbmtzJDEiLCJ0cmFuc2NvZGVSZXNwb25zZSIsIl9yZWYiLCJzdHVkaW9VcmwiLCJlbmNvZGVTb3VyY2VNYXBBdFBhdGgiLCJsb2dnZXIiLCJ0cmFuc2NvZGVyIiwib25SZXNwb25zZSIsInJlc3BvbnNlIiwiX2EiLCJfYiIsIl9jIiwiX2QiLCJfZSIsIl9mIiwiX2ciLCJpc0JvZHlSZXNwb25zZSIsIkFycmF5IiwiaXNBcnJheSIsImJvZHkiLCJpc0NvbnRlbnRTb3VyY2VNYXBCb2R5IiwiaXNSZXN1bHRCb2R5IiwiZXJyb3IiLCJjYWxsIiwidHJhbnNjb2RlclJlc3VsdCIsInJlc3VsdCIsInJlc3VsdFNvdXJjZU1hcCIsImlzU2tpcHBpbmciLCJyZXBvcnQiLCJza2lwcGVkIiwibGVuZ3RoIiwiaXNFbmNvZGluZyIsImVuY29kZWQiLCJncm91cENvbGxhcHNlZCIsImxvZyIsImNvbmNhdCIsInRhYmxlIiwiU2V0IiwicGF0aCIsImFkZCIsInJlcGxhY2UiLCJ2YWx1ZXMiLCJncm91cEVuZCIsImNyZWF0ZUh0dHBSZXF1ZXN0IiwiX3JlZjIiLCJzdXBlclJlcXVlc3RlciIsImNsb25lIiwidXNlIiwiaHR0cFJlcXVlc3QiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwibWF4UmVkaXJlY3RzIiwiZGVmYXVsdFJlcXVlc3RlciIsImNvbmZpZyIsImVuY29kZVNvdXJjZU1hcCIsImRldGVjdEVuYWJsZVNvdXJjZU1hcCIsImRldGVjdFN0dWRpb1VybCIsInNob3VsZEVuY29kZVNvdXJjZU1hcCIsImlzVmVyY2VsUHJldmlld0Vudmlyb25tZW50IiwiRXJyb3IiLCJkZWJ1ZyIsImVyciIsImNvbnNvbGUiLCJlbnYiLCJWRVJDRUxfRU5WIiwicHJvY2VzcyIsIlNBTklUWV9TT1VSQ0VfTUFQIiwiU0FOSVRZX1NUVURJT19VUkwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/preview-kit/dist/client.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@sanity/preview-kit/dist/csm.js":
/*!******************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/csm.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTranscoder: () => (/* binding */ createTranscoder),\n/* harmony export */   encodeJsonPathToUriComponent: () => (/* binding */ encodeJsonPathToUriComponent),\n/* harmony export */   mapToEditLinks: () => (/* binding */ mapToEditLinks),\n/* harmony export */   parseNormalisedJsonPath: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.parseNormalisedJsonPath),\n/* harmony export */   resolveMapping: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.resolveMapping),\n/* harmony export */   walkMap: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.walkMap)\n/* harmony export */ });\n/* harmony import */ var _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_chunks/sourcemap-r-TuProy.js */ \"(action-browser)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js\");\n/* harmony import */ var _vercel_stega__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/stega */ \"(action-browser)/./node_modules/@vercel/stega/dist/index.mjs\");\n\n\n\nfunction defineEditLink(_studioUrl) {\n    const studioUrl = _studioUrl.replace(/\\/$/, \"\");\n    return (sourceDocument, path)=>\"\".concat(studioUrl, \"/intent/edit/id=\").concat(sourceDocument._id, \";\").concat(sourceDocument._type ? \"type=\".concat(sourceDocument._type, \";\") : \"\", \"path=\").concat(encodeJsonPathToUriComponent(path));\n}\nfunction encodeJsonPathToUriComponent(path) {\n    const sourcePath = Array.isArray(path) ? path : (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.parseNormalisedJsonPath)(path);\n    return encodeURIComponent(sourcePath.map((key, i)=>// eslint-disable-next-line no-nested-ternary\n        typeof key === \"number\" ? \"[\".concat(key, \"]\") : i > 0 ? \".\".concat(key) : key).join(\"\"));\n}\nconst filterDefault = (_ref)=>{\n    let { path } = _ref;\n    const endPath = path.at(-1);\n    if (path.at(-2) === \"slug\" && endPath === \"current\") {\n        return false;\n    }\n    if (typeof endPath === \"string\" && endPath.startsWith(\"_\")) {\n        return false;\n    }\n    if (typeof endPath === \"number\" && path.at(-2) === \"marks\" && typeof path.at(-3) === \"number\" && path.at(-4) === \"children\" && typeof path.at(-5) === \"number\") {\n        return false;\n    }\n    if (endPath === \"href\" && typeof path.at(-2) === \"number\" && path.at(-3) === \"markDefs\" && typeof path.at(-4) === \"number\") {\n        return false;\n    }\n    if (typeof endPath === \"string\" && typeof path.at(-2) === \"number\") {\n        if (endPath === \"style\" || endPath === \"listItem\") {\n            return false;\n        }\n    }\n    return true;\n};\nconst TRUNCATE_LENGTH = 20;\nfunction createTranscoder(config) {\n    const { studioUrl, encodeSourceMapAtPath, logger } = config;\n    const createEditLink = defineEditLink(studioUrl);\n    const report = {\n        encoded: [],\n        skipped: []\n    };\n    const transcode = (input, sourceDocument, sourcePath)=>{\n        if ((typeof encodeSourceMapAtPath === \"function\" ? encodeSourceMapAtPath({\n            path: sourcePath,\n            filterDefault\n        }) : filterDefault({\n            path: sourcePath,\n            filterDefault\n        })) === false) {\n            if (logger) {\n                report.skipped.push({\n                    path: prettyPathForLogging(sourcePath),\n                    value: \"\".concat(input.slice(0, TRUNCATE_LENGTH)).concat(input.length > TRUNCATE_LENGTH ? \"...\" : \"\"),\n                    length: input.length\n                });\n            }\n            return input;\n        }\n        if (logger) {\n            report.encoded.push({\n                path: prettyPathForLogging(sourcePath),\n                value: \"\".concat(input.slice(0, TRUNCATE_LENGTH)).concat(input.length > TRUNCATE_LENGTH ? \"...\" : \"\"),\n                length: input.length\n            });\n        }\n        return (0,_vercel_stega__WEBPACK_IMPORTED_MODULE_1__.vercelStegaCombine)(input, {\n            origin: \"sanity.io\",\n            href: createEditLink(sourceDocument, sourcePath)\n        }, \"auto\");\n    };\n    return (result, csm)=>{\n        report.encoded.length = 0;\n        report.skipped.length = 0;\n        return {\n            result: (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.encode)(result, csm, (value, sourceDocument, path)=>transcode(value, sourceDocument, path)),\n            report\n        };\n    };\n}\nfunction prettyPathForLogging(path) {\n    return path.map((segment, index)=>typeof segment === \"number\" ? \"[\".concat(segment, \"]\") : index > 0 ? \".\".concat(segment) : segment).join(\"\");\n}\nfunction mapToEditLinks(result, csm, studioUrl) {\n    const createEditLink = defineEditLink(studioUrl);\n    return (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.encodeIntoResult)(result, csm, (_, sourceDocument, path)=>{\n        return createEditLink(sourceDocument, path);\n    });\n}\n //# sourceMappingURL=csm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L3ByZXZpZXcta2l0L2Rpc3QvY3NtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW9HO0FBQzFCO0FBQ3ZCO0FBQ25ELFNBQVNNLGVBQWVDLFVBQVU7SUFDaEMsTUFBTUMsWUFBWUQsV0FBV0UsT0FBTyxDQUFDLE9BQU87SUFDNUMsT0FBTyxDQUFDQyxnQkFBZ0JDLE9BQVMsR0FBR0MsTUFBTSxDQUFDSixXQUFXLG9CQUFvQkksTUFBTSxDQUFDRixlQUFlRyxHQUFHLEVBQUUsS0FBS0QsTUFBTSxDQUFDRixlQUFlSSxLQUFLLEdBQUcsUUFBUUYsTUFBTSxDQUFDRixlQUFlSSxLQUFLLEVBQUUsT0FBTyxJQUFJLFNBQVNGLE1BQU0sQ0FBQ0csNkJBQTZCSjtBQUN2TztBQUNBLFNBQVNJLDZCQUE2QkosSUFBSTtJQUN4QyxNQUFNSyxhQUFhQyxNQUFNQyxPQUFPLENBQUNQLFFBQVFBLE9BQU9YLHNGQUF1QkEsQ0FBQ1c7SUFDeEUsT0FBT1EsbUJBQW1CSCxXQUFXSSxHQUFHLENBQUMsQ0FBQ0MsS0FBS0MsSUFDL0MsNkNBQTZDO1FBQzdDLE9BQU9ELFFBQVEsV0FBVyxJQUFJVCxNQUFNLENBQUNTLEtBQUssT0FBT0MsSUFBSSxJQUFJLElBQUlWLE1BQU0sQ0FBQ1MsT0FBT0EsS0FBS0UsSUFBSSxDQUFDO0FBQ3ZGO0FBQ0EsTUFBTUMsZ0JBQWdCQyxDQUFBQTtJQUNwQixJQUFJLEVBQ0ZkLElBQUksRUFDTCxHQUFHYztJQUNKLE1BQU1DLFVBQVVmLEtBQUtnQixFQUFFLENBQUMsQ0FBQztJQUN6QixJQUFJaEIsS0FBS2dCLEVBQUUsQ0FBQyxDQUFDLE9BQU8sVUFBVUQsWUFBWSxXQUFXO1FBQ25ELE9BQU87SUFDVDtJQUNBLElBQUksT0FBT0EsWUFBWSxZQUFZQSxRQUFRRSxVQUFVLENBQUMsTUFBTTtRQUMxRCxPQUFPO0lBQ1Q7SUFDQSxJQUFJLE9BQU9GLFlBQVksWUFBWWYsS0FBS2dC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QyxLQUFLLENBQUNJLEdBQUcxQyxnQkFBZ0JDO1FBQ3ZELE9BQU91QixlQUFleEIsZ0JBQWdCQztJQUN4QztBQUNGO0FBQ21HLENBQ25HLCtCQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL2dpYmJhcm9zYS1wcm9kLy4vbm9kZV9tb2R1bGVzL0BzYW5pdHkvcHJldmlldy1raXQvZGlzdC9jc20uanM/OTRjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZU5vcm1hbGlzZWRKc29uUGF0aCwgZW5jb2RlLCBlbmNvZGVJbnRvUmVzdWx0IH0gZnJvbSAnLi9fY2h1bmtzL3NvdXJjZW1hcC1yLVR1UHJveS5qcyc7XG5leHBvcnQgeyByZXNvbHZlTWFwcGluZywgd2Fsa01hcCB9IGZyb20gJy4vX2NodW5rcy9zb3VyY2VtYXAtci1UdVByb3kuanMnO1xuaW1wb3J0IHsgdmVyY2VsU3RlZ2FDb21iaW5lIH0gZnJvbSAnQHZlcmNlbC9zdGVnYSc7XG5mdW5jdGlvbiBkZWZpbmVFZGl0TGluayhfc3R1ZGlvVXJsKSB7XG4gIGNvbnN0IHN0dWRpb1VybCA9IF9zdHVkaW9VcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpO1xuICByZXR1cm4gKHNvdXJjZURvY3VtZW50LCBwYXRoKSA9PiBcIlwiLmNvbmNhdChzdHVkaW9VcmwsIFwiL2ludGVudC9lZGl0L2lkPVwiKS5jb25jYXQoc291cmNlRG9jdW1lbnQuX2lkLCBcIjtcIikuY29uY2F0KHNvdXJjZURvY3VtZW50Ll90eXBlID8gXCJ0eXBlPVwiLmNvbmNhdChzb3VyY2VEb2N1bWVudC5fdHlwZSwgXCI7XCIpIDogXCJcIiwgXCJwYXRoPVwiKS5jb25jYXQoZW5jb2RlSnNvblBhdGhUb1VyaUNvbXBvbmVudChwYXRoKSk7XG59XG5mdW5jdGlvbiBlbmNvZGVKc29uUGF0aFRvVXJpQ29tcG9uZW50KHBhdGgpIHtcbiAgY29uc3Qgc291cmNlUGF0aCA9IEFycmF5LmlzQXJyYXkocGF0aCkgPyBwYXRoIDogcGFyc2VOb3JtYWxpc2VkSnNvblBhdGgocGF0aCk7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc291cmNlUGF0aC5tYXAoKGtleSwgaSkgPT5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG4gIHR5cGVvZiBrZXkgPT09IFwibnVtYmVyXCIgPyBcIltcIi5jb25jYXQoa2V5LCBcIl1cIikgOiBpID4gMCA/IFwiLlwiLmNvbmNhdChrZXkpIDoga2V5KS5qb2luKFwiXCIpKTtcbn1cbmNvbnN0IGZpbHRlckRlZmF1bHQgPSBfcmVmID0+IHtcbiAgbGV0IHtcbiAgICBwYXRoXG4gIH0gPSBfcmVmO1xuICBjb25zdCBlbmRQYXRoID0gcGF0aC5hdCgtMSk7XG4gIGlmIChwYXRoLmF0KC0yKSA9PT0gXCJzbHVnXCIgJiYgZW5kUGF0aCA9PT0gXCJjdXJyZW50XCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBlbmRQYXRoID09PSBcInN0cmluZ1wiICYmIGVuZFBhdGguc3RhcnRzV2l0aChcIl9cIikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBlbmRQYXRoID09PSBcIm51bWJlclwiICYmIHBhdGguYXQoLTIpID09PSBcIm1hcmtzXCIgJiYgdHlwZW9mIHBhdGguYXQoLTMpID09PSBcIm51bWJlclwiICYmIHBhdGguYXQoLTQpID09PSBcImNoaWxkcmVuXCIgJiYgdHlwZW9mIHBhdGguYXQoLTUpID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChlbmRQYXRoID09PSBcImhyZWZcIiAmJiB0eXBlb2YgcGF0aC5hdCgtMikgPT09IFwibnVtYmVyXCIgJiYgcGF0aC5hdCgtMykgPT09IFwibWFya0RlZnNcIiAmJiB0eXBlb2YgcGF0aC5hdCgtNCkgPT09IFwibnVtYmVyXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBlbmRQYXRoID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBwYXRoLmF0KC0yKSA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmIChlbmRQYXRoID09PSBcInN0eWxlXCIgfHwgZW5kUGF0aCA9PT0gXCJsaXN0SXRlbVwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbmNvbnN0IFRSVU5DQVRFX0xFTkdUSCA9IDIwO1xuZnVuY3Rpb24gY3JlYXRlVHJhbnNjb2Rlcihjb25maWcpIHtcbiAgY29uc3Qge1xuICAgIHN0dWRpb1VybCxcbiAgICBlbmNvZGVTb3VyY2VNYXBBdFBhdGgsXG4gICAgbG9nZ2VyXG4gIH0gPSBjb25maWc7XG4gIGNvbnN0IGNyZWF0ZUVkaXRMaW5rID0gZGVmaW5lRWRpdExpbmsoc3R1ZGlvVXJsKTtcbiAgY29uc3QgcmVwb3J0ID0ge1xuICAgIGVuY29kZWQ6IFtdLFxuICAgIHNraXBwZWQ6IFtdXG4gIH07XG4gIGNvbnN0IHRyYW5zY29kZSA9IChpbnB1dCwgc291cmNlRG9jdW1lbnQsIHNvdXJjZVBhdGgpID0+IHtcbiAgICBpZiAoKHR5cGVvZiBlbmNvZGVTb3VyY2VNYXBBdFBhdGggPT09IFwiZnVuY3Rpb25cIiA/IGVuY29kZVNvdXJjZU1hcEF0UGF0aCh7XG4gICAgICBwYXRoOiBzb3VyY2VQYXRoLFxuICAgICAgZmlsdGVyRGVmYXVsdFxuICAgIH0pIDogZmlsdGVyRGVmYXVsdCh7XG4gICAgICBwYXRoOiBzb3VyY2VQYXRoLFxuICAgICAgZmlsdGVyRGVmYXVsdFxuICAgIH0pKSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChsb2dnZXIpIHtcbiAgICAgICAgcmVwb3J0LnNraXBwZWQucHVzaCh7XG4gICAgICAgICAgcGF0aDogcHJldHR5UGF0aEZvckxvZ2dpbmcoc291cmNlUGF0aCksXG4gICAgICAgICAgdmFsdWU6IFwiXCIuY29uY2F0KGlucHV0LnNsaWNlKDAsIFRSVU5DQVRFX0xFTkdUSCkpLmNvbmNhdChpbnB1dC5sZW5ndGggPiBUUlVOQ0FURV9MRU5HVEggPyBcIi4uLlwiIDogXCJcIiksXG4gICAgICAgICAgbGVuZ3RoOiBpbnB1dC5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICAgIGlmIChsb2dnZXIpIHtcbiAgICAgIHJlcG9ydC5lbmNvZGVkLnB1c2goe1xuICAgICAgICBwYXRoOiBwcmV0dHlQYXRoRm9yTG9nZ2luZyhzb3VyY2VQYXRoKSxcbiAgICAgICAgdmFsdWU6IFwiXCIuY29uY2F0KGlucHV0LnNsaWNlKDAsIFRSVU5DQVRFX0xFTkdUSCkpLmNvbmNhdChpbnB1dC5sZW5ndGggPiBUUlVOQ0FURV9MRU5HVEggPyBcIi4uLlwiIDogXCJcIiksXG4gICAgICAgIGxlbmd0aDogaW5wdXQubGVuZ3RoXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcmNlbFN0ZWdhQ29tYmluZShpbnB1dCwge1xuICAgICAgb3JpZ2luOiBcInNhbml0eS5pb1wiLFxuICAgICAgaHJlZjogY3JlYXRlRWRpdExpbmsoc291cmNlRG9jdW1lbnQsIHNvdXJjZVBhdGgpXG4gICAgfSwgXCJhdXRvXCIpO1xuICB9O1xuICByZXR1cm4gKHJlc3VsdCwgY3NtKSA9PiB7XG4gICAgcmVwb3J0LmVuY29kZWQubGVuZ3RoID0gMDtcbiAgICByZXBvcnQuc2tpcHBlZC5sZW5ndGggPSAwO1xuICAgIHJldHVybiB7XG4gICAgICByZXN1bHQ6IGVuY29kZShyZXN1bHQsIGNzbSwgKHZhbHVlLCBzb3VyY2VEb2N1bWVudCwgcGF0aCkgPT4gdHJhbnNjb2RlKHZhbHVlLCBzb3VyY2VEb2N1bWVudCwgcGF0aCkpLFxuICAgICAgcmVwb3J0XG4gICAgfTtcbiAgfTtcbn1cbmZ1bmN0aW9uIHByZXR0eVBhdGhGb3JMb2dnaW5nKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGgubWFwKChzZWdtZW50LCBpbmRleCkgPT4gdHlwZW9mIHNlZ21lbnQgPT09IFwibnVtYmVyXCIgPyBcIltcIi5jb25jYXQoc2VnbWVudCwgXCJdXCIpIDogaW5kZXggPiAwID8gXCIuXCIuY29uY2F0KHNlZ21lbnQpIDogc2VnbWVudCkuam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIG1hcFRvRWRpdExpbmtzKHJlc3VsdCwgY3NtLCBzdHVkaW9VcmwpIHtcbiAgY29uc3QgY3JlYXRlRWRpdExpbmsgPSBkZWZpbmVFZGl0TGluayhzdHVkaW9VcmwpO1xuICByZXR1cm4gZW5jb2RlSW50b1Jlc3VsdChyZXN1bHQsIGNzbSwgKF8sIHNvdXJjZURvY3VtZW50LCBwYXRoKSA9PiB7XG4gICAgcmV0dXJuIGNyZWF0ZUVkaXRMaW5rKHNvdXJjZURvY3VtZW50LCBwYXRoKTtcbiAgfSk7XG59XG5leHBvcnQgeyBjcmVhdGVUcmFuc2NvZGVyLCBlbmNvZGVKc29uUGF0aFRvVXJpQ29tcG9uZW50LCBtYXBUb0VkaXRMaW5rcywgcGFyc2VOb3JtYWxpc2VkSnNvblBhdGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzbS5qcy5tYXBcbiJdLCJuYW1lcyI6WyJwYXJzZU5vcm1hbGlzZWRKc29uUGF0aCIsImVuY29kZSIsImVuY29kZUludG9SZXN1bHQiLCJyZXNvbHZlTWFwcGluZyIsIndhbGtNYXAiLCJ2ZXJjZWxTdGVnYUNvbWJpbmUiLCJkZWZpbmVFZGl0TGluayIsIl9zdHVkaW9VcmwiLCJzdHVkaW9VcmwiLCJyZXBsYWNlIiwic291cmNlRG9jdW1lbnQiLCJwYXRoIiwiY29uY2F0IiwiX2lkIiwiX3R5cGUiLCJlbmNvZGVKc29uUGF0aFRvVXJpQ29tcG9uZW50Iiwic291cmNlUGF0aCIsIkFycmF5IiwiaXNBcnJheSIsImVuY29kZVVSSUNvbXBvbmVudCIsIm1hcCIsImtleSIsImkiLCJqb2luIiwiZmlsdGVyRGVmYXVsdCIsIl9yZWYiLCJlbmRQYXRoIiwiYXQiLCJzdGFydHNXaXRoIiwiVFJVTkNBVEVfTEVOR1RIIiwiY3JlYXRlVHJhbnNjb2RlciIsImNvbmZpZyIsImVuY29kZVNvdXJjZU1hcEF0UGF0aCIsImxvZ2dlciIsImNyZWF0ZUVkaXRMaW5rIiwicmVwb3J0IiwiZW5jb2RlZCIsInNraXBwZWQiLCJ0cmFuc2NvZGUiLCJpbnB1dCIsInB1c2giLCJwcmV0dHlQYXRoRm9yTG9nZ2luZyIsInZhbHVlIiwic2xpY2UiLCJsZW5ndGgiLCJvcmlnaW4iLCJocmVmIiwicmVzdWx0IiwiY3NtIiwic2VnbWVudCIsImluZGV4IiwibWFwVG9FZGl0TGlua3MiLCJfIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@sanity/preview-kit/dist/csm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@sanity/preview-kit/dist/csm.js":
/*!******************************************************!*\
  !*** ./node_modules/@sanity/preview-kit/dist/csm.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTranscoder: () => (/* binding */ createTranscoder),\n/* harmony export */   encodeJsonPathToUriComponent: () => (/* binding */ encodeJsonPathToUriComponent),\n/* harmony export */   mapToEditLinks: () => (/* binding */ mapToEditLinks),\n/* harmony export */   parseNormalisedJsonPath: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.parseNormalisedJsonPath),\n/* harmony export */   resolveMapping: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.resolveMapping),\n/* harmony export */   walkMap: () => (/* reexport safe */ _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.walkMap)\n/* harmony export */ });\n/* harmony import */ var _chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_chunks/sourcemap-r-TuProy.js */ \"(rsc)/./node_modules/@sanity/preview-kit/dist/_chunks/sourcemap-r-TuProy.js\");\n/* harmony import */ var _vercel_stega__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/stega */ \"(rsc)/./node_modules/@vercel/stega/dist/index.mjs\");\n\n\n\nfunction defineEditLink(_studioUrl) {\n    const studioUrl = _studioUrl.replace(/\\/$/, \"\");\n    return (sourceDocument, path)=>\"\".concat(studioUrl, \"/intent/edit/id=\").concat(sourceDocument._id, \";\").concat(sourceDocument._type ? \"type=\".concat(sourceDocument._type, \";\") : \"\", \"path=\").concat(encodeJsonPathToUriComponent(path));\n}\nfunction encodeJsonPathToUriComponent(path) {\n    const sourcePath = Array.isArray(path) ? path : (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.parseNormalisedJsonPath)(path);\n    return encodeURIComponent(sourcePath.map((key, i)=>// eslint-disable-next-line no-nested-ternary\n        typeof key === \"number\" ? \"[\".concat(key, \"]\") : i > 0 ? \".\".concat(key) : key).join(\"\"));\n}\nconst filterDefault = (_ref)=>{\n    let { path } = _ref;\n    const endPath = path.at(-1);\n    if (path.at(-2) === \"slug\" && endPath === \"current\") {\n        return false;\n    }\n    if (typeof endPath === \"string\" && endPath.startsWith(\"_\")) {\n        return false;\n    }\n    if (typeof endPath === \"number\" && path.at(-2) === \"marks\" && typeof path.at(-3) === \"number\" && path.at(-4) === \"children\" && typeof path.at(-5) === \"number\") {\n        return false;\n    }\n    if (endPath === \"href\" && typeof path.at(-2) === \"number\" && path.at(-3) === \"markDefs\" && typeof path.at(-4) === \"number\") {\n        return false;\n    }\n    if (typeof endPath === \"string\" && typeof path.at(-2) === \"number\") {\n        if (endPath === \"style\" || endPath === \"listItem\") {\n            return false;\n        }\n    }\n    return true;\n};\nconst TRUNCATE_LENGTH = 20;\nfunction createTranscoder(config) {\n    const { studioUrl, encodeSourceMapAtPath, logger } = config;\n    const createEditLink = defineEditLink(studioUrl);\n    const report = {\n        encoded: [],\n        skipped: []\n    };\n    const transcode = (input, sourceDocument, sourcePath)=>{\n        if ((typeof encodeSourceMapAtPath === \"function\" ? encodeSourceMapAtPath({\n            path: sourcePath,\n            filterDefault\n        }) : filterDefault({\n            path: sourcePath,\n            filterDefault\n        })) === false) {\n            if (logger) {\n                report.skipped.push({\n                    path: prettyPathForLogging(sourcePath),\n                    value: \"\".concat(input.slice(0, TRUNCATE_LENGTH)).concat(input.length > TRUNCATE_LENGTH ? \"...\" : \"\"),\n                    length: input.length\n                });\n            }\n            return input;\n        }\n        if (logger) {\n            report.encoded.push({\n                path: prettyPathForLogging(sourcePath),\n                value: \"\".concat(input.slice(0, TRUNCATE_LENGTH)).concat(input.length > TRUNCATE_LENGTH ? \"...\" : \"\"),\n                length: input.length\n            });\n        }\n        return (0,_vercel_stega__WEBPACK_IMPORTED_MODULE_1__.vercelStegaCombine)(input, {\n            origin: \"sanity.io\",\n            href: createEditLink(sourceDocument, sourcePath)\n        }, \"auto\");\n    };\n    return (result, csm)=>{\n        report.encoded.length = 0;\n        report.skipped.length = 0;\n        return {\n            result: (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.encode)(result, csm, (value, sourceDocument, path)=>transcode(value, sourceDocument, path)),\n            report\n        };\n    };\n}\nfunction prettyPathForLogging(path) {\n    return path.map((segment, index)=>typeof segment === \"number\" ? \"[\".concat(segment, \"]\") : index > 0 ? \".\".concat(segment) : segment).join(\"\");\n}\nfunction mapToEditLinks(result, csm, studioUrl) {\n    const createEditLink = defineEditLink(studioUrl);\n    return (0,_chunks_sourcemap_r_TuProy_js__WEBPACK_IMPORTED_MODULE_0__.encodeIntoResult)(result, csm, (_, sourceDocument, path)=>{\n        return createEditLink(sourceDocument, path);\n    });\n}\n //# sourceMappingURL=csm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNhbml0eS9wcmV2aWV3LWtpdC9kaXN0L2NzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFvRztBQUMxQjtBQUN2QjtBQUNuRCxTQUFTTSxlQUFlQyxVQUFVO0lBQ2hDLE1BQU1DLFlBQVlELFdBQVdFLE9BQU8sQ0FBQyxPQUFPO0lBQzVDLE9BQU8sQ0FBQ0MsZ0JBQWdCQyxPQUFTLEdBQUdDLE1BQU0sQ0FBQ0osV0FBVyxvQkFBb0JJLE1BQU0sQ0FBQ0YsZUFBZUcsR0FBRyxFQUFFLEtBQUtELE1BQU0sQ0FBQ0YsZUFBZUksS0FBSyxHQUFHLFFBQVFGLE1BQU0sQ0FBQ0YsZUFBZUksS0FBSyxFQUFFLE9BQU8sSUFBSSxTQUFTRixNQUFNLENBQUNHLDZCQUE2Qko7QUFDdk87QUFDQSxTQUFTSSw2QkFBNkJKLElBQUk7SUFDeEMsTUFBTUssYUFBYUMsTUFBTUMsT0FBTyxDQUFDUCxRQUFRQSxPQUFPWCxzRkFBdUJBLENBQUNXO0lBQ3hFLE9BQU9RLG1CQUFtQkgsV0FBV0ksR0FBRyxDQUFDLENBQUNDLEtBQUtDLElBQy9DLDZDQUE2QztRQUM3QyxPQUFPRCxRQUFRLFdBQVcsSUFBSVQsTUFBTSxDQUFDUyxLQUFLLE9BQU9DLElBQUksSUFBSSxJQUFJVixNQUFNLENBQUNTLE9BQU9BLEtBQUtFLElBQUksQ0FBQztBQUN2RjtBQUNBLE1BQU1DLGdCQUFnQkMsQ0FBQUE7SUFDcEIsSUFBSSxFQUNGZCxJQUFJLEVBQ0wsR0FBR2M7SUFDSixNQUFNQyxVQUFVZixLQUFLZ0IsRUFBRSxDQUFDLENBQUM7SUFDekIsSUFBSWhCLEtBQUtnQixFQUFFLENBQUMsQ0FBQyxPQUFPLFVBQVVELFlBQVksV0FBVztRQUNuRCxPQUFPO0lBQ1Q7SUFDQSxJQUFJLE9BQU9BLFlBQVksWUFBWUEsUUFBUUUsVUFBVSxDQUFDLE1BQU07UUFDMUQsT0FBTztJQUNUO0lBQ0EsSUFBSSxPQUFPRixZQUFZLFlBQVlmLEtBQUtnQixFQUFFLENBQUMs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SSxHQUFHMUMsZ0JBQWdCQztRQUN2RCxPQUFPdUIsZUFBZXhCLGdCQUFnQkM7SUFDeEM7QUFDRjtBQUNtRyxDQUNuRywrQkFBK0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9naWJiYXJvc2EtcHJvZC8uL25vZGVfbW9kdWxlcy9Ac2FuaXR5L3ByZXZpZXcta2l0L2Rpc3QvY3NtLmpzPzk0Y2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VOb3JtYWxpc2VkSnNvblBhdGgsIGVuY29kZSwgZW5jb2RlSW50b1Jlc3VsdCB9IGZyb20gJy4vX2NodW5rcy9zb3VyY2VtYXAtci1UdVByb3kuanMnO1xuZXhwb3J0IHsgcmVzb2x2ZU1hcHBpbmcsIHdhbGtNYXAgfSBmcm9tICcuL19jaHVua3Mvc291cmNlbWFwLXItVHVQcm95LmpzJztcbmltcG9ydCB7IHZlcmNlbFN0ZWdhQ29tYmluZSB9IGZyb20gJ0B2ZXJjZWwvc3RlZ2EnO1xuZnVuY3Rpb24gZGVmaW5lRWRpdExpbmsoX3N0dWRpb1VybCkge1xuICBjb25zdCBzdHVkaW9VcmwgPSBfc3R1ZGlvVXJsLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTtcbiAgcmV0dXJuIChzb3VyY2VEb2N1bWVudCwgcGF0aCkgPT4gXCJcIi5jb25jYXQoc3R1ZGlvVXJsLCBcIi9pbnRlbnQvZWRpdC9pZD1cIikuY29uY2F0KHNvdXJjZURvY3VtZW50Ll9pZCwgXCI7XCIpLmNvbmNhdChzb3VyY2VEb2N1bWVudC5fdHlwZSA/IFwidHlwZT1cIi5jb25jYXQoc291cmNlRG9jdW1lbnQuX3R5cGUsIFwiO1wiKSA6IFwiXCIsIFwicGF0aD1cIikuY29uY2F0KGVuY29kZUpzb25QYXRoVG9VcmlDb21wb25lbnQocGF0aCkpO1xufVxuZnVuY3Rpb24gZW5jb2RlSnNvblBhdGhUb1VyaUNvbXBvbmVudChwYXRoKSB7XG4gIGNvbnN0IHNvdXJjZVBhdGggPSBBcnJheS5pc0FycmF5KHBhdGgpID8gcGF0aCA6IHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoKHBhdGgpO1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHNvdXJjZVBhdGgubWFwKChrZXksIGkpID0+XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICB0eXBlb2Yga2V5ID09PSBcIm51bWJlclwiID8gXCJbXCIuY29uY2F0KGtleSwgXCJdXCIpIDogaSA+IDAgPyBcIi5cIi5jb25jYXQoa2V5KSA6IGtleSkuam9pbihcIlwiKSk7XG59XG5jb25zdCBmaWx0ZXJEZWZhdWx0ID0gX3JlZiA9PiB7XG4gIGxldCB7XG4gICAgcGF0aFxuICB9ID0gX3JlZjtcbiAgY29uc3QgZW5kUGF0aCA9IHBhdGguYXQoLTEpO1xuICBpZiAocGF0aC5hdCgtMikgPT09IFwic2x1Z1wiICYmIGVuZFBhdGggPT09IFwiY3VycmVudFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZW5kUGF0aCA9PT0gXCJzdHJpbmdcIiAmJiBlbmRQYXRoLnN0YXJ0c1dpdGgoXCJfXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZW5kUGF0aCA9PT0gXCJudW1iZXJcIiAmJiBwYXRoLmF0KC0yKSA9PT0gXCJtYXJrc1wiICYmIHR5cGVvZiBwYXRoLmF0KC0zKSA9PT0gXCJudW1iZXJcIiAmJiBwYXRoLmF0KC00KSA9PT0gXCJjaGlsZHJlblwiICYmIHR5cGVvZiBwYXRoLmF0KC01KSA9PT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoZW5kUGF0aCA9PT0gXCJocmVmXCIgJiYgdHlwZW9mIHBhdGguYXQoLTIpID09PSBcIm51bWJlclwiICYmIHBhdGguYXQoLTMpID09PSBcIm1hcmtEZWZzXCIgJiYgdHlwZW9mIHBhdGguYXQoLTQpID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZW5kUGF0aCA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgcGF0aC5hdCgtMikgPT09IFwibnVtYmVyXCIpIHtcbiAgICBpZiAoZW5kUGF0aCA9PT0gXCJzdHlsZVwiIHx8IGVuZFBhdGggPT09IFwibGlzdEl0ZW1cIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5jb25zdCBUUlVOQ0FURV9MRU5HVEggPSAyMDtcbmZ1bmN0aW9uIGNyZWF0ZVRyYW5zY29kZXIoY29uZmlnKSB7XG4gIGNvbnN0IHtcbiAgICBzdHVkaW9VcmwsXG4gICAgZW5jb2RlU291cmNlTWFwQXRQYXRoLFxuICAgIGxvZ2dlclxuICB9ID0gY29uZmlnO1xuICBjb25zdCBjcmVhdGVFZGl0TGluayA9IGRlZmluZUVkaXRMaW5rKHN0dWRpb1VybCk7XG4gIGNvbnN0IHJlcG9ydCA9IHtcbiAgICBlbmNvZGVkOiBbXSxcbiAgICBza2lwcGVkOiBbXVxuICB9O1xuICBjb25zdCB0cmFuc2NvZGUgPSAoaW5wdXQsIHNvdXJjZURvY3VtZW50LCBzb3VyY2VQYXRoKSA9PiB7XG4gICAgaWYgKCh0eXBlb2YgZW5jb2RlU291cmNlTWFwQXRQYXRoID09PSBcImZ1bmN0aW9uXCIgPyBlbmNvZGVTb3VyY2VNYXBBdFBhdGgoe1xuICAgICAgcGF0aDogc291cmNlUGF0aCxcbiAgICAgIGZpbHRlckRlZmF1bHRcbiAgICB9KSA6IGZpbHRlckRlZmF1bHQoe1xuICAgICAgcGF0aDogc291cmNlUGF0aCxcbiAgICAgIGZpbHRlckRlZmF1bHRcbiAgICB9KSkgPT09IGZhbHNlKSB7XG4gICAgICBpZiAobG9nZ2VyKSB7XG4gICAgICAgIHJlcG9ydC5za2lwcGVkLnB1c2goe1xuICAgICAgICAgIHBhdGg6IHByZXR0eVBhdGhGb3JMb2dnaW5nKHNvdXJjZVBhdGgpLFxuICAgICAgICAgIHZhbHVlOiBcIlwiLmNvbmNhdChpbnB1dC5zbGljZSgwLCBUUlVOQ0FURV9MRU5HVEgpKS5jb25jYXQoaW5wdXQubGVuZ3RoID4gVFJVTkNBVEVfTEVOR1RIID8gXCIuLi5cIiA6IFwiXCIpLFxuICAgICAgICAgIGxlbmd0aDogaW5wdXQubGVuZ3RoXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICBpZiAobG9nZ2VyKSB7XG4gICAgICByZXBvcnQuZW5jb2RlZC5wdXNoKHtcbiAgICAgICAgcGF0aDogcHJldHR5UGF0aEZvckxvZ2dpbmcoc291cmNlUGF0aCksXG4gICAgICAgIHZhbHVlOiBcIlwiLmNvbmNhdChpbnB1dC5zbGljZSgwLCBUUlVOQ0FURV9MRU5HVEgpKS5jb25jYXQoaW5wdXQubGVuZ3RoID4gVFJVTkNBVEVfTEVOR1RIID8gXCIuLi5cIiA6IFwiXCIpLFxuICAgICAgICBsZW5ndGg6IGlucHV0Lmxlbmd0aFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB2ZXJjZWxTdGVnYUNvbWJpbmUoaW5wdXQsIHtcbiAgICAgIG9yaWdpbjogXCJzYW5pdHkuaW9cIixcbiAgICAgIGhyZWY6IGNyZWF0ZUVkaXRMaW5rKHNvdXJjZURvY3VtZW50LCBzb3VyY2VQYXRoKVxuICAgIH0sIFwiYXV0b1wiKTtcbiAgfTtcbiAgcmV0dXJuIChyZXN1bHQsIGNzbSkgPT4ge1xuICAgIHJlcG9ydC5lbmNvZGVkLmxlbmd0aCA9IDA7XG4gICAgcmVwb3J0LnNraXBwZWQubGVuZ3RoID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0OiBlbmNvZGUocmVzdWx0LCBjc20sICh2YWx1ZSwgc291cmNlRG9jdW1lbnQsIHBhdGgpID0+IHRyYW5zY29kZSh2YWx1ZSwgc291cmNlRG9jdW1lbnQsIHBhdGgpKSxcbiAgICAgIHJlcG9ydFxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBwcmV0dHlQYXRoRm9yTG9nZ2luZyhwYXRoKSB7XG4gIHJldHVybiBwYXRoLm1hcCgoc2VnbWVudCwgaW5kZXgpID0+IHR5cGVvZiBzZWdtZW50ID09PSBcIm51bWJlclwiID8gXCJbXCIuY29uY2F0KHNlZ21lbnQsIFwiXVwiKSA6IGluZGV4ID4gMCA/IFwiLlwiLmNvbmNhdChzZWdtZW50KSA6IHNlZ21lbnQpLmpvaW4oXCJcIik7XG59XG5mdW5jdGlvbiBtYXBUb0VkaXRMaW5rcyhyZXN1bHQsIGNzbSwgc3R1ZGlvVXJsKSB7XG4gIGNvbnN0IGNyZWF0ZUVkaXRMaW5rID0gZGVmaW5lRWRpdExpbmsoc3R1ZGlvVXJsKTtcbiAgcmV0dXJuIGVuY29kZUludG9SZXN1bHQocmVzdWx0LCBjc20sIChfLCBzb3VyY2VEb2N1bWVudCwgcGF0aCkgPT4ge1xuICAgIHJldHVybiBjcmVhdGVFZGl0TGluayhzb3VyY2VEb2N1bWVudCwgcGF0aCk7XG4gIH0pO1xufVxuZXhwb3J0IHsgY3JlYXRlVHJhbnNjb2RlciwgZW5jb2RlSnNvblBhdGhUb1VyaUNvbXBvbmVudCwgbWFwVG9FZGl0TGlua3MsIHBhcnNlTm9ybWFsaXNlZEpzb25QYXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc20uanMubWFwXG4iXSwibmFtZXMiOlsicGFyc2VOb3JtYWxpc2VkSnNvblBhdGgiLCJlbmNvZGUiLCJlbmNvZGVJbnRvUmVzdWx0IiwicmVzb2x2ZU1hcHBpbmciLCJ3YWxrTWFwIiwidmVyY2VsU3RlZ2FDb21iaW5lIiwiZGVmaW5lRWRpdExpbmsiLCJfc3R1ZGlvVXJsIiwic3R1ZGlvVXJsIiwicmVwbGFjZSIsInNvdXJjZURvY3VtZW50IiwicGF0aCIsImNvbmNhdCIsIl9pZCIsIl90eXBlIiwiZW5jb2RlSnNvblBhdGhUb1VyaUNvbXBvbmVudCIsInNvdXJjZVBhdGgiLCJBcnJheSIsImlzQXJyYXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJtYXAiLCJrZXkiLCJpIiwiam9pbiIsImZpbHRlckRlZmF1bHQiLCJfcmVmIiwiZW5kUGF0aCIsImF0Iiwic3RhcnRzV2l0aCIsIlRSVU5DQVRFX0xFTkdUSCIsImNyZWF0ZVRyYW5zY29kZXIiLCJjb25maWciLCJlbmNvZGVTb3VyY2VNYXBBdFBhdGgiLCJsb2dnZXIiLCJjcmVhdGVFZGl0TGluayIsInJlcG9ydCIsImVuY29kZWQiLCJza2lwcGVkIiwidHJhbnNjb2RlIiwiaW5wdXQiLCJwdXNoIiwicHJldHR5UGF0aEZvckxvZ2dpbmciLCJ2YWx1ZSIsInNsaWNlIiwibGVuZ3RoIiwib3JpZ2luIiwiaHJlZiIsInJlc3VsdCIsImNzbSIsInNlZ21lbnQiLCJpbmRleCIsIm1hcFRvRWRpdExpbmtzIiwiXyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@sanity/preview-kit/dist/csm.js\n");

/***/ })

};
;